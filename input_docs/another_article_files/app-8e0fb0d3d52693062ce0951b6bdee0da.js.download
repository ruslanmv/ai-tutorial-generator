(()=>{var RF=Object.create;var pm=Object.defineProperty,OF=Object.defineProperties,MF=Object.getOwnPropertyDescriptor,LF=Object.getOwnPropertyDescriptors,DF=Object.getOwnPropertyNames,bm=Object.getOwnPropertySymbols,VF=Object.getPrototypeOf,Kv=Object.prototype.hasOwnProperty,lC=Object.prototype.propertyIsEnumerable;var Yv=(i,e,t)=>e in i?pm(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ee=(i,e)=>{for(var t in e||(e={}))Kv.call(e,t)&&Yv(i,t,e[t]);if(bm)for(var t of bm(e))lC.call(e,t)&&Yv(i,t,e[t]);return i},tt=(i,e)=>OF(i,LF(e)),BF=i=>pm(i,"__esModule",{value:!0});var Do=(i,e)=>{var t={};for(var n in i)Kv.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&bm)for(var n of bm(i))e.indexOf(n)<0&&lC.call(i,n)&&(t[n]=i[n]);return t};var D=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var NF=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of DF(e))!Kv.call(i,n)&&n!=="default"&&pm(i,n,{get:()=>e[n],enumerable:!(t=MF(e,n))||t.enumerable});return i},Vo=i=>NF(BF(pm(i!=null?RF(VF(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var v=(i,e,t)=>(Yv(i,typeof e!="symbol"?e+"":e,t),t);var uC=D(cC=>{(function(i){"use strict";var e=i.URLSearchParams&&i.URLSearchParams.prototype.get?i.URLSearchParams:null,t=e&&new e({a:1}).toString()==="a=1",n=e&&new e("s=%2B").get("s")==="+",r="__URLSearchParams__",s=e?function(){var O=new e;return O.append("s"," &"),O.toString()==="s=+%26"}():!0,o=u.prototype,l=!!(i.Symbol&&i.Symbol.iterator);if(e&&t&&n&&s)return;function u(O){O=O||"",(O instanceof URLSearchParams||O instanceof u)&&(O=O.toString()),this[r]=E(O)}o.append=function(O,N){P(this[r],O,N)},o.delete=function(O){delete this[r][O]},o.get=function(O){var N=this[r];return O in N?N[O][0]:null},o.getAll=function(O){var N=this[r];return O in N?N[O].slice(0):[]},o.has=function(O){return O in this[r]},o.set=function(N,W){this[r][N]=[""+W]},o.toString=function(){var O=this[r],N=[],W,Z,U,ie;for(Z in O)for(U=y(Z),W=0,ie=O[Z];W<ie.length;W++)N.push(U+"="+y(ie[W]));return N.join("&")};var f=!n,g=!f&&e&&!t&&i.Proxy;Object.defineProperty(i,"URLSearchParams",{value:g?new Proxy(e,{construct:function(O,N){return new O(new u(N[0]).toString())}}):u});var p=i.URLSearchParams.prototype;p.polyfill=!0,p.forEach=p.forEach||function(O,N){var W=E(this.toString());Object.getOwnPropertyNames(W).forEach(function(Z){W[Z].forEach(function(U){O.call(N,U,Z,this)},this)},this)},p.sort=p.sort||function(){var O=E(this.toString()),N=[],W,Z,U;for(W in O)N.push(W);for(N.sort(),Z=0;Z<N.length;Z++)this.delete(N[Z]);for(Z=0;Z<N.length;Z++){var ie=N[Z],X=O[ie];for(U=0;U<X.length;U++)this.append(ie,X[U])}},p.keys=p.keys||function(){var O=[];return this.forEach(function(N,W){O.push(W)}),C(O)},p.values=p.values||function(){var O=[];return this.forEach(function(N){O.push(N)}),C(O)},p.entries=p.entries||function(){var O=[];return this.forEach(function(N,W){O.push([W,N])}),C(O)},l&&(p[i.Symbol.iterator]=p[i.Symbol.iterator]||p.entries);function y(O){var N={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(O).replace(/[!'\(\)~]|%20|%00/g,function(W){return N[W]})}function _(O){return O.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/ig,function(N){return decodeURIComponent(N)})}function C(O){var N={next:function(){var W=O.shift();return{done:W===void 0,value:W}}};return l&&(N[i.Symbol.iterator]=function(){return N}),N}function E(O){var N={};if(typeof O=="object")if(M(O))for(var W=0;W<O.length;W++){var Z=O[W];if(M(Z)&&Z.length===2)P(N,Z[0],Z[1]);else throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements")}else for(var U in O)O.hasOwnProperty(U)&&P(N,U,O[U]);else{O.indexOf("?")===0&&(O=O.slice(1));for(var ie=O.split("&"),X=0;X<ie.length;X++){var F=ie[X],te=F.indexOf("=");-1<te?P(N,_(F.slice(0,te)),_(F.slice(te+1))):F&&P(N,_(F),"")}}return N}function P(O,N,W){var Z=typeof W=="string"?W:W!=null&&typeof W.toString=="function"?W.toString():JSON.stringify(W);N in O?O[N].push(Z):O[N]=[Z]}function M(O){return!!O&&Object.prototype.toString.call(O)==="[object Array]"}})(typeof global!="undefined"?global:typeof window!="undefined"?window:cC)});var gi=D((kbe,dC)=>{"use strict";dC.exports=function(i){try{return!!i()}catch(e){return!0}}});var vm=D((Cbe,hC)=>{"use strict";var FF=gi();hC.exports=!FF(function(){var i=function(){}.bind();return typeof i!="function"||i.hasOwnProperty("prototype")})});var Ot=D((Tbe,gC)=>{"use strict";var fC=vm(),mC=Function.prototype,Jv=mC.call,jF=fC&&mC.bind.bind(Jv,Jv);gC.exports=fC?jF:function(i){return function(){return Jv.apply(i,arguments)}}});var oc=D((Ebe,bC)=>{"use strict";var pC=Ot(),HF=pC({}.toString),zF=pC("".slice);bC.exports=function(i){return zF(HF(i),8,-1)}});var Qv=D((Sbe,vC)=>{"use strict";var UF=Ot(),WF=gi(),qF=oc(),Xv=Object,$F=UF("".split);vC.exports=WF(function(){return!Xv("z").propertyIsEnumerable(0)})?function(i){return qF(i)==="String"?$F(i,""):Xv(i)}:Xv});var Ba=D((Abe,wC)=>{"use strict";wC.exports=function(i){return i==null}});var Ed=D((Ibe,yC)=>{"use strict";var GF=Ba(),KF=TypeError;yC.exports=function(i){if(GF(i))throw new KF("Can't call method on "+i);return i}});var Na=D((Pbe,_C)=>{"use strict";var YF=Qv(),ZF=Ed();_C.exports=function(i){return YF(ZF(i))}});var Di=D((e1,xC)=>{"use strict";var Sd=function(i){return i&&i.Math===Math&&i};xC.exports=Sd(typeof globalThis=="object"&&globalThis)||Sd(typeof window=="object"&&window)||Sd(typeof self=="object"&&self)||Sd(typeof global=="object"&&global)||Sd(typeof e1=="object"&&e1)||function(){return this}()||Function("return this")()});var ac=D((Rbe,kC)=>{"use strict";kC.exports=!1});var wm=D((Obe,TC)=>{"use strict";var CC=Di(),JF=Object.defineProperty;TC.exports=function(i,e){try{JF(CC,i,{value:e,configurable:!0,writable:!0})}catch(t){CC[i]=e}return e}});var ym=D((Mbe,AC)=>{"use strict";var XF=ac(),QF=Di(),e9=wm(),EC="__core-js_shared__",SC=AC.exports=QF[EC]||e9(EC,{});(SC.versions||(SC.versions=[])).push({version:"3.40.0",mode:XF?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var t1=D((Lbe,PC)=>{"use strict";var IC=ym();PC.exports=function(i,e){return IC[i]||(IC[i]=e||{})}});var lc=D((Dbe,RC)=>{"use strict";var t9=Ed(),i9=Object;RC.exports=function(i){return i9(t9(i))}});var On=D((Vbe,OC)=>{"use strict";var n9=Ot(),r9=lc(),s9=n9({}.hasOwnProperty);OC.exports=Object.hasOwn||function(e,t){return s9(r9(e),t)}});var _m=D((Bbe,MC)=>{"use strict";var o9=Ot(),a9=0,l9=Math.random(),c9=o9(1 .toString);MC.exports=function(i){return"Symbol("+(i===void 0?"":i)+")_"+c9(++a9+l9,36)}});var BC=D((Nbe,VC)=>{"use strict";var u9=Di(),LC=u9.navigator,DC=LC&&LC.userAgent;VC.exports=DC?String(DC):""});var WC=D((Fbe,UC)=>{"use strict";var NC=Di(),i1=BC(),FC=NC.process,jC=NC.Deno,HC=FC&&FC.versions||jC&&jC.version,zC=HC&&HC.v8,Dr,xm;zC&&(Dr=zC.split("."),xm=Dr[0]>0&&Dr[0]<4?1:+(Dr[0]+Dr[1]));!xm&&i1&&(Dr=i1.match(/Edge\/(\d+)/),(!Dr||Dr[1]>=74)&&(Dr=i1.match(/Chrome\/(\d+)/),Dr&&(xm=+Dr[1])));UC.exports=xm});var n1=D((jbe,$C)=>{"use strict";var qC=WC(),d9=gi(),h9=Di(),f9=h9.String;$C.exports=!!Object.getOwnPropertySymbols&&!d9(function(){var i=Symbol("symbol detection");return!f9(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&qC&&qC<41})});var r1=D((Hbe,GC)=>{"use strict";var m9=n1();GC.exports=m9&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Zi=D((zbe,YC)=>{"use strict";var g9=Di(),p9=t1(),KC=On(),b9=_m(),v9=n1(),w9=r1(),cc=g9.Symbol,s1=p9("wks"),y9=w9?cc.for||cc:cc&&cc.withoutSetter||b9;YC.exports=function(i){return KC(s1,i)||(s1[i]=v9&&KC(cc,i)?cc[i]:y9("Symbol."+i)),s1[i]}});var pi=D((Ube,ZC)=>{"use strict";var o1=typeof document=="object"&&document.all;ZC.exports=typeof o1=="undefined"&&o1!==void 0?function(i){return typeof i=="function"||i===o1}:function(i){return typeof i=="function"}});var mn=D((Wbe,JC)=>{"use strict";var _9=pi();JC.exports=function(i){return typeof i=="object"?i!==null:_9(i)}});var $n=D((qbe,XC)=>{"use strict";var x9=mn(),k9=String,C9=TypeError;XC.exports=function(i){if(x9(i))return i;throw new C9(k9(i)+" is not an object")}});var Ei=D(($be,QC)=>{"use strict";var T9=gi();QC.exports=!T9(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var a1=D((Gbe,eT)=>{"use strict";var E9=Ei(),S9=gi();eT.exports=E9&&S9(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var km=D((Kbe,iT)=>{"use strict";var A9=Di(),tT=mn(),l1=A9.document,I9=tT(l1)&&tT(l1.createElement);iT.exports=function(i){return I9?l1.createElement(i):{}}});var c1=D((Ybe,nT)=>{"use strict";var P9=Ei(),R9=gi(),O9=km();nT.exports=!P9&&!R9(function(){return Object.defineProperty(O9("div"),"a",{get:function(){return 7}}).a!==7})});var hi=D((Zbe,rT)=>{"use strict";var M9=vm(),Cm=Function.prototype.call;rT.exports=M9?Cm.bind(Cm):function(){return Cm.apply(Cm,arguments)}});var Vr=D((Jbe,sT)=>{"use strict";var u1=Di(),L9=pi(),D9=function(i){return L9(i)?i:void 0};sT.exports=function(i,e){return arguments.length<2?D9(u1[i]):u1[i]&&u1[i][e]}});var Tm=D((Xbe,oT)=>{"use strict";var V9=Ot();oT.exports=V9({}.isPrototypeOf)});var d1=D((Qbe,aT)=>{"use strict";var B9=Vr(),N9=pi(),F9=Tm(),j9=r1(),H9=Object;aT.exports=j9?function(i){return typeof i=="symbol"}:function(i){var e=B9("Symbol");return N9(e)&&F9(e.prototype,H9(i))}});var Em=D((eve,lT)=>{"use strict";var z9=String;lT.exports=function(i){try{return z9(i)}catch(e){return"Object"}}});var Fa=D((tve,cT)=>{"use strict";var U9=pi(),W9=Em(),q9=TypeError;cT.exports=function(i){if(U9(i))return i;throw new q9(W9(i)+" is not a function")}});var Sm=D((ive,uT)=>{"use strict";var $9=Fa(),G9=Ba();uT.exports=function(i,e){var t=i[e];return G9(t)?void 0:$9(t)}});var hT=D((nve,dT)=>{"use strict";var h1=hi(),f1=pi(),m1=mn(),K9=TypeError;dT.exports=function(i,e){var t,n;if(e==="string"&&f1(t=i.toString)&&!m1(n=h1(t,i))||f1(t=i.valueOf)&&!m1(n=h1(t,i))||e!=="string"&&f1(t=i.toString)&&!m1(n=h1(t,i)))return n;throw new K9("Can't convert object to primitive value")}});var pT=D((rve,gT)=>{"use strict";var Y9=hi(),fT=mn(),mT=d1(),Z9=Sm(),J9=hT(),X9=Zi(),Q9=TypeError,ej=X9("toPrimitive");gT.exports=function(i,e){if(!fT(i)||mT(i))return i;var t=Z9(i,ej),n;if(t){if(e===void 0&&(e="default"),n=Y9(t,i,e),!fT(n)||mT(n))return n;throw new Q9("Can't convert object to primitive value")}return e===void 0&&(e="number"),J9(i,e)}});var g1=D((sve,bT)=>{"use strict";var tj=pT(),ij=d1();bT.exports=function(i){var e=tj(i,"string");return ij(e)?e:e+""}});var Br=D(wT=>{"use strict";var nj=Ei(),rj=c1(),sj=a1(),Am=$n(),vT=g1(),oj=TypeError,p1=Object.defineProperty,aj=Object.getOwnPropertyDescriptor,b1="enumerable",v1="configurable",w1="writable";wT.f=nj?sj?function(e,t,n){if(Am(e),t=vT(t),Am(n),typeof e=="function"&&t==="prototype"&&"value"in n&&w1 in n&&!n[w1]){var r=aj(e,t);r&&r[w1]&&(e[t]=n.value,n={configurable:v1 in n?n[v1]:r[v1],enumerable:b1 in n?n[b1]:r[b1],writable:!1})}return p1(e,t,n)}:p1:function(e,t,n){if(Am(e),t=vT(t),Am(n),rj)try{return p1(e,t,n)}catch(r){}if("get"in n||"set"in n)throw new oj("Accessors not supported");return"value"in n&&(e[t]=n.value),e}});var _T=D((ave,yT)=>{"use strict";var lj=Math.ceil,cj=Math.floor;yT.exports=Math.trunc||function(e){var t=+e;return(t>0?cj:lj)(t)}});var Ad=D((lve,xT)=>{"use strict";var uj=_T();xT.exports=function(i){var e=+i;return e!==e||e===0?0:uj(e)}});var y1=D((cve,kT)=>{"use strict";var dj=Ad(),hj=Math.max,fj=Math.min;kT.exports=function(i,e){var t=dj(i);return t<0?hj(t+e,0):fj(t,e)}});var TT=D((uve,CT)=>{"use strict";var mj=Ad(),gj=Math.min;CT.exports=function(i){var e=mj(i);return e>0?gj(e,9007199254740991):0}});var Im=D((dve,ET)=>{"use strict";var pj=TT();ET.exports=function(i){return pj(i.length)}});var IT=D((hve,AT)=>{"use strict";var bj=Na(),vj=y1(),wj=Im(),ST=function(i){return function(e,t,n){var r=bj(e),s=wj(r);if(s===0)return!i&&-1;var o=vj(n,s),l;if(i&&t!==t){for(;s>o;)if(l=r[o++],l!==l)return!0}else for(;s>o;o++)if((i||o in r)&&r[o]===t)return i||o||0;return!i&&-1}};AT.exports={includes:ST(!0),indexOf:ST(!1)}});var Id=D((fve,PT)=>{"use strict";PT.exports={}});var x1=D((mve,OT)=>{"use strict";var yj=Ot(),_1=On(),_j=Na(),xj=IT().indexOf,kj=Id(),RT=yj([].push);OT.exports=function(i,e){var t=_j(i),n=0,r=[],s;for(s in t)!_1(kj,s)&&_1(t,s)&&RT(r,s);for(;e.length>n;)_1(t,s=e[n++])&&(~xj(r,s)||RT(r,s));return r}});var Pm=D((gve,MT)=>{"use strict";MT.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var k1=D((pve,LT)=>{"use strict";var Cj=x1(),Tj=Pm();LT.exports=Object.keys||function(e){return Cj(e,Tj)}});var VT=D(DT=>{"use strict";var Ej=Ei(),Sj=a1(),Aj=Br(),Ij=$n(),Pj=Na(),Rj=k1();DT.f=Ej&&!Sj?Object.defineProperties:function(e,t){Ij(e);for(var n=Pj(t),r=Rj(t),s=r.length,o=0,l;s>o;)Aj.f(e,l=r[o++],n[l]);return e}});var NT=D((vve,BT)=>{"use strict";var Oj=Vr();BT.exports=Oj("document","documentElement")});var Rm=D((wve,jT)=>{"use strict";var Mj=t1(),Lj=_m(),FT=Mj("keys");jT.exports=function(i){return FT[i]||(FT[i]=Lj(i))}});var uc=D((yve,GT)=>{"use strict";var Dj=$n(),Vj=VT(),HT=Pm(),Bj=Id(),Nj=NT(),Fj=km(),jj=Rm(),zT=">",UT="<",C1="prototype",T1="script",WT=jj("IE_PROTO"),E1=function(){},qT=function(i){return UT+T1+zT+i+UT+"/"+T1+zT},$T=function(i){i.write(qT("")),i.close();var e=i.parentWindow.Object;return i=null,e},Hj=function(){var i=Fj("iframe"),e="java"+T1+":",t;return i.style.display="none",Nj.appendChild(i),i.src=String(e),t=i.contentWindow.document,t.open(),t.write(qT("document.F=Object")),t.close(),t.F},Om,Mm=function(){try{Om=new ActiveXObject("htmlfile")}catch(e){}Mm=typeof document!="undefined"?document.domain&&Om?$T(Om):Hj():$T(Om);for(var i=HT.length;i--;)delete Mm[C1][HT[i]];return Mm()};Bj[WT]=!0;GT.exports=Object.create||function(e,t){var n;return e!==null?(E1[C1]=Dj(e),n=new E1,E1[C1]=null,n[WT]=e):n=Mm(),t===void 0?n:Vj.f(n,t)}});var YT=D((_ve,KT)=>{"use strict";var zj=Zi(),Uj=uc(),Wj=Br().f,S1=zj("unscopables"),A1=Array.prototype;A1[S1]===void 0&&Wj(A1,S1,{configurable:!0,value:Uj(null)});KT.exports=function(i){A1[S1][i]=!0}});var ja=D((xve,ZT)=>{"use strict";ZT.exports={}});var QT=D((kve,XT)=>{"use strict";var qj=Di(),$j=pi(),JT=qj.WeakMap;XT.exports=$j(JT)&&/native code/.test(String(JT))});var dc=D((Cve,eE)=>{"use strict";eE.exports=function(i,e){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:e}}});var Pd=D((Tve,tE)=>{"use strict";var Gj=Ei(),Kj=Br(),Yj=dc();tE.exports=Gj?function(i,e,t){return Kj.f(i,e,Yj(1,t))}:function(i,e,t){return i[e]=t,i}});var za=D((Eve,rE)=>{"use strict";var Zj=QT(),iE=Di(),Jj=mn(),Xj=Pd(),I1=On(),P1=ym(),Qj=Rm(),eH=Id(),nE="Object already initialized",R1=iE.TypeError,tH=iE.WeakMap,Lm,Rd,Dm,iH=function(i){return Dm(i)?Rd(i):Lm(i,{})},nH=function(i){return function(e){var t;if(!Jj(e)||(t=Rd(e)).type!==i)throw new R1("Incompatible receiver, "+i+" required");return t}};Zj||P1.state?(Nr=P1.state||(P1.state=new tH),Nr.get=Nr.get,Nr.has=Nr.has,Nr.set=Nr.set,Lm=function(i,e){if(Nr.has(i))throw new R1(nE);return e.facade=i,Nr.set(i,e),e},Rd=function(i){return Nr.get(i)||{}},Dm=function(i){return Nr.has(i)}):(Ha=Qj("state"),eH[Ha]=!0,Lm=function(i,e){if(I1(i,Ha))throw new R1(nE);return e.facade=i,Xj(i,Ha,e),e},Rd=function(i){return I1(i,Ha)?i[Ha]:{}},Dm=function(i){return I1(i,Ha)});var Nr,Ha;rE.exports={set:Lm,get:Rd,has:Dm,enforce:iH,getterFor:nH}});var O1=D(aE=>{"use strict";var sE={}.propertyIsEnumerable,oE=Object.getOwnPropertyDescriptor,rH=oE&&!sE.call({1:2},1);aE.f=rH?function(e){var t=oE(this,e);return!!t&&t.enumerable}:sE});var M1=D(cE=>{"use strict";var sH=Ei(),oH=hi(),aH=O1(),lH=dc(),cH=Na(),uH=g1(),dH=On(),hH=c1(),lE=Object.getOwnPropertyDescriptor;cE.f=sH?lE:function(e,t){if(e=cH(e),t=uH(t),hH)try{return lE(e,t)}catch(n){}if(dH(e,t))return lH(!oH(aH.f,e,t),e[t])}});var V1=D((Ive,dE)=>{"use strict";var L1=Ei(),fH=On(),uE=Function.prototype,mH=L1&&Object.getOwnPropertyDescriptor,D1=fH(uE,"name"),gH=D1&&function(){}.name==="something",pH=D1&&(!L1||L1&&mH(uE,"name").configurable);dE.exports={EXISTS:D1,PROPER:gH,CONFIGURABLE:pH}});var N1=D((Pve,hE)=>{"use strict";var bH=Ot(),vH=pi(),B1=ym(),wH=bH(Function.toString);vH(B1.inspectSource)||(B1.inspectSource=function(i){return wH(i)});hE.exports=B1.inspectSource});var H1=D((Rve,gE)=>{"use strict";var F1=Ot(),yH=gi(),_H=pi(),Vm=On(),j1=Ei(),xH=V1().CONFIGURABLE,kH=N1(),fE=za(),CH=fE.enforce,TH=fE.get,mE=String,Bm=Object.defineProperty,EH=F1("".slice),SH=F1("".replace),AH=F1([].join),IH=j1&&!yH(function(){return Bm(function(){},"length",{value:8}).length!==8}),PH=String(String).split("String"),RH=gE.exports=function(i,e,t){EH(mE(e),0,7)==="Symbol("&&(e="["+SH(mE(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!Vm(i,"name")||xH&&i.name!==e)&&(j1?Bm(i,"name",{value:e,configurable:!0}):i.name=e),IH&&t&&Vm(t,"arity")&&i.length!==t.arity&&Bm(i,"length",{value:t.arity});try{t&&Vm(t,"constructor")&&t.constructor?j1&&Bm(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch(r){}var n=CH(i);return Vm(n,"source")||(n.source=AH(PH,typeof e=="string"?e:"")),i};Function.prototype.toString=RH(function(){return _H(this)&&TH(this).source||kH(this)},"toString")});var Fr=D((Ove,pE)=>{"use strict";var OH=pi(),MH=Br(),LH=H1(),DH=wm();pE.exports=function(i,e,t,n){n||(n={});var r=n.enumerable,s=n.name!==void 0?n.name:e;if(OH(t)&&LH(t,s,n),n.global)r?i[e]=t:DH(e,t);else{try{n.unsafe?i[e]&&(r=!0):delete i[e]}catch(o){}r?i[e]=t:MH.f(i,e,{value:t,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return i}});var Nm=D(bE=>{"use strict";var VH=x1(),BH=Pm(),NH=BH.concat("length","prototype");bE.f=Object.getOwnPropertyNames||function(e){return VH(e,NH)}});var z1=D(vE=>{"use strict";vE.f=Object.getOwnPropertySymbols});var yE=D((Dve,wE)=>{"use strict";var FH=Vr(),jH=Ot(),HH=Nm(),zH=z1(),UH=$n(),WH=jH([].concat);wE.exports=FH("Reflect","ownKeys")||function(e){var t=HH.f(UH(e)),n=zH.f;return n?WH(t,n(e)):t}});var kE=D((Vve,xE)=>{"use strict";var _E=On(),qH=yE(),$H=M1(),GH=Br();xE.exports=function(i,e,t){for(var n=qH(e),r=GH.f,s=$H.f,o=0;o<n.length;o++){var l=n[o];!_E(i,l)&&!(t&&_E(t,l))&&r(i,l,s(e,l))}}});var U1=D((Bve,CE)=>{"use strict";var KH=gi(),YH=pi(),ZH=/#|\.prototype\./,Od=function(i,e){var t=XH[JH(i)];return t===ez?!0:t===QH?!1:YH(e)?KH(e):!!e},JH=Od.normalize=function(i){return String(i).replace(ZH,".").toLowerCase()},XH=Od.data={},QH=Od.NATIVE="N",ez=Od.POLYFILL="P";CE.exports=Od});var ut=D((Nve,TE)=>{"use strict";var Fm=Di(),tz=M1().f,iz=Pd(),nz=Fr(),rz=wm(),sz=kE(),oz=U1();TE.exports=function(i,e){var t=i.target,n=i.global,r=i.stat,s,o,l,u,f,g;if(n?o=Fm:r?o=Fm[t]||rz(t,{}):o=Fm[t]&&Fm[t].prototype,o)for(l in e){if(f=e[l],i.dontCallGetSet?(g=tz(o,l),u=g&&g.value):u=o[l],s=oz(n?l:t+(r?".":"#")+l,i.forced),!s&&u!==void 0){if(typeof f==typeof u)continue;sz(f,u)}(i.sham||u&&u.sham)&&iz(f,"sham",!0),nz(o,l,f,i)}}});var SE=D((Fve,EE)=>{"use strict";var az=gi();EE.exports=!az(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})});var q1=D((jve,IE)=>{"use strict";var lz=On(),cz=pi(),uz=lc(),dz=Rm(),hz=SE(),AE=dz("IE_PROTO"),W1=Object,fz=W1.prototype;IE.exports=hz?W1.getPrototypeOf:function(i){var e=uz(i);if(lz(e,AE))return e[AE];var t=e.constructor;return cz(t)&&e instanceof t?t.prototype:e instanceof W1?fz:null}});var Y1=D((Hve,OE)=>{"use strict";var mz=gi(),gz=pi(),pz=mn(),bz=uc(),PE=q1(),vz=Fr(),wz=Zi(),yz=ac(),$1=wz("iterator"),RE=!1,js,G1,K1;[].keys&&(K1=[].keys(),"next"in K1?(G1=PE(PE(K1)),G1!==Object.prototype&&(js=G1)):RE=!0);var _z=!pz(js)||mz(function(){var i={};return js[$1].call(i)!==i});_z?js={}:yz&&(js=bz(js));gz(js[$1])||vz(js,$1,function(){return this});OE.exports={IteratorPrototype:js,BUGGY_SAFARI_ITERATORS:RE}});var Ua=D((zve,LE)=>{"use strict";var xz=Br().f,kz=On(),Cz=Zi(),ME=Cz("toStringTag");LE.exports=function(i,e,t){i&&!t&&(i=i.prototype),i&&!kz(i,ME)&&xz(i,ME,{configurable:!0,value:e})}});var Z1=D((Uve,DE)=>{"use strict";var Tz=Y1().IteratorPrototype,Ez=uc(),Sz=dc(),Az=Ua(),Iz=ja(),Pz=function(){return this};DE.exports=function(i,e,t,n){var r=e+" Iterator";return i.prototype=Ez(Tz,{next:Sz(+!n,t)}),Az(i,r,!1,!0),Iz[r]=Pz,i}});var J1=D((Wve,VE)=>{"use strict";var Rz=Ot(),Oz=Fa();VE.exports=function(i,e,t){try{return Rz(Oz(Object.getOwnPropertyDescriptor(i,e)[t]))}catch(n){}}});var NE=D((qve,BE)=>{"use strict";var Mz=mn();BE.exports=function(i){return Mz(i)||i===null}});var jE=D(($ve,FE)=>{"use strict";var Lz=NE(),Dz=String,Vz=TypeError;FE.exports=function(i){if(Lz(i))return i;throw new Vz("Can't set "+Dz(i)+" as a prototype")}});var X1=D((Gve,HE)=>{"use strict";var Bz=J1(),Nz=mn(),Fz=Ed(),jz=jE();HE.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,e={},t;try{t=Bz(Object.prototype,"__proto__","set"),t(e,[]),i=e instanceof Array}catch(n){}return function(r,s){return Fz(r),jz(s),Nz(r)&&(i?t(r,s):r.__proto__=s),r}}():void 0)});var zm=D((Kve,JE)=>{"use strict";var Hz=ut(),zz=hi(),jm=ac(),zE=V1(),Uz=pi(),Wz=Z1(),UE=q1(),WE=X1(),qz=Ua(),$z=Pd(),Q1=Fr(),Gz=Zi(),qE=ja(),$E=Y1(),Kz=zE.PROPER,Yz=zE.CONFIGURABLE,GE=$E.IteratorPrototype,Hm=$E.BUGGY_SAFARI_ITERATORS,Md=Gz("iterator"),KE="keys",Ld="values",YE="entries",ZE=function(){return this};JE.exports=function(i,e,t,n,r,s,o){Wz(t,e,n);var l=function(M){if(M===r&&y)return y;if(!Hm&&M&&M in g)return g[M];switch(M){case KE:return function(){return new t(this,M)};case Ld:return function(){return new t(this,M)};case YE:return function(){return new t(this,M)}}return function(){return new t(this)}},u=e+" Iterator",f=!1,g=i.prototype,p=g[Md]||g["@@iterator"]||r&&g[r],y=!Hm&&p||l(r),_=e==="Array"&&g.entries||p,C,E,P;if(_&&(C=UE(_.call(new i)),C!==Object.prototype&&C.next&&(!jm&&UE(C)!==GE&&(WE?WE(C,GE):Uz(C[Md])||Q1(C,Md,ZE)),qz(C,u,!0,!0),jm&&(qE[u]=ZE))),Kz&&r===Ld&&p&&p.name!==Ld&&(!jm&&Yz?$z(g,"name",Ld):(f=!0,y=function(){return zz(p,this)})),r)if(E={values:l(Ld),keys:s?y:l(KE),entries:l(YE)},o)for(P in E)(Hm||f||!(P in g))&&Q1(g,P,E[P]);else Hz({target:e,proto:!0,forced:Hm||f},E);return(!jm||o)&&g[Md]!==y&&Q1(g,Md,y,{name:r}),qE[e]=y,E}});var Dd=D((Yve,XE)=>{"use strict";XE.exports=function(i,e){return{value:i,done:e}}});var Wm=D((Zve,nS)=>{"use strict";var Zz=Na(),ew=YT(),QE=ja(),eS=za(),Jz=Br().f,Xz=zm(),Um=Dd(),Qz=ac(),eU=Ei(),tS="Array Iterator",tU=eS.set,iU=eS.getterFor(tS);nS.exports=Xz(Array,"Array",function(i,e){tU(this,{type:tS,target:Zz(i),index:0,kind:e})},function(){var i=iU(this),e=i.target,t=i.index++;if(!e||t>=e.length)return i.target=null,Um(void 0,!0);switch(i.kind){case"keys":return Um(t,!1);case"values":return Um(e[t],!1)}return Um([t,e[t]],!1)},"values");var iS=QE.Arguments=QE.Array;ew("keys");ew("values");ew("entries");if(!Qz&&eU&&iS.name!=="values")try{Jz(iS,"name",{value:"values"})}catch(i){}});var qm=D((Jve,sS)=>{"use strict";var nU=Zi(),rU=nU("toStringTag"),rS={};rS[rU]="z";sS.exports=String(rS)==="[object z]"});var Wa=D((Xve,oS)=>{"use strict";var sU=qm(),oU=pi(),$m=oc(),aU=Zi(),lU=aU("toStringTag"),cU=Object,uU=$m(function(){return arguments}())==="Arguments",dU=function(i,e){try{return i[e]}catch(t){}};oS.exports=sU?$m:function(i){var e,t,n;return i===void 0?"Undefined":i===null?"Null":typeof(t=dU(e=cU(i),lU))=="string"?t:uU?$m(e):(n=$m(e))==="Object"&&oU(e.callee)?"Arguments":n}});var lS=D((Qve,aS)=>{"use strict";var hU=qm(),fU=Wa();aS.exports=hU?{}.toString:function(){return"[object "+fU(this)+"]"}});var cS=D(()=>{"use strict";var mU=qm(),gU=Fr(),pU=lS();mU||gU(Object.prototype,"toString",pU,{unsafe:!0})});var Gm=D((i1e,uS)=>{"use strict";var bU=Ot();uS.exports=bU([].slice)});var mS=D((n1e,fS)=>{"use strict";var vU=oc(),wU=Na(),dS=Nm().f,yU=Gm(),hS=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],_U=function(i){try{return dS(i)}catch(e){return yU(hS)}};fS.exports.f=function(e){return hS&&vU(e)==="Window"?_U(e):dS(wU(e))}});var pS=D((r1e,gS)=>{"use strict";var xU=gi();gS.exports=xU(function(){if(typeof ArrayBuffer=="function"){var i=new ArrayBuffer(8);Object.isExtensible(i)&&Object.defineProperty(i,"a",{value:8})}})});var wS=D((s1e,vS)=>{"use strict";var kU=gi(),CU=mn(),TU=oc(),bS=pS(),Km=Object.isExtensible,EU=kU(function(){Km(1)});vS.exports=EU||bS?function(e){return!CU(e)||bS&&TU(e)==="ArrayBuffer"?!1:Km?Km(e):!0}:Km});var _S=D((o1e,yS)=>{"use strict";var SU=gi();yS.exports=!SU(function(){return Object.isExtensible(Object.preventExtensions({}))})});var rw=D((a1e,CS)=>{"use strict";var AU=ut(),IU=Ot(),PU=Id(),RU=mn(),tw=On(),OU=Br().f,xS=Nm(),MU=mS(),iw=wS(),LU=_m(),DU=_S(),kS=!1,Hs=LU("meta"),VU=0,nw=function(i){OU(i,Hs,{value:{objectID:"O"+VU++,weakData:{}}})},BU=function(i,e){if(!RU(i))return typeof i=="symbol"?i:(typeof i=="string"?"S":"P")+i;if(!tw(i,Hs)){if(!iw(i))return"F";if(!e)return"E";nw(i)}return i[Hs].objectID},NU=function(i,e){if(!tw(i,Hs)){if(!iw(i))return!0;if(!e)return!1;nw(i)}return i[Hs].weakData},FU=function(i){return DU&&kS&&iw(i)&&!tw(i,Hs)&&nw(i),i},jU=function(){HU.enable=function(){},kS=!0;var i=xS.f,e=IU([].splice),t={};t[Hs]=1,i(t).length&&(xS.f=function(n){for(var r=i(n),s=0,o=r.length;s<o;s++)if(r[s]===Hs){e(r,s,1);break}return r},AU({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:MU.f}))},HU=CS.exports={enable:jU,fastKey:BU,getWeakData:NU,onFreeze:FU};PU[Hs]=!0});var ES=D((l1e,TS)=>{"use strict";var zU=oc(),UU=Ot();TS.exports=function(i){if(zU(i)==="Function")return UU(i)}});var lr=D((c1e,AS)=>{"use strict";var SS=ES(),WU=Fa(),qU=vm(),$U=SS(SS.bind);AS.exports=function(i,e){return WU(i),e===void 0?i:qU?$U(i,e):function(){return i.apply(e,arguments)}}});var sw=D((u1e,IS)=>{"use strict";var GU=Zi(),KU=ja(),YU=GU("iterator"),ZU=Array.prototype;IS.exports=function(i){return i!==void 0&&(KU.Array===i||ZU[YU]===i)}});var Vd=D((d1e,RS)=>{"use strict";var JU=Wa(),PS=Sm(),XU=Ba(),QU=ja(),eW=Zi(),tW=eW("iterator");RS.exports=function(i){if(!XU(i))return PS(i,tW)||PS(i,"@@iterator")||QU[JU(i)]}});var Ym=D((h1e,OS)=>{"use strict";var iW=hi(),nW=Fa(),rW=$n(),sW=Em(),oW=Vd(),aW=TypeError;OS.exports=function(i,e){var t=arguments.length<2?oW(i):e;if(nW(t))return rW(iW(t,i));throw new aW(sW(i)+" is not iterable")}});var Bd=D((f1e,LS)=>{"use strict";var lW=hi(),MS=$n(),cW=Sm();LS.exports=function(i,e,t){var n,r;MS(i);try{if(n=cW(i,"return"),!n){if(e==="throw")throw t;return t}n=lW(n,i)}catch(s){r=!0,n=s}if(e==="throw")throw t;if(r)throw n;return MS(n),t}});var Jm=D((m1e,NS)=>{"use strict";var uW=lr(),dW=hi(),hW=$n(),fW=Em(),mW=sw(),gW=Im(),DS=Tm(),pW=Ym(),bW=Vd(),VS=Bd(),vW=TypeError,Zm=function(i,e){this.stopped=i,this.result=e},BS=Zm.prototype;NS.exports=function(i,e,t){var n=t&&t.that,r=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),l=!!(t&&t.INTERRUPTED),u=uW(e,n),f,g,p,y,_,C,E,P=function(O){return f&&VS(f,"normal",O),new Zm(!0,O)},M=function(O){return r?(hW(O),l?u(O[0],O[1],P):u(O[0],O[1])):l?u(O,P):u(O)};if(s)f=i.iterator;else if(o)f=i;else{if(g=bW(i),!g)throw new vW(fW(i)+" is not iterable");if(mW(g)){for(p=0,y=gW(i);y>p;p++)if(_=M(i[p]),_&&DS(BS,_))return _;return new Zm(!1)}f=pW(i,g)}for(C=s?i.next:f.next;!(E=dW(C,f)).done;){try{_=M(E.value)}catch(O){VS(f,"throw",O)}if(typeof _=="object"&&_&&DS(BS,_))return _}return new Zm(!1)}});var Nd=D((g1e,FS)=>{"use strict";var wW=Tm(),yW=TypeError;FS.exports=function(i,e){if(wW(e,i))return i;throw new yW("Incorrect invocation")}});var WS=D((p1e,US)=>{"use strict";var _W=Zi(),jS=_W("iterator"),HS=!1;try{zS=0,ow={next:function(){return{done:!!zS++}},return:function(){HS=!0}},ow[jS]=function(){return this},Array.from(ow,function(){throw 2})}catch(i){}var zS,ow;US.exports=function(i,e){try{if(!e&&!HS)return!1}catch(r){return!1}var t=!1;try{var n={};n[jS]=function(){return{next:function(){return{done:t=!0}}}},i(n)}catch(r){}return t}});var GS=D((b1e,$S)=>{"use strict";var xW=pi(),kW=mn(),qS=X1();$S.exports=function(i,e,t){var n,r;return qS&&xW(n=e.constructor)&&n!==t&&kW(r=n.prototype)&&r!==t.prototype&&qS(i,r),i}});var ZS=D((v1e,YS)=>{"use strict";var CW=ut(),TW=Di(),EW=Ot(),KS=U1(),SW=Fr(),AW=rw(),IW=Jm(),PW=Nd(),RW=pi(),OW=Ba(),aw=mn(),lw=gi(),MW=WS(),LW=Ua(),DW=GS();YS.exports=function(i,e,t){var n=i.indexOf("Map")!==-1,r=i.indexOf("Weak")!==-1,s=n?"set":"add",o=TW[i],l=o&&o.prototype,u=o,f={},g=function(M){var O=EW(l[M]);SW(l,M,M==="add"?function(W){return O(this,W===0?0:W),this}:M==="delete"?function(N){return r&&!aw(N)?!1:O(this,N===0?0:N)}:M==="get"?function(W){return r&&!aw(W)?void 0:O(this,W===0?0:W)}:M==="has"?function(W){return r&&!aw(W)?!1:O(this,W===0?0:W)}:function(W,Z){return O(this,W===0?0:W,Z),this})},p=KS(i,!RW(o)||!(r||l.forEach&&!lw(function(){new o().entries().next()})));if(p)u=t.getConstructor(e,i,n,s),AW.enable();else if(KS(i,!0)){var y=new u,_=y[s](r?{}:-0,1)!==y,C=lw(function(){y.has(1)}),E=MW(function(M){new o(M)}),P=!r&&lw(function(){for(var M=new o,O=5;O--;)M[s](O,O);return!M.has(-0)});E||(u=e(function(M,O){PW(M,l);var N=DW(new o,M,u);return OW(O)||IW(O,N[s],{that:N,AS_ENTRIES:n}),N}),u.prototype=l,l.constructor=u),(C||P)&&(g("delete"),g("has"),n&&g("get")),(P||_)&&g(s),r&&l.clear&&delete l.clear}return f[i]=u,CW({global:!0,constructor:!0,forced:u!==o},f),LW(u,i),r||t.setStrong(u,i,n),u}});var hc=D((w1e,XS)=>{"use strict";var JS=H1(),VW=Br();XS.exports=function(i,e,t){return t.get&&JS(t.get,e,{getter:!0}),t.set&&JS(t.set,e,{setter:!0}),VW.f(i,e,t)}});var cw=D((y1e,QS)=>{"use strict";var BW=Fr();QS.exports=function(i,e,t){for(var n in e)BW(i,n,e[n],t);return i}});var iA=D((_1e,tA)=>{"use strict";var NW=Vr(),FW=hc(),jW=Zi(),HW=Ei(),eA=jW("species");tA.exports=function(i){var e=NW(i);HW&&e&&!e[eA]&&FW(e,eA,{configurable:!0,get:function(){return this}})}});var cA=D((x1e,lA)=>{"use strict";var nA=uc(),zW=hc(),rA=cw(),UW=lr(),WW=Nd(),qW=Ba(),$W=Jm(),GW=zm(),Xm=Dd(),KW=iA(),Fd=Ei(),sA=rw().fastKey,oA=za(),aA=oA.set,uw=oA.getterFor;lA.exports={getConstructor:function(i,e,t,n){var r=i(function(f,g){WW(f,s),aA(f,{type:e,index:nA(null),first:null,last:null,size:0}),Fd||(f.size=0),qW(g)||$W(g,f[n],{that:f,AS_ENTRIES:t})}),s=r.prototype,o=uw(e),l=function(f,g,p){var y=o(f),_=u(f,g),C,E;return _?_.value=p:(y.last=_={index:E=sA(g,!0),key:g,value:p,previous:C=y.last,next:null,removed:!1},y.first||(y.first=_),C&&(C.next=_),Fd?y.size++:f.size++,E!=="F"&&(y.index[E]=_)),f},u=function(f,g){var p=o(f),y=sA(g),_;if(y!=="F")return p.index[y];for(_=p.first;_;_=_.next)if(_.key===g)return _};return rA(s,{clear:function(){for(var g=this,p=o(g),y=p.first;y;)y.removed=!0,y.previous&&(y.previous=y.previous.next=null),y=y.next;p.first=p.last=null,p.index=nA(null),Fd?p.size=0:g.size=0},delete:function(f){var g=this,p=o(g),y=u(g,f);if(y){var _=y.next,C=y.previous;delete p.index[y.index],y.removed=!0,C&&(C.next=_),_&&(_.previous=C),p.first===y&&(p.first=_),p.last===y&&(p.last=C),Fd?p.size--:g.size--}return!!y},forEach:function(g){for(var p=o(this),y=UW(g,arguments.length>1?arguments[1]:void 0),_;_=_?_.next:p.first;)for(y(_.value,_.key,this);_&&_.removed;)_=_.previous},has:function(g){return!!u(this,g)}}),rA(s,t?{get:function(g){var p=u(this,g);return p&&p.value},set:function(g,p){return l(this,g===0?0:g,p)}}:{add:function(g){return l(this,g=g===0?0:g,g)}}),Fd&&zW(s,"size",{configurable:!0,get:function(){return o(this).size}}),r},setStrong:function(i,e,t){var n=e+" Iterator",r=uw(e),s=uw(n);GW(i,e,function(o,l){aA(this,{type:n,target:o,state:r(o),kind:l,last:null})},function(){for(var o=s(this),l=o.kind,u=o.last;u&&u.removed;)u=u.previous;return!o.target||!(o.last=u=u?u.next:o.state.first)?(o.target=null,Xm(void 0,!0)):Xm(l==="keys"?u.key:l==="values"?u.value:[u.key,u.value],!1)},t?"entries":"values",!t,!0),KW(e)}}});var uA=D(()=>{"use strict";var YW=ZS(),ZW=cA();YW("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},ZW)});var dA=D(()=>{"use strict";uA()});var Hi=D((S1e,hA)=>{"use strict";var dw=Ot(),Qm=Set.prototype;hA.exports={Set,add:dw(Qm.add),has:dw(Qm.has),remove:dw(Qm.delete),proto:Qm}});var zi=D((A1e,fA)=>{"use strict";var JW=Hi().has;fA.exports=function(i){return JW(i),i}});var Bo=D((I1e,mA)=>{"use strict";var XW=hi();mA.exports=function(i,e,t){for(var n=t?i:i.iterator,r=i.next,s,o;!(s=XW(r,n)).done;)if(o=e(s.value),o!==void 0)return o}});var Gn=D((P1e,wA)=>{"use strict";var gA=Ot(),QW=Bo(),pA=Hi(),eq=pA.Set,bA=pA.proto,tq=gA(bA.forEach),vA=gA(bA.keys),iq=vA(new eq).next;wA.exports=function(i,e,t){return t?QW({iterator:vA(i),next:iq},e):tq(i,e)}});var eg=D((R1e,_A)=>{"use strict";var yA=Hi(),nq=Gn(),rq=yA.Set,sq=yA.add;_A.exports=function(i){var e=new rq;return nq(i,function(t){sq(e,t)}),e}});var fc=D((O1e,xA)=>{"use strict";var oq=J1(),aq=Hi();xA.exports=oq(aq.proto,"size","get")||function(i){return i.size}});var CA=D((M1e,kA)=>{"use strict";kA.exports=function(i){return{iterator:i,next:i.next,done:!1}}});var No=D((L1e,PA)=>{"use strict";var TA=Fa(),EA=$n(),SA=hi(),lq=Ad(),cq=CA(),AA="Invalid size",uq=RangeError,dq=TypeError,hq=Math.max,IA=function(i,e){this.set=i,this.size=hq(e,0),this.has=TA(i.has),this.keys=TA(i.keys)};IA.prototype={getIterator:function(){return cq(EA(SA(this.keys,this.set)))},includes:function(i){return SA(this.has,this.set,i)}};PA.exports=function(i){EA(i);var e=+i.size;if(e!==e)throw new dq(AA);var t=lq(e);if(t<0)throw new uq(AA);return new IA(i,t)}});var hw=D((D1e,MA)=>{"use strict";var fq=zi(),RA=Hi(),mq=eg(),gq=fc(),pq=No(),bq=Gn(),vq=Bo(),wq=RA.has,OA=RA.remove;MA.exports=function(e){var t=fq(this),n=pq(e),r=mq(t);return gq(t)<=n.size?bq(t,function(s){n.includes(s)&&OA(r,s)}):vq(n.getIterator(),function(s){wq(t,s)&&OA(r,s)}),r}});var Fo=D((V1e,VA)=>{"use strict";var yq=Vr(),LA=function(i){return{size:i,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},DA=function(i){return{size:i,has:function(){return!0},keys:function(){throw new Error("e")}}};VA.exports=function(i,e){var t=yq("Set");try{new t()[i](LA(0));try{return new t()[i](LA(-1)),!1}catch(r){if(!e)return!0;try{return new t()[i](DA(-1/0)),!1}catch(s){var n=new t;return n.add(1),n.add(2),e(n[i](DA(1/0)))}}}catch(r){return!1}}});var fw=D(()=>{"use strict";var _q=ut(),xq=hw(),kq=Fo(),Cq=!kq("difference",function(i){return i.size===0});_q({target:"Set",proto:!0,real:!0,forced:Cq},{difference:xq})});var gw=D((F1e,NA)=>{"use strict";var Tq=zi(),mw=Hi(),Eq=fc(),Sq=No(),Aq=Gn(),Iq=Bo(),Pq=mw.Set,BA=mw.add,Rq=mw.has;NA.exports=function(e){var t=Tq(this),n=Sq(e),r=new Pq;return Eq(t)>n.size?Iq(n.getIterator(),function(s){Rq(t,s)&&BA(r,s)}):Aq(t,function(s){n.includes(s)&&BA(r,s)}),r}});var pw=D(()=>{"use strict";var Oq=ut(),Mq=gi(),Lq=gw(),Dq=Fo(),Vq=!Dq("intersection",function(i){return i.size===2&&i.has(1)&&i.has(2)})||Mq(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});Oq({target:"Set",proto:!0,real:!0,forced:Vq},{intersection:Lq})});var bw=D((z1e,FA)=>{"use strict";var Bq=zi(),Nq=Hi().has,Fq=fc(),jq=No(),Hq=Gn(),zq=Bo(),Uq=Bd();FA.exports=function(e){var t=Bq(this),n=jq(e);if(Fq(t)<=n.size)return Hq(t,function(s){if(n.includes(s))return!1},!0)!==!1;var r=n.getIterator();return zq(r,function(s){if(Nq(t,s))return Uq(r,"normal",!1)})!==!1}});var vw=D(()=>{"use strict";var Wq=ut(),qq=bw(),$q=Fo(),Gq=!$q("isDisjointFrom",function(i){return!i});Wq({target:"Set",proto:!0,real:!0,forced:Gq},{isDisjointFrom:qq})});var ww=D((q1e,jA)=>{"use strict";var Kq=zi(),Yq=fc(),Zq=Gn(),Jq=No();jA.exports=function(e){var t=Kq(this),n=Jq(e);return Yq(t)>n.size?!1:Zq(t,function(r){if(!n.includes(r))return!1},!0)!==!1}});var yw=D(()=>{"use strict";var Xq=ut(),Qq=ww(),e$=Fo(),t$=!e$("isSubsetOf",function(i){return i});Xq({target:"Set",proto:!0,real:!0,forced:t$},{isSubsetOf:Qq})});var _w=D((K1e,HA)=>{"use strict";var i$=zi(),n$=Hi().has,r$=fc(),s$=No(),o$=Bo(),a$=Bd();HA.exports=function(e){var t=i$(this),n=s$(e);if(r$(t)<n.size)return!1;var r=n.getIterator();return o$(r,function(s){if(!n$(t,s))return a$(r,"normal",!1)})!==!1}});var xw=D(()=>{"use strict";var l$=ut(),c$=_w(),u$=Fo(),d$=!u$("isSupersetOf",function(i){return!i});l$({target:"Set",proto:!0,real:!0,forced:d$},{isSupersetOf:c$})});var Cw=D((J1e,zA)=>{"use strict";var h$=zi(),kw=Hi(),f$=eg(),m$=No(),g$=Bo(),p$=kw.add,b$=kw.has,v$=kw.remove;zA.exports=function(e){var t=h$(this),n=m$(e).getIterator(),r=f$(t);return g$(n,function(s){b$(t,s)?v$(r,s):p$(r,s)}),r}});var Tw=D(()=>{"use strict";var w$=ut(),y$=Cw(),_$=Fo();w$({target:"Set",proto:!0,real:!0,forced:!_$("symmetricDifference")},{symmetricDifference:y$})});var Ew=D((ewe,UA)=>{"use strict";var x$=zi(),k$=Hi().add,C$=eg(),T$=No(),E$=Bo();UA.exports=function(e){var t=x$(this),n=T$(e).getIterator(),r=C$(t);return E$(n,function(s){k$(r,s)}),r}});var Sw=D(()=>{"use strict";var S$=ut(),A$=Ew(),I$=Fo();S$({target:"Set",proto:!0,real:!0,forced:!I$("union")},{union:A$})});var ss=D((nwe,WA)=>{"use strict";var P$=Wa(),R$=String;WA.exports=function(i){if(P$(i)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return R$(i)}});var Iw=D((rwe,GA)=>{"use strict";var Aw=Ot(),O$=Ad(),M$=ss(),L$=Ed(),D$=Aw("".charAt),qA=Aw("".charCodeAt),V$=Aw("".slice),$A=function(i){return function(e,t){var n=M$(L$(e)),r=O$(t),s=n.length,o,l;return r<0||r>=s?i?"":void 0:(o=qA(n,r),o<55296||o>56319||r+1===s||(l=qA(n,r+1))<56320||l>57343?i?D$(n,r):o:i?V$(n,r,r+2):(o-55296<<10)+(l-56320)+65536)}};GA.exports={codeAt:$A(!1),charAt:$A(!0)}});var Pw=D(()=>{"use strict";var B$=Iw().charAt,N$=ss(),KA=za(),F$=zm(),YA=Dd(),ZA="String Iterator",j$=KA.set,H$=KA.getterFor(ZA);F$(String,"String",function(i){j$(this,{type:ZA,string:N$(i),index:0})},function(){var e=H$(this),t=e.string,n=e.index,r;return n>=t.length?YA(void 0,!0):(r=B$(t,n),e.index+=r.length,YA(r,!1))})});var tg=D((awe,JA)=>{"use strict";var z$=Di();JA.exports=z$});var QA=D((lwe,XA)=>{"use strict";Wm();cS();dA();fw();pw();vw();yw();xw();Tw();Sw();Pw();var U$=tg();XA.exports=U$.Set});var t5=D((cwe,e5)=>{"use strict";e5.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var r5=D((uwe,n5)=>{"use strict";var W$=km(),Rw=W$("span").classList,i5=Rw&&Rw.constructor&&Rw.constructor.prototype;n5.exports=i5===Object.prototype?void 0:i5});var c5=D(()=>{"use strict";var s5=Di(),o5=t5(),q$=r5(),jd=Wm(),a5=Pd(),$$=Ua(),G$=Zi(),Ow=G$("iterator"),Mw=jd.values,l5=function(i,e){if(i){if(i[Ow]!==Mw)try{a5(i,Ow,Mw)}catch(n){i[Ow]=Mw}if($$(i,e,!0),o5[e]){for(var t in jd)if(i[t]!==jd[t])try{a5(i,t,jd[t])}catch(n){i[t]=jd[t]}}}};for(ig in o5)l5(s5[ig]&&s5[ig].prototype,ig);var ig;l5(q$,"DOMTokenList")});var d5=D((fwe,u5)=>{"use strict";var K$=QA();c5();u5.exports=K$});var h5=D(()=>{"use strict";fw()});var f5=D(()=>{"use strict";pw()});var m5=D(()=>{"use strict";vw()});var g5=D(()=>{"use strict";yw()});var p5=D(()=>{"use strict";xw()});var b5=D(()=>{"use strict";Tw()});var v5=D(()=>{"use strict";Sw()});var y5=D((Awe,w5)=>{"use strict";var Y$=d5();h5();f5();m5();g5();p5();b5();v5();w5.exports=Y$});var x5=D((Iwe,_5)=>{"use strict";var Z$=lr(),J$=$n(),X$=lc(),Q$=Jm();_5.exports=function(i,e,t){return function(r){var s=X$(r),o=arguments.length,l=o>1?arguments[1]:void 0,u=l!==void 0,f=u?Z$(l,o>2?arguments[2]:void 0):void 0,g=new i,p=0;return Q$(s,function(y){var _=u?f(y,p++):y;t?e(g,J$(_)[0],_[1]):e(g,_)}),g}}});var C5=D(()=>{"use strict";var eG=ut(),k5=Hi(),tG=x5();eG({target:"Set",stat:!0,forced:!0},{from:tG(k5.Set,k5.add,!1)})});var E5=D((Owe,T5)=>{"use strict";var iG=$n();T5.exports=function(i,e,t){return function(){for(var r=new i,s=arguments.length,o=0;o<s;o++){var l=arguments[o];t?e(r,iG(l)[0],l[1]):e(r,l)}return r}}});var A5=D(()=>{"use strict";var nG=ut(),S5=Hi(),rG=E5();nG({target:"Set",stat:!0,forced:!0},{of:rG(S5.Set,S5.add,!1)})});var I5=D(()=>{"use strict";var sG=ut(),oG=zi(),aG=Hi().add;sG({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=oG(this),t=0,n=arguments.length;t<n;t++)aG(e,arguments[t]);return e}})});var P5=D(()=>{"use strict";var lG=ut(),cG=zi(),uG=Hi().remove;lG({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=cG(this),t=!0,n,r=0,s=arguments.length;r<s;r++)n=uG(e,arguments[r]),t=t&&n;return!!t}})});var R5=D(()=>{"use strict";var dG=ut(),hG=lr(),fG=zi(),mG=Gn();dG({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var t=fG(this),n=hG(e,arguments.length>1?arguments[1]:void 0);return mG(t,function(r){if(!n(r,r,t))return!1},!0)!==!1}})});var M5=D((Hwe,O5)=>{"use strict";var gG=Wa(),pG=On(),bG=Ba(),vG=Zi(),wG=ja(),yG=vG("iterator"),_G=Object;O5.exports=function(i){if(bG(i))return!1;var e=_G(i);return e[yG]!==void 0||"@@iterator"in e||pG(wG,gG(e))}});var jo=D((zwe,D5)=>{"use strict";var xG=Vr(),L5=pi(),kG=M5(),CG=mn(),TG=xG("Set"),EG=function(i){return CG(i)&&typeof i.size=="number"&&L5(i.has)&&L5(i.keys)};D5.exports=function(i){return EG(i)?i:kG(i)?new TG(i):i}});var V5=D(()=>{"use strict";var SG=ut(),AG=hi(),IG=jo(),PG=hw();SG({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){return AG(PG,this,IG(e))}})});var N5=D(()=>{"use strict";var RG=ut(),OG=lr(),MG=zi(),B5=Hi(),LG=Gn(),DG=B5.Set,VG=B5.add;RG({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=MG(this),n=OG(e,arguments.length>1?arguments[1]:void 0),r=new DG;return LG(t,function(s){n(s,s,t)&&VG(r,s)}),r}})});var F5=D(()=>{"use strict";var BG=ut(),NG=lr(),FG=zi(),jG=Gn();BG({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var t=FG(this),n=NG(e,arguments.length>1?arguments[1]:void 0),r=jG(t,function(s){if(n(s,s,t))return{value:s}},!0);return r&&r.value}})});var j5=D(()=>{"use strict";var HG=ut(),zG=hi(),UG=jo(),WG=gw();HG({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){return zG(WG,this,UG(e))}})});var H5=D(()=>{"use strict";var qG=ut(),$G=hi(),GG=jo(),KG=bw();qG({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){return $G(KG,this,GG(e))}})});var z5=D(()=>{"use strict";var YG=ut(),ZG=hi(),JG=jo(),XG=ww();YG({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){return ZG(XG,this,JG(e))}})});var U5=D(()=>{"use strict";var QG=ut(),eK=hi(),tK=jo(),iK=_w();QG({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){return eK(iK,this,tK(e))}})});var q5=D(()=>{"use strict";var nK=ut(),W5=Ot(),rK=zi(),sK=Gn(),oK=ss(),aK=W5([].join),lK=W5([].push);nK({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=rK(this),n=e===void 0?",":oK(e),r=[];return sK(t,function(s){lK(r,s)}),aK(r,n)}})});var G5=D(()=>{"use strict";var cK=ut(),uK=lr(),dK=zi(),$5=Hi(),hK=Gn(),fK=$5.Set,mK=$5.add;cK({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=dK(this),n=uK(e,arguments.length>1?arguments[1]:void 0),r=new fK;return hK(t,function(s){mK(r,n(s,s,t))}),r}})});var K5=D(()=>{"use strict";var gK=ut(),pK=Fa(),bK=zi(),vK=Gn(),wK=TypeError;gK({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=bK(this),n=arguments.length<2,r=n?void 0:arguments[1];if(pK(e),vK(t,function(s){n?(n=!1,r=s):r=e(r,s,s,t)}),n)throw new wK("Reduce of empty set with no initial value");return r}})});var Y5=D(()=>{"use strict";var yK=ut(),_K=lr(),xK=zi(),kK=Gn();yK({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var t=xK(this),n=_K(e,arguments.length>1?arguments[1]:void 0);return kK(t,function(r){if(n(r,r,t))return!0},!0)===!0}})});var Z5=D(()=>{"use strict";var CK=ut(),TK=hi(),EK=jo(),SK=Cw();CK({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){return TK(SK,this,EK(e))}})});var J5=D(()=>{"use strict";var AK=ut(),IK=hi(),PK=jo(),RK=Ew();AK({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){return IK(RK,this,PK(e))}})});var Q5=D((g0e,X5)=>{"use strict";var OK=y5();C5();A5();I5();P5();R5();V5();N5();F5();j5();H5();z5();U5();q5();G5();K5();Y5();Z5();J5();X5.exports=OK});var tI=D((p0e,eI)=>{"use strict";eI.exports=Q5()});var rI=D(()=>{"use strict";var MK=ut(),LK=Ot(),DK=y1(),VK=RangeError,iI=String.fromCharCode,nI=String.fromCodePoint,BK=LK([].join),NK=!!nI&&nI.length!==1;MK({target:"String",stat:!0,arity:1,forced:NK},{fromCodePoint:function(e){for(var t=[],n=arguments.length,r=0,s;n>r;){if(s=+arguments[r++],DK(s,1114111)!==s)throw new VK(s+" is not a valid code point");t[r]=s<65536?iI(s):iI(((s-=65536)>>10)+55296,s%1024+56320)}return BK(t,"")}})});var aI=D((w0e,oI)=>{"use strict";var sI=Di(),FK=Ei(),jK=Object.getOwnPropertyDescriptor;oI.exports=function(i){if(!FK)return sI[i];var e=jK(sI,i);return e&&e.value}});var Hd=D((y0e,cI)=>{"use strict";var HK=gi(),zK=Zi(),UK=Ei(),lI=ac(),WK=zK("iterator");cI.exports=!HK(function(){var i=new URL("b?a=1&b=2&c=3","https://a"),e=i.searchParams,t=new URLSearchParams("a=1&a=2&b=3"),n="";return i.pathname="c%20d",e.forEach(function(r,s){e.delete("b"),n+=s+r}),t.delete("a",2),t.delete("b",void 0),lI&&(!i.toJSON||!t.has("a",1)||t.has("a",2)||!t.has("a",void 0)||t.has("b"))||!e.size&&(lI||!UK)||!e.sort||i.href!=="https://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[WK]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var qa=D((_0e,uI)=>{"use strict";var qK=TypeError;uI.exports=function(i,e){if(i<e)throw new qK("Not enough arguments");return i}});var fI=D((x0e,hI)=>{"use strict";var dI=Gm(),$K=Math.floor,Lw=function(i,e){var t=i.length;if(t<8)for(var n=1,r,s;n<t;){for(s=n,r=i[n];s&&e(i[s-1],r)>0;)i[s]=i[--s];s!==n++&&(i[s]=r)}else for(var o=$K(t/2),l=Lw(dI(i,0,o),e),u=Lw(dI(i,o),e),f=l.length,g=u.length,p=0,y=0;p<f||y<g;)i[p+y]=p<f&&y<g?e(l[p],u[y])<=0?l[p++]:u[y++]:p<f?l[p++]:u[y++];return i};hI.exports=Lw});var Uw=D((k0e,VI)=>{"use strict";Wm();rI();var Dw=ut(),mI=Di(),Vw=aI(),GK=Vr(),ng=hi(),jr=Ot(),zd=Ei(),gI=Hd(),pI=Fr(),KK=hc(),YK=cw(),ZK=Ua(),JK=Z1(),Bw=za(),bI=Nd(),Nw=pi(),XK=On(),QK=lr(),eY=Wa(),tY=$n(),vI=mn(),gn=ss(),iY=uc(),wI=dc(),yI=Ym(),nY=Vd(),rg=Dd(),mc=qa(),rY=Zi(),sY=fI(),oY=rY("iterator"),gc="URLSearchParams",_I=gc+"Iterator",xI=Bw.set,cr=Bw.getterFor(gc),aY=Bw.getterFor(_I),kI=Vw("fetch"),sg=Vw("Request"),Ud=Vw("Headers"),Fw=sg&&sg.prototype,CI=Ud&&Ud.prototype,lY=mI.TypeError,cY=mI.encodeURIComponent,uY=String.fromCharCode,dY=GK("String","fromCodePoint"),hY=parseInt,og=jr("".charAt),TI=jr([].join),Ho=jr([].push),EI=jr("".replace),fY=jr([].shift),SI=jr([].splice),AI=jr("".split),II=jr("".slice),mY=jr(/./.exec),gY=/\+/g,jw="\uFFFD",pY=/^[0-9a-f]+$/i,PI=function(i,e){var t=II(i,e,e+2);return mY(pY,t)?hY(t,16):NaN},bY=function(i){for(var e=0,t=128;t>0&&(i&t)!=0;t>>=1)e++;return e},vY=function(i){var e=null;switch(i.length){case 1:e=i[0];break;case 2:e=(i[0]&31)<<6|i[1]&63;break;case 3:e=(i[0]&15)<<12|(i[1]&63)<<6|i[2]&63;break;case 4:e=(i[0]&7)<<18|(i[1]&63)<<12|(i[2]&63)<<6|i[3]&63;break}return e>1114111?null:e},RI=function(i){i=EI(i,gY," ");for(var e=i.length,t="",n=0;n<e;){var r=og(i,n);if(r==="%"){if(og(i,n+1)==="%"||n+3>e){t+="%",n++;continue}var s=PI(i,n+1);if(s!==s){t+=r,n++;continue}n+=2;var o=bY(s);if(o===0)r=uY(s);else{if(o===1||o>4){t+=jw,n++;continue}for(var l=[s],u=1;u<o&&(n++,!(n+3>e||og(i,n)!=="%"));){var f=PI(i,n+1);if(f!==f){n+=3;break}if(f>191||f<128)break;Ho(l,f),n+=2,u++}if(l.length!==o){t+=jw;continue}var g=vY(l);g===null?t+=jw:r=dY(g)}}t+=r,n++}return t},wY=/[!'()~]|%20/g,yY={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},_Y=function(i){return yY[i]},OI=function(i){return EI(cY(i),wY,_Y)},Hw=JK(function(e,t){xI(this,{type:_I,target:cr(e).entries,index:0,kind:t})},gc,function(){var e=aY(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,rg(void 0,!0);var r=t[n];switch(e.kind){case"keys":return rg(r.key,!1);case"values":return rg(r.value,!1)}return rg([r.key,r.value],!1)},!0),MI=function(i){this.entries=[],this.url=null,i!==void 0&&(vI(i)?this.parseObject(i):this.parseQuery(typeof i=="string"?og(i,0)==="?"?II(i,1):i:gn(i)))};MI.prototype={type:gc,bindURL:function(i){this.url=i,this.update()},parseObject:function(i){var e=this.entries,t=nY(i),n,r,s,o,l,u,f;if(t)for(n=yI(i,t),r=n.next;!(s=ng(r,n)).done;){if(o=yI(tY(s.value)),l=o.next,(u=ng(l,o)).done||(f=ng(l,o)).done||!ng(l,o).done)throw new lY("Expected sequence with length 2");Ho(e,{key:gn(u.value),value:gn(f.value)})}else for(var g in i)XK(i,g)&&Ho(e,{key:g,value:gn(i[g])})},parseQuery:function(i){if(i)for(var e=this.entries,t=AI(i,"&"),n=0,r,s;n<t.length;)r=t[n++],r.length&&(s=AI(r,"="),Ho(e,{key:RI(fY(s)),value:RI(TI(s,"="))}))},serialize:function(){for(var i=this.entries,e=[],t=0,n;t<i.length;)n=i[t++],Ho(e,OI(n.key)+"="+OI(n.value));return TI(e,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ag=function(){bI(this,pc);var e=arguments.length>0?arguments[0]:void 0,t=xI(this,new MI(e));zd||(this.size=t.entries.length)},pc=ag.prototype;YK(pc,{append:function(e,t){var n=cr(this);mc(arguments.length,2),Ho(n.entries,{key:gn(e),value:gn(t)}),zd||this.length++,n.updateURL()},delete:function(i){for(var e=cr(this),t=mc(arguments.length,1),n=e.entries,r=gn(i),s=t<2?void 0:arguments[1],o=s===void 0?s:gn(s),l=0;l<n.length;){var u=n[l];if(u.key===r&&(o===void 0||u.value===o)){if(SI(n,l,1),o!==void 0)break}else l++}zd||(this.size=n.length),e.updateURL()},get:function(e){var t=cr(this).entries;mc(arguments.length,1);for(var n=gn(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=cr(this).entries;mc(arguments.length,1);for(var n=gn(e),r=[],s=0;s<t.length;s++)t[s].key===n&&Ho(r,t[s].value);return r},has:function(e){for(var t=cr(this).entries,n=mc(arguments.length,1),r=gn(e),s=n<2?void 0:arguments[1],o=s===void 0?s:gn(s),l=0;l<t.length;){var u=t[l++];if(u.key===r&&(o===void 0||u.value===o))return!0}return!1},set:function(e,t){var n=cr(this);mc(arguments.length,1);for(var r=n.entries,s=!1,o=gn(e),l=gn(t),u=0,f;u<r.length;u++)f=r[u],f.key===o&&(s?SI(r,u--,1):(s=!0,f.value=l));s||Ho(r,{key:o,value:l}),zd||(this.size=r.length),n.updateURL()},sort:function(){var e=cr(this);sY(e.entries,function(t,n){return t.key>n.key?1:-1}),e.updateURL()},forEach:function(e){for(var t=cr(this).entries,n=QK(e,arguments.length>1?arguments[1]:void 0),r=0,s;r<t.length;)s=t[r++],n(s.value,s.key,this)},keys:function(){return new Hw(this,"keys")},values:function(){return new Hw(this,"values")},entries:function(){return new Hw(this,"entries")}},{enumerable:!0});pI(pc,oY,pc.entries,{name:"entries"});pI(pc,"toString",function(){return cr(this).serialize()},{enumerable:!0});zd&&KK(pc,"size",{get:function(){return cr(this).entries.length},configurable:!0,enumerable:!0});ZK(ag,gc);Dw({global:!0,constructor:!0,forced:!gI},{URLSearchParams:ag});!gI&&Nw(Ud)&&(LI=jr(CI.has),DI=jr(CI.set),zw=function(i){if(vI(i)){var e=i.body,t;if(eY(e)===gc)return t=i.headers?new Ud(i.headers):new Ud,LI(t,"content-type")||DI(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),iY(i,{body:wI(0,gn(e)),headers:wI(0,t)})}return i},Nw(kI)&&Dw({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return kI(e,arguments.length>1?zw(arguments[1]):{})}}),Nw(sg)&&(lg=function(e){return bI(this,Fw),new sg(e,arguments.length>1?zw(arguments[1]):{})},Fw.constructor=lg,lg.prototype=Fw,Dw({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:lg})));var LI,DI,zw,lg;VI.exports={URLSearchParams:ag,getState:cr}});var BI=D(()=>{"use strict";Uw()});var HI=D(()=>{"use strict";var xY=Fr(),cg=Ot(),NI=ss(),kY=qa(),FI=URLSearchParams,ug=FI.prototype,CY=cg(ug.append),jI=cg(ug.delete),TY=cg(ug.forEach),EY=cg([].push),Ww=new FI("a=1&a=2&b=3");Ww.delete("a",1);Ww.delete("b",void 0);Ww+""!="a=2"&&xY(ug,"delete",function(i){var e=arguments.length,t=e<2?void 0:arguments[1];if(e&&t===void 0)return jI(this,i);var n=[];TY(this,function(p,y){EY(n,{key:y,value:p})}),kY(e,1);for(var r=NI(i),s=NI(t),o=0,l=0,u=!1,f=n.length,g;o<f;)g=n[o++],u||g.key===r?(u=!0,jI(this,g.key)):l++;for(;l<f;)g=n[l++],g.key===r&&g.value===s||CY(this,g.key,g.value)},{enumerable:!0,unsafe:!0})});var qI=D(()=>{"use strict";var SY=Fr(),zI=Ot(),AY=ss(),IY=qa(),UI=URLSearchParams,qw=UI.prototype,PY=zI(qw.getAll),RY=zI(qw.has),WI=new UI("a=1");(WI.has("a",2)||!WI.has("a",void 0))&&SY(qw,"has",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&n===void 0)return RY(this,e);var r=PY(this,e);IY(t,1);for(var s=AY(n),o=0;o<r.length;)if(r[o++]===s)return!0;return!1},{enumerable:!0,unsafe:!0})});var $I=D(()=>{"use strict";var OY=Ei(),MY=Ot(),LY=hc(),$w=URLSearchParams.prototype,DY=MY($w.forEach);OY&&!("size"in $w)&&LY($w,"size",{get:function(){var e=0;return DY(this,function(){e++}),e},configurable:!0,enumerable:!0})});var KI=D((O0e,GI)=>{"use strict";BI();HI();qI();$I();var VY=tg();GI.exports=VY.URLSearchParams});var XI=D((M0e,JI)=>{"use strict";var YI=Ei(),BY=Ot(),NY=hi(),FY=gi(),Gw=k1(),jY=z1(),HY=O1(),zY=lc(),UY=Qv(),bc=Object.assign,ZI=Object.defineProperty,WY=BY([].concat);JI.exports=!bc||FY(function(){if(YI&&bc({b:1},bc(ZI({},"a",{enumerable:!0,get:function(){ZI(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var i={},e={},t=Symbol("assign detection"),n="abcdefghijklmnopqrst";return i[t]=7,n.split("").forEach(function(r){e[r]=r}),bc({},i)[t]!==7||Gw(bc({},e)).join("")!==n})?function(e,t){for(var n=zY(e),r=arguments.length,s=1,o=jY.f,l=HY.f;r>s;)for(var u=UY(arguments[s++]),f=o?WY(Gw(u),o(u)):Gw(u),g=f.length,p=0,y;g>p;)y=f[p++],(!YI||NY(l,u,y))&&(n[y]=u[y]);return n}:bc});var eP=D((L0e,QI)=>{"use strict";var qY=$n(),$Y=Bd();QI.exports=function(i,e,t,n){try{return n?e(qY(t)[0],t[1]):e(t)}catch(r){$Y(i,"throw",r)}}});var oP=D((D0e,sP)=>{"use strict";var GY=Ot(),KY=gi(),tP=pi(),YY=Wa(),ZY=Vr(),JY=N1(),iP=function(){},nP=ZY("Reflect","construct"),Kw=/^\s*(?:class|function)\b/,XY=GY(Kw.exec),QY=!Kw.test(iP),Wd=function(e){if(!tP(e))return!1;try{return nP(iP,[],e),!0}catch(t){return!1}},rP=function(e){if(!tP(e))return!1;switch(YY(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return QY||!!XY(Kw,JY(e))}catch(t){return!0}};rP.sham=!0;sP.exports=!nP||KY(function(){var i;return Wd(Wd.call)||!Wd(Object)||!Wd(function(){i=!0})||i})?rP:Wd});var lP=D((V0e,aP)=>{"use strict";var eZ=Ei(),tZ=Br(),iZ=dc();aP.exports=function(i,e,t){eZ?tZ.f(i,e,iZ(0,t)):i[e]=t}});var hP=D((B0e,dP)=>{"use strict";var nZ=lr(),rZ=hi(),sZ=lc(),oZ=eP(),aZ=sw(),lZ=oP(),cZ=Im(),cP=lP(),uZ=Ym(),dZ=Vd(),uP=Array;dP.exports=function(e){var t=sZ(e),n=lZ(this),r=arguments.length,s=r>1?arguments[1]:void 0,o=s!==void 0;o&&(s=nZ(s,r>2?arguments[2]:void 0));var l=dZ(t),u=0,f,g,p,y,_,C;if(l&&!(this===uP&&aZ(l)))for(g=n?new this:[],y=uZ(t,l),_=y.next;!(p=rZ(_,y)).done;u++)C=o?oZ(y,s,[p.value,u],!0):p.value,cP(g,u,C);else for(f=cZ(t),g=n?new this(f):uP(f);f>u;u++)C=o?s(t[u],u):t[u],cP(g,u,C);return g.length=u,g}});var _P=D((N0e,yP)=>{"use strict";var $a=Ot(),Yw=2147483647,qd=36,fP=1,Zw=26,hZ=38,fZ=700,mZ=72,gZ=128,pZ="-",bZ=/[^\0-\u007E]/,mP=/[.\u3002\uFF0E\uFF61]/g,gP="Overflow: input needs wider integers to process",Jw=qd-fP,pP=RangeError,vZ=$a(mP.exec),vc=Math.floor,Xw=String.fromCharCode,bP=$a("".charCodeAt),vP=$a([].join),zo=$a([].push),wZ=$a("".replace),yZ=$a("".split),_Z=$a("".toLowerCase),xZ=function(i){for(var e=[],t=0,n=i.length;t<n;){var r=bP(i,t++);if(r>=55296&&r<=56319&&t<n){var s=bP(i,t++);(s&64512)==56320?zo(e,((r&1023)<<10)+(s&1023)+65536):(zo(e,r),t--)}else zo(e,r)}return e},wP=function(i){return i+22+75*(i<26)},kZ=function(i,e,t){var n=0;for(i=t?vc(i/fZ):i>>1,i+=vc(i/e);i>Jw*Zw>>1;)i=vc(i/Jw),n+=qd;return vc(n+(Jw+1)*i/(i+hZ))},CZ=function(i){var e=[];i=xZ(i);var t=i.length,n=gZ,r=0,s=mZ,o,l;for(o=0;o<i.length;o++)l=i[o],l<128&&zo(e,Xw(l));var u=e.length,f=u;for(u&&zo(e,pZ);f<t;){var g=Yw;for(o=0;o<i.length;o++)l=i[o],l>=n&&l<g&&(g=l);var p=f+1;if(g-n>vc((Yw-r)/p))throw new pP(gP);for(r+=(g-n)*p,n=g,o=0;o<i.length;o++){if(l=i[o],l<n&&++r>Yw)throw new pP(gP);if(l===n){for(var y=r,_=qd;;){var C=_<=s?fP:_>=s+Zw?Zw:_-s;if(y<C)break;var E=y-C,P=qd-C;zo(e,Xw(wP(C+E%P))),y=vc(E/P),_+=qd}zo(e,Xw(wP(y))),s=kZ(r,p,f===u),r=0,f++}}r++,n++}return vP(e,"")};yP.exports=function(i){var e=[],t=yZ(wZ(_Z(i),mP,"."),"."),n,r;for(n=0;n<t.length;n++)r=t[n],zo(e,vZ(bZ,r)?"xn--"+CZ(r):r);return vP(e,".")}});var FP=D(()=>{"use strict";Pw();var TZ=ut(),Qw=Ei(),EZ=Hd(),e0=Di(),xP=lr(),ur=Ot(),dg=Fr(),dr=hc(),SZ=Nd(),t0=On(),i0=XI(),wc=hP(),Hr=Gm(),AZ=Iw().codeAt,IZ=_P(),zs=ss(),PZ=Ua(),RZ=qa(),kP=Uw(),CP=za(),OZ=CP.set,hg=CP.getterFor("URL"),MZ=kP.URLSearchParams,LZ=kP.getState,$d=e0.URL,n0=e0.TypeError,fg=e0.parseInt,DZ=Math.floor,TP=Math.pow,hr=ur("".charAt),zr=ur(/./.exec),Gd=ur([].join),VZ=ur(1 .toString),BZ=ur([].pop),yc=ur([].push),r0=ur("".replace),NZ=ur([].shift),FZ=ur("".split),Kd=ur("".slice),mg=ur("".toLowerCase),jZ=ur([].unshift),HZ="Invalid authority",s0="Invalid scheme",Ga="Invalid host",EP="Invalid port",SP=/[a-z]/i,zZ=/[\d+-.a-z]/i,o0=/\d/,UZ=/^0x/i,WZ=/^[0-7]+$/,qZ=/^\d+$/,AP=/^[\da-f]+$/i,$Z=/[\0\t\n\r #%/:<>?@[\\\]^|]/,GZ=/[\0\t\n\r #/:<>?@[\\\]^|]/,KZ=/^[\u0000-\u0020]+/,YZ=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ZZ=/[\t\n\r]/g,fr,JZ=function(i){var e=FZ(i,"."),t,n,r,s,o,l,u;if(e.length&&e[e.length-1]===""&&e.length--,t=e.length,t>4)return i;for(n=[],r=0;r<t;r++){if(s=e[r],s==="")return i;if(o=10,s.length>1&&hr(s,0)==="0"&&(o=zr(UZ,s)?16:8,s=Kd(s,o===8?1:2)),s==="")l=0;else{if(!zr(o===10?qZ:o===8?WZ:AP,s))return i;l=fg(s,o)}yc(n,l)}for(r=0;r<t;r++)if(l=n[r],r===t-1){if(l>=TP(256,5-t))return null}else if(l>255)return null;for(u=BZ(n),r=0;r<n.length;r++)u+=n[r]*TP(256,3-r);return u},XZ=function(i){var e=[0,0,0,0,0,0,0,0],t=0,n=null,r=0,s,o,l,u,f,g,p,y=function(){return hr(i,r)};if(y()===":"){if(hr(i,1)!==":")return;r+=2,t++,n=t}for(;y();){if(t===8)return;if(y()===":"){if(n!==null)return;r++,t++,n=t;continue}for(s=o=0;o<4&&zr(AP,y());)s=s*16+fg(y(),16),r++,o++;if(y()==="."){if(o===0||(r-=o,t>6))return;for(l=0;y();){if(u=null,l>0)if(y()==="."&&l<4)r++;else return;if(!zr(o0,y()))return;for(;zr(o0,y());){if(f=fg(y(),10),u===null)u=f;else{if(u===0)return;u=u*10+f}if(u>255)return;r++}e[t]=e[t]*256+u,l++,(l===2||l===4)&&t++}if(l!==4)return;break}else if(y()===":"){if(r++,!y())return}else if(y())return;e[t++]=s}if(n!==null)for(g=t-n,t=7;t!==0&&g>0;)p=e[t],e[t--]=e[n+g-1],e[n+--g]=p;else if(t!==8)return;return e},QZ=function(i){for(var e=null,t=1,n=null,r=0,s=0;s<8;s++)i[s]!==0?(r>t&&(e=n,t=r),n=null,r=0):(n===null&&(n=s),++r);return r>t?n:e},Yd=function(i){var e,t,n,r;if(typeof i=="number"){for(e=[],t=0;t<4;t++)jZ(e,i%256),i=DZ(i/256);return Gd(e,".")}if(typeof i=="object"){for(e="",n=QZ(i),t=0;t<8;t++)r&&i[t]===0||(r&&(r=!1),n===t?(e+=t?":":"::",r=!0):(e+=VZ(i[t],16),t<7&&(e+=":")));return"["+e+"]"}return i},gg={},IP=i0({},gg,{" ":1,'"':1,"<":1,">":1,"`":1}),PP=i0({},IP,{"#":1,"?":1,"{":1,"}":1}),a0=i0({},PP,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Uo=function(i,e){var t=AZ(i,0);return t>32&&t<127&&!t0(e,i)?i:encodeURIComponent(i)},pg={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Zd=function(i,e){var t;return i.length===2&&zr(SP,hr(i,0))&&((t=hr(i,1))===":"||!e&&t==="|")},RP=function(i){var e;return i.length>1&&Zd(Kd(i,0,2))&&(i.length===2||(e=hr(i,2))==="/"||e==="\\"||e==="?"||e==="#")},eJ=function(i){return i==="."||mg(i)==="%2e"},tJ=function(i){return i=mg(i),i===".."||i==="%2e."||i===".%2e"||i==="%2e%2e"},l0={},OP={},c0={},MP={},LP={},u0={},DP={},VP={},bg={},vg={},d0={},h0={},f0={},m0={},BP={},g0={},_c={},os={},NP={},Ka={},Us={},p0=function(i,e,t){var n=zs(i),r,s,o;if(e){if(s=this.parse(n),s)throw new n0(s);this.searchParams=null}else{if(t!==void 0&&(r=new p0(t,!0)),s=this.parse(n,null,r),s)throw new n0(s);o=LZ(new MZ),o.bindURL(this),this.searchParams=o}};p0.prototype={type:"URL",parse:function(i,e,t){var n=this,r=e||l0,s=0,o="",l=!1,u=!1,f=!1,g,p,y,_;for(i=zs(i),e||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,i=r0(i,KZ,""),i=r0(i,YZ,"$1")),i=r0(i,ZZ,""),g=wc(i);s<=g.length;){switch(p=g[s],r){case l0:if(p&&zr(SP,p))o+=mg(p),r=OP;else{if(e)return s0;r=c0;continue}break;case OP:if(p&&(zr(zZ,p)||p==="+"||p==="-"||p==="."))o+=mg(p);else if(p===":"){if(e&&(n.isSpecial()!==t0(pg,o)||o==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=o,e){n.isSpecial()&&pg[n.scheme]===n.port&&(n.port=null);return}o="",n.scheme==="file"?r=m0:n.isSpecial()&&t&&t.scheme===n.scheme?r=MP:n.isSpecial()?r=VP:g[s+1]==="/"?(r=LP,s++):(n.cannotBeABaseURL=!0,yc(n.path,""),r=NP)}else{if(e)return s0;o="",r=c0,s=0;continue}break;case c0:if(!t||t.cannotBeABaseURL&&p!=="#")return s0;if(t.cannotBeABaseURL&&p==="#"){n.scheme=t.scheme,n.path=Hr(t.path),n.query=t.query,n.fragment="",n.cannotBeABaseURL=!0,r=Us;break}r=t.scheme==="file"?m0:u0;continue;case MP:if(p==="/"&&g[s+1]==="/")r=bg,s++;else{r=u0;continue}break;case LP:if(p==="/"){r=vg;break}else{r=os;continue}case u0:if(n.scheme=t.scheme,p===fr)n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Hr(t.path),n.query=t.query;else if(p==="/"||p==="\\"&&n.isSpecial())r=DP;else if(p==="?")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Hr(t.path),n.query="",r=Ka;else if(p==="#")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Hr(t.path),n.query=t.query,n.fragment="",r=Us;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=Hr(t.path),n.path.length--,r=os;continue}break;case DP:if(n.isSpecial()&&(p==="/"||p==="\\"))r=bg;else if(p==="/")r=vg;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,r=os;continue}break;case VP:if(r=bg,p!=="/"||hr(o,s+1)!=="/")continue;s++;break;case bg:if(p!=="/"&&p!=="\\"){r=vg;continue}break;case vg:if(p==="@"){l&&(o="%40"+o),l=!0,y=wc(o);for(var C=0;C<y.length;C++){var E=y[C];if(E===":"&&!f){f=!0;continue}var P=Uo(E,a0);f?n.password+=P:n.username+=P}o=""}else if(p===fr||p==="/"||p==="?"||p==="#"||p==="\\"&&n.isSpecial()){if(l&&o==="")return HZ;s-=wc(o).length+1,o="",r=d0}else o+=p;break;case d0:case h0:if(e&&n.scheme==="file"){r=g0;continue}else if(p===":"&&!u){if(o==="")return Ga;if(_=n.parseHost(o),_)return _;if(o="",r=f0,e===h0)return}else if(p===fr||p==="/"||p==="?"||p==="#"||p==="\\"&&n.isSpecial()){if(n.isSpecial()&&o==="")return Ga;if(e&&o===""&&(n.includesCredentials()||n.port!==null))return;if(_=n.parseHost(o),_)return _;if(o="",r=_c,e)return;continue}else p==="["?u=!0:p==="]"&&(u=!1),o+=p;break;case f0:if(zr(o0,p))o+=p;else if(p===fr||p==="/"||p==="?"||p==="#"||p==="\\"&&n.isSpecial()||e){if(o!==""){var M=fg(o,10);if(M>65535)return EP;n.port=n.isSpecial()&&M===pg[n.scheme]?null:M,o=""}if(e)return;r=_c;continue}else return EP;break;case m0:if(n.scheme="file",p==="/"||p==="\\")r=BP;else if(t&&t.scheme==="file")switch(p){case fr:n.host=t.host,n.path=Hr(t.path),n.query=t.query;break;case"?":n.host=t.host,n.path=Hr(t.path),n.query="",r=Ka;break;case"#":n.host=t.host,n.path=Hr(t.path),n.query=t.query,n.fragment="",r=Us;break;default:RP(Gd(Hr(g,s),""))||(n.host=t.host,n.path=Hr(t.path),n.shortenPath()),r=os;continue}else{r=os;continue}break;case BP:if(p==="/"||p==="\\"){r=g0;break}t&&t.scheme==="file"&&!RP(Gd(Hr(g,s),""))&&(Zd(t.path[0],!0)?yc(n.path,t.path[0]):n.host=t.host),r=os;continue;case g0:if(p===fr||p==="/"||p==="\\"||p==="?"||p==="#"){if(!e&&Zd(o))r=os;else if(o===""){if(n.host="",e)return;r=_c}else{if(_=n.parseHost(o),_)return _;if(n.host==="localhost"&&(n.host=""),e)return;o="",r=_c}continue}else o+=p;break;case _c:if(n.isSpecial()){if(r=os,p!=="/"&&p!=="\\")continue}else if(!e&&p==="?")n.query="",r=Ka;else if(!e&&p==="#")n.fragment="",r=Us;else if(p!==fr&&(r=os,p!=="/"))continue;break;case os:if(p===fr||p==="/"||p==="\\"&&n.isSpecial()||!e&&(p==="?"||p==="#")){if(tJ(o)?(n.shortenPath(),p!=="/"&&!(p==="\\"&&n.isSpecial())&&yc(n.path,"")):eJ(o)?p!=="/"&&!(p==="\\"&&n.isSpecial())&&yc(n.path,""):(n.scheme==="file"&&!n.path.length&&Zd(o)&&(n.host&&(n.host=""),o=hr(o,0)+":"),yc(n.path,o)),o="",n.scheme==="file"&&(p===fr||p==="?"||p==="#"))for(;n.path.length>1&&n.path[0]==="";)NZ(n.path);p==="?"?(n.query="",r=Ka):p==="#"&&(n.fragment="",r=Us)}else o+=Uo(p,PP);break;case NP:p==="?"?(n.query="",r=Ka):p==="#"?(n.fragment="",r=Us):p!==fr&&(n.path[0]+=Uo(p,gg));break;case Ka:!e&&p==="#"?(n.fragment="",r=Us):p!==fr&&(p==="'"&&n.isSpecial()?n.query+="%27":p==="#"?n.query+="%23":n.query+=Uo(p,gg));break;case Us:p!==fr&&(n.fragment+=Uo(p,IP));break}s++}},parseHost:function(i){var e,t,n;if(hr(i,0)==="["){if(hr(i,i.length-1)!=="]"||(e=XZ(Kd(i,1,-1)),!e))return Ga;this.host=e}else if(this.isSpecial()){if(i=IZ(i),zr($Z,i)||(e=JZ(i),e===null))return Ga;this.host=e}else{if(zr(GZ,i))return Ga;for(e="",t=wc(i),n=0;n<t.length;n++)e+=Uo(t[n],gg);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return t0(pg,this.scheme)},shortenPath:function(){var i=this.path,e=i.length;e&&(this.scheme!=="file"||e!==1||!Zd(i[0],!0))&&i.length--},serialize:function(){var i=this,e=i.scheme,t=i.username,n=i.password,r=i.host,s=i.port,o=i.path,l=i.query,u=i.fragment,f=e+":";return r!==null?(f+="//",i.includesCredentials()&&(f+=t+(n?":"+n:"")+"@"),f+=Yd(r),s!==null&&(f+=":"+s)):e==="file"&&(f+="//"),f+=i.cannotBeABaseURL?o[0]:o.length?"/"+Gd(o,"/"):"",l!==null&&(f+="?"+l),u!==null&&(f+="#"+u),f},setHref:function(i){var e=this.parse(i);if(e)throw new n0(e);this.searchParams.update()},getOrigin:function(){var i=this.scheme,e=this.port;if(i==="blob")try{return new xc(i.path[0]).origin}catch(t){return"null"}return i==="file"||!this.isSpecial()?"null":i+"://"+Yd(this.host)+(e!==null?":"+e:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(i){this.parse(zs(i)+":",l0)},getUsername:function(){return this.username},setUsername:function(i){var e=wc(zs(i));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var t=0;t<e.length;t++)this.username+=Uo(e[t],a0)}},getPassword:function(){return this.password},setPassword:function(i){var e=wc(zs(i));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var t=0;t<e.length;t++)this.password+=Uo(e[t],a0)}},getHost:function(){var i=this.host,e=this.port;return i===null?"":e===null?Yd(i):Yd(i)+":"+e},setHost:function(i){this.cannotBeABaseURL||this.parse(i,d0)},getHostname:function(){var i=this.host;return i===null?"":Yd(i)},setHostname:function(i){this.cannotBeABaseURL||this.parse(i,h0)},getPort:function(){var i=this.port;return i===null?"":zs(i)},setPort:function(i){this.cannotHaveUsernamePasswordPort()||(i=zs(i),i===""?this.port=null:this.parse(i,f0))},getPathname:function(){var i=this.path;return this.cannotBeABaseURL?i[0]:i.length?"/"+Gd(i,"/"):""},setPathname:function(i){this.cannotBeABaseURL||(this.path=[],this.parse(i,_c))},getSearch:function(){var i=this.query;return i?"?"+i:""},setSearch:function(i){i=zs(i),i===""?this.query=null:(hr(i,0)==="?"&&(i=Kd(i,1)),this.query="",this.parse(i,Ka)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var i=this.fragment;return i?"#"+i:""},setHash:function(i){if(i=zs(i),i===""){this.fragment=null;return}hr(i,0)==="#"&&(i=Kd(i,1)),this.fragment="",this.parse(i,Us)},update:function(){this.query=this.searchParams.serialize()||null}};var xc=function(e){var t=SZ(this,pn),n=RZ(arguments.length,1)>1?arguments[1]:void 0,r=OZ(t,new p0(e,!1,n));Qw||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},pn=xc.prototype,mr=function(i,e){return{get:function(){return hg(this)[i]()},set:e&&function(t){return hg(this)[e](t)},configurable:!0,enumerable:!0}};Qw&&(dr(pn,"href",mr("serialize","setHref")),dr(pn,"origin",mr("getOrigin")),dr(pn,"protocol",mr("getProtocol","setProtocol")),dr(pn,"username",mr("getUsername","setUsername")),dr(pn,"password",mr("getPassword","setPassword")),dr(pn,"host",mr("getHost","setHost")),dr(pn,"hostname",mr("getHostname","setHostname")),dr(pn,"port",mr("getPort","setPort")),dr(pn,"pathname",mr("getPathname","setPathname")),dr(pn,"search",mr("getSearch","setSearch")),dr(pn,"searchParams",mr("getSearchParams")),dr(pn,"hash",mr("getHash","setHash")));dg(pn,"toJSON",function(){return hg(this).serialize()},{enumerable:!0});dg(pn,"toString",function(){return hg(this).serialize()},{enumerable:!0});$d&&(b0=$d.createObjectURL,v0=$d.revokeObjectURL,b0&&dg(xc,"createObjectURL",xP(b0,$d)),v0&&dg(xc,"revokeObjectURL",xP(v0,$d)));var b0,v0;PZ(xc,"URL");TZ({global:!0,constructor:!0,forced:!EZ,sham:!Qw},{URL:xc})});var jP=D(()=>{"use strict";FP()});var UP=D(()=>{"use strict";var iJ=ut(),nJ=Vr(),HP=gi(),rJ=qa(),zP=ss(),sJ=Hd(),w0=nJ("URL"),oJ=sJ&&HP(function(){w0.canParse()}),aJ=HP(function(){return w0.canParse.length!==1});iJ({target:"URL",stat:!0,forced:!oJ||aJ},{canParse:function(e){var t=rJ(arguments.length,1),n=zP(e),r=t<2||arguments[1]===void 0?void 0:zP(arguments[1]);try{return!!new w0(n,r)}catch(s){return!1}}})});var qP=D(()=>{"use strict";var lJ=ut(),cJ=Vr(),uJ=qa(),WP=ss(),dJ=Hd(),hJ=cJ("URL");lJ({target:"URL",stat:!0,forced:!dJ},{parse:function(e){var t=uJ(arguments.length,1),n=WP(e),r=t<2||arguments[1]===void 0?void 0:WP(arguments[1]);try{return new hJ(n,r)}catch(s){return null}}})});var $P=D(()=>{"use strict";var fJ=ut(),mJ=hi();fJ({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return mJ(URL.prototype.toString,this)}})});var KP=D((Y0e,GP)=>{"use strict";KI();jP();UP();qP();$P();var gJ=tg();GP.exports=gJ.URL});var ZP=D((Z0e,YP)=>{"use strict";var pJ=KP();YP.exports=pJ});var XP=D((J0e,JP)=>{"use strict";var bJ=ZP();JP.exports=bJ});var eR=D((X0e,QP)=>{"use strict";var vJ=XP();QP.exports=vJ});var iR=D((Q0e,tR)=>{"use strict";tR.exports=eR()});var KR=D((hh,U0)=>{(function(e,t){typeof hh=="object"&&typeof U0=="object"?U0.exports=t():typeof define=="function"&&define.amd?define([],t):typeof hh=="object"?hh.feather=t():e.feather=t()})(typeof self!="undefined"?self:hh,function(){return function(i){var e={};function t(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return i[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=i,t.c=e,t.d=function(n,r,s){t.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:s})},t.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},t.p="",t(t.s=0)}({"./dist/icons.json":function(i){i.exports={activity:'<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',airplay:'<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon>',"alert-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',"align-center":'<line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line>',"align-justify":'<line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line>',"align-left":'<line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line>',"align-right":'<line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line>',anchor:'<circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>',aperture:'<circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',"arrow-down-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line>',"arrow-down-left":'<line x1="17" y1="7" x2="7" y2="17"></line><polyline points="17 17 7 17 7 7"></polyline>',"arrow-down-right":'<line x1="7" y1="7" x2="17" y2="17"></line><polyline points="17 7 17 17 7 17"></polyline>',"arrow-down":'<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',"arrow-left-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',"arrow-left":'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',"arrow-right-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',"arrow-right":'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',"arrow-up-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line>',"arrow-up-left":'<line x1="17" y1="17" x2="7" y2="7"></line><polyline points="7 17 7 7 17 7"></polyline>',"arrow-up-right":'<line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline>',"arrow-up":'<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',"at-sign":'<circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>',award:'<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',"bar-chart-2":'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',"bar-chart":'<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',"battery-charging":'<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',battery:'<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',"bell-off":'<path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line>',bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',bluetooth:'<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',bold:'<path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>',"book-open":'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',book:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',bookmark:'<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',box:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',calendar:'<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',"camera-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"></path>',camera:'<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',cast:'<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line>',"check-circle":'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',"check-square":'<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',check:'<polyline points="20 6 9 17 4 12"></polyline>',"chevron-down":'<polyline points="6 9 12 15 18 9"></polyline>',"chevron-left":'<polyline points="15 18 9 12 15 6"></polyline>',"chevron-right":'<polyline points="9 18 15 12 9 6"></polyline>',"chevron-up":'<polyline points="18 15 12 9 6 15"></polyline>',"chevrons-down":'<polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline>',"chevrons-left":'<polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline>',"chevrons-right":'<polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline>',"chevrons-up":'<polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline>',chrome:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="21.17" y1="8" x2="12" y2="8"></line><line x1="3.95" y1="6.06" x2="8.54" y2="14"></line><line x1="10.88" y1="21.94" x2="15.46" y2="14"></line>',circle:'<circle cx="12" cy="12" r="10"></circle>',clipboard:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',clock:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',"cloud-drizzle":'<line x1="8" y1="19" x2="8" y2="21"></line><line x1="8" y1="13" x2="8" y2="15"></line><line x1="16" y1="19" x2="16" y2="21"></line><line x1="16" y1="13" x2="16" y2="15"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="12" y1="15" x2="12" y2="17"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-lightning":'<path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline>',"cloud-off":'<path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path><line x1="1" y1="1" x2="23" y2="23"></line>',"cloud-rain":'<line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-snow":'<path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="16" x2="8.01" y2="16"></line><line x1="8" y1="20" x2="8.01" y2="20"></line><line x1="12" y1="18" x2="12.01" y2="18"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="16" y1="16" x2="16.01" y2="16"></line><line x1="16" y1="20" x2="16.01" y2="20"></line>',cloud:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',code:'<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',codepen:'<polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"></polygon><line x1="12" y1="22" x2="12" y2="15.5"></line><polyline points="22 8.5 12 15.5 2 8.5"></polyline><polyline points="2 15.5 12 8.5 22 15.5"></polyline><line x1="12" y1="2" x2="12" y2="8.5"></line>',codesandbox:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',columns:'<path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>',command:'<path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>',compass:'<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',copy:'<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',"corner-down-left":'<polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path>',"corner-down-right":'<polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',"corner-left-down":'<polyline points="14 15 9 20 4 15"></polyline><path d="M20 4h-7a4 4 0 0 0-4 4v12"></path>',"corner-left-up":'<polyline points="14 9 9 4 4 9"></polyline><path d="M20 20h-7a4 4 0 0 1-4-4V4"></path>',"corner-right-down":'<polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>',"corner-right-up":'<polyline points="10 9 15 4 20 9"></polyline><path d="M4 20h7a4 4 0 0 0 4-4V4"></path>',"corner-up-left":'<polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>',"corner-up-right":'<polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>',cpu:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line>',"credit-card":'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',crop:'<path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path>',crosshair:'<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',database:'<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',delete:'<path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line>',disc:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle>',"divide-circle":'<line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line><circle cx="12" cy="12" r="10"></circle>',"divide-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line>',divide:'<circle cx="12" cy="6" r="2"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="2"></circle>',"dollar-sign":'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',"download-cloud":'<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',dribbble:'<circle cx="12" cy="12" r="10"></circle><path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32"></path>',droplet:'<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>',"edit-2":'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',"edit-3":'<path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>',edit:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',"external-link":'<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',"eye-off":'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>',eye:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',facebook:'<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>',"fast-forward":'<polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon>',feather:'<path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line>',figma:'<path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"></path><path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"></path><path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"></path><path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"></path><path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"></path>',"file-minus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line>',"file-plus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line>',"file-text":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',file:'<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',film:'<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',filter:'<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',flag:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',"folder-minus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line>',"folder-plus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line>',folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',framer:'<path d="M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7"></path>',frown:'<circle cx="12" cy="12" r="10"></circle><path d="M16 16s-1.5-2-4-2-4 2-4 2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',gift:'<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',"git-branch":'<line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path>',"git-commit":'<circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line>',"git-merge":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M6 21V9a9 9 0 0 0 9 9"></path>',"git-pull-request":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line>',github:'<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',gitlab:'<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>',globe:'<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',grid:'<rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>',"hard-drive":'<line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line>',hash:'<line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>',headphones:'<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',"help-circle":'<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',hexagon:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>',home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',inbox:'<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',instagram:'<rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>',italic:'<line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line>',key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',layers:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',layout:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',"life-buoy":'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line>',"link-2":'<path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line>',link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',linkedin:'<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',list:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',loader:'<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',"log-in":'<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',"log-out":'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',mail:'<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',"map-pin":'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',map:'<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line>',"maximize-2":'<polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line>',maximize:'<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',meh:'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',menu:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',"message-circle":'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',"message-square":'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',"mic-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',mic:'<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',"minimize-2":'<polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>',minimize:'<path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>',"minus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line>',"minus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',minus:'<line x1="5" y1="12" x2="19" y2="12"></line>',monitor:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',moon:'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',"more-horizontal":'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',"more-vertical":'<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',"mouse-pointer":'<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path>',move:'<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',"navigation-2":'<polygon points="12 2 19 21 12 17 5 21 12 2"></polygon>',navigation:'<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',octagon:'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>',package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',paperclip:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',"pause-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',"pen-tool":'<path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle>',percent:'<line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle>',"phone-call":'<path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-forwarded":'<polyline points="19 1 23 5 19 9"></polyline><line x1="15" y1="5" x2="23" y2="5"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-incoming":'<polyline points="16 2 16 8 22 8"></polyline><line x1="23" y1="1" x2="16" y2="8"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-missed":'<line x1="23" y1="1" x2="17" y2="7"></line><line x1="17" y1="1" x2="23" y2="7"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-off":'<path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path><line x1="23" y1="1" x2="1" y2="23"></line>',"phone-outgoing":'<polyline points="23 7 23 1 17 1"></polyline><line x1="16" y1="8" x2="23" y2="1"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"pie-chart":'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',"play-circle":'<circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon>',play:'<polygon points="5 3 19 12 5 21 5 3"></polygon>',"plus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',"plus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',plus:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',pocket:'<path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path><polyline points="8 10 12 14 16 10"></polyline>',power:'<path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line>',printer:'<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',radio:'<circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path>',"refresh-ccw":'<polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>',"refresh-cw":'<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',repeat:'<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path>',rewind:'<polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon>',"rotate-ccw":'<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',"rotate-cw":'<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',rss:'<path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',send:'<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',server:'<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',"share-2":'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',share:'<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line>',"shield-off":'<path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line>',shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',"shopping-bag":'<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path>',"shopping-cart":'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',shuffle:'<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',sidebar:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line>',"skip-back":'<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',"skip-forward":'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',slack:'<path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path>',slash:'<circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>',sliders:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',smile:'<circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',speaker:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><circle cx="12" cy="14" r="4"></circle><line x1="12" y1="6" x2="12.01" y2="6"></line>',square:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',"stop-circle":'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',sun:'<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',sunrise:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline>',sunset:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="9" x2="12" y2="2"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="16 5 12 9 8 5"></polyline>',table:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"></path>',tablet:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',tag:'<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',target:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',terminal:'<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',thermometer:'<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',"thumbs-down":'<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',"thumbs-up":'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',"toggle-left":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle>',"toggle-right":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle>',tool:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',"trash-2":'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',trello:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>',"trending-down":'<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',"trending-up":'<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',triangle:'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>',truck:'<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',tv:'<rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline>',twitch:'<path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>',twitter:'<path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>',type:'<polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line>',umbrella:'<path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path>',underline:'<path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line>',unlock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',"upload-cloud":'<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',"user-check":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',"user-minus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="23" y1="11" x2="17" y2="11"></line>',"user-plus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',"user-x":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="18" y1="8" x2="23" y2="13"></line><line x1="23" y1="8" x2="18" y2="13"></line>',user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',"video-off":'<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',voicemail:'<circle cx="5.5" cy="11.5" r="4.5"></circle><circle cx="18.5" cy="11.5" r="4.5"></circle><line x1="5.5" y1="16" x2="18.5" y2="16"></line>',"volume-1":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-2":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-x":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',volume:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',watch:'<circle cx="12" cy="12" r="7"></circle><polyline points="12 9 12 12 13.5 13.5"></polyline><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>',"wifi-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wifi:'<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wind:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>',"x-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line>',x:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',youtube:'<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>',"zap-off":'<polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line>',zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',"zoom-in":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line>',"zoom-out":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line>'}},"./node_modules/classnames/dedupe.js":function(i,e,t){var n,r;(function(){"use strict";var s=function(){function o(){}o.prototype=Object.create(null);function l(E,P){for(var M=P.length,O=0;O<M;++O)_(E,P[O])}var u={}.hasOwnProperty;function f(E,P){E[P]=!0}function g(E,P){for(var M in P)u.call(P,M)&&(E[M]=!!P[M])}var p=/\s+/;function y(E,P){for(var M=P.split(p),O=M.length,N=0;N<O;++N)E[M[N]]=!0}function _(E,P){if(!!P){var M=typeof P;M==="string"?y(E,P):Array.isArray(P)?l(E,P):M==="object"?g(E,P):M==="number"&&f(E,P)}}function C(){for(var E=arguments.length,P=Array(E),M=0;M<E;M++)P[M]=arguments[M];var O=new o;l(O,P);var N=[];for(var W in O)O[W]&&N.push(W);return N.join(" ")}return C}();typeof i!="undefined"&&i.exports?i.exports=s:(n=[],r=function(){return s}.apply(e,n),r!==void 0&&(i.exports=r))})()},"./node_modules/core-js/es/array/from.js":function(i,e,t){t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.from.js");var n=t("./node_modules/core-js/internals/path.js");i.exports=n.Array.from},"./node_modules/core-js/internals/a-function.js":function(i,e){i.exports=function(t){if(typeof t!="function")throw TypeError(String(t)+" is not a function");return t}},"./node_modules/core-js/internals/an-object.js":function(i,e,t){var n=t("./node_modules/core-js/internals/is-object.js");i.exports=function(r){if(!n(r))throw TypeError(String(r)+" is not an object");return r}},"./node_modules/core-js/internals/array-from.js":function(i,e,t){"use strict";var n=t("./node_modules/core-js/internals/bind-context.js"),r=t("./node_modules/core-js/internals/to-object.js"),s=t("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),o=t("./node_modules/core-js/internals/is-array-iterator-method.js"),l=t("./node_modules/core-js/internals/to-length.js"),u=t("./node_modules/core-js/internals/create-property.js"),f=t("./node_modules/core-js/internals/get-iterator-method.js");i.exports=function(p){var y=r(p),_=typeof this=="function"?this:Array,C=arguments.length,E=C>1?arguments[1]:void 0,P=E!==void 0,M=0,O=f(y),N,W,Z,U;if(P&&(E=n(E,C>2?arguments[2]:void 0,2)),O!=null&&!(_==Array&&o(O)))for(U=O.call(y),W=new _;!(Z=U.next()).done;M++)u(W,M,P?s(U,E,[Z.value,M],!0):Z.value);else for(N=l(y.length),W=new _(N);N>M;M++)u(W,M,P?E(y[M],M):y[M]);return W.length=M,W}},"./node_modules/core-js/internals/array-includes.js":function(i,e,t){var n=t("./node_modules/core-js/internals/to-indexed-object.js"),r=t("./node_modules/core-js/internals/to-length.js"),s=t("./node_modules/core-js/internals/to-absolute-index.js");i.exports=function(o){return function(l,u,f){var g=n(l),p=r(g.length),y=s(f,p),_;if(o&&u!=u){for(;p>y;)if(_=g[y++],_!=_)return!0}else for(;p>y;y++)if((o||y in g)&&g[y]===u)return o||y||0;return!o&&-1}}},"./node_modules/core-js/internals/bind-context.js":function(i,e,t){var n=t("./node_modules/core-js/internals/a-function.js");i.exports=function(r,s,o){if(n(r),s===void 0)return r;switch(o){case 0:return function(){return r.call(s)};case 1:return function(l){return r.call(s,l)};case 2:return function(l,u){return r.call(s,l,u)};case 3:return function(l,u,f){return r.call(s,l,u,f)}}return function(){return r.apply(s,arguments)}}},"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(i,e,t){var n=t("./node_modules/core-js/internals/an-object.js");i.exports=function(r,s,o,l){try{return l?s(n(o)[0],o[1]):s(o)}catch(f){var u=r.return;throw u!==void 0&&n(u.call(r)),f}}},"./node_modules/core-js/internals/check-correctness-of-iteration.js":function(i,e,t){var n=t("./node_modules/core-js/internals/well-known-symbol.js"),r=n("iterator"),s=!1;try{var o=0,l={next:function(){return{done:!!o++}},return:function(){s=!0}};l[r]=function(){return this},Array.from(l,function(){throw 2})}catch(u){}i.exports=function(u,f){if(!f&&!s)return!1;var g=!1;try{var p={};p[r]=function(){return{next:function(){return{done:g=!0}}}},u(p)}catch(y){}return g}},"./node_modules/core-js/internals/classof-raw.js":function(i,e){var t={}.toString;i.exports=function(n){return t.call(n).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(i,e,t){var n=t("./node_modules/core-js/internals/classof-raw.js"),r=t("./node_modules/core-js/internals/well-known-symbol.js"),s=r("toStringTag"),o=n(function(){return arguments}())=="Arguments",l=function(u,f){try{return u[f]}catch(g){}};i.exports=function(u){var f,g,p;return u===void 0?"Undefined":u===null?"Null":typeof(g=l(f=Object(u),s))=="string"?g:o?n(f):(p=n(f))=="Object"&&typeof f.callee=="function"?"Arguments":p}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(i,e,t){var n=t("./node_modules/core-js/internals/has.js"),r=t("./node_modules/core-js/internals/own-keys.js"),s=t("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),o=t("./node_modules/core-js/internals/object-define-property.js");i.exports=function(l,u){for(var f=r(u),g=o.f,p=s.f,y=0;y<f.length;y++){var _=f[y];n(l,_)||g(l,_,p(u,_))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(i,e,t){var n=t("./node_modules/core-js/internals/fails.js");i.exports=!n(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},"./node_modules/core-js/internals/create-iterator-constructor.js":function(i,e,t){"use strict";var n=t("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,r=t("./node_modules/core-js/internals/object-create.js"),s=t("./node_modules/core-js/internals/create-property-descriptor.js"),o=t("./node_modules/core-js/internals/set-to-string-tag.js"),l=t("./node_modules/core-js/internals/iterators.js"),u=function(){return this};i.exports=function(f,g,p){var y=g+" Iterator";return f.prototype=r(n,{next:s(1,p)}),o(f,y,!1,!0),l[y]=u,f}},"./node_modules/core-js/internals/create-property-descriptor.js":function(i,e){i.exports=function(t,n){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:n}}},"./node_modules/core-js/internals/create-property.js":function(i,e,t){"use strict";var n=t("./node_modules/core-js/internals/to-primitive.js"),r=t("./node_modules/core-js/internals/object-define-property.js"),s=t("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=function(o,l,u){var f=n(l);f in o?r.f(o,f,s(0,u)):o[f]=u}},"./node_modules/core-js/internals/define-iterator.js":function(i,e,t){"use strict";var n=t("./node_modules/core-js/internals/export.js"),r=t("./node_modules/core-js/internals/create-iterator-constructor.js"),s=t("./node_modules/core-js/internals/object-get-prototype-of.js"),o=t("./node_modules/core-js/internals/object-set-prototype-of.js"),l=t("./node_modules/core-js/internals/set-to-string-tag.js"),u=t("./node_modules/core-js/internals/hide.js"),f=t("./node_modules/core-js/internals/redefine.js"),g=t("./node_modules/core-js/internals/well-known-symbol.js"),p=t("./node_modules/core-js/internals/is-pure.js"),y=t("./node_modules/core-js/internals/iterators.js"),_=t("./node_modules/core-js/internals/iterators-core.js"),C=_.IteratorPrototype,E=_.BUGGY_SAFARI_ITERATORS,P=g("iterator"),M="keys",O="values",N="entries",W=function(){return this};i.exports=function(Z,U,ie,X,F,te,ye){r(ie,U,X);var Ee=function(se){if(se===F&&fe)return fe;if(!E&&se in et)return et[se];switch(se){case M:return function(){return new ie(this,se)};case O:return function(){return new ie(this,se)};case N:return function(){return new ie(this,se)}}return function(){return new ie(this)}},ae=U+" Iterator",bt=!1,et=Z.prototype,Je=et[P]||et["@@iterator"]||F&&et[F],fe=!E&&Je||Ee(F),ke=U=="Array"&&et.entries||Je,V,H,$;if(ke&&(V=s(ke.call(new Z)),C!==Object.prototype&&V.next&&(!p&&s(V)!==C&&(o?o(V,C):typeof V[P]!="function"&&u(V,P,W)),l(V,ae,!0,!0),p&&(y[ae]=W))),F==O&&Je&&Je.name!==O&&(bt=!0,fe=function(){return Je.call(this)}),(!p||ye)&&et[P]!==fe&&u(et,P,fe),y[U]=fe,F)if(H={values:Ee(O),keys:te?fe:Ee(M),entries:Ee(N)},ye)for($ in H)(E||bt||!($ in et))&&f(et,$,H[$]);else n({target:U,proto:!0,forced:E||bt},H);return H}},"./node_modules/core-js/internals/descriptors.js":function(i,e,t){var n=t("./node_modules/core-js/internals/fails.js");i.exports=!n(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/document-create-element.js":function(i,e,t){var n=t("./node_modules/core-js/internals/global.js"),r=t("./node_modules/core-js/internals/is-object.js"),s=n.document,o=r(s)&&r(s.createElement);i.exports=function(l){return o?s.createElement(l):{}}},"./node_modules/core-js/internals/enum-bug-keys.js":function(i,e){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(i,e,t){var n=t("./node_modules/core-js/internals/global.js"),r=t("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,s=t("./node_modules/core-js/internals/hide.js"),o=t("./node_modules/core-js/internals/redefine.js"),l=t("./node_modules/core-js/internals/set-global.js"),u=t("./node_modules/core-js/internals/copy-constructor-properties.js"),f=t("./node_modules/core-js/internals/is-forced.js");i.exports=function(g,p){var y=g.target,_=g.global,C=g.stat,E,P,M,O,N,W;if(_?P=n:C?P=n[y]||l(y,{}):P=(n[y]||{}).prototype,P)for(M in p){if(N=p[M],g.noTargetGet?(W=r(P,M),O=W&&W.value):O=P[M],E=f(_?M:y+(C?".":"#")+M,g.forced),!E&&O!==void 0){if(typeof N==typeof O)continue;u(N,O)}(g.sham||O&&O.sham)&&s(N,"sham",!0),o(P,M,N,g)}}},"./node_modules/core-js/internals/fails.js":function(i,e){i.exports=function(t){try{return!!t()}catch(n){return!0}}},"./node_modules/core-js/internals/function-to-string.js":function(i,e,t){var n=t("./node_modules/core-js/internals/shared.js");i.exports=n("native-function-to-string",Function.toString)},"./node_modules/core-js/internals/get-iterator-method.js":function(i,e,t){var n=t("./node_modules/core-js/internals/classof.js"),r=t("./node_modules/core-js/internals/iterators.js"),s=t("./node_modules/core-js/internals/well-known-symbol.js"),o=s("iterator");i.exports=function(l){if(l!=null)return l[o]||l["@@iterator"]||r[n(l)]}},"./node_modules/core-js/internals/global.js":function(i,e,t){(function(n){var r="object",s=function(o){return o&&o.Math==Math&&o};i.exports=s(typeof globalThis==r&&globalThis)||s(typeof window==r&&window)||s(typeof self==r&&self)||s(typeof n==r&&n)||Function("return this")()}).call(this,t("./node_modules/webpack/buildin/global.js"))},"./node_modules/core-js/internals/has.js":function(i,e){var t={}.hasOwnProperty;i.exports=function(n,r){return t.call(n,r)}},"./node_modules/core-js/internals/hidden-keys.js":function(i,e){i.exports={}},"./node_modules/core-js/internals/hide.js":function(i,e,t){var n=t("./node_modules/core-js/internals/descriptors.js"),r=t("./node_modules/core-js/internals/object-define-property.js"),s=t("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=n?function(o,l,u){return r.f(o,l,s(1,u))}:function(o,l,u){return o[l]=u,o}},"./node_modules/core-js/internals/html.js":function(i,e,t){var n=t("./node_modules/core-js/internals/global.js"),r=n.document;i.exports=r&&r.documentElement},"./node_modules/core-js/internals/ie8-dom-define.js":function(i,e,t){var n=t("./node_modules/core-js/internals/descriptors.js"),r=t("./node_modules/core-js/internals/fails.js"),s=t("./node_modules/core-js/internals/document-create-element.js");i.exports=!n&&!r(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(i,e,t){var n=t("./node_modules/core-js/internals/fails.js"),r=t("./node_modules/core-js/internals/classof-raw.js"),s="".split;i.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(o){return r(o)=="String"?s.call(o,""):Object(o)}:Object},"./node_modules/core-js/internals/internal-state.js":function(i,e,t){var n=t("./node_modules/core-js/internals/native-weak-map.js"),r=t("./node_modules/core-js/internals/global.js"),s=t("./node_modules/core-js/internals/is-object.js"),o=t("./node_modules/core-js/internals/hide.js"),l=t("./node_modules/core-js/internals/has.js"),u=t("./node_modules/core-js/internals/shared-key.js"),f=t("./node_modules/core-js/internals/hidden-keys.js"),g=r.WeakMap,p,y,_,C=function(Z){return _(Z)?y(Z):p(Z,{})},E=function(Z){return function(U){var ie;if(!s(U)||(ie=y(U)).type!==Z)throw TypeError("Incompatible receiver, "+Z+" required");return ie}};if(n){var P=new g,M=P.get,O=P.has,N=P.set;p=function(Z,U){return N.call(P,Z,U),U},y=function(Z){return M.call(P,Z)||{}},_=function(Z){return O.call(P,Z)}}else{var W=u("state");f[W]=!0,p=function(Z,U){return o(Z,W,U),U},y=function(Z){return l(Z,W)?Z[W]:{}},_=function(Z){return l(Z,W)}}i.exports={set:p,get:y,has:_,enforce:C,getterFor:E}},"./node_modules/core-js/internals/is-array-iterator-method.js":function(i,e,t){var n=t("./node_modules/core-js/internals/well-known-symbol.js"),r=t("./node_modules/core-js/internals/iterators.js"),s=n("iterator"),o=Array.prototype;i.exports=function(l){return l!==void 0&&(r.Array===l||o[s]===l)}},"./node_modules/core-js/internals/is-forced.js":function(i,e,t){var n=t("./node_modules/core-js/internals/fails.js"),r=/#|\.prototype\./,s=function(g,p){var y=l[o(g)];return y==f?!0:y==u?!1:typeof p=="function"?n(p):!!p},o=s.normalize=function(g){return String(g).replace(r,".").toLowerCase()},l=s.data={},u=s.NATIVE="N",f=s.POLYFILL="P";i.exports=s},"./node_modules/core-js/internals/is-object.js":function(i,e){i.exports=function(t){return typeof t=="object"?t!==null:typeof t=="function"}},"./node_modules/core-js/internals/is-pure.js":function(i,e){i.exports=!1},"./node_modules/core-js/internals/iterators-core.js":function(i,e,t){"use strict";var n=t("./node_modules/core-js/internals/object-get-prototype-of.js"),r=t("./node_modules/core-js/internals/hide.js"),s=t("./node_modules/core-js/internals/has.js"),o=t("./node_modules/core-js/internals/well-known-symbol.js"),l=t("./node_modules/core-js/internals/is-pure.js"),u=o("iterator"),f=!1,g=function(){return this},p,y,_;[].keys&&(_=[].keys(),"next"in _?(y=n(n(_)),y!==Object.prototype&&(p=y)):f=!0),p==null&&(p={}),!l&&!s(p,u)&&r(p,u,g),i.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:f}},"./node_modules/core-js/internals/iterators.js":function(i,e){i.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(i,e,t){var n=t("./node_modules/core-js/internals/fails.js");i.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())})},"./node_modules/core-js/internals/native-weak-map.js":function(i,e,t){var n=t("./node_modules/core-js/internals/global.js"),r=t("./node_modules/core-js/internals/function-to-string.js"),s=n.WeakMap;i.exports=typeof s=="function"&&/native code/.test(r.call(s))},"./node_modules/core-js/internals/object-create.js":function(i,e,t){var n=t("./node_modules/core-js/internals/an-object.js"),r=t("./node_modules/core-js/internals/object-define-properties.js"),s=t("./node_modules/core-js/internals/enum-bug-keys.js"),o=t("./node_modules/core-js/internals/hidden-keys.js"),l=t("./node_modules/core-js/internals/html.js"),u=t("./node_modules/core-js/internals/document-create-element.js"),f=t("./node_modules/core-js/internals/shared-key.js"),g=f("IE_PROTO"),p="prototype",y=function(){},_=function(){var C=u("iframe"),E=s.length,P="<",M="script",O=">",N="java"+M+":",W;for(C.style.display="none",l.appendChild(C),C.src=String(N),W=C.contentWindow.document,W.open(),W.write(P+M+O+"document.F=Object"+P+"/"+M+O),W.close(),_=W.F;E--;)delete _[p][s[E]];return _()};i.exports=Object.create||function(E,P){var M;return E!==null?(y[p]=n(E),M=new y,y[p]=null,M[g]=E):M=_(),P===void 0?M:r(M,P)},o[g]=!0},"./node_modules/core-js/internals/object-define-properties.js":function(i,e,t){var n=t("./node_modules/core-js/internals/descriptors.js"),r=t("./node_modules/core-js/internals/object-define-property.js"),s=t("./node_modules/core-js/internals/an-object.js"),o=t("./node_modules/core-js/internals/object-keys.js");i.exports=n?Object.defineProperties:function(u,f){s(u);for(var g=o(f),p=g.length,y=0,_;p>y;)r.f(u,_=g[y++],f[_]);return u}},"./node_modules/core-js/internals/object-define-property.js":function(i,e,t){var n=t("./node_modules/core-js/internals/descriptors.js"),r=t("./node_modules/core-js/internals/ie8-dom-define.js"),s=t("./node_modules/core-js/internals/an-object.js"),o=t("./node_modules/core-js/internals/to-primitive.js"),l=Object.defineProperty;e.f=n?l:function(f,g,p){if(s(f),g=o(g,!0),s(p),r)try{return l(f,g,p)}catch(y){}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(f[g]=p.value),f}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(i,e,t){var n=t("./node_modules/core-js/internals/descriptors.js"),r=t("./node_modules/core-js/internals/object-property-is-enumerable.js"),s=t("./node_modules/core-js/internals/create-property-descriptor.js"),o=t("./node_modules/core-js/internals/to-indexed-object.js"),l=t("./node_modules/core-js/internals/to-primitive.js"),u=t("./node_modules/core-js/internals/has.js"),f=t("./node_modules/core-js/internals/ie8-dom-define.js"),g=Object.getOwnPropertyDescriptor;e.f=n?g:function(y,_){if(y=o(y),_=l(_,!0),f)try{return g(y,_)}catch(C){}if(u(y,_))return s(!r.f.call(y,_),y[_])}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(i,e,t){var n=t("./node_modules/core-js/internals/object-keys-internal.js"),r=t("./node_modules/core-js/internals/enum-bug-keys.js"),s=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(l){return n(l,s)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(i,e){e.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(i,e,t){var n=t("./node_modules/core-js/internals/has.js"),r=t("./node_modules/core-js/internals/to-object.js"),s=t("./node_modules/core-js/internals/shared-key.js"),o=t("./node_modules/core-js/internals/correct-prototype-getter.js"),l=s("IE_PROTO"),u=Object.prototype;i.exports=o?Object.getPrototypeOf:function(f){return f=r(f),n(f,l)?f[l]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?u:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(i,e,t){var n=t("./node_modules/core-js/internals/has.js"),r=t("./node_modules/core-js/internals/to-indexed-object.js"),s=t("./node_modules/core-js/internals/array-includes.js"),o=t("./node_modules/core-js/internals/hidden-keys.js"),l=s(!1);i.exports=function(u,f){var g=r(u),p=0,y=[],_;for(_ in g)!n(o,_)&&n(g,_)&&y.push(_);for(;f.length>p;)n(g,_=f[p++])&&(~l(y,_)||y.push(_));return y}},"./node_modules/core-js/internals/object-keys.js":function(i,e,t){var n=t("./node_modules/core-js/internals/object-keys-internal.js"),r=t("./node_modules/core-js/internals/enum-bug-keys.js");i.exports=Object.keys||function(o){return n(o,r)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(i,e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!n.call({1:2},1);e.f=s?function(l){var u=r(this,l);return!!u&&u.enumerable}:n},"./node_modules/core-js/internals/object-set-prototype-of.js":function(i,e,t){var n=t("./node_modules/core-js/internals/validate-set-prototype-of-arguments.js");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,s={},o;try{o=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,o.call(s,[]),r=s instanceof Array}catch(l){}return function(u,f){return n(u,f),r?o.call(u,f):u.__proto__=f,u}}():void 0)},"./node_modules/core-js/internals/own-keys.js":function(i,e,t){var n=t("./node_modules/core-js/internals/global.js"),r=t("./node_modules/core-js/internals/object-get-own-property-names.js"),s=t("./node_modules/core-js/internals/object-get-own-property-symbols.js"),o=t("./node_modules/core-js/internals/an-object.js"),l=n.Reflect;i.exports=l&&l.ownKeys||function(f){var g=r.f(o(f)),p=s.f;return p?g.concat(p(f)):g}},"./node_modules/core-js/internals/path.js":function(i,e,t){i.exports=t("./node_modules/core-js/internals/global.js")},"./node_modules/core-js/internals/redefine.js":function(i,e,t){var n=t("./node_modules/core-js/internals/global.js"),r=t("./node_modules/core-js/internals/shared.js"),s=t("./node_modules/core-js/internals/hide.js"),o=t("./node_modules/core-js/internals/has.js"),l=t("./node_modules/core-js/internals/set-global.js"),u=t("./node_modules/core-js/internals/function-to-string.js"),f=t("./node_modules/core-js/internals/internal-state.js"),g=f.get,p=f.enforce,y=String(u).split("toString");r("inspectSource",function(_){return u.call(_)}),(i.exports=function(_,C,E,P){var M=P?!!P.unsafe:!1,O=P?!!P.enumerable:!1,N=P?!!P.noTargetGet:!1;if(typeof E=="function"&&(typeof C=="string"&&!o(E,"name")&&s(E,"name",C),p(E).source=y.join(typeof C=="string"?C:"")),_===n){O?_[C]=E:l(C,E);return}else M?!N&&_[C]&&(O=!0):delete _[C];O?_[C]=E:s(_,C,E)})(Function.prototype,"toString",function(){return typeof this=="function"&&g(this).source||u.call(this)})},"./node_modules/core-js/internals/require-object-coercible.js":function(i,e){i.exports=function(t){if(t==null)throw TypeError("Can't call method on "+t);return t}},"./node_modules/core-js/internals/set-global.js":function(i,e,t){var n=t("./node_modules/core-js/internals/global.js"),r=t("./node_modules/core-js/internals/hide.js");i.exports=function(s,o){try{r(n,s,o)}catch(l){n[s]=o}return o}},"./node_modules/core-js/internals/set-to-string-tag.js":function(i,e,t){var n=t("./node_modules/core-js/internals/object-define-property.js").f,r=t("./node_modules/core-js/internals/has.js"),s=t("./node_modules/core-js/internals/well-known-symbol.js"),o=s("toStringTag");i.exports=function(l,u,f){l&&!r(l=f?l:l.prototype,o)&&n(l,o,{configurable:!0,value:u})}},"./node_modules/core-js/internals/shared-key.js":function(i,e,t){var n=t("./node_modules/core-js/internals/shared.js"),r=t("./node_modules/core-js/internals/uid.js"),s=n("keys");i.exports=function(o){return s[o]||(s[o]=r(o))}},"./node_modules/core-js/internals/shared.js":function(i,e,t){var n=t("./node_modules/core-js/internals/global.js"),r=t("./node_modules/core-js/internals/set-global.js"),s=t("./node_modules/core-js/internals/is-pure.js"),o="__core-js_shared__",l=n[o]||r(o,{});(i.exports=function(u,f){return l[u]||(l[u]=f!==void 0?f:{})})("versions",[]).push({version:"3.1.3",mode:s?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-at.js":function(i,e,t){var n=t("./node_modules/core-js/internals/to-integer.js"),r=t("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(s,o,l){var u=String(r(s)),f=n(o),g=u.length,p,y;return f<0||f>=g?l?"":void 0:(p=u.charCodeAt(f),p<55296||p>56319||f+1===g||(y=u.charCodeAt(f+1))<56320||y>57343?l?u.charAt(f):p:l?u.slice(f,f+2):(p-55296<<10)+(y-56320)+65536)}},"./node_modules/core-js/internals/to-absolute-index.js":function(i,e,t){var n=t("./node_modules/core-js/internals/to-integer.js"),r=Math.max,s=Math.min;i.exports=function(o,l){var u=n(o);return u<0?r(u+l,0):s(u,l)}},"./node_modules/core-js/internals/to-indexed-object.js":function(i,e,t){var n=t("./node_modules/core-js/internals/indexed-object.js"),r=t("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(s){return n(r(s))}},"./node_modules/core-js/internals/to-integer.js":function(i,e){var t=Math.ceil,n=Math.floor;i.exports=function(r){return isNaN(r=+r)?0:(r>0?n:t)(r)}},"./node_modules/core-js/internals/to-length.js":function(i,e,t){var n=t("./node_modules/core-js/internals/to-integer.js"),r=Math.min;i.exports=function(s){return s>0?r(n(s),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(i,e,t){var n=t("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(r){return Object(n(r))}},"./node_modules/core-js/internals/to-primitive.js":function(i,e,t){var n=t("./node_modules/core-js/internals/is-object.js");i.exports=function(r,s){if(!n(r))return r;var o,l;if(s&&typeof(o=r.toString)=="function"&&!n(l=o.call(r))||typeof(o=r.valueOf)=="function"&&!n(l=o.call(r))||!s&&typeof(o=r.toString)=="function"&&!n(l=o.call(r)))return l;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/uid.js":function(i,e){var t=0,n=Math.random();i.exports=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++t+n).toString(36))}},"./node_modules/core-js/internals/validate-set-prototype-of-arguments.js":function(i,e,t){var n=t("./node_modules/core-js/internals/is-object.js"),r=t("./node_modules/core-js/internals/an-object.js");i.exports=function(s,o){if(r(s),!n(o)&&o!==null)throw TypeError("Can't set "+String(o)+" as a prototype")}},"./node_modules/core-js/internals/well-known-symbol.js":function(i,e,t){var n=t("./node_modules/core-js/internals/global.js"),r=t("./node_modules/core-js/internals/shared.js"),s=t("./node_modules/core-js/internals/uid.js"),o=t("./node_modules/core-js/internals/native-symbol.js"),l=n.Symbol,u=r("wks");i.exports=function(f){return u[f]||(u[f]=o&&l[f]||(o?l:s)("Symbol."+f))}},"./node_modules/core-js/modules/es.array.from.js":function(i,e,t){var n=t("./node_modules/core-js/internals/export.js"),r=t("./node_modules/core-js/internals/array-from.js"),s=t("./node_modules/core-js/internals/check-correctness-of-iteration.js"),o=!s(function(l){Array.from(l)});n({target:"Array",stat:!0,forced:o},{from:r})},"./node_modules/core-js/modules/es.string.iterator.js":function(i,e,t){"use strict";var n=t("./node_modules/core-js/internals/string-at.js"),r=t("./node_modules/core-js/internals/internal-state.js"),s=t("./node_modules/core-js/internals/define-iterator.js"),o="String Iterator",l=r.set,u=r.getterFor(o);s(String,"String",function(f){l(this,{type:o,string:String(f),index:0})},function(){var g=u(this),p=g.string,y=g.index,_;return y>=p.length?{value:void 0,done:!0}:(_=n(p,y,!0),g.index+=_.length,{value:_,done:!1})})},"./node_modules/webpack/buildin/global.js":function(i,e){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(n){typeof window=="object"&&(t=window)}i.exports=t},"./src/default-attrs.json":function(i){i.exports={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}},"./src/icon.js":function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(_){for(var C=1;C<arguments.length;C++){var E=arguments[C];for(var P in E)Object.prototype.hasOwnProperty.call(E,P)&&(_[P]=E[P])}return _},r=function(){function _(C,E){for(var P=0;P<E.length;P++){var M=E[P];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(C,M.key,M)}}return function(C,E,P){return E&&_(C.prototype,E),P&&_(C,P),C}}(),s=t("./node_modules/classnames/dedupe.js"),o=f(s),l=t("./src/default-attrs.json"),u=f(l);function f(_){return _&&_.__esModule?_:{default:_}}function g(_,C){if(!(_ instanceof C))throw new TypeError("Cannot call a class as a function")}var p=function(){function _(C,E){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];g(this,_),this.name=C,this.contents=E,this.tags=P,this.attrs=n({},u.default,{class:"feather feather-"+C})}return r(_,[{key:"toSvg",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=n({},this.attrs,E,{class:(0,o.default)(this.attrs.class,E.class)});return"<svg "+y(P)+">"+this.contents+"</svg>"}},{key:"toString",value:function(){return this.contents}}]),_}();function y(_){return Object.keys(_).map(function(C){return C+'="'+_[C]+'"'}).join(" ")}e.default=p},"./src/icons.js":function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("./src/icon.js"),r=f(n),s=t("./dist/icons.json"),o=f(s),l=t("./src/tags.json"),u=f(l);function f(g){return g&&g.__esModule?g:{default:g}}e.default=Object.keys(o.default).map(function(g){return new r.default(g,o.default[g],u.default[g])}).reduce(function(g,p){return g[p.name]=p,g},{})},"./src/index.js":function(i,e,t){"use strict";var n=t("./src/icons.js"),r=f(n),s=t("./src/to-svg.js"),o=f(s),l=t("./src/replace.js"),u=f(l);function f(g){return g&&g.__esModule?g:{default:g}}i.exports={icons:r.default,toSvg:o.default,replace:u.default}},"./src/replace.js":function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(y){for(var _=1;_<arguments.length;_++){var C=arguments[_];for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(y[E]=C[E])}return y},r=t("./node_modules/classnames/dedupe.js"),s=u(r),o=t("./src/icons.js"),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function f(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof document=="undefined")throw new Error("`feather.replace()` only works in a browser environment.");var _=document.querySelectorAll("[data-feather]");Array.from(_).forEach(function(C){return g(C,y)})}function g(y){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=p(y),E=C["data-feather"];if(delete C["data-feather"],l.default[E]===void 0){console.warn("feather: '"+E+"' is not a valid icon");return}var P=l.default[E].toSvg(n({},_,C,{class:(0,s.default)(_.class,C.class)})),M=new DOMParser().parseFromString(P,"image/svg+xml"),O=M.querySelector("svg");y.parentNode.replaceChild(O,y)}function p(y){return Array.from(y.attributes).reduce(function(_,C){return _[C.name]=C.value,_},{})}e.default=f},"./src/tags.json":function(i){i.exports={activity:["pulse","health","action","motion"],airplay:["stream","cast","mirroring"],"alert-circle":["warning","alert","danger"],"alert-octagon":["warning","alert","danger"],"alert-triangle":["warning","alert","danger"],"align-center":["text alignment","center"],"align-justify":["text alignment","justified"],"align-left":["text alignment","left"],"align-right":["text alignment","right"],anchor:[],archive:["index","box"],"at-sign":["mention","at","email","message"],award:["achievement","badge"],aperture:["camera","photo"],"bar-chart":["statistics","diagram","graph"],"bar-chart-2":["statistics","diagram","graph"],battery:["power","electricity"],"battery-charging":["power","electricity"],bell:["alarm","notification","sound"],"bell-off":["alarm","notification","silent"],bluetooth:["wireless"],"book-open":["read","library"],book:["read","dictionary","booklet","magazine","library"],bookmark:["read","clip","marker","tag"],box:["cube"],briefcase:["work","bag","baggage","folder"],calendar:["date"],camera:["photo"],cast:["chromecast","airplay"],"chevron-down":["expand"],"chevron-up":["collapse"],circle:["off","zero","record"],clipboard:["copy"],clock:["time","watch","alarm"],"cloud-drizzle":["weather","shower"],"cloud-lightning":["weather","bolt"],"cloud-rain":["weather"],"cloud-snow":["weather","blizzard"],cloud:["weather"],codepen:["logo"],codesandbox:["logo"],code:["source","programming"],coffee:["drink","cup","mug","tea","cafe","hot","beverage"],columns:["layout"],command:["keyboard","cmd","terminal","prompt"],compass:["navigation","safari","travel","direction"],copy:["clone","duplicate"],"corner-down-left":["arrow","return"],"corner-down-right":["arrow"],"corner-left-down":["arrow"],"corner-left-up":["arrow"],"corner-right-down":["arrow"],"corner-right-up":["arrow"],"corner-up-left":["arrow"],"corner-up-right":["arrow"],cpu:["processor","technology"],"credit-card":["purchase","payment","cc"],crop:["photo","image"],crosshair:["aim","target"],database:["storage","memory"],delete:["remove"],disc:["album","cd","dvd","music"],"dollar-sign":["currency","money","payment"],droplet:["water"],edit:["pencil","change"],"edit-2":["pencil","change"],"edit-3":["pencil","change"],eye:["view","watch"],"eye-off":["view","watch","hide","hidden"],"external-link":["outbound"],facebook:["logo","social"],"fast-forward":["music"],figma:["logo","design","tool"],"file-minus":["delete","remove","erase"],"file-plus":["add","create","new"],"file-text":["data","txt","pdf"],film:["movie","video"],filter:["funnel","hopper"],flag:["report"],"folder-minus":["directory"],"folder-plus":["directory"],folder:["directory"],framer:["logo","design","tool"],frown:["emoji","face","bad","sad","emotion"],gift:["present","box","birthday","party"],"git-branch":["code","version control"],"git-commit":["code","version control"],"git-merge":["code","version control"],"git-pull-request":["code","version control"],github:["logo","version control"],gitlab:["logo","version control"],globe:["world","browser","language","translate"],"hard-drive":["computer","server","memory","data"],hash:["hashtag","number","pound"],headphones:["music","audio","sound"],heart:["like","love","emotion"],"help-circle":["question mark"],hexagon:["shape","node.js","logo"],home:["house","living"],image:["picture"],inbox:["email"],instagram:["logo","camera"],key:["password","login","authentication","secure"],layers:["stack"],layout:["window","webpage"],"life-buoy":["help","life ring","support"],link:["chain","url"],"link-2":["chain","url"],linkedin:["logo","social media"],list:["options"],lock:["security","password","secure"],"log-in":["sign in","arrow","enter"],"log-out":["sign out","arrow","exit"],mail:["email","message"],"map-pin":["location","navigation","travel","marker"],map:["location","navigation","travel"],maximize:["fullscreen"],"maximize-2":["fullscreen","arrows","expand"],meh:["emoji","face","neutral","emotion"],menu:["bars","navigation","hamburger"],"message-circle":["comment","chat"],"message-square":["comment","chat"],"mic-off":["record","sound","mute"],mic:["record","sound","listen"],minimize:["exit fullscreen","close"],"minimize-2":["exit fullscreen","arrows","close"],minus:["subtract"],monitor:["tv","screen","display"],moon:["dark","night"],"more-horizontal":["ellipsis"],"more-vertical":["ellipsis"],"mouse-pointer":["arrow","cursor"],move:["arrows"],music:["note"],navigation:["location","travel"],"navigation-2":["location","travel"],octagon:["stop"],package:["box","container"],paperclip:["attachment"],pause:["music","stop"],"pause-circle":["music","audio","stop"],"pen-tool":["vector","drawing"],percent:["discount"],"phone-call":["ring"],"phone-forwarded":["call"],"phone-incoming":["call"],"phone-missed":["call"],"phone-off":["call","mute"],"phone-outgoing":["call"],phone:["call"],play:["music","start"],"pie-chart":["statistics","diagram"],"play-circle":["music","start"],plus:["add","new"],"plus-circle":["add","new"],"plus-square":["add","new"],pocket:["logo","save"],power:["on","off"],printer:["fax","office","device"],radio:["signal"],"refresh-cw":["synchronise","arrows"],"refresh-ccw":["arrows"],repeat:["loop","arrows"],rewind:["music"],"rotate-ccw":["arrow"],"rotate-cw":["arrow"],rss:["feed","subscribe"],save:["floppy disk"],scissors:["cut"],search:["find","magnifier","magnifying glass"],send:["message","mail","email","paper airplane","paper aeroplane"],settings:["cog","edit","gear","preferences"],"share-2":["network","connections"],shield:["security","secure"],"shield-off":["security","insecure"],"shopping-bag":["ecommerce","cart","purchase","store"],"shopping-cart":["ecommerce","cart","purchase","store"],shuffle:["music"],"skip-back":["music"],"skip-forward":["music"],slack:["logo"],slash:["ban","no"],sliders:["settings","controls"],smartphone:["cellphone","device"],smile:["emoji","face","happy","good","emotion"],speaker:["audio","music"],star:["bookmark","favorite","like"],"stop-circle":["media","music"],sun:["brightness","weather","light"],sunrise:["weather","time","morning","day"],sunset:["weather","time","evening","night"],tablet:["device"],tag:["label"],target:["logo","bullseye"],terminal:["code","command line","prompt"],thermometer:["temperature","celsius","fahrenheit","weather"],"thumbs-down":["dislike","bad","emotion"],"thumbs-up":["like","good","emotion"],"toggle-left":["on","off","switch"],"toggle-right":["on","off","switch"],tool:["settings","spanner"],trash:["garbage","delete","remove","bin"],"trash-2":["garbage","delete","remove","bin"],triangle:["delta"],truck:["delivery","van","shipping","transport","lorry"],tv:["television","stream"],twitch:["logo"],twitter:["logo","social"],type:["text"],umbrella:["rain","weather"],unlock:["security"],"user-check":["followed","subscribed"],"user-minus":["delete","remove","unfollow","unsubscribe"],"user-plus":["new","add","create","follow","subscribe"],"user-x":["delete","remove","unfollow","unsubscribe","unavailable"],user:["person","account"],users:["group"],"video-off":["camera","movie","film"],video:["camera","movie","film"],voicemail:["phone"],volume:["music","sound","mute"],"volume-1":["music","sound"],"volume-2":["music","sound"],"volume-x":["music","sound","mute"],watch:["clock","time"],"wifi-off":["disabled"],wifi:["connection","signal","wireless"],wind:["weather","air"],"x-circle":["cancel","close","delete","remove","times","clear"],"x-octagon":["delete","stop","alert","warning","times","clear"],"x-square":["cancel","close","delete","remove","times","clear"],x:["cancel","close","delete","remove","times","clear"],youtube:["logo","video","play"],"zap-off":["flash","camera","lightning"],zap:["flash","camera","lightning"],"zoom-in":["magnifying glass"],"zoom-out":["magnifying glass"]}},"./src/to-svg.js":function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("./src/icons.js"),r=s(n);function s(l){return l&&l.__esModule?l:{default:l}}function o(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(console.warn("feather.toSvg() is deprecated. Please use feather.icons[name].toSvg() instead."),!l)throw new Error("The required `key` (icon name) parameter is missing.");if(!r.default[l])throw new Error("No icon matching '"+l+"'. See the complete list of icons at https://feathericons.com");return r.default[l].toSvg(u)}e.default=o},0:function(i,e,t){t("./node_modules/core-js/es/array/from.js"),i.exports=t("./src/index.js")}})})});var JR=D((xye,ZR)=>{var xX=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),YR=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];function kX(i){let e=new Date,t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),n=(i-t)/1e3;for(let r=0;r<YR.length;r++){let s=YR[r];if(Math.abs(n)<s.amount)return xX.format(Math.round(n),s.name);n/=s.amount}}ZR.exports={formatTimeAgo:kX}});var u_=D((lPe,l6)=>{"use strict";l6.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var d_=D((uPe,u6)=>{var ef=u_(),c6={};for(let i of Object.keys(ef))c6[ef[i]]=i;var Pe={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};u6.exports=Pe;for(let i of Object.keys(Pe)){if(!("channels"in Pe[i]))throw new Error("missing channels property: "+i);if(!("labels"in Pe[i]))throw new Error("missing channel labels property: "+i);if(Pe[i].labels.length!==Pe[i].channels)throw new Error("channel and label counts mismatch: "+i);let{channels:e,labels:t}=Pe[i];delete Pe[i].channels,delete Pe[i].labels,Object.defineProperty(Pe[i],"channels",{value:e}),Object.defineProperty(Pe[i],"labels",{value:t})}Pe.rgb.hsl=function(i){let e=i[0]/255,t=i[1]/255,n=i[2]/255,r=Math.min(e,t,n),s=Math.max(e,t,n),o=s-r,l,u;s===r?l=0:e===s?l=(t-n)/o:t===s?l=2+(n-e)/o:n===s&&(l=4+(e-t)/o),l=Math.min(l*60,360),l<0&&(l+=360);let f=(r+s)/2;return s===r?u=0:f<=.5?u=o/(s+r):u=o/(2-s-r),[l,u*100,f*100]};Pe.rgb.hsv=function(i){let e,t,n,r,s,o=i[0]/255,l=i[1]/255,u=i[2]/255,f=Math.max(o,l,u),g=f-Math.min(o,l,u),p=function(y){return(f-y)/6/g+1/2};return g===0?(r=0,s=0):(s=g/f,e=p(o),t=p(l),n=p(u),o===f?r=n-t:l===f?r=1/3+e-n:u===f&&(r=2/3+t-e),r<0?r+=1:r>1&&(r-=1)),[r*360,s*100,f*100]};Pe.rgb.hwb=function(i){let e=i[0],t=i[1],n=i[2],r=Pe.rgb.hsl(i)[0],s=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[r,s*100,n*100]};Pe.rgb.cmyk=function(i){let e=i[0]/255,t=i[1]/255,n=i[2]/255,r=Math.min(1-e,1-t,1-n),s=(1-e-r)/(1-r)||0,o=(1-t-r)/(1-r)||0,l=(1-n-r)/(1-r)||0;return[s*100,o*100,l*100,r*100]};function Ude(i,e){return(i[0]-e[0])**2+(i[1]-e[1])**2+(i[2]-e[2])**2}Pe.rgb.keyword=function(i){let e=c6[i];if(e)return e;let t=1/0,n;for(let r of Object.keys(ef)){let s=ef[r],o=Ude(i,s);o<t&&(t=o,n=r)}return n};Pe.keyword.rgb=function(i){return ef[i]};Pe.rgb.xyz=function(i){let e=i[0]/255,t=i[1]/255,n=i[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let r=e*.4124+t*.3576+n*.1805,s=e*.2126+t*.7152+n*.0722,o=e*.0193+t*.1192+n*.9505;return[r*100,s*100,o*100]};Pe.rgb.lab=function(i){let e=Pe.rgb.xyz(i),t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;let s=116*n-16,o=500*(t-n),l=200*(n-r);return[s,o,l]};Pe.hsl.rgb=function(i){let e=i[0]/360,t=i[1]/100,n=i[2]/100,r,s,o;if(t===0)return o=n*255,[o,o,o];n<.5?r=n*(1+t):r=n+t-n*t;let l=2*n-r,u=[0,0,0];for(let f=0;f<3;f++)s=e+1/3*-(f-1),s<0&&s++,s>1&&s--,6*s<1?o=l+(r-l)*6*s:2*s<1?o=r:3*s<2?o=l+(r-l)*(2/3-s)*6:o=l,u[f]=o*255;return u};Pe.hsl.hsv=function(i){let e=i[0],t=i[1]/100,n=i[2]/100,r=t,s=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,r*=s<=1?s:2-s;let o=(n+t)/2,l=n===0?2*r/(s+r):2*t/(n+t);return[e,l*100,o*100]};Pe.hsv.rgb=function(i){let e=i[0]/60,t=i[1]/100,n=i[2]/100,r=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-t),l=255*n*(1-t*s),u=255*n*(1-t*(1-s));switch(n*=255,r){case 0:return[n,u,o];case 1:return[l,n,o];case 2:return[o,n,u];case 3:return[o,l,n];case 4:return[u,o,n];case 5:return[n,o,l]}};Pe.hsv.hsl=function(i){let e=i[0],t=i[1]/100,n=i[2]/100,r=Math.max(n,.01),s,o;o=(2-t)*n;let l=(2-t)*r;return s=t*r,s/=l<=1?l:2-l,s=s||0,o/=2,[e,s*100,o*100]};Pe.hwb.rgb=function(i){let e=i[0]/360,t=i[1]/100,n=i[2]/100,r=t+n,s;r>1&&(t/=r,n/=r);let o=Math.floor(6*e),l=1-n;s=6*e-o,(o&1)!=0&&(s=1-s);let u=t+s*(l-t),f,g,p;switch(o){default:case 6:case 0:f=l,g=u,p=t;break;case 1:f=u,g=l,p=t;break;case 2:f=t,g=l,p=u;break;case 3:f=t,g=u,p=l;break;case 4:f=u,g=t,p=l;break;case 5:f=l,g=t,p=u;break}return[f*255,g*255,p*255]};Pe.cmyk.rgb=function(i){let e=i[0]/100,t=i[1]/100,n=i[2]/100,r=i[3]/100,s=1-Math.min(1,e*(1-r)+r),o=1-Math.min(1,t*(1-r)+r),l=1-Math.min(1,n*(1-r)+r);return[s*255,o*255,l*255]};Pe.xyz.rgb=function(i){let e=i[0]/100,t=i[1]/100,n=i[2]/100,r,s,o;return r=e*3.2406+t*-1.5372+n*-.4986,s=e*-.9689+t*1.8758+n*.0415,o=e*.0557+t*-.204+n*1.057,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,r=Math.min(Math.max(0,r),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[r*255,s*255,o*255]};Pe.xyz.lab=function(i){let e=i[0],t=i[1],n=i[2];e/=95.047,t/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let r=116*t-16,s=500*(e-t),o=200*(t-n);return[r,s,o]};Pe.lab.xyz=function(i){let e=i[0],t=i[1],n=i[2],r,s,o;s=(e+16)/116,r=t/500+s,o=s-n/200;let l=s**3,u=r**3,f=o**3;return s=l>.008856?l:(s-16/116)/7.787,r=u>.008856?u:(r-16/116)/7.787,o=f>.008856?f:(o-16/116)/7.787,r*=95.047,s*=100,o*=108.883,[r,s,o]};Pe.lab.lch=function(i){let e=i[0],t=i[1],n=i[2],r;r=Math.atan2(n,t)*360/2/Math.PI,r<0&&(r+=360);let o=Math.sqrt(t*t+n*n);return[e,o,r]};Pe.lch.lab=function(i){let e=i[0],t=i[1],r=i[2]/360*2*Math.PI,s=t*Math.cos(r),o=t*Math.sin(r);return[e,s,o]};Pe.rgb.ansi16=function(i,e=null){let[t,n,r]=i,s=e===null?Pe.rgb.hsv(i)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return s===2&&(o+=60),o};Pe.hsv.ansi16=function(i){return Pe.rgb.ansi16(Pe.hsv.rgb(i),i[2])};Pe.rgb.ansi256=function(i){let e=i[0],t=i[1],n=i[2];return e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};Pe.ansi16.rgb=function(i){let e=i%10;if(e===0||e===7)return i>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let t=(~~(i>50)+1)*.5,n=(e&1)*t*255,r=(e>>1&1)*t*255,s=(e>>2&1)*t*255;return[n,r,s]};Pe.ansi256.rgb=function(i){if(i>=232){let s=(i-232)*10+8;return[s,s,s]}i-=16;let e,t=Math.floor(i/36)/5*255,n=Math.floor((e=i%36)/6)/5*255,r=e%6/5*255;return[t,n,r]};Pe.rgb.hex=function(i){let t=(((Math.round(i[0])&255)<<16)+((Math.round(i[1])&255)<<8)+(Math.round(i[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};Pe.hex.rgb=function(i){let e=i.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(l=>l+l).join(""));let n=parseInt(t,16),r=n>>16&255,s=n>>8&255,o=n&255;return[r,s,o]};Pe.rgb.hcg=function(i){let e=i[0]/255,t=i[1]/255,n=i[2]/255,r=Math.max(Math.max(e,t),n),s=Math.min(Math.min(e,t),n),o=r-s,l,u;return o<1?l=s/(1-o):l=0,o<=0?u=0:r===e?u=(t-n)/o%6:r===t?u=2+(n-e)/o:u=4+(e-t)/o,u/=6,u%=1,[u*360,o*100,l*100]};Pe.hsl.hcg=function(i){let e=i[1]/100,t=i[2]/100,n=t<.5?2*e*t:2*e*(1-t),r=0;return n<1&&(r=(t-.5*n)/(1-n)),[i[0],n*100,r*100]};Pe.hsv.hcg=function(i){let e=i[1]/100,t=i[2]/100,n=e*t,r=0;return n<1&&(r=(t-n)/(1-n)),[i[0],n*100,r*100]};Pe.hcg.rgb=function(i){let e=i[0]/360,t=i[1]/100,n=i[2]/100;if(t===0)return[n*255,n*255,n*255];let r=[0,0,0],s=e%1*6,o=s%1,l=1-o,u=0;switch(Math.floor(s)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=l,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=l,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=l}return u=(1-t)*n,[(t*r[0]+u)*255,(t*r[1]+u)*255,(t*r[2]+u)*255]};Pe.hcg.hsv=function(i){let e=i[1]/100,t=i[2]/100,n=e+t*(1-e),r=0;return n>0&&(r=e/n),[i[0],r*100,n*100]};Pe.hcg.hsl=function(i){let e=i[1]/100,n=i[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[i[0],r*100,n*100]};Pe.hcg.hwb=function(i){let e=i[1]/100,t=i[2]/100,n=e+t*(1-e);return[i[0],(n-e)*100,(1-n)*100]};Pe.hwb.hcg=function(i){let e=i[1]/100,t=i[2]/100,n=1-t,r=n-e,s=0;return r<1&&(s=(n-r)/(1-r)),[i[0],r*100,s*100]};Pe.apple.rgb=function(i){return[i[0]/65535*255,i[1]/65535*255,i[2]/65535*255]};Pe.rgb.apple=function(i){return[i[0]/255*65535,i[1]/255*65535,i[2]/255*65535]};Pe.gray.rgb=function(i){return[i[0]/100*255,i[0]/100*255,i[0]/100*255]};Pe.gray.hsl=function(i){return[0,0,i[0]]};Pe.gray.hsv=Pe.gray.hsl;Pe.gray.hwb=function(i){return[0,100,i[0]]};Pe.gray.cmyk=function(i){return[0,0,0,i[0]]};Pe.gray.lab=function(i){return[i[0],0,0]};Pe.gray.hex=function(i){let e=Math.round(i[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};Pe.rgb.gray=function(i){return[(i[0]+i[1]+i[2])/3/255*100]}});var h6=D((dPe,d6)=>{var zp=d_();function Wde(){let i={},e=Object.keys(zp);for(let t=e.length,n=0;n<t;n++)i[e[n]]={distance:-1,parent:null};return i}function qde(i){let e=Wde(),t=[i];for(e[i].distance=0;t.length;){let n=t.pop(),r=Object.keys(zp[n]);for(let s=r.length,o=0;o<s;o++){let l=r[o],u=e[l];u.distance===-1&&(u.distance=e[n].distance+1,u.parent=n,t.unshift(l))}}return e}function $de(i,e){return function(t){return e(i(t))}}function Gde(i,e){let t=[e[i].parent,i],n=zp[e[i].parent][i],r=e[i].parent;for(;e[r].parent;)t.unshift(e[r].parent),n=$de(zp[e[r].parent][r],n),r=e[r].parent;return n.conversion=t,n}d6.exports=function(i){let e=qde(i),t={},n=Object.keys(e);for(let r=n.length,s=0;s<r;s++){let o=n[s];e[o].parent!==null&&(t[o]=Gde(o,e))}return t}});var m6=D((hPe,f6)=>{var h_=d_(),Kde=h6(),bu={},Yde=Object.keys(h_);function Zde(i){let e=function(...t){let n=t[0];return n==null?n:(n.length>1&&(t=n),i(t))};return"conversion"in i&&(e.conversion=i.conversion),e}function Jde(i){let e=function(...t){let n=t[0];if(n==null)return n;n.length>1&&(t=n);let r=i(t);if(typeof r=="object")for(let s=r.length,o=0;o<s;o++)r[o]=Math.round(r[o]);return r};return"conversion"in i&&(e.conversion=i.conversion),e}Yde.forEach(i=>{bu[i]={},Object.defineProperty(bu[i],"channels",{value:h_[i].channels}),Object.defineProperty(bu[i],"labels",{value:h_[i].labels});let e=Kde(i);Object.keys(e).forEach(n=>{let r=e[n];bu[i][n]=Jde(r),bu[i][n].raw=Zde(r)})});f6.exports=bu});var qB=D((Ox,Mx)=>{(function(i,e){typeof Ox=="object"&&typeof Mx!="undefined"?Mx.exports=e():typeof define=="function"&&define.amd?define(e):(i=i||self,i.CodeMirror=e())})(Ox,function(){"use strict";var i=navigator.userAgent,e=navigator.platform,t=/gecko\/\d/i.test(i),n=/MSIE \d/.test(i),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(i),s=/Edge\/(\d+)/.exec(i),o=n||r||s,l=o&&(n?document.documentMode||6:+(s||r)[1]),u=!s&&/WebKit\//.test(i),f=u&&/Qt\/\d+\.\d+/.test(i),g=!s&&/Chrome\/(\d+)/.exec(i),p=g&&+g[1],y=/Opera\//.test(i),_=/Apple Computer/.test(navigator.vendor),C=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(i),E=/PhantomJS/.test(i),P=_&&(/Mobile\/\w+/.test(i)||navigator.maxTouchPoints>2),M=/Android/.test(i),O=P||M||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(i),N=P||/Mac/.test(e),W=/\bCrOS\b/.test(i),Z=/win/i.test(e),U=y&&i.match(/Version\/(\d*\.\d*)/);U&&(U=Number(U[1])),U&&U>=15&&(y=!1,u=!0);var ie=N&&(f||y&&(U==null||U<12.11)),X=t||o&&l>=9;function F(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}var te=function(a,c){var h=a.className,d=F(c).exec(h);if(d){var m=h.slice(d.index+d[0].length);a.className=h.slice(0,d.index)+(m?d[1]+m:"")}};function ye(a){for(var c=a.childNodes.length;c>0;--c)a.removeChild(a.firstChild);return a}function Ee(a,c){return ye(a).appendChild(c)}function ae(a,c,h,d){var m=document.createElement(a);if(h&&(m.className=h),d&&(m.style.cssText=d),typeof c=="string")m.appendChild(document.createTextNode(c));else if(c)for(var b=0;b<c.length;++b)m.appendChild(c[b]);return m}function bt(a,c,h,d){var m=ae(a,c,h,d);return m.setAttribute("role","presentation"),m}var et;document.createRange?et=function(a,c,h,d){var m=document.createRange();return m.setEnd(d||a,h),m.setStart(a,c),m}:et=function(a,c,h){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(m){return d}return d.collapse(!0),d.moveEnd("character",h),d.moveStart("character",c),d};function Je(a,c){if(c.nodeType==3&&(c=c.parentNode),a.contains)return a.contains(c);do if(c.nodeType==11&&(c=c.host),c==a)return!0;while(c=c.parentNode)}function fe(a){var c=a.ownerDocument||a,h;try{h=a.activeElement}catch(d){h=c.body||null}for(;h&&h.shadowRoot&&h.shadowRoot.activeElement;)h=h.shadowRoot.activeElement;return h}function ke(a,c){var h=a.className;F(c).test(h)||(a.className+=(h?" ":"")+c)}function V(a,c){for(var h=a.split(" "),d=0;d<h.length;d++)h[d]&&!F(h[d]).test(c)&&(c+=" "+h[d]);return c}var H=function(a){a.select()};P?H=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:o&&(H=function(a){try{a.select()}catch(c){}});function $(a){return a.display.wrapper.ownerDocument}function se(a){return _e(a.display.wrapper)}function _e(a){return a.getRootNode?a.getRootNode():a.ownerDocument}function nt(a){return $(a).defaultView}function Mt(a){var c=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,c)}}function ht(a,c,h){c||(c={});for(var d in a)a.hasOwnProperty(d)&&(h!==!1||!c.hasOwnProperty(d))&&(c[d]=a[d]);return c}function ce(a,c,h,d,m){c==null&&(c=a.search(/[^\s\u00a0]/),c==-1&&(c=a.length));for(var b=d||0,w=m||0;;){var x=a.indexOf("	",b);if(x<0||x>=c)return w+(c-b);w+=x-b,w+=h-w%h,b=x+1}}var pe=function(){this.id=null,this.f=null,this.time=0,this.handler=Mt(this.onTimeout,this)};pe.prototype.onTimeout=function(a){a.id=0,a.time<=+new Date?a.f():setTimeout(a.handler,a.time-+new Date)},pe.prototype.set=function(a,c){this.f=c;var h=+new Date+a;(!this.id||h<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,a),this.time=h)};function be(a,c){for(var h=0;h<a.length;++h)if(a[h]==c)return h;return-1}var He=50,ft={toString:function(){return"CodeMirror.Pass"}},rt={scroll:!1},ai={origin:"*mouse"},Et={origin:"+move"};function ot(a,c,h){for(var d=0,m=0;;){var b=a.indexOf("	",d);b==-1&&(b=a.length);var w=b-d;if(b==a.length||m+w>=c)return d+Math.min(w,c-m);if(m+=b-d,m+=h-m%h,d=b+1,m>=c)return d}}var li=[""];function Ps(a){for(;li.length<=a;)li.push(mt(li)+" ");return li[a]}function mt(a){return a[a.length-1]}function Rs(a,c){for(var h=[],d=0;d<a.length;d++)h[d]=c(a[d],d);return h}function Ub(a,c,h){for(var d=0,m=h(c);d<a.length&&h(a[d])<=m;)d++;a.splice(d,0,c)}function Lf(){}function $u(a,c){var h;return Object.create?h=Object.create(a):(Lf.prototype=a,h=new Lf),c&&ht(c,h),h}var Gu=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Nl(a){return/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||Gu.test(a))}function Os(a,c){return c?c.source.indexOf("\\w")>-1&&Nl(a)?!0:c.test(a):Nl(a)}function Df(a){for(var c in a)if(a.hasOwnProperty(c)&&a[c])return!1;return!0}var Vf=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ku(a){return a.charCodeAt(0)>=768&&Vf.test(a)}function Yu(a,c,h){for(;(h<0?c>0:c<a.length)&&Ku(a.charAt(c));)c+=h;return c}function _a(a,c,h){for(var d=c>h?-1:1;;){if(c==h)return c;var m=(c+h)/2,b=d<0?Math.ceil(m):Math.floor(m);if(b==c)return a(b)?c:h;a(b)?h=b:c=b+d}}function Wb(a,c,h,d){if(!a)return d(c,h,"ltr",0);for(var m=!1,b=0;b<a.length;++b){var w=a[b];(w.from<h&&w.to>c||c==h&&w.to==c)&&(d(Math.max(w.from,c),Math.min(w.to,h),w.level==1?"rtl":"ltr",b),m=!0)}m||d(c,h,"ltr")}var ko=null;function xa(a,c,h){var d;ko=null;for(var m=0;m<a.length;++m){var b=a[m];if(b.from<c&&b.to>c)return m;b.to==c&&(b.from!=b.to&&h=="before"?d=m:ko=m),b.from==c&&(b.from!=b.to&&h!="before"?d=m:ko=m)}return d!=null?d:ko}var qb=function(){var a="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",c="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function h(T){return T<=247?a.charAt(T):1424<=T&&T<=1524?"R":1536<=T&&T<=1785?c.charAt(T-1536):1774<=T&&T<=2220?"r":8192<=T&&T<=8203?"w":T==8204?"b":"L"}var d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,m=/[stwN]/,b=/[LRr]/,w=/[Lb1n]/,x=/[1n]/;function k(T,A,R){this.level=T,this.from=A,this.to=R}return function(T,A){var R=A=="ltr"?"L":"R";if(T.length==0||A=="ltr"&&!d.test(T))return!1;for(var j=T.length,B=[],G=0;G<j;++G)B.push(h(T.charCodeAt(G)));for(var J=0,oe=R;J<j;++J){var ue=B[J];ue=="m"?B[J]=oe:oe=ue}for(var ge=0,de=R;ge<j;++ge){var xe=B[ge];xe=="1"&&de=="r"?B[ge]="n":b.test(xe)&&(de=xe,xe=="r"&&(B[ge]="R"))}for(var Me=1,Re=B[0];Me<j-1;++Me){var Qe=B[Me];Qe=="+"&&Re=="1"&&B[Me+1]=="1"?B[Me]="1":Qe==","&&Re==B[Me+1]&&(Re=="1"||Re=="n")&&(B[Me]=Re),Re=Qe}for(var Rt=0;Rt<j;++Rt){var Ci=B[Rt];if(Ci==",")B[Rt]="N";else if(Ci=="%"){var Wt=void 0;for(Wt=Rt+1;Wt<j&&B[Wt]=="%";++Wt);for(var Rn=Rt&&B[Rt-1]=="!"||Wt<j&&B[Wt]=="1"?"1":"N",dn=Rt;dn<Wt;++dn)B[dn]=Rn;Rt=Wt-1}}for(var ui=0,hn=R;ui<j;++ui){var Li=B[ui];hn=="L"&&Li=="1"?B[ui]="L":b.test(Li)&&(hn=Li)}for(var mi=0;mi<j;++mi)if(m.test(B[mi])){var di=void 0;for(di=mi+1;di<j&&m.test(B[di]);++di);for(var Yt=(mi?B[mi-1]:R)=="L",fn=(di<j?B[di]:R)=="L",rc=Yt==fn?Yt?"L":"R":R,Lo=mi;Lo<di;++Lo)B[Lo]=rc;mi=di-1}for(var ji=[],rs,Ti=0;Ti<j;)if(w.test(B[Ti])){var $v=Ti;for(++Ti;Ti<j&&w.test(B[Ti]);++Ti);ji.push(new k(0,$v,Ti))}else{var Fs=Ti,Da=ji.length,Va=A=="rtl"?1:0;for(++Ti;Ti<j&&B[Ti]!="L";++Ti);for(var Yi=Fs;Yi<Ti;)if(x.test(B[Yi])){Fs<Yi&&(ji.splice(Da,0,new k(1,Fs,Yi)),Da+=Va);var sc=Yi;for(++Yi;Yi<Ti&&x.test(B[Yi]);++Yi);ji.splice(Da,0,new k(2,sc,Yi)),Da+=Va,Fs=Yi}else++Yi;Fs<Ti&&ji.splice(Da,0,new k(1,Fs,Ti))}return A=="ltr"&&(ji[0].level==1&&(rs=T.match(/^\s+/))&&(ji[0].from=rs[0].length,ji.unshift(new k(0,0,rs[0].length))),mt(ji).level==1&&(rs=T.match(/\s+$/))&&(mt(ji).to-=rs[0].length,ji.push(new k(0,j-rs[0].length,j)))),A=="rtl"?ji.reverse():ji}}();function vt(a,c){var h=a.order;return h==null&&(h=a.order=qb(a.text,c)),h}var Fl=[],Oe=function(a,c,h){if(a.addEventListener)a.addEventListener(c,h,!1);else if(a.attachEvent)a.attachEvent("on"+c,h);else{var d=a._handlers||(a._handlers={});d[c]=(d[c]||Fl).concat(h)}};function Zu(a,c){return a._handlers&&a._handlers[c]||Fl}function Mi(a,c,h){if(a.removeEventListener)a.removeEventListener(c,h,!1);else if(a.detachEvent)a.detachEvent("on"+c,h);else{var d=a._handlers,m=d&&d[c];if(m){var b=be(m,h);b>-1&&(d[c]=m.slice(0,b).concat(m.slice(b+1)))}}}function Bt(a,c){var h=Zu(a,c);if(!!h.length)for(var d=Array.prototype.slice.call(arguments,2),m=0;m<h.length;++m)h[m].apply(null,d)}function St(a,c,h){return typeof c=="string"&&(c={type:c,preventDefault:function(){this.defaultPrevented=!0}}),Bt(a,h||c.type,a,c),Y(c)||c.codemirrorIgnore}function Bf(a){var c=a._handlers&&a._handlers.cursorActivity;if(!!c)for(var h=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<c.length;++d)be(h,c[d])==-1&&h.push(c[d])}function An(a,c){return Zu(a,c).length>0}function S(a){a.prototype.on=function(c,h){Oe(this,c,h)},a.prototype.off=function(c,h){Mi(this,c,h)}}function I(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function z(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Y(a){return a.defaultPrevented!=null?a.defaultPrevented:a.returnValue==!1}function le(a){I(a),z(a)}function ve(a){return a.target||a.srcElement}function Ke(a){var c=a.which;return c==null&&(a.button&1?c=1:a.button&2?c=3:a.button&4&&(c=2)),N&&a.ctrlKey&&c==1&&(c=3),c}var Ae=function(){if(o&&l<9)return!1;var a=ae("div");return"draggable"in a||"dragDrop"in a}(),Xe;function Se(a){if(Xe==null){var c=ae("span","\u200B");Ee(a,ae("span",[c,document.createTextNode("x")])),a.firstChild.offsetHeight!=0&&(Xe=c.offsetWidth<=1&&c.offsetHeight>2&&!(o&&l<8))}var h=Xe?ae("span","\u200B"):ae("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return h.setAttribute("cm-text",""),h}var Ve;function At(a){if(Ve!=null)return Ve;var c=Ee(a,document.createTextNode("A\u062EA")),h=et(c,0,1).getBoundingClientRect(),d=et(c,1,2).getBoundingClientRect();return ye(a),!h||h.left==h.right?!1:Ve=d.right-h.right<3}var In=`

b`.split(/\n/).length!=3?function(a){for(var c=0,h=[],d=a.length;c<=d;){var m=a.indexOf(`
`,c);m==-1&&(m=a.length);var b=a.slice(c,a.charAt(m-1)=="\r"?m-1:m),w=b.indexOf("\r");w!=-1?(h.push(b.slice(0,w)),c+=w+1):(h.push(b),c=m+1)}return h}:function(a){return a.split(/\r\n?|\n/)},ln=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(c){return!1}}:function(a){var c;try{c=a.ownerDocument.selection.createRange()}catch(h){}return!c||c.parentElement()!=a?!1:c.compareEndPoints("StartToEnd",c)!=0},ka=function(){var a=ae("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),typeof a.oncopy=="function")}(),Qr=null;function $b(a){if(Qr!=null)return Qr;var c=Ee(a,ae("span","x")),h=c.getBoundingClientRect(),d=et(c,0,1).getBoundingClientRect();return Qr=Math.abs(h.left-d.left)>1}var Ca={},Co={};function Gb(a,c){arguments.length>2&&(c.dependencies=Array.prototype.slice.call(arguments,2)),Ca[a]=c}function Kb(a,c){Co[a]=c}function jl(a){if(typeof a=="string"&&Co.hasOwnProperty(a))a=Co[a];else if(a&&typeof a.name=="string"&&Co.hasOwnProperty(a.name)){var c=Co[a.name];typeof c=="string"&&(c={name:c}),a=$u(c,a),a.name=c.name}else{if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return jl("application/xml");if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return jl("application/json")}return typeof a=="string"?{name:a}:a||{name:"null"}}function Ju(a,c){c=jl(c);var h=Ca[c.name];if(!h)return Ju(a,"text/plain");var d=h(a,c);if(To.hasOwnProperty(c.name)){var m=To[c.name];for(var b in m)!m.hasOwnProperty(b)||(d.hasOwnProperty(b)&&(d["_"+b]=d[b]),d[b]=m[b])}if(d.name=c.name,c.helperType&&(d.helperType=c.helperType),c.modeProps)for(var w in c.modeProps)d[w]=c.modeProps[w];return d}var To={};function Yb(a,c){var h=To.hasOwnProperty(a)?To[a]:To[a]={};ht(c,h)}function Ms(a,c){if(c===!0)return c;if(a.copyState)return a.copyState(c);var h={};for(var d in c){var m=c[d];m instanceof Array&&(m=m.concat([])),h[d]=m}return h}function Zb(a,c){for(var h;a.innerMode&&(h=a.innerMode(c),!(!h||h.mode==a));)c=h.state,a=h.mode;return h||{mode:a,state:c}}function lk(a,c,h){return a.startState?a.startState(c,h):!0}var ci=function(a,c,h){this.pos=this.start=0,this.string=a,this.tabSize=c||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=h};ci.prototype.eol=function(){return this.pos>=this.string.length},ci.prototype.sol=function(){return this.pos==this.lineStart},ci.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ci.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ci.prototype.eat=function(a){var c=this.string.charAt(this.pos),h;if(typeof a=="string"?h=c==a:h=c&&(a.test?a.test(c):a(c)),h)return++this.pos,c},ci.prototype.eatWhile=function(a){for(var c=this.pos;this.eat(a););return this.pos>c},ci.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},ci.prototype.skipToEnd=function(){this.pos=this.string.length},ci.prototype.skipTo=function(a){var c=this.string.indexOf(a,this.pos);if(c>-1)return this.pos=c,!0},ci.prototype.backUp=function(a){this.pos-=a},ci.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ce(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ce(this.string,this.lineStart,this.tabSize):0)},ci.prototype.indentation=function(){return ce(this.string,null,this.tabSize)-(this.lineStart?ce(this.string,this.lineStart,this.tabSize):0)},ci.prototype.match=function(a,c,h){if(typeof a=="string"){var d=function(w){return h?w.toLowerCase():w},m=this.string.substr(this.pos,a.length);if(d(m)==d(a))return c!==!1&&(this.pos+=a.length),!0}else{var b=this.string.slice(this.pos).match(a);return b&&b.index>0?null:(b&&c!==!1&&(this.pos+=b[0].length),b)}},ci.prototype.current=function(){return this.string.slice(this.start,this.pos)},ci.prototype.hideFirstChars=function(a,c){this.lineStart+=a;try{return c()}finally{this.lineStart-=a}},ci.prototype.lookAhead=function(a){var c=this.lineOracle;return c&&c.lookAhead(a)},ci.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};function Ie(a,c){if(c-=a.first,c<0||c>=a.size)throw new Error("There is no line "+(c+a.first)+" in the document.");for(var h=a;!h.lines;)for(var d=0;;++d){var m=h.children[d],b=m.chunkSize();if(c<b){h=m;break}c-=b}return h.lines[c]}function Ta(a,c,h){var d=[],m=c.line;return a.iter(c.line,h.line+1,function(b){var w=b.text;m==h.line&&(w=w.slice(0,h.ch)),m==c.line&&(w=w.slice(c.ch)),d.push(w),++m}),d}function Jb(a,c,h){var d=[];return a.iter(c,h,function(m){d.push(m.text)}),d}function es(a,c){var h=c-a.height;if(h)for(var d=a;d;d=d.parent)d.height+=h}function Ct(a){if(a.parent==null)return null;for(var c=a.parent,h=be(c.lines,a),d=c.parent;d;c=d,d=d.parent)for(var m=0;d.children[m]!=c;++m)h+=d.children[m].chunkSize();return h+c.first}function Ea(a,c){var h=a.first;e:do{for(var d=0;d<a.children.length;++d){var m=a.children[d],b=m.height;if(c<b){a=m;continue e}c-=b,h+=m.chunkSize()}return h}while(!a.lines);for(var w=0;w<a.lines.length;++w){var x=a.lines[w],k=x.height;if(c<k)break;c-=k}return h+w}function Xu(a,c){return c>=a.first&&c<a.first+a.size}function Xb(a,c){return String(a.lineNumberFormatter(c+a.firstLineNumber))}function re(a,c,h){if(h===void 0&&(h=null),!(this instanceof re))return new re(a,c,h);this.line=a,this.ch=c,this.sticky=h}function ze(a,c){return a.line-c.line||a.ch-c.ch}function Qb(a,c){return a.sticky==c.sticky&&ze(a,c)==0}function ev(a){return re(a.line,a.ch)}function Nf(a,c){return ze(a,c)<0?c:a}function Ff(a,c){return ze(a,c)<0?a:c}function ck(a,c){return Math.max(a.first,Math.min(c,a.first+a.size-1))}function Ue(a,c){if(c.line<a.first)return re(a.first,0);var h=a.first+a.size-1;return c.line>h?re(h,Ie(a,h).text.length):ON(c,Ie(a,c.line).text.length)}function ON(a,c){var h=a.ch;return h==null||h>c?re(a.line,c):h<0?re(a.line,0):a}function uk(a,c){for(var h=[],d=0;d<c.length;d++)h[d]=Ue(a,c[d]);return h}var jf=function(a,c){this.state=a,this.lookAhead=c},ts=function(a,c,h,d){this.state=c,this.doc=a,this.line=h,this.maxLookAhead=d||0,this.baseTokens=null,this.baseTokenPos=1};ts.prototype.lookAhead=function(a){var c=this.doc.getLine(this.line+a);return c!=null&&a>this.maxLookAhead&&(this.maxLookAhead=a),c},ts.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=2;var c=this.baseTokens[this.baseTokenPos+1];return{type:c&&c.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}},ts.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ts.fromSaved=function(a,c,h){return c instanceof jf?new ts(a,Ms(a.mode,c.state),h,c.lookAhead):new ts(a,Ms(a.mode,c),h)},ts.prototype.save=function(a){var c=a!==!1?Ms(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new jf(c,this.maxLookAhead):c};function dk(a,c,h,d){var m=[a.state.modeGen],b={};bk(a,c.text,a.doc.mode,h,function(T,A){return m.push(T,A)},b,d);for(var w=h.state,x=function(T){h.baseTokens=m;var A=a.state.overlays[T],R=1,j=0;h.state=!0,bk(a,c.text,A.mode,h,function(B,G){for(var J=R;j<B;){var oe=m[R];oe>B&&m.splice(R,1,B,m[R+1],oe),R+=2,j=Math.min(B,oe)}if(!!G)if(A.opaque)m.splice(J,R-J,B,"overlay "+G),R=J+2;else for(;J<R;J+=2){var ue=m[J+1];m[J+1]=(ue?ue+" ":"")+"overlay "+G}},b),h.state=w,h.baseTokens=null,h.baseTokenPos=1},k=0;k<a.state.overlays.length;++k)x(k);return{styles:m,classes:b.bgClass||b.textClass?b:null}}function hk(a,c,h){if(!c.styles||c.styles[0]!=a.state.modeGen){var d=Qu(a,Ct(c)),m=c.text.length>a.options.maxHighlightLength&&Ms(a.doc.mode,d.state),b=dk(a,c,d);m&&(d.state=m),c.stateAfter=d.save(!m),c.styles=b.styles,b.classes?c.styleClasses=b.classes:c.styleClasses&&(c.styleClasses=null),h===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return c.styles}function Qu(a,c,h){var d=a.doc,m=a.display;if(!d.mode.startState)return new ts(d,!0,c);var b=MN(a,c,h),w=b>d.first&&Ie(d,b-1).stateAfter,x=w?ts.fromSaved(d,w,b):new ts(d,lk(d.mode),b);return d.iter(b,c,function(k){tv(a,k.text,x);var T=x.line;k.stateAfter=T==c-1||T%5==0||T>=m.viewFrom&&T<m.viewTo?x.save():null,x.nextLine()}),h&&(d.modeFrontier=x.line),x}function tv(a,c,h,d){var m=a.doc.mode,b=new ci(c,a.options.tabSize,h);for(b.start=b.pos=d||0,c==""&&fk(m,h.state);!b.eol();)iv(m,b,h.state),b.start=b.pos}function fk(a,c){if(a.blankLine)return a.blankLine(c);if(!!a.innerMode){var h=Zb(a,c);if(h.mode.blankLine)return h.mode.blankLine(h.state)}}function iv(a,c,h,d){for(var m=0;m<10;m++){d&&(d[0]=Zb(a,h).mode);var b=a.token(c,h);if(c.pos>c.start)return b}throw new Error("Mode "+a.name+" failed to advance stream.")}var mk=function(a,c,h){this.start=a.start,this.end=a.pos,this.string=a.current(),this.type=c||null,this.state=h};function gk(a,c,h,d){var m=a.doc,b=m.mode,w;c=Ue(m,c);var x=Ie(m,c.line),k=Qu(a,c.line,h),T=new ci(x.text,a.options.tabSize,k),A;for(d&&(A=[]);(d||T.pos<c.ch)&&!T.eol();)T.start=T.pos,w=iv(b,T,k.state),d&&A.push(new mk(T,w,Ms(m.mode,k.state)));return d?A:new mk(T,w,k.state)}function pk(a,c){if(a)for(;;){var h=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!h)break;a=a.slice(0,h.index)+a.slice(h.index+h[0].length);var d=h[1]?"bgClass":"textClass";c[d]==null?c[d]=h[2]:new RegExp("(?:^|\\s)"+h[2]+"(?:$|\\s)").test(c[d])||(c[d]+=" "+h[2])}return a}function bk(a,c,h,d,m,b,w){var x=h.flattenSpans;x==null&&(x=a.options.flattenSpans);var k=0,T=null,A=new ci(c,a.options.tabSize,d),R,j=a.options.addModeClass&&[null];for(c==""&&pk(fk(h,d.state),b);!A.eol();){if(A.pos>a.options.maxHighlightLength?(x=!1,w&&tv(a,c,d,A.pos),A.pos=c.length,R=null):R=pk(iv(h,A,d.state,j),b),j){var B=j[0].name;B&&(R="m-"+(R?B+" "+R:B))}if(!x||T!=R){for(;k<A.start;)k=Math.min(A.start,k+5e3),m(k,T);T=R}A.start=A.pos}for(;k<A.pos;){var G=Math.min(A.pos,k+5e3);m(G,T),k=G}}function MN(a,c,h){for(var d,m,b=a.doc,w=h?-1:c-(a.doc.mode.innerMode?1e3:100),x=c;x>w;--x){if(x<=b.first)return b.first;var k=Ie(b,x-1),T=k.stateAfter;if(T&&(!h||x+(T instanceof jf?T.lookAhead:0)<=b.modeFrontier))return x;var A=ce(k.text,null,a.options.tabSize);(m==null||d>A)&&(m=x-1,d=A)}return m}function LN(a,c){if(a.modeFrontier=Math.min(a.modeFrontier,c),!(a.highlightFrontier<c-10)){for(var h=a.first,d=c-1;d>h;d--){var m=Ie(a,d).stateAfter;if(m&&(!(m instanceof jf)||d+m.lookAhead<c)){h=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,h)}}var vk=!1,Ls=!1;function DN(){vk=!0}function VN(){Ls=!0}function Hf(a,c,h){this.marker=a,this.from=c,this.to=h}function ed(a,c){if(a)for(var h=0;h<a.length;++h){var d=a[h];if(d.marker==c)return d}}function BN(a,c){for(var h,d=0;d<a.length;++d)a[d]!=c&&(h||(h=[])).push(a[d]);return h}function NN(a,c,h){var d=h&&window.WeakSet&&(h.markedSpans||(h.markedSpans=new WeakSet));d&&a.markedSpans&&d.has(a.markedSpans)?a.markedSpans.push(c):(a.markedSpans=a.markedSpans?a.markedSpans.concat([c]):[c],d&&d.add(a.markedSpans)),c.marker.attachLine(a)}function FN(a,c,h){var d;if(a)for(var m=0;m<a.length;++m){var b=a[m],w=b.marker,x=b.from==null||(w.inclusiveLeft?b.from<=c:b.from<c);if(x||b.from==c&&w.type=="bookmark"&&(!h||!b.marker.insertLeft)){var k=b.to==null||(w.inclusiveRight?b.to>=c:b.to>c);(d||(d=[])).push(new Hf(w,b.from,k?null:b.to))}}return d}function jN(a,c,h){var d;if(a)for(var m=0;m<a.length;++m){var b=a[m],w=b.marker,x=b.to==null||(w.inclusiveRight?b.to>=c:b.to>c);if(x||b.from==c&&w.type=="bookmark"&&(!h||b.marker.insertLeft)){var k=b.from==null||(w.inclusiveLeft?b.from<=c:b.from<c);(d||(d=[])).push(new Hf(w,k?null:b.from-c,b.to==null?null:b.to-c))}}return d}function nv(a,c){if(c.full)return null;var h=Xu(a,c.from.line)&&Ie(a,c.from.line).markedSpans,d=Xu(a,c.to.line)&&Ie(a,c.to.line).markedSpans;if(!h&&!d)return null;var m=c.from.ch,b=c.to.ch,w=ze(c.from,c.to)==0,x=FN(h,m,w),k=jN(d,b,w),T=c.text.length==1,A=mt(c.text).length+(T?m:0);if(x)for(var R=0;R<x.length;++R){var j=x[R];if(j.to==null){var B=ed(k,j.marker);B?T&&(j.to=B.to==null?null:B.to+A):j.to=m}}if(k)for(var G=0;G<k.length;++G){var J=k[G];if(J.to!=null&&(J.to+=A),J.from==null){var oe=ed(x,J.marker);oe||(J.from=A,T&&(x||(x=[])).push(J))}else J.from+=A,T&&(x||(x=[])).push(J)}x&&(x=wk(x)),k&&k!=x&&(k=wk(k));var ue=[x];if(!T){var ge=c.text.length-2,de;if(ge>0&&x)for(var xe=0;xe<x.length;++xe)x[xe].to==null&&(de||(de=[])).push(new Hf(x[xe].marker,null,null));for(var Me=0;Me<ge;++Me)ue.push(de);ue.push(k)}return ue}function wk(a){for(var c=0;c<a.length;++c){var h=a[c];h.from!=null&&h.from==h.to&&h.marker.clearWhenEmpty!==!1&&a.splice(c--,1)}return a.length?a:null}function HN(a,c,h){var d=null;if(a.iter(c.line,h.line+1,function(B){if(B.markedSpans)for(var G=0;G<B.markedSpans.length;++G){var J=B.markedSpans[G].marker;J.readOnly&&(!d||be(d,J)==-1)&&(d||(d=[])).push(J)}}),!d)return null;for(var m=[{from:c,to:h}],b=0;b<d.length;++b)for(var w=d[b],x=w.find(0),k=0;k<m.length;++k){var T=m[k];if(!(ze(T.to,x.from)<0||ze(T.from,x.to)>0)){var A=[k,1],R=ze(T.from,x.from),j=ze(T.to,x.to);(R<0||!w.inclusiveLeft&&!R)&&A.push({from:T.from,to:x.from}),(j>0||!w.inclusiveRight&&!j)&&A.push({from:x.to,to:T.to}),m.splice.apply(m,A),k+=A.length-3}}return m}function yk(a){var c=a.markedSpans;if(!!c){for(var h=0;h<c.length;++h)c[h].marker.detachLine(a);a.markedSpans=null}}function _k(a,c){if(!!c){for(var h=0;h<c.length;++h)c[h].marker.attachLine(a);a.markedSpans=c}}function zf(a){return a.inclusiveLeft?-1:0}function Uf(a){return a.inclusiveRight?1:0}function rv(a,c){var h=a.lines.length-c.lines.length;if(h!=0)return h;var d=a.find(),m=c.find(),b=ze(d.from,m.from)||zf(a)-zf(c);if(b)return-b;var w=ze(d.to,m.to)||Uf(a)-Uf(c);return w||c.id-a.id}function xk(a,c){var h=Ls&&a.markedSpans,d;if(h)for(var m=void 0,b=0;b<h.length;++b)m=h[b],m.marker.collapsed&&(c?m.from:m.to)==null&&(!d||rv(d,m.marker)<0)&&(d=m.marker);return d}function kk(a){return xk(a,!0)}function Wf(a){return xk(a,!1)}function zN(a,c){var h=Ls&&a.markedSpans,d;if(h)for(var m=0;m<h.length;++m){var b=h[m];b.marker.collapsed&&(b.from==null||b.from<c)&&(b.to==null||b.to>c)&&(!d||rv(d,b.marker)<0)&&(d=b.marker)}return d}function Ck(a,c,h,d,m){var b=Ie(a,c),w=Ls&&b.markedSpans;if(w)for(var x=0;x<w.length;++x){var k=w[x];if(!!k.marker.collapsed){var T=k.marker.find(0),A=ze(T.from,h)||zf(k.marker)-zf(m),R=ze(T.to,d)||Uf(k.marker)-Uf(m);if(!(A>=0&&R<=0||A<=0&&R>=0)&&(A<=0&&(k.marker.inclusiveRight&&m.inclusiveLeft?ze(T.to,h)>=0:ze(T.to,h)>0)||A>=0&&(k.marker.inclusiveRight&&m.inclusiveLeft?ze(T.from,d)<=0:ze(T.from,d)<0)))return!0}}}function Rr(a){for(var c;c=kk(a);)a=c.find(-1,!0).line;return a}function UN(a){for(var c;c=Wf(a);)a=c.find(1,!0).line;return a}function WN(a){for(var c,h;c=Wf(a);)a=c.find(1,!0).line,(h||(h=[])).push(a);return h}function sv(a,c){var h=Ie(a,c),d=Rr(h);return h==d?c:Ct(d)}function Tk(a,c){if(c>a.lastLine())return c;var h=Ie(a,c),d;if(!Eo(a,h))return c;for(;d=Wf(h);)h=d.find(1,!0).line;return Ct(h)+1}function Eo(a,c){var h=Ls&&c.markedSpans;if(h){for(var d=void 0,m=0;m<h.length;++m)if(d=h[m],!!d.marker.collapsed){if(d.from==null)return!0;if(!d.marker.widgetNode&&d.from==0&&d.marker.inclusiveLeft&&ov(a,c,d))return!0}}}function ov(a,c,h){if(h.to==null){var d=h.marker.find(1,!0);return ov(a,d.line,ed(d.line.markedSpans,h.marker))}if(h.marker.inclusiveRight&&h.to==c.text.length)return!0;for(var m=void 0,b=0;b<c.markedSpans.length;++b)if(m=c.markedSpans[b],m.marker.collapsed&&!m.marker.widgetNode&&m.from==h.to&&(m.to==null||m.to!=h.from)&&(m.marker.inclusiveLeft||h.marker.inclusiveRight)&&ov(a,c,m))return!0}function Ds(a){a=Rr(a);for(var c=0,h=a.parent,d=0;d<h.lines.length;++d){var m=h.lines[d];if(m==a)break;c+=m.height}for(var b=h.parent;b;h=b,b=h.parent)for(var w=0;w<b.children.length;++w){var x=b.children[w];if(x==h)break;c+=x.height}return c}function qf(a){if(a.height==0)return 0;for(var c=a.text.length,h,d=a;h=kk(d);){var m=h.find(0,!0);d=m.from.line,c+=m.from.ch-m.to.ch}for(d=a;h=Wf(d);){var b=h.find(0,!0);c-=d.text.length-b.from.ch,d=b.to.line,c+=d.text.length-b.to.ch}return c}function av(a){var c=a.display,h=a.doc;c.maxLine=Ie(h,h.first),c.maxLineLength=qf(c.maxLine),c.maxLineChanged=!0,h.iter(function(d){var m=qf(d);m>c.maxLineLength&&(c.maxLineLength=m,c.maxLine=d)})}var Hl=function(a,c,h){this.text=a,_k(this,c),this.height=h?h(this):1};Hl.prototype.lineNo=function(){return Ct(this)},S(Hl);function qN(a,c,h,d){a.text=c,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),a.order!=null&&(a.order=null),yk(a),_k(a,h);var m=d?d(a):1;m!=a.height&&es(a,m)}function $N(a){a.parent=null,yk(a)}var GN={},KN={};function Ek(a,c){if(!a||/^\s*$/.test(a))return null;var h=c.addModeClass?KN:GN;return h[a]||(h[a]=a.replace(/\S+/g,"cm-$&"))}function Sk(a,c){var h=bt("span",null,null,u?"padding-right: .1px":null),d={pre:bt("pre",[h],"CodeMirror-line"),content:h,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:a.getOption("lineWrapping")};c.measure={};for(var m=0;m<=(c.rest?c.rest.length:0);m++){var b=m?c.rest[m-1]:c.line,w=void 0;d.pos=0,d.addToken=ZN,At(a.display.measure)&&(w=vt(b,a.doc.direction))&&(d.addToken=XN(d.addToken,w)),d.map=[];var x=c!=a.display.externalMeasured&&Ct(b);QN(b,d,hk(a,b,x)),b.styleClasses&&(b.styleClasses.bgClass&&(d.bgClass=V(b.styleClasses.bgClass,d.bgClass||"")),b.styleClasses.textClass&&(d.textClass=V(b.styleClasses.textClass,d.textClass||""))),d.map.length==0&&d.map.push(0,0,d.content.appendChild(Se(a.display.measure))),m==0?(c.measure.map=d.map,c.measure.cache={}):((c.measure.maps||(c.measure.maps=[])).push(d.map),(c.measure.caches||(c.measure.caches=[])).push({}))}if(u){var k=d.content.lastChild;(/\bcm-tab\b/.test(k.className)||k.querySelector&&k.querySelector(".cm-tab"))&&(d.content.className="cm-tab-wrap-hack")}return Bt(a,"renderLine",a,c.line,d.pre),d.pre.className&&(d.textClass=V(d.pre.className,d.textClass||"")),d}function YN(a){var c=ae("span","\u2022","cm-invalidchar");return c.title="\\u"+a.charCodeAt(0).toString(16),c.setAttribute("aria-label",c.title),c}function ZN(a,c,h,d,m,b,w){if(!!c){var x=a.splitSpaces?JN(c,a.trailingSpace):c,k=a.cm.state.specialChars,T=!1,A;if(!k.test(c))a.col+=c.length,A=document.createTextNode(x),a.map.push(a.pos,a.pos+c.length,A),o&&l<9&&(T=!0),a.pos+=c.length;else{A=document.createDocumentFragment();for(var R=0;;){k.lastIndex=R;var j=k.exec(c),B=j?j.index-R:c.length-R;if(B){var G=document.createTextNode(x.slice(R,R+B));o&&l<9?A.appendChild(ae("span",[G])):A.appendChild(G),a.map.push(a.pos,a.pos+B,G),a.col+=B,a.pos+=B}if(!j)break;R+=B+1;var J=void 0;if(j[0]=="	"){var oe=a.cm.options.tabSize,ue=oe-a.col%oe;J=A.appendChild(ae("span",Ps(ue),"cm-tab")),J.setAttribute("role","presentation"),J.setAttribute("cm-text","	"),a.col+=ue}else j[0]=="\r"||j[0]==`
`?(J=A.appendChild(ae("span",j[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),J.setAttribute("cm-text",j[0]),a.col+=1):(J=a.cm.options.specialCharPlaceholder(j[0]),J.setAttribute("cm-text",j[0]),o&&l<9?A.appendChild(ae("span",[J])):A.appendChild(J),a.col+=1);a.map.push(a.pos,a.pos+1,J),a.pos++}}if(a.trailingSpace=x.charCodeAt(c.length-1)==32,h||d||m||T||b||w){var ge=h||"";d&&(ge+=d),m&&(ge+=m);var de=ae("span",[A],ge,b);if(w)for(var xe in w)w.hasOwnProperty(xe)&&xe!="style"&&xe!="class"&&de.setAttribute(xe,w[xe]);return a.content.appendChild(de)}a.content.appendChild(A)}}function JN(a,c){if(a.length>1&&!/  /.test(a))return a;for(var h=c,d="",m=0;m<a.length;m++){var b=a.charAt(m);b==" "&&h&&(m==a.length-1||a.charCodeAt(m+1)==32)&&(b="\xA0"),d+=b,h=b==" "}return d}function XN(a,c){return function(h,d,m,b,w,x,k){m=m?m+" cm-force-border":"cm-force-border";for(var T=h.pos,A=T+d.length;;){for(var R=void 0,j=0;j<c.length&&(R=c[j],!(R.to>T&&R.from<=T));j++);if(R.to>=A)return a(h,d,m,b,w,x,k);a(h,d.slice(0,R.to-T),m,b,null,x,k),b=null,d=d.slice(R.to-T),T=R.to}}}function Ak(a,c,h,d){var m=!d&&h.widgetNode;m&&a.map.push(a.pos,a.pos+c,m),!d&&a.cm.display.input.needsContentAttribute&&(m||(m=a.content.appendChild(document.createElement("span"))),m.setAttribute("cm-marker",h.id)),m&&(a.cm.display.input.setUneditable(m),a.content.appendChild(m)),a.pos+=c,a.trailingSpace=!1}function QN(a,c,h){var d=a.markedSpans,m=a.text,b=0;if(!d){for(var w=1;w<h.length;w+=2)c.addToken(c,m.slice(b,b=h[w]),Ek(h[w+1],c.cm.options));return}for(var x=m.length,k=0,T=1,A="",R,j,B=0,G,J,oe,ue,ge;;){if(B==k){G=J=oe=j="",ge=null,ue=null,B=1/0;for(var de=[],xe=void 0,Me=0;Me<d.length;++Me){var Re=d[Me],Qe=Re.marker;if(Qe.type=="bookmark"&&Re.from==k&&Qe.widgetNode)de.push(Qe);else if(Re.from<=k&&(Re.to==null||Re.to>k||Qe.collapsed&&Re.to==k&&Re.from==k)){if(Re.to!=null&&Re.to!=k&&B>Re.to&&(B=Re.to,J=""),Qe.className&&(G+=" "+Qe.className),Qe.css&&(j=(j?j+";":"")+Qe.css),Qe.startStyle&&Re.from==k&&(oe+=" "+Qe.startStyle),Qe.endStyle&&Re.to==B&&(xe||(xe=[])).push(Qe.endStyle,Re.to),Qe.title&&((ge||(ge={})).title=Qe.title),Qe.attributes)for(var Rt in Qe.attributes)(ge||(ge={}))[Rt]=Qe.attributes[Rt];Qe.collapsed&&(!ue||rv(ue.marker,Qe)<0)&&(ue=Re)}else Re.from>k&&B>Re.from&&(B=Re.from)}if(xe)for(var Ci=0;Ci<xe.length;Ci+=2)xe[Ci+1]==B&&(J+=" "+xe[Ci]);if(!ue||ue.from==k)for(var Wt=0;Wt<de.length;++Wt)Ak(c,0,de[Wt]);if(ue&&(ue.from||0)==k){if(Ak(c,(ue.to==null?x+1:ue.to)-k,ue.marker,ue.from==null),ue.to==null)return;ue.to==k&&(ue=!1)}}if(k>=x)break;for(var Rn=Math.min(x,B);;){if(A){var dn=k+A.length;if(!ue){var ui=dn>Rn?A.slice(0,Rn-k):A;c.addToken(c,ui,R?R+G:G,oe,k+ui.length==B?J:"",j,ge)}if(dn>=Rn){A=A.slice(Rn-k),k=Rn;break}k=dn,oe=""}A=m.slice(b,b=h[T++]),R=Ek(h[T++],c.cm.options)}}}function Ik(a,c,h){this.line=c,this.rest=WN(c),this.size=this.rest?Ct(mt(this.rest))-h+1:1,this.node=this.text=null,this.hidden=Eo(a,c)}function $f(a,c,h){for(var d=[],m,b=c;b<h;b=m){var w=new Ik(a.doc,Ie(a.doc,b),b);m=b+w.size,d.push(w)}return d}var zl=null;function e8(a){zl?zl.ops.push(a):a.ownsGroup=zl={ops:[a],delayedCallbacks:[]}}function t8(a){var c=a.delayedCallbacks,h=0;do{for(;h<c.length;h++)c[h].call(null);for(var d=0;d<a.ops.length;d++){var m=a.ops[d];if(m.cursorActivityHandlers)for(;m.cursorActivityCalled<m.cursorActivityHandlers.length;)m.cursorActivityHandlers[m.cursorActivityCalled++].call(null,m.cm)}}while(h<c.length)}function i8(a,c){var h=a.ownsGroup;if(!!h)try{t8(h)}finally{zl=null,c(h)}}var td=null;function _i(a,c){var h=Zu(a,c);if(!!h.length){var d=Array.prototype.slice.call(arguments,2),m;zl?m=zl.delayedCallbacks:td?m=td:(m=td=[],setTimeout(n8,0));for(var b=function(x){m.push(function(){return h[x].apply(null,d)})},w=0;w<h.length;++w)b(w)}}function n8(){var a=td;td=null;for(var c=0;c<a.length;++c)a[c]()}function Pk(a,c,h,d){for(var m=0;m<c.changes.length;m++){var b=c.changes[m];b=="text"?s8(a,c):b=="gutter"?Ok(a,c,h,d):b=="class"?lv(a,c):b=="widget"&&o8(a,c,d)}c.changes=null}function id(a){return a.node==a.text&&(a.node=ae("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),o&&l<8&&(a.node.style.zIndex=2)),a.node}function r8(a,c){var h=c.bgClass?c.bgClass+" "+(c.line.bgClass||""):c.line.bgClass;if(h&&(h+=" CodeMirror-linebackground"),c.background)h?c.background.className=h:(c.background.parentNode.removeChild(c.background),c.background=null);else if(h){var d=id(c);c.background=d.insertBefore(ae("div",null,h),d.firstChild),a.display.input.setUneditable(c.background)}}function Rk(a,c){var h=a.display.externalMeasured;return h&&h.line==c.line?(a.display.externalMeasured=null,c.measure=h.measure,h.built):Sk(a,c)}function s8(a,c){var h=c.text.className,d=Rk(a,c);c.text==c.node&&(c.node=d.pre),c.text.parentNode.replaceChild(d.pre,c.text),c.text=d.pre,d.bgClass!=c.bgClass||d.textClass!=c.textClass?(c.bgClass=d.bgClass,c.textClass=d.textClass,lv(a,c)):h&&(c.text.className=h)}function lv(a,c){r8(a,c),c.line.wrapClass?id(c).className=c.line.wrapClass:c.node!=c.text&&(c.node.className="");var h=c.textClass?c.textClass+" "+(c.line.textClass||""):c.line.textClass;c.text.className=h||""}function Ok(a,c,h,d){if(c.gutter&&(c.node.removeChild(c.gutter),c.gutter=null),c.gutterBackground&&(c.node.removeChild(c.gutterBackground),c.gutterBackground=null),c.line.gutterClass){var m=id(c);c.gutterBackground=ae("div",null,"CodeMirror-gutter-background "+c.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px"),a.display.input.setUneditable(c.gutterBackground),m.insertBefore(c.gutterBackground,c.text)}var b=c.line.gutterMarkers;if(a.options.lineNumbers||b){var w=id(c),x=c.gutter=ae("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");if(x.setAttribute("aria-hidden","true"),a.display.input.setUneditable(x),w.insertBefore(x,c.text),c.line.gutterClass&&(x.className+=" "+c.line.gutterClass),a.options.lineNumbers&&(!b||!b["CodeMirror-linenumbers"])&&(c.lineNumber=x.appendChild(ae("div",Xb(a.options,h),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),b)for(var k=0;k<a.display.gutterSpecs.length;++k){var T=a.display.gutterSpecs[k].className,A=b.hasOwnProperty(T)&&b[T];A&&x.appendChild(ae("div",[A],"CodeMirror-gutter-elt","left: "+d.gutterLeft[T]+"px; width: "+d.gutterWidth[T]+"px"))}}}function o8(a,c,h){c.alignable&&(c.alignable=null);for(var d=F("CodeMirror-linewidget"),m=c.node.firstChild,b=void 0;m;m=b)b=m.nextSibling,d.test(m.className)&&c.node.removeChild(m);Mk(a,c,h)}function a8(a,c,h,d){var m=Rk(a,c);return c.text=c.node=m.pre,m.bgClass&&(c.bgClass=m.bgClass),m.textClass&&(c.textClass=m.textClass),lv(a,c),Ok(a,c,h,d),Mk(a,c,d),c.node}function Mk(a,c,h){if(Lk(a,c.line,c,h,!0),c.rest)for(var d=0;d<c.rest.length;d++)Lk(a,c.rest[d],c,h,!1)}function Lk(a,c,h,d,m){if(!!c.widgets)for(var b=id(h),w=0,x=c.widgets;w<x.length;++w){var k=x[w],T=ae("div",[k.node],"CodeMirror-linewidget"+(k.className?" "+k.className:""));k.handleMouseEvents||T.setAttribute("cm-ignore-events","true"),l8(k,T,h,d),a.display.input.setUneditable(T),m&&k.above?b.insertBefore(T,h.gutter||h.text):b.appendChild(T),_i(k,"redraw")}}function l8(a,c,h,d){if(a.noHScroll){(h.alignable||(h.alignable=[])).push(c);var m=d.wrapperWidth;c.style.left=d.fixedPos+"px",a.coverGutter||(m-=d.gutterTotalWidth,c.style.paddingLeft=d.gutterTotalWidth+"px"),c.style.width=m+"px"}a.coverGutter&&(c.style.zIndex=5,c.style.position="relative",a.noHScroll||(c.style.marginLeft=-d.gutterTotalWidth+"px"))}function nd(a){if(a.height!=null)return a.height;var c=a.doc.cm;if(!c)return 0;if(!Je(document.body,a.node)){var h="position: relative;";a.coverGutter&&(h+="margin-left: -"+c.display.gutters.offsetWidth+"px;"),a.noHScroll&&(h+="width: "+c.display.wrapper.clientWidth+"px;"),Ee(c.display.measure,ae("div",[a.node],null,h))}return a.height=a.node.parentNode.offsetHeight}function Vs(a,c){for(var h=ve(c);h!=a.wrapper;h=h.parentNode)if(!h||h.nodeType==1&&h.getAttribute("cm-ignore-events")=="true"||h.parentNode==a.sizer&&h!=a.mover)return!0}function Gf(a){return a.lineSpace.offsetTop}function cv(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Dk(a){if(a.cachedPaddingH)return a.cachedPaddingH;var c=Ee(a.measure,ae("pre","x","CodeMirror-line-like")),h=window.getComputedStyle?window.getComputedStyle(c):c.currentStyle,d={left:parseInt(h.paddingLeft),right:parseInt(h.paddingRight)};return!isNaN(d.left)&&!isNaN(d.right)&&(a.cachedPaddingH=d),d}function is(a){return He-a.display.nativeBarWidth}function Sa(a){return a.display.scroller.clientWidth-is(a)-a.display.barWidth}function uv(a){return a.display.scroller.clientHeight-is(a)-a.display.barHeight}function c8(a,c,h){var d=a.options.lineWrapping,m=d&&Sa(a);if(!c.measure.heights||d&&c.measure.width!=m){var b=c.measure.heights=[];if(d){c.measure.width=m;for(var w=c.text.firstChild.getClientRects(),x=0;x<w.length-1;x++){var k=w[x],T=w[x+1];Math.abs(k.bottom-T.bottom)>2&&b.push((k.bottom+T.top)/2-h.top)}}b.push(h.bottom-h.top)}}function Vk(a,c,h){if(a.line==c)return{map:a.measure.map,cache:a.measure.cache};if(a.rest){for(var d=0;d<a.rest.length;d++)if(a.rest[d]==c)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var m=0;m<a.rest.length;m++)if(Ct(a.rest[m])>h)return{map:a.measure.maps[m],cache:a.measure.caches[m],before:!0}}}function u8(a,c){c=Rr(c);var h=Ct(c),d=a.display.externalMeasured=new Ik(a.doc,c,h);d.lineN=h;var m=d.built=Sk(a,d);return d.text=m.pre,Ee(a.display.lineMeasure,m.pre),d}function Bk(a,c,h,d){return ns(a,Ul(a,c),h,d)}function dv(a,c){if(c>=a.display.viewFrom&&c<a.display.viewTo)return a.display.view[Pa(a,c)];var h=a.display.externalMeasured;if(h&&c>=h.lineN&&c<h.lineN+h.size)return h}function Ul(a,c){var h=Ct(c),d=dv(a,h);d&&!d.text?d=null:d&&d.changes&&(Pk(a,d,h,pv(a)),a.curOp.forceUpdate=!0),d||(d=u8(a,c));var m=Vk(d,c,h);return{line:c,view:d,rect:null,map:m.map,cache:m.cache,before:m.before,hasHeights:!1}}function ns(a,c,h,d,m){c.before&&(h=-1);var b=h+(d||""),w;return c.cache.hasOwnProperty(b)?w=c.cache[b]:(c.rect||(c.rect=c.view.text.getBoundingClientRect()),c.hasHeights||(c8(a,c.view,c.rect),c.hasHeights=!0),w=h8(a,c,h,d),w.bogus||(c.cache[b]=w)),{left:w.left,right:w.right,top:m?w.rtop:w.top,bottom:m?w.rbottom:w.bottom}}var Nk={left:0,right:0,top:0,bottom:0};function Fk(a,c,h){for(var d,m,b,w,x,k,T=0;T<a.length;T+=3)if(x=a[T],k=a[T+1],c<x?(m=0,b=1,w="left"):c<k?(m=c-x,b=m+1):(T==a.length-3||c==k&&a[T+3]>c)&&(b=k-x,m=b-1,c>=k&&(w="right")),m!=null){if(d=a[T+2],x==k&&h==(d.insertLeft?"left":"right")&&(w=h),h=="left"&&m==0)for(;T&&a[T-2]==a[T-3]&&a[T-1].insertLeft;)d=a[(T-=3)+2],w="left";if(h=="right"&&m==k-x)for(;T<a.length-3&&a[T+3]==a[T+4]&&!a[T+5].insertLeft;)d=a[(T+=3)+2],w="right";break}return{node:d,start:m,end:b,collapse:w,coverStart:x,coverEnd:k}}function d8(a,c){var h=Nk;if(c=="left")for(var d=0;d<a.length&&(h=a[d]).left==h.right;d++);else for(var m=a.length-1;m>=0&&(h=a[m]).left==h.right;m--);return h}function h8(a,c,h,d){var m=Fk(c.map,h,d),b=m.node,w=m.start,x=m.end,k=m.collapse,T;if(b.nodeType==3){for(var A=0;A<4;A++){for(;w&&Ku(c.line.text.charAt(m.coverStart+w));)--w;for(;m.coverStart+x<m.coverEnd&&Ku(c.line.text.charAt(m.coverStart+x));)++x;if(o&&l<9&&w==0&&x==m.coverEnd-m.coverStart?T=b.parentNode.getBoundingClientRect():T=d8(et(b,w,x).getClientRects(),d),T.left||T.right||w==0)break;x=w,w=w-1,k="right"}o&&l<11&&(T=f8(a.display.measure,T))}else{w>0&&(k=d="right");var R;a.options.lineWrapping&&(R=b.getClientRects()).length>1?T=R[d=="right"?R.length-1:0]:T=b.getBoundingClientRect()}if(o&&l<9&&!w&&(!T||!T.left&&!T.right)){var j=b.parentNode.getClientRects()[0];j?T={left:j.left,right:j.left+ql(a.display),top:j.top,bottom:j.bottom}:T=Nk}for(var B=T.top-c.rect.top,G=T.bottom-c.rect.top,J=(B+G)/2,oe=c.view.measure.heights,ue=0;ue<oe.length-1&&!(J<oe[ue]);ue++);var ge=ue?oe[ue-1]:0,de=oe[ue],xe={left:(k=="right"?T.right:T.left)-c.rect.left,right:(k=="left"?T.left:T.right)-c.rect.left,top:ge,bottom:de};return!T.left&&!T.right&&(xe.bogus=!0),a.options.singleCursorHeightPerLine||(xe.rtop=B,xe.rbottom=G),xe}function f8(a,c){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!$b(a))return c;var h=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:c.left*h,right:c.right*h,top:c.top*d,bottom:c.bottom*d}}function jk(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var c=0;c<a.rest.length;c++)a.measure.caches[c]={}}function Hk(a){a.display.externalMeasure=null,ye(a.display.lineMeasure);for(var c=0;c<a.display.view.length;c++)jk(a.display.view[c])}function rd(a){Hk(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function zk(a){return g&&M?-(a.body.getBoundingClientRect().left-parseInt(getComputedStyle(a.body).marginLeft)):a.defaultView.pageXOffset||(a.documentElement||a.body).scrollLeft}function Uk(a){return g&&M?-(a.body.getBoundingClientRect().top-parseInt(getComputedStyle(a.body).marginTop)):a.defaultView.pageYOffset||(a.documentElement||a.body).scrollTop}function hv(a){var c=Rr(a),h=c.widgets,d=0;if(h)for(var m=0;m<h.length;++m)h[m].above&&(d+=nd(h[m]));return d}function Kf(a,c,h,d,m){if(!m){var b=hv(c);h.top+=b,h.bottom+=b}if(d=="line")return h;d||(d="local");var w=Ds(c);if(d=="local"?w+=Gf(a.display):w-=a.display.viewOffset,d=="page"||d=="window"){var x=a.display.lineSpace.getBoundingClientRect();w+=x.top+(d=="window"?0:Uk($(a)));var k=x.left+(d=="window"?0:zk($(a)));h.left+=k,h.right+=k}return h.top+=w,h.bottom+=w,h}function Wk(a,c,h){if(h=="div")return c;var d=c.left,m=c.top;if(h=="page")d-=zk($(a)),m-=Uk($(a));else if(h=="local"||!h){var b=a.display.sizer.getBoundingClientRect();d+=b.left,m+=b.top}var w=a.display.lineSpace.getBoundingClientRect();return{left:d-w.left,top:m-w.top}}function Yf(a,c,h,d,m){return d||(d=Ie(a.doc,c.line)),Kf(a,d,Bk(a,d,c.ch,m),h)}function Or(a,c,h,d,m,b){d=d||Ie(a.doc,c.line),m||(m=Ul(a,d));function w(G,J){var oe=ns(a,m,G,J?"right":"left",b);return J?oe.left=oe.right:oe.right=oe.left,Kf(a,d,oe,h)}var x=vt(d,a.doc.direction),k=c.ch,T=c.sticky;if(k>=d.text.length?(k=d.text.length,T="before"):k<=0&&(k=0,T="after"),!x)return w(T=="before"?k-1:k,T=="before");function A(G,J,oe){var ue=x[J],ge=ue.level==1;return w(oe?G-1:G,ge!=oe)}var R=xa(x,k,T),j=ko,B=A(k,R,T=="before");return j!=null&&(B.other=A(k,j,T!="before")),B}function qk(a,c){var h=0;c=Ue(a.doc,c),a.options.lineWrapping||(h=ql(a.display)*c.ch);var d=Ie(a.doc,c.line),m=Ds(d)+Gf(a.display);return{left:h,right:h,top:m,bottom:m+d.height}}function fv(a,c,h,d,m){var b=re(a,c,h);return b.xRel=m,d&&(b.outside=d),b}function mv(a,c,h){var d=a.doc;if(h+=a.display.viewOffset,h<0)return fv(d.first,0,null,-1,-1);var m=Ea(d,h),b=d.first+d.size-1;if(m>b)return fv(d.first+d.size-1,Ie(d,b).text.length,null,1,1);c<0&&(c=0);for(var w=Ie(d,m);;){var x=m8(a,w,m,c,h),k=zN(w,x.ch+(x.xRel>0||x.outside>0?1:0));if(!k)return x;var T=k.find(1);if(T.line==m)return T;w=Ie(d,m=T.line)}}function $k(a,c,h,d){d-=hv(c);var m=c.text.length,b=_a(function(w){return ns(a,h,w-1).bottom<=d},m,0);return m=_a(function(w){return ns(a,h,w).top>d},b,m),{begin:b,end:m}}function Gk(a,c,h,d){h||(h=Ul(a,c));var m=Kf(a,c,ns(a,h,d),"line").top;return $k(a,c,h,m)}function gv(a,c,h,d){return a.bottom<=h?!1:a.top>h?!0:(d?a.left:a.right)>c}function m8(a,c,h,d,m){m-=Ds(c);var b=Ul(a,c),w=hv(c),x=0,k=c.text.length,T=!0,A=vt(c,a.doc.direction);if(A){var R=(a.options.lineWrapping?p8:g8)(a,c,h,b,A,d,m);T=R.level!=1,x=T?R.from:R.to-1,k=T?R.to:R.from-1}var j=null,B=null,G=_a(function(Me){var Re=ns(a,b,Me);return Re.top+=w,Re.bottom+=w,gv(Re,d,m,!1)?(Re.top<=m&&Re.left<=d&&(j=Me,B=Re),!0):!1},x,k),J,oe,ue=!1;if(B){var ge=d-B.left<B.right-d,de=ge==T;G=j+(de?0:1),oe=de?"after":"before",J=ge?B.left:B.right}else{!T&&(G==k||G==x)&&G++,oe=G==0?"after":G==c.text.length?"before":ns(a,b,G-(T?1:0)).bottom+w<=m==T?"after":"before";var xe=Or(a,re(h,G,oe),"line",c,b);J=xe.left,ue=m<xe.top?-1:m>=xe.bottom?1:0}return G=Yu(c.text,G,1),fv(h,G,oe,ue,d-J)}function g8(a,c,h,d,m,b,w){var x=_a(function(R){var j=m[R],B=j.level!=1;return gv(Or(a,re(h,B?j.to:j.from,B?"before":"after"),"line",c,d),b,w,!0)},0,m.length-1),k=m[x];if(x>0){var T=k.level!=1,A=Or(a,re(h,T?k.from:k.to,T?"after":"before"),"line",c,d);gv(A,b,w,!0)&&A.top>w&&(k=m[x-1])}return k}function p8(a,c,h,d,m,b,w){var x=$k(a,c,d,w),k=x.begin,T=x.end;/\s/.test(c.text.charAt(T-1))&&T--;for(var A=null,R=null,j=0;j<m.length;j++){var B=m[j];if(!(B.from>=T||B.to<=k)){var G=B.level!=1,J=ns(a,d,G?Math.min(T,B.to)-1:Math.max(k,B.from)).right,oe=J<b?b-J+1e9:J-b;(!A||R>oe)&&(A=B,R=oe)}}return A||(A=m[m.length-1]),A.from<k&&(A={from:k,to:A.to,level:A.level}),A.to>T&&(A={from:A.from,to:T,level:A.level}),A}var Aa;function Wl(a){if(a.cachedTextHeight!=null)return a.cachedTextHeight;if(Aa==null){Aa=ae("pre",null,"CodeMirror-line-like");for(var c=0;c<49;++c)Aa.appendChild(document.createTextNode("x")),Aa.appendChild(ae("br"));Aa.appendChild(document.createTextNode("x"))}Ee(a.measure,Aa);var h=Aa.offsetHeight/50;return h>3&&(a.cachedTextHeight=h),ye(a.measure),h||1}function ql(a){if(a.cachedCharWidth!=null)return a.cachedCharWidth;var c=ae("span","xxxxxxxxxx"),h=ae("pre",[c],"CodeMirror-line-like");Ee(a.measure,h);var d=c.getBoundingClientRect(),m=(d.right-d.left)/10;return m>2&&(a.cachedCharWidth=m),m||10}function pv(a){for(var c=a.display,h={},d={},m=c.gutters.clientLeft,b=c.gutters.firstChild,w=0;b;b=b.nextSibling,++w){var x=a.display.gutterSpecs[w].className;h[x]=b.offsetLeft+b.clientLeft+m,d[x]=b.clientWidth}return{fixedPos:bv(c),gutterTotalWidth:c.gutters.offsetWidth,gutterLeft:h,gutterWidth:d,wrapperWidth:c.wrapper.clientWidth}}function bv(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function Kk(a){var c=Wl(a.display),h=a.options.lineWrapping,d=h&&Math.max(5,a.display.scroller.clientWidth/ql(a.display)-3);return function(m){if(Eo(a.doc,m))return 0;var b=0;if(m.widgets)for(var w=0;w<m.widgets.length;w++)m.widgets[w].height&&(b+=m.widgets[w].height);return h?b+(Math.ceil(m.text.length/d)||1)*c:b+c}}function vv(a){var c=a.doc,h=Kk(a);c.iter(function(d){var m=h(d);m!=d.height&&es(d,m)})}function Ia(a,c,h,d){var m=a.display;if(!h&&ve(c).getAttribute("cm-not-content")=="true")return null;var b,w,x=m.lineSpace.getBoundingClientRect();try{b=c.clientX-x.left,w=c.clientY-x.top}catch(R){return null}var k=mv(a,b,w),T;if(d&&k.xRel>0&&(T=Ie(a.doc,k.line).text).length==k.ch){var A=ce(T,T.length,a.options.tabSize)-T.length;k=re(k.line,Math.max(0,Math.round((b-Dk(a.display).left)/ql(a.display))-A))}return k}function Pa(a,c){if(c>=a.display.viewTo||(c-=a.display.viewFrom,c<0))return null;for(var h=a.display.view,d=0;d<h.length;d++)if(c-=h[d].size,c<0)return d}function cn(a,c,h,d){c==null&&(c=a.doc.first),h==null&&(h=a.doc.first+a.doc.size),d||(d=0);var m=a.display;if(d&&h<m.viewTo&&(m.updateLineNumbers==null||m.updateLineNumbers>c)&&(m.updateLineNumbers=c),a.curOp.viewChanged=!0,c>=m.viewTo)Ls&&sv(a.doc,c)<m.viewTo&&Ao(a);else if(h<=m.viewFrom)Ls&&Tk(a.doc,h+d)>m.viewFrom?Ao(a):(m.viewFrom+=d,m.viewTo+=d);else if(c<=m.viewFrom&&h>=m.viewTo)Ao(a);else if(c<=m.viewFrom){var b=Zf(a,h,h+d,1);b?(m.view=m.view.slice(b.index),m.viewFrom=b.lineN,m.viewTo+=d):Ao(a)}else if(h>=m.viewTo){var w=Zf(a,c,c,-1);w?(m.view=m.view.slice(0,w.index),m.viewTo=w.lineN):Ao(a)}else{var x=Zf(a,c,c,-1),k=Zf(a,h,h+d,1);x&&k?(m.view=m.view.slice(0,x.index).concat($f(a,x.lineN,k.lineN)).concat(m.view.slice(k.index)),m.viewTo+=d):Ao(a)}var T=m.externalMeasured;T&&(h<T.lineN?T.lineN+=d:c<T.lineN+T.size&&(m.externalMeasured=null))}function So(a,c,h){a.curOp.viewChanged=!0;var d=a.display,m=a.display.externalMeasured;if(m&&c>=m.lineN&&c<m.lineN+m.size&&(d.externalMeasured=null),!(c<d.viewFrom||c>=d.viewTo)){var b=d.view[Pa(a,c)];if(b.node!=null){var w=b.changes||(b.changes=[]);be(w,h)==-1&&w.push(h)}}}function Ao(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function Zf(a,c,h,d){var m=Pa(a,c),b,w=a.display.view;if(!Ls||h==a.doc.first+a.doc.size)return{index:m,lineN:h};for(var x=a.display.viewFrom,k=0;k<m;k++)x+=w[k].size;if(x!=c){if(d>0){if(m==w.length-1)return null;b=x+w[m].size-c,m++}else b=x-c;c+=b,h+=b}for(;sv(a.doc,h)!=h;){if(m==(d<0?0:w.length-1))return null;h+=d*w[m-(d<0?1:0)].size,m+=d}return{index:m,lineN:h}}function b8(a,c,h){var d=a.display,m=d.view;m.length==0||c>=d.viewTo||h<=d.viewFrom?(d.view=$f(a,c,h),d.viewFrom=c):(d.viewFrom>c?d.view=$f(a,c,d.viewFrom).concat(d.view):d.viewFrom<c&&(d.view=d.view.slice(Pa(a,c))),d.viewFrom=c,d.viewTo<h?d.view=d.view.concat($f(a,d.viewTo,h)):d.viewTo>h&&(d.view=d.view.slice(0,Pa(a,h)))),d.viewTo=h}function Yk(a){for(var c=a.display.view,h=0,d=0;d<c.length;d++){var m=c[d];!m.hidden&&(!m.node||m.changes)&&++h}return h}function sd(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Zk(a,c){c===void 0&&(c=!0);var h=a.doc,d={},m=d.cursors=document.createDocumentFragment(),b=d.selection=document.createDocumentFragment(),w=a.options.$customCursor;w&&(c=!0);for(var x=0;x<h.sel.ranges.length;x++)if(!(!c&&x==h.sel.primIndex)){var k=h.sel.ranges[x];if(!(k.from().line>=a.display.viewTo||k.to().line<a.display.viewFrom)){var T=k.empty();if(w){var A=w(a,k);A&&wv(a,A,m)}else(T||a.options.showCursorWhenSelecting)&&wv(a,k.head,m);T||v8(a,k,b)}}return d}function wv(a,c,h){var d=Or(a,c,"div",null,null,!a.options.singleCursorHeightPerLine),m=h.appendChild(ae("div","\xA0","CodeMirror-cursor"));if(m.style.left=d.left+"px",m.style.top=d.top+"px",m.style.height=Math.max(0,d.bottom-d.top)*a.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(a.getWrapperElement().className)){var b=Yf(a,c,"div",null,null),w=b.right-b.left;m.style.width=(w>0?w:a.defaultCharWidth())+"px"}if(d.other){var x=h.appendChild(ae("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));x.style.display="",x.style.left=d.other.left+"px",x.style.top=d.other.top+"px",x.style.height=(d.other.bottom-d.other.top)*.85+"px"}}function Jf(a,c){return a.top-c.top||a.left-c.left}function v8(a,c,h){var d=a.display,m=a.doc,b=document.createDocumentFragment(),w=Dk(a.display),x=w.left,k=Math.max(d.sizerWidth,Sa(a)-d.sizer.offsetLeft)-w.right,T=m.direction=="ltr";function A(de,xe,Me,Re){xe<0&&(xe=0),xe=Math.round(xe),Re=Math.round(Re),b.appendChild(ae("div",null,"CodeMirror-selected","position: absolute; left: "+de+`px;
                             top: `+xe+"px; width: "+(Me==null?k-de:Me)+`px;
                             height: `+(Re-xe)+"px"))}function R(de,xe,Me){var Re=Ie(m,de),Qe=Re.text.length,Rt,Ci;function Wt(ui,hn){return Yf(a,re(de,ui),"div",Re,hn)}function Rn(ui,hn,Li){var mi=Gk(a,Re,null,ui),di=hn=="ltr"==(Li=="after")?"left":"right",Yt=Li=="after"?mi.begin:mi.end-(/\s/.test(Re.text.charAt(mi.end-1))?2:1);return Wt(Yt,di)[di]}var dn=vt(Re,m.direction);return Wb(dn,xe||0,Me==null?Qe:Me,function(ui,hn,Li,mi){var di=Li=="ltr",Yt=Wt(ui,di?"left":"right"),fn=Wt(hn-1,di?"right":"left"),rc=xe==null&&ui==0,Lo=Me==null&&hn==Qe,ji=mi==0,rs=!dn||mi==dn.length-1;if(fn.top-Yt.top<=3){var Ti=(T?rc:Lo)&&ji,$v=(T?Lo:rc)&&rs,Fs=Ti?x:(di?Yt:fn).left,Da=$v?k:(di?fn:Yt).right;A(Fs,Yt.top,Da-Fs,Yt.bottom)}else{var Va,Yi,sc,Gv;di?(Va=T&&rc&&ji?x:Yt.left,Yi=T?k:Rn(ui,Li,"before"),sc=T?x:Rn(hn,Li,"after"),Gv=T&&Lo&&rs?k:fn.right):(Va=T?Rn(ui,Li,"before"):x,Yi=!T&&rc&&ji?k:Yt.right,sc=!T&&Lo&&rs?x:fn.left,Gv=T?Rn(hn,Li,"after"):k),A(Va,Yt.top,Yi-Va,Yt.bottom),Yt.bottom<fn.top&&A(x,Yt.bottom,null,fn.top),A(sc,fn.top,Gv-sc,fn.bottom)}(!Rt||Jf(Yt,Rt)<0)&&(Rt=Yt),Jf(fn,Rt)<0&&(Rt=fn),(!Ci||Jf(Yt,Ci)<0)&&(Ci=Yt),Jf(fn,Ci)<0&&(Ci=fn)}),{start:Rt,end:Ci}}var j=c.from(),B=c.to();if(j.line==B.line)R(j.line,j.ch,B.ch);else{var G=Ie(m,j.line),J=Ie(m,B.line),oe=Rr(G)==Rr(J),ue=R(j.line,j.ch,oe?G.text.length+1:null).end,ge=R(B.line,oe?0:null,B.ch).start;oe&&(ue.top<ge.top-2?(A(ue.right,ue.top,null,ue.bottom),A(x,ge.top,ge.left,ge.bottom)):A(ue.right,ue.top,ge.left-ue.right,ue.bottom)),ue.bottom<ge.top&&A(x,ue.bottom,null,ge.top)}h.appendChild(b)}function yv(a){if(!!a.state.focused){var c=a.display;clearInterval(c.blinker);var h=!0;c.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?c.blinker=setInterval(function(){a.hasFocus()||$l(a),c.cursorDiv.style.visibility=(h=!h)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(c.cursorDiv.style.visibility="hidden")}}function Jk(a){a.hasFocus()||(a.display.input.focus(),a.state.focused||xv(a))}function _v(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,a.state.focused&&$l(a))},100)}function xv(a,c){a.state.delayingBlurEvent&&!a.state.draggingText&&(a.state.delayingBlurEvent=!1),a.options.readOnly!="nocursor"&&(a.state.focused||(Bt(a,"focus",a,c),a.state.focused=!0,ke(a.display.wrapper,"CodeMirror-focused"),!a.curOp&&a.display.selForContextMenu!=a.doc.sel&&(a.display.input.reset(),u&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),yv(a))}function $l(a,c){a.state.delayingBlurEvent||(a.state.focused&&(Bt(a,"blur",a,c),a.state.focused=!1,te(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function Xf(a){for(var c=a.display,h=c.lineDiv.offsetTop,d=Math.max(0,c.scroller.getBoundingClientRect().top),m=c.lineDiv.getBoundingClientRect().top,b=0,w=0;w<c.view.length;w++){var x=c.view[w],k=a.options.lineWrapping,T=void 0,A=0;if(!x.hidden){if(m+=x.line.height,o&&l<8){var R=x.node.offsetTop+x.node.offsetHeight;T=R-h,h=R}else{var j=x.node.getBoundingClientRect();T=j.bottom-j.top,!k&&x.text.firstChild&&(A=x.text.firstChild.getBoundingClientRect().right-j.left-1)}var B=x.line.height-T;if((B>.005||B<-.005)&&(m<d&&(b-=B),es(x.line,T),Xk(x.line),x.rest))for(var G=0;G<x.rest.length;G++)Xk(x.rest[G]);if(A>a.display.sizerWidth){var J=Math.ceil(A/ql(a.display));J>a.display.maxLineLength&&(a.display.maxLineLength=J,a.display.maxLine=x.line,a.display.maxLineChanged=!0)}}}Math.abs(b)>2&&(c.scroller.scrollTop+=b)}function Xk(a){if(a.widgets)for(var c=0;c<a.widgets.length;++c){var h=a.widgets[c],d=h.node.parentNode;d&&(h.height=d.offsetHeight)}}function Qf(a,c,h){var d=h&&h.top!=null?Math.max(0,h.top):a.scroller.scrollTop;d=Math.floor(d-Gf(a));var m=h&&h.bottom!=null?h.bottom:d+a.wrapper.clientHeight,b=Ea(c,d),w=Ea(c,m);if(h&&h.ensure){var x=h.ensure.from.line,k=h.ensure.to.line;x<b?(b=x,w=Ea(c,Ds(Ie(c,x))+a.wrapper.clientHeight)):Math.min(k,c.lastLine())>=w&&(b=Ea(c,Ds(Ie(c,k))-a.wrapper.clientHeight),w=k)}return{from:b,to:Math.max(w,b+1)}}function w8(a,c){if(!St(a,"scrollCursorIntoView")){var h=a.display,d=h.sizer.getBoundingClientRect(),m=null,b=h.wrapper.ownerDocument;if(c.top+d.top<0?m=!0:c.bottom+d.top>(b.defaultView.innerHeight||b.documentElement.clientHeight)&&(m=!1),m!=null&&!E){var w=ae("div","\u200B",null,`position: absolute;
                         top: `+(c.top-h.viewOffset-Gf(a.display))+`px;
                         height: `+(c.bottom-c.top+is(a)+h.barHeight)+`px;
                         left: `+c.left+"px; width: "+Math.max(2,c.right-c.left)+"px;");a.display.lineSpace.appendChild(w),w.scrollIntoView(m),a.display.lineSpace.removeChild(w)}}}function y8(a,c,h,d){d==null&&(d=0);var m;!a.options.lineWrapping&&c==h&&(h=c.sticky=="before"?re(c.line,c.ch+1,"before"):c,c=c.ch?re(c.line,c.sticky=="before"?c.ch-1:c.ch,"after"):c);for(var b=0;b<5;b++){var w=!1,x=Or(a,c),k=!h||h==c?x:Or(a,h);m={left:Math.min(x.left,k.left),top:Math.min(x.top,k.top)-d,right:Math.max(x.left,k.left),bottom:Math.max(x.bottom,k.bottom)+d};var T=kv(a,m),A=a.doc.scrollTop,R=a.doc.scrollLeft;if(T.scrollTop!=null&&(ad(a,T.scrollTop),Math.abs(a.doc.scrollTop-A)>1&&(w=!0)),T.scrollLeft!=null&&(Ra(a,T.scrollLeft),Math.abs(a.doc.scrollLeft-R)>1&&(w=!0)),!w)break}return m}function _8(a,c){var h=kv(a,c);h.scrollTop!=null&&ad(a,h.scrollTop),h.scrollLeft!=null&&Ra(a,h.scrollLeft)}function kv(a,c){var h=a.display,d=Wl(a.display);c.top<0&&(c.top=0);var m=a.curOp&&a.curOp.scrollTop!=null?a.curOp.scrollTop:h.scroller.scrollTop,b=uv(a),w={};c.bottom-c.top>b&&(c.bottom=c.top+b);var x=a.doc.height+cv(h),k=c.top<d,T=c.bottom>x-d;if(c.top<m)w.scrollTop=k?0:c.top;else if(c.bottom>m+b){var A=Math.min(c.top,(T?x:c.bottom)-b);A!=m&&(w.scrollTop=A)}var R=a.options.fixedGutter?0:h.gutters.offsetWidth,j=a.curOp&&a.curOp.scrollLeft!=null?a.curOp.scrollLeft:h.scroller.scrollLeft-R,B=Sa(a)-h.gutters.offsetWidth,G=c.right-c.left>B;return G&&(c.right=c.left+B),c.left<10?w.scrollLeft=0:c.left<j?w.scrollLeft=Math.max(0,c.left+R-(G?0:10)):c.right>B+j-3&&(w.scrollLeft=c.right+(G?0:10)-B),w}function Cv(a,c){c!=null&&(em(a),a.curOp.scrollTop=(a.curOp.scrollTop==null?a.doc.scrollTop:a.curOp.scrollTop)+c)}function Gl(a){em(a);var c=a.getCursor();a.curOp.scrollToPos={from:c,to:c,margin:a.options.cursorScrollMargin}}function od(a,c,h){(c!=null||h!=null)&&em(a),c!=null&&(a.curOp.scrollLeft=c),h!=null&&(a.curOp.scrollTop=h)}function x8(a,c){em(a),a.curOp.scrollToPos=c}function em(a){var c=a.curOp.scrollToPos;if(c){a.curOp.scrollToPos=null;var h=qk(a,c.from),d=qk(a,c.to);Qk(a,h,d,c.margin)}}function Qk(a,c,h,d){var m=kv(a,{left:Math.min(c.left,h.left),top:Math.min(c.top,h.top)-d,right:Math.max(c.right,h.right),bottom:Math.max(c.bottom,h.bottom)+d});od(a,m.scrollLeft,m.scrollTop)}function ad(a,c){Math.abs(a.doc.scrollTop-c)<2||(t||Ev(a,{top:c}),e2(a,c,!0),t&&Ev(a),ud(a,100))}function e2(a,c,h){c=Math.max(0,Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,c)),!(a.display.scroller.scrollTop==c&&!h)&&(a.doc.scrollTop=c,a.display.scrollbars.setScrollTop(c),a.display.scroller.scrollTop!=c&&(a.display.scroller.scrollTop=c))}function Ra(a,c,h,d){c=Math.max(0,Math.min(c,a.display.scroller.scrollWidth-a.display.scroller.clientWidth)),!((h?c==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-c)<2)&&!d)&&(a.doc.scrollLeft=c,s2(a),a.display.scroller.scrollLeft!=c&&(a.display.scroller.scrollLeft=c),a.display.scrollbars.setScrollLeft(c))}function ld(a){var c=a.display,h=c.gutters.offsetWidth,d=Math.round(a.doc.height+cv(a.display));return{clientHeight:c.scroller.clientHeight,viewHeight:c.wrapper.clientHeight,scrollWidth:c.scroller.scrollWidth,clientWidth:c.scroller.clientWidth,viewWidth:c.wrapper.clientWidth,barLeft:a.options.fixedGutter?h:0,docHeight:d,scrollHeight:d+is(a)+c.barHeight,nativeBarWidth:c.nativeBarWidth,gutterWidth:h}}var Oa=function(a,c,h){this.cm=h;var d=this.vert=ae("div",[ae("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),m=this.horiz=ae("div",[ae("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d.tabIndex=m.tabIndex=-1,a(d),a(m),Oe(d,"scroll",function(){d.clientHeight&&c(d.scrollTop,"vertical")}),Oe(m,"scroll",function(){m.clientWidth&&c(m.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,o&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Oa.prototype.update=function(a){var c=a.scrollWidth>a.clientWidth+1,h=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;if(h){this.vert.style.display="block",this.vert.style.bottom=c?d+"px":"0";var m=a.viewHeight-(c?d:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+m)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(c){this.horiz.style.display="block",this.horiz.style.right=h?d+"px":"0",this.horiz.style.left=a.barLeft+"px";var b=a.viewWidth-a.barLeft-(h?d:0);this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+b)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(d==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:h?d:0,bottom:c?d:0}},Oa.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Oa.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Oa.prototype.zeroWidthHack=function(){var a=N&&!C?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new pe,this.disableVert=new pe},Oa.prototype.enableZeroWidthBar=function(a,c,h){a.style.visibility="";function d(){var m=a.getBoundingClientRect(),b=h=="vert"?document.elementFromPoint(m.right-1,(m.top+m.bottom)/2):document.elementFromPoint((m.right+m.left)/2,m.bottom-1);b!=a?a.style.visibility="hidden":c.set(1e3,d)}c.set(1e3,d)},Oa.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)};var cd=function(){};cd.prototype.update=function(){return{bottom:0,right:0}},cd.prototype.setScrollLeft=function(){},cd.prototype.setScrollTop=function(){},cd.prototype.clear=function(){};function Kl(a,c){c||(c=ld(a));var h=a.display.barWidth,d=a.display.barHeight;t2(a,c);for(var m=0;m<4&&h!=a.display.barWidth||d!=a.display.barHeight;m++)h!=a.display.barWidth&&a.options.lineWrapping&&Xf(a),t2(a,ld(a)),h=a.display.barWidth,d=a.display.barHeight}function t2(a,c){var h=a.display,d=h.scrollbars.update(c);h.sizer.style.paddingRight=(h.barWidth=d.right)+"px",h.sizer.style.paddingBottom=(h.barHeight=d.bottom)+"px",h.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(h.scrollbarFiller.style.display="block",h.scrollbarFiller.style.height=d.bottom+"px",h.scrollbarFiller.style.width=d.right+"px"):h.scrollbarFiller.style.display="",d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(h.gutterFiller.style.display="block",h.gutterFiller.style.height=d.bottom+"px",h.gutterFiller.style.width=c.gutterWidth+"px"):h.gutterFiller.style.display=""}var i2={native:Oa,null:cd};function n2(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&te(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new i2[a.options.scrollbarStyle](function(c){a.display.wrapper.insertBefore(c,a.display.scrollbarFiller),Oe(c,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)}),c.setAttribute("cm-not-content","true")},function(c,h){h=="horizontal"?Ra(a,c):ad(a,c)},a),a.display.scrollbars.addClass&&ke(a.display.wrapper,a.display.scrollbars.addClass)}var k8=0;function Ma(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++k8,markArrays:null},e8(a.curOp)}function La(a){var c=a.curOp;c&&i8(c,function(h){for(var d=0;d<h.ops.length;d++)h.ops[d].cm.curOp=null;C8(h)})}function C8(a){for(var c=a.ops,h=0;h<c.length;h++)T8(c[h]);for(var d=0;d<c.length;d++)E8(c[d]);for(var m=0;m<c.length;m++)S8(c[m]);for(var b=0;b<c.length;b++)A8(c[b]);for(var w=0;w<c.length;w++)I8(c[w])}function T8(a){var c=a.cm,h=c.display;R8(c),a.updateMaxLine&&av(c),a.mustUpdate=a.viewChanged||a.forceUpdate||a.scrollTop!=null||a.scrollToPos&&(a.scrollToPos.from.line<h.viewFrom||a.scrollToPos.to.line>=h.viewTo)||h.maxLineChanged&&c.options.lineWrapping,a.update=a.mustUpdate&&new tm(c,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function E8(a){a.updatedDisplay=a.mustUpdate&&Tv(a.cm,a.update)}function S8(a){var c=a.cm,h=c.display;a.updatedDisplay&&Xf(c),a.barMeasure=ld(c),h.maxLineChanged&&!c.options.lineWrapping&&(a.adjustWidthTo=Bk(c,h.maxLine,h.maxLine.text.length).left+3,c.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(h.scroller.clientWidth,h.sizer.offsetLeft+a.adjustWidthTo+is(c)+c.display.barWidth),a.maxScrollLeft=Math.max(0,h.sizer.offsetLeft+a.adjustWidthTo-Sa(c))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=h.input.prepareSelection())}function A8(a){var c=a.cm;a.adjustWidthTo!=null&&(c.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<c.doc.scrollLeft&&Ra(c,Math.min(c.display.scroller.scrollLeft,a.maxScrollLeft),!0),c.display.maxLineChanged=!1);var h=a.focus&&a.focus==fe(se(c));a.preparedSelection&&c.display.input.showSelection(a.preparedSelection,h),(a.updatedDisplay||a.startHeight!=c.doc.height)&&Kl(c,a.barMeasure),a.updatedDisplay&&Av(c,a.barMeasure),a.selectionChanged&&yv(c),c.state.focused&&a.updateInput&&c.display.input.reset(a.typing),h&&Jk(a.cm)}function I8(a){var c=a.cm,h=c.display,d=c.doc;if(a.updatedDisplay&&r2(c,a.update),h.wheelStartX!=null&&(a.scrollTop!=null||a.scrollLeft!=null||a.scrollToPos)&&(h.wheelStartX=h.wheelStartY=null),a.scrollTop!=null&&e2(c,a.scrollTop,a.forceScroll),a.scrollLeft!=null&&Ra(c,a.scrollLeft,!0,!0),a.scrollToPos){var m=y8(c,Ue(d,a.scrollToPos.from),Ue(d,a.scrollToPos.to),a.scrollToPos.margin);w8(c,m)}var b=a.maybeHiddenMarkers,w=a.maybeUnhiddenMarkers;if(b)for(var x=0;x<b.length;++x)b[x].lines.length||Bt(b[x],"hide");if(w)for(var k=0;k<w.length;++k)w[k].lines.length&&Bt(w[k],"unhide");h.wrapper.offsetHeight&&(d.scrollTop=c.display.scroller.scrollTop),a.changeObjs&&Bt(c,"changes",c,a.changeObjs),a.update&&a.update.finish()}function Pn(a,c){if(a.curOp)return c();Ma(a);try{return c()}finally{La(a)}}function xi(a,c){return function(){if(a.curOp)return c.apply(a,arguments);Ma(a);try{return c.apply(a,arguments)}finally{La(a)}}}function Ki(a){return function(){if(this.curOp)return a.apply(this,arguments);Ma(this);try{return a.apply(this,arguments)}finally{La(this)}}}function ki(a){return function(){var c=this.cm;if(!c||c.curOp)return a.apply(this,arguments);Ma(c);try{return a.apply(this,arguments)}finally{La(c)}}}function ud(a,c){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(c,Mt(P8,a))}function P8(a){var c=a.doc;if(!(c.highlightFrontier>=a.display.viewTo)){var h=+new Date+a.options.workTime,d=Qu(a,c.highlightFrontier),m=[];c.iter(d.line,Math.min(c.first+c.size,a.display.viewTo+500),function(b){if(d.line>=a.display.viewFrom){var w=b.styles,x=b.text.length>a.options.maxHighlightLength?Ms(c.mode,d.state):null,k=dk(a,b,d,!0);x&&(d.state=x),b.styles=k.styles;var T=b.styleClasses,A=k.classes;A?b.styleClasses=A:T&&(b.styleClasses=null);for(var R=!w||w.length!=b.styles.length||T!=A&&(!T||!A||T.bgClass!=A.bgClass||T.textClass!=A.textClass),j=0;!R&&j<w.length;++j)R=w[j]!=b.styles[j];R&&m.push(d.line),b.stateAfter=d.save(),d.nextLine()}else b.text.length<=a.options.maxHighlightLength&&tv(a,b.text,d),b.stateAfter=d.line%5==0?d.save():null,d.nextLine();if(+new Date>h)return ud(a,a.options.workDelay),!0}),c.highlightFrontier=d.line,c.modeFrontier=Math.max(c.modeFrontier,d.line),m.length&&Pn(a,function(){for(var b=0;b<m.length;b++)So(a,m[b],"text")})}}var tm=function(a,c,h){var d=a.display;this.viewport=c,this.visible=Qf(d,a.doc,c),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=Sa(a),this.force=h,this.dims=pv(a),this.events=[]};tm.prototype.signal=function(a,c){An(a,c)&&this.events.push(arguments)},tm.prototype.finish=function(){for(var a=0;a<this.events.length;a++)Bt.apply(null,this.events[a])};function R8(a){var c=a.display;!c.scrollbarsClipped&&c.scroller.offsetWidth&&(c.nativeBarWidth=c.scroller.offsetWidth-c.scroller.clientWidth,c.heightForcer.style.height=is(a)+"px",c.sizer.style.marginBottom=-c.nativeBarWidth+"px",c.sizer.style.borderRightWidth=is(a)+"px",c.scrollbarsClipped=!0)}function O8(a){if(a.hasFocus())return null;var c=fe(se(a));if(!c||!Je(a.display.lineDiv,c))return null;var h={activeElt:c};if(window.getSelection){var d=nt(a).getSelection();d.anchorNode&&d.extend&&Je(a.display.lineDiv,d.anchorNode)&&(h.anchorNode=d.anchorNode,h.anchorOffset=d.anchorOffset,h.focusNode=d.focusNode,h.focusOffset=d.focusOffset)}return h}function M8(a){if(!(!a||!a.activeElt||a.activeElt==fe(_e(a.activeElt)))&&(a.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(a.activeElt.nodeName)&&a.anchorNode&&Je(document.body,a.anchorNode)&&Je(document.body,a.focusNode))){var c=a.activeElt.ownerDocument,h=c.defaultView.getSelection(),d=c.createRange();d.setEnd(a.anchorNode,a.anchorOffset),d.collapse(!1),h.removeAllRanges(),h.addRange(d),h.extend(a.focusNode,a.focusOffset)}}function Tv(a,c){var h=a.display,d=a.doc;if(c.editorIsHidden)return Ao(a),!1;if(!c.force&&c.visible.from>=h.viewFrom&&c.visible.to<=h.viewTo&&(h.updateLineNumbers==null||h.updateLineNumbers>=h.viewTo)&&h.renderedView==h.view&&Yk(a)==0)return!1;o2(a)&&(Ao(a),c.dims=pv(a));var m=d.first+d.size,b=Math.max(c.visible.from-a.options.viewportMargin,d.first),w=Math.min(m,c.visible.to+a.options.viewportMargin);h.viewFrom<b&&b-h.viewFrom<20&&(b=Math.max(d.first,h.viewFrom)),h.viewTo>w&&h.viewTo-w<20&&(w=Math.min(m,h.viewTo)),Ls&&(b=sv(a.doc,b),w=Tk(a.doc,w));var x=b!=h.viewFrom||w!=h.viewTo||h.lastWrapHeight!=c.wrapperHeight||h.lastWrapWidth!=c.wrapperWidth;b8(a,b,w),h.viewOffset=Ds(Ie(a.doc,h.viewFrom)),a.display.mover.style.top=h.viewOffset+"px";var k=Yk(a);if(!x&&k==0&&!c.force&&h.renderedView==h.view&&(h.updateLineNumbers==null||h.updateLineNumbers>=h.viewTo))return!1;var T=O8(a);return k>4&&(h.lineDiv.style.display="none"),L8(a,h.updateLineNumbers,c.dims),k>4&&(h.lineDiv.style.display=""),h.renderedView=h.view,M8(T),ye(h.cursorDiv),ye(h.selectionDiv),h.gutters.style.height=h.sizer.style.minHeight=0,x&&(h.lastWrapHeight=c.wrapperHeight,h.lastWrapWidth=c.wrapperWidth,ud(a,400)),h.updateLineNumbers=null,!0}function r2(a,c){for(var h=c.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||c.oldDisplayWidth==Sa(a)){if(h&&h.top!=null&&(h={top:Math.min(a.doc.height+cv(a.display)-uv(a),h.top)}),c.visible=Qf(a.display,a.doc,h),c.visible.from>=a.display.viewFrom&&c.visible.to<=a.display.viewTo)break}else d&&(c.visible=Qf(a.display,a.doc,h));if(!Tv(a,c))break;Xf(a);var m=ld(a);sd(a),Kl(a,m),Av(a,m),c.force=!1}c.signal(a,"update",a),(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)&&(c.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function Ev(a,c){var h=new tm(a,c);if(Tv(a,h)){Xf(a),r2(a,h);var d=ld(a);sd(a),Kl(a,d),Av(a,d),h.finish()}}function L8(a,c,h){var d=a.display,m=a.options.lineNumbers,b=d.lineDiv,w=b.firstChild;function x(G){var J=G.nextSibling;return u&&N&&a.display.currentWheelTarget==G?G.style.display="none":G.parentNode.removeChild(G),J}for(var k=d.view,T=d.viewFrom,A=0;A<k.length;A++){var R=k[A];if(!R.hidden)if(!R.node||R.node.parentNode!=b){var j=a8(a,R,T,h);b.insertBefore(j,w)}else{for(;w!=R.node;)w=x(w);var B=m&&c!=null&&c<=T&&R.lineNumber;R.changes&&(be(R.changes,"gutter")>-1&&(B=!1),Pk(a,R,T,h)),B&&(ye(R.lineNumber),R.lineNumber.appendChild(document.createTextNode(Xb(a.options,T)))),w=R.node.nextSibling}T+=R.size}for(;w;)w=x(w)}function Sv(a){var c=a.gutters.offsetWidth;a.sizer.style.marginLeft=c+"px",_i(a,"gutterChanged",a)}function Av(a,c){a.display.sizer.style.minHeight=c.docHeight+"px",a.display.heightForcer.style.top=c.docHeight+"px",a.display.gutters.style.height=c.docHeight+a.display.barHeight+is(a)+"px"}function s2(a){var c=a.display,h=c.view;if(!(!c.alignWidgets&&(!c.gutters.firstChild||!a.options.fixedGutter))){for(var d=bv(c)-c.scroller.scrollLeft+a.doc.scrollLeft,m=c.gutters.offsetWidth,b=d+"px",w=0;w<h.length;w++)if(!h[w].hidden){a.options.fixedGutter&&(h[w].gutter&&(h[w].gutter.style.left=b),h[w].gutterBackground&&(h[w].gutterBackground.style.left=b));var x=h[w].alignable;if(x)for(var k=0;k<x.length;k++)x[k].style.left=b}a.options.fixedGutter&&(c.gutters.style.left=d+m+"px")}}function o2(a){if(!a.options.lineNumbers)return!1;var c=a.doc,h=Xb(a.options,c.first+c.size-1),d=a.display;if(h.length!=d.lineNumChars){var m=d.measure.appendChild(ae("div",[ae("div",h)],"CodeMirror-linenumber CodeMirror-gutter-elt")),b=m.firstChild.offsetWidth,w=m.offsetWidth-b;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(b,d.lineGutter.offsetWidth-w)+1,d.lineNumWidth=d.lineNumInnerWidth+w,d.lineNumChars=d.lineNumInnerWidth?h.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",Sv(a.display),!0}return!1}function Iv(a,c){for(var h=[],d=!1,m=0;m<a.length;m++){var b=a[m],w=null;if(typeof b!="string"&&(w=b.style,b=b.className),b=="CodeMirror-linenumbers")if(c)d=!0;else continue;h.push({className:b,style:w})}return c&&!d&&h.push({className:"CodeMirror-linenumbers",style:null}),h}function a2(a){var c=a.gutters,h=a.gutterSpecs;ye(c),a.lineGutter=null;for(var d=0;d<h.length;++d){var m=h[d],b=m.className,w=m.style,x=c.appendChild(ae("div",null,"CodeMirror-gutter "+b));w&&(x.style.cssText=w),b=="CodeMirror-linenumbers"&&(a.lineGutter=x,x.style.width=(a.lineNumWidth||1)+"px")}c.style.display=h.length?"":"none",Sv(a)}function dd(a){a2(a.display),cn(a),s2(a)}function D8(a,c,h,d){var m=this;this.input=h,m.scrollbarFiller=ae("div",null,"CodeMirror-scrollbar-filler"),m.scrollbarFiller.setAttribute("cm-not-content","true"),m.gutterFiller=ae("div",null,"CodeMirror-gutter-filler"),m.gutterFiller.setAttribute("cm-not-content","true"),m.lineDiv=bt("div",null,"CodeMirror-code"),m.selectionDiv=ae("div",null,null,"position: relative; z-index: 1"),m.cursorDiv=ae("div",null,"CodeMirror-cursors"),m.measure=ae("div",null,"CodeMirror-measure"),m.lineMeasure=ae("div",null,"CodeMirror-measure"),m.lineSpace=bt("div",[m.measure,m.lineMeasure,m.selectionDiv,m.cursorDiv,m.lineDiv],null,"position: relative; outline: none");var b=bt("div",[m.lineSpace],"CodeMirror-lines");m.mover=ae("div",[b],null,"position: relative"),m.sizer=ae("div",[m.mover],"CodeMirror-sizer"),m.sizerWidth=null,m.heightForcer=ae("div",null,null,"position: absolute; height: "+He+"px; width: 1px;"),m.gutters=ae("div",null,"CodeMirror-gutters"),m.lineGutter=null,m.scroller=ae("div",[m.sizer,m.heightForcer,m.gutters],"CodeMirror-scroll"),m.scroller.setAttribute("tabIndex","-1"),m.wrapper=ae("div",[m.scrollbarFiller,m.gutterFiller,m.scroller],"CodeMirror"),g&&p>=105&&(m.wrapper.style.clipPath="inset(0px)"),m.wrapper.setAttribute("translate","no"),o&&l<8&&(m.gutters.style.zIndex=-1,m.scroller.style.paddingRight=0),!u&&!(t&&O)&&(m.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(m.wrapper):a(m.wrapper)),m.viewFrom=m.viewTo=c.first,m.reportedViewFrom=m.reportedViewTo=c.first,m.view=[],m.renderedView=null,m.externalMeasured=null,m.viewOffset=0,m.lastWrapHeight=m.lastWrapWidth=0,m.updateLineNumbers=null,m.nativeBarWidth=m.barHeight=m.barWidth=0,m.scrollbarsClipped=!1,m.lineNumWidth=m.lineNumInnerWidth=m.lineNumChars=null,m.alignWidgets=!1,m.cachedCharWidth=m.cachedTextHeight=m.cachedPaddingH=null,m.maxLine=null,m.maxLineLength=0,m.maxLineChanged=!1,m.wheelDX=m.wheelDY=m.wheelStartX=m.wheelStartY=null,m.shift=!1,m.selForContextMenu=null,m.activeTouch=null,m.gutterSpecs=Iv(d.gutters,d.lineNumbers),a2(m),h.init(m)}var im=0,Bs=null;o?Bs=-.53:t?Bs=15:g?Bs=-.7:_&&(Bs=-1/3);function l2(a){var c=a.wheelDeltaX,h=a.wheelDeltaY;return c==null&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(c=a.detail),h==null&&a.detail&&a.axis==a.VERTICAL_AXIS?h=a.detail:h==null&&(h=a.wheelDelta),{x:c,y:h}}function V8(a){var c=l2(a);return c.x*=Bs,c.y*=Bs,c}function c2(a,c){g&&p==102&&(a.display.chromeScrollHack==null?a.display.sizer.style.pointerEvents="none":clearTimeout(a.display.chromeScrollHack),a.display.chromeScrollHack=setTimeout(function(){a.display.chromeScrollHack=null,a.display.sizer.style.pointerEvents=""},100));var h=l2(c),d=h.x,m=h.y,b=Bs;c.deltaMode===0&&(d=c.deltaX,m=c.deltaY,b=1);var w=a.display,x=w.scroller,k=x.scrollWidth>x.clientWidth,T=x.scrollHeight>x.clientHeight;if(!!(d&&k||m&&T)){if(m&&N&&u){e:for(var A=c.target,R=w.view;A!=x;A=A.parentNode)for(var j=0;j<R.length;j++)if(R[j].node==A){a.display.currentWheelTarget=A;break e}}if(d&&!t&&!y&&b!=null){m&&T&&ad(a,Math.max(0,x.scrollTop+m*b)),Ra(a,Math.max(0,x.scrollLeft+d*b)),(!m||m&&T)&&I(c),w.wheelStartX=null;return}if(m&&b!=null){var B=m*b,G=a.doc.scrollTop,J=G+w.wrapper.clientHeight;B<0?G=Math.max(0,G+B-50):J=Math.min(a.doc.height,J+B+50),Ev(a,{top:G,bottom:J})}im<20&&c.deltaMode!==0&&(w.wheelStartX==null?(w.wheelStartX=x.scrollLeft,w.wheelStartY=x.scrollTop,w.wheelDX=d,w.wheelDY=m,setTimeout(function(){if(w.wheelStartX!=null){var oe=x.scrollLeft-w.wheelStartX,ue=x.scrollTop-w.wheelStartY,ge=ue&&w.wheelDY&&ue/w.wheelDY||oe&&w.wheelDX&&oe/w.wheelDX;w.wheelStartX=w.wheelStartY=null,!!ge&&(Bs=(Bs*im+ge)/(im+1),++im)}},200)):(w.wheelDX+=d,w.wheelDY+=m))}}var qn=function(a,c){this.ranges=a,this.primIndex=c};qn.prototype.primary=function(){return this.ranges[this.primIndex]},qn.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var c=0;c<this.ranges.length;c++){var h=this.ranges[c],d=a.ranges[c];if(!Qb(h.anchor,d.anchor)||!Qb(h.head,d.head))return!1}return!0},qn.prototype.deepCopy=function(){for(var a=[],c=0;c<this.ranges.length;c++)a[c]=new _t(ev(this.ranges[c].anchor),ev(this.ranges[c].head));return new qn(a,this.primIndex)},qn.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},qn.prototype.contains=function(a,c){c||(c=a);for(var h=0;h<this.ranges.length;h++){var d=this.ranges[h];if(ze(c,d.from())>=0&&ze(a,d.to())<=0)return h}return-1};var _t=function(a,c){this.anchor=a,this.head=c};_t.prototype.from=function(){return Ff(this.anchor,this.head)},_t.prototype.to=function(){return Nf(this.anchor,this.head)},_t.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Mr(a,c,h){var d=a&&a.options.selectionsMayTouch,m=c[h];c.sort(function(j,B){return ze(j.from(),B.from())}),h=be(c,m);for(var b=1;b<c.length;b++){var w=c[b],x=c[b-1],k=ze(x.to(),w.from());if(d&&!w.empty()?k>0:k>=0){var T=Ff(x.from(),w.from()),A=Nf(x.to(),w.to()),R=x.empty()?w.from()==w.head:x.from()==x.head;b<=h&&--h,c.splice(--b,2,new _t(R?A:T,R?T:A))}}return new qn(c,h)}function Io(a,c){return new qn([new _t(a,c||a)],0)}function Po(a){return a.text?re(a.from.line+a.text.length-1,mt(a.text).length+(a.text.length==1?a.from.ch:0)):a.to}function u2(a,c){if(ze(a,c.from)<0)return a;if(ze(a,c.to)<=0)return Po(c);var h=a.line+c.text.length-(c.to.line-c.from.line)-1,d=a.ch;return a.line==c.to.line&&(d+=Po(c).ch-c.to.ch),re(h,d)}function Pv(a,c){for(var h=[],d=0;d<a.sel.ranges.length;d++){var m=a.sel.ranges[d];h.push(new _t(u2(m.anchor,c),u2(m.head,c)))}return Mr(a.cm,h,a.sel.primIndex)}function d2(a,c,h){return a.line==c.line?re(h.line,a.ch-c.ch+h.ch):re(h.line+(a.line-c.line),a.ch)}function B8(a,c,h){for(var d=[],m=re(a.first,0),b=m,w=0;w<c.length;w++){var x=c[w],k=d2(x.from,m,b),T=d2(Po(x),m,b);if(m=x.to,b=T,h=="around"){var A=a.sel.ranges[w],R=ze(A.head,A.anchor)<0;d[w]=new _t(R?T:k,R?k:T)}else d[w]=new _t(k,k)}return new qn(d,a.sel.primIndex)}function Rv(a){a.doc.mode=Ju(a.options,a.doc.modeOption),hd(a)}function hd(a){a.doc.iter(function(c){c.stateAfter&&(c.stateAfter=null),c.styles&&(c.styles=null)}),a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first,ud(a,100),a.state.modeGen++,a.curOp&&cn(a)}function h2(a,c){return c.from.ch==0&&c.to.ch==0&&mt(c.text)==""&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Ov(a,c,h,d){function m(ge){return h?h[ge]:null}function b(ge,de,xe){qN(ge,de,xe,d),_i(ge,"change",ge,c)}function w(ge,de){for(var xe=[],Me=ge;Me<de;++Me)xe.push(new Hl(T[Me],m(Me),d));return xe}var x=c.from,k=c.to,T=c.text,A=Ie(a,x.line),R=Ie(a,k.line),j=mt(T),B=m(T.length-1),G=k.line-x.line;if(c.full)a.insert(0,w(0,T.length)),a.remove(T.length,a.size-T.length);else if(h2(a,c)){var J=w(0,T.length-1);b(R,R.text,B),G&&a.remove(x.line,G),J.length&&a.insert(x.line,J)}else if(A==R)if(T.length==1)b(A,A.text.slice(0,x.ch)+j+A.text.slice(k.ch),B);else{var oe=w(1,T.length-1);oe.push(new Hl(j+A.text.slice(k.ch),B,d)),b(A,A.text.slice(0,x.ch)+T[0],m(0)),a.insert(x.line+1,oe)}else if(T.length==1)b(A,A.text.slice(0,x.ch)+T[0]+R.text.slice(k.ch),m(0)),a.remove(x.line+1,G);else{b(A,A.text.slice(0,x.ch)+T[0],m(0)),b(R,j+R.text.slice(k.ch),B);var ue=w(1,T.length-1);G>1&&a.remove(x.line+1,G-1),a.insert(x.line+1,ue)}_i(a,"change",a,c)}function Ro(a,c,h){function d(m,b,w){if(m.linked)for(var x=0;x<m.linked.length;++x){var k=m.linked[x];if(k.doc!=b){var T=w&&k.sharedHist;h&&!T||(c(k.doc,T),d(k.doc,m,T))}}}d(a,null,!0)}function f2(a,c){if(c.cm)throw new Error("This document is already in use.");a.doc=c,c.cm=a,vv(a),Rv(a),m2(a),a.options.direction=c.direction,a.options.lineWrapping||av(a),a.options.mode=c.modeOption,cn(a)}function m2(a){(a.doc.direction=="rtl"?ke:te)(a.display.lineDiv,"CodeMirror-rtl")}function N8(a){Pn(a,function(){m2(a),cn(a)})}function nm(a){this.done=[],this.undone=[],this.undoDepth=a?a.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a?a.maxGeneration:1}function Mv(a,c){var h={from:ev(c.from),to:Po(c),text:Ta(a,c.from,c.to)};return b2(a,h,c.from.line,c.to.line+1),Ro(a,function(d){return b2(d,h,c.from.line,c.to.line+1)},!0),h}function g2(a){for(;a.length;){var c=mt(a);if(c.ranges)a.pop();else break}}function F8(a,c){if(c)return g2(a.done),mt(a.done);if(a.done.length&&!mt(a.done).ranges)return mt(a.done);if(a.done.length>1&&!a.done[a.done.length-2].ranges)return a.done.pop(),mt(a.done)}function p2(a,c,h,d){var m=a.history;m.undone.length=0;var b=+new Date,w,x;if((m.lastOp==d||m.lastOrigin==c.origin&&c.origin&&(c.origin.charAt(0)=="+"&&m.lastModTime>b-(a.cm?a.cm.options.historyEventDelay:500)||c.origin.charAt(0)=="*"))&&(w=F8(m,m.lastOp==d)))x=mt(w.changes),ze(c.from,c.to)==0&&ze(c.from,x.to)==0?x.to=Po(c):w.changes.push(Mv(a,c));else{var k=mt(m.done);for((!k||!k.ranges)&&rm(a.sel,m.done),w={changes:[Mv(a,c)],generation:m.generation},m.done.push(w);m.done.length>m.undoDepth;)m.done.shift(),m.done[0].ranges||m.done.shift()}m.done.push(h),m.generation=++m.maxGeneration,m.lastModTime=m.lastSelTime=b,m.lastOp=m.lastSelOp=d,m.lastOrigin=m.lastSelOrigin=c.origin,x||Bt(a,"historyAdded")}function j8(a,c,h,d){var m=c.charAt(0);return m=="*"||m=="+"&&h.ranges.length==d.ranges.length&&h.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function H8(a,c,h,d){var m=a.history,b=d&&d.origin;h==m.lastSelOp||b&&m.lastSelOrigin==b&&(m.lastModTime==m.lastSelTime&&m.lastOrigin==b||j8(a,b,mt(m.done),c))?m.done[m.done.length-1]=c:rm(c,m.done),m.lastSelTime=+new Date,m.lastSelOrigin=b,m.lastSelOp=h,d&&d.clearRedo!==!1&&g2(m.undone)}function rm(a,c){var h=mt(c);h&&h.ranges&&h.equals(a)||c.push(a)}function b2(a,c,h,d){var m=c["spans_"+a.id],b=0;a.iter(Math.max(a.first,h),Math.min(a.first+a.size,d),function(w){w.markedSpans&&((m||(m=c["spans_"+a.id]={}))[b]=w.markedSpans),++b})}function z8(a){if(!a)return null;for(var c,h=0;h<a.length;++h)a[h].marker.explicitlyCleared?c||(c=a.slice(0,h)):c&&c.push(a[h]);return c?c.length?c:null:a}function U8(a,c){var h=c["spans_"+a.id];if(!h)return null;for(var d=[],m=0;m<c.text.length;++m)d.push(z8(h[m]));return d}function v2(a,c){var h=U8(a,c),d=nv(a,c);if(!h)return d;if(!d)return h;for(var m=0;m<h.length;++m){var b=h[m],w=d[m];if(b&&w){e:for(var x=0;x<w.length;++x){for(var k=w[x],T=0;T<b.length;++T)if(b[T].marker==k.marker)continue e;b.push(k)}}else w&&(h[m]=w)}return h}function Yl(a,c,h){for(var d=[],m=0;m<a.length;++m){var b=a[m];if(b.ranges){d.push(h?qn.prototype.deepCopy.call(b):b);continue}var w=b.changes,x=[];d.push({changes:x});for(var k=0;k<w.length;++k){var T=w[k],A=void 0;if(x.push({from:T.from,to:T.to,text:T.text}),c)for(var R in T)(A=R.match(/^spans_(\d+)$/))&&be(c,Number(A[1]))>-1&&(mt(x)[R]=T[R],delete T[R])}}return d}function Lv(a,c,h,d){if(d){var m=a.anchor;if(h){var b=ze(c,m)<0;b!=ze(h,m)<0?(m=c,c=h):b!=ze(c,h)<0&&(c=h)}return new _t(m,c)}else return new _t(h||c,c)}function sm(a,c,h,d,m){m==null&&(m=a.cm&&(a.cm.display.shift||a.extend)),Fi(a,new qn([Lv(a.sel.primary(),c,h,m)],0),d)}function w2(a,c,h){for(var d=[],m=a.cm&&(a.cm.display.shift||a.extend),b=0;b<a.sel.ranges.length;b++)d[b]=Lv(a.sel.ranges[b],c[b],null,m);var w=Mr(a.cm,d,a.sel.primIndex);Fi(a,w,h)}function Dv(a,c,h,d){var m=a.sel.ranges.slice(0);m[c]=h,Fi(a,Mr(a.cm,m,a.sel.primIndex),d)}function y2(a,c,h,d){Fi(a,Io(c,h),d)}function W8(a,c,h){var d={ranges:c.ranges,update:function(m){this.ranges=[];for(var b=0;b<m.length;b++)this.ranges[b]=new _t(Ue(a,m[b].anchor),Ue(a,m[b].head))},origin:h&&h.origin};return Bt(a,"beforeSelectionChange",a,d),a.cm&&Bt(a.cm,"beforeSelectionChange",a.cm,d),d.ranges!=c.ranges?Mr(a.cm,d.ranges,d.ranges.length-1):c}function _2(a,c,h){var d=a.history.done,m=mt(d);m&&m.ranges?(d[d.length-1]=c,om(a,c,h)):Fi(a,c,h)}function Fi(a,c,h){om(a,c,h),H8(a,a.sel,a.cm?a.cm.curOp.id:NaN,h)}function om(a,c,h){(An(a,"beforeSelectionChange")||a.cm&&An(a.cm,"beforeSelectionChange"))&&(c=W8(a,c,h));var d=h&&h.bias||(ze(c.primary().head,a.sel.primary().head)<0?-1:1);x2(a,C2(a,c,d,!0)),!(h&&h.scroll===!1)&&a.cm&&a.cm.getOption("readOnly")!="nocursor"&&Gl(a.cm)}function x2(a,c){c.equals(a.sel)||(a.sel=c,a.cm&&(a.cm.curOp.updateInput=1,a.cm.curOp.selectionChanged=!0,Bf(a.cm)),_i(a,"cursorActivity",a))}function k2(a){x2(a,C2(a,a.sel,null,!1))}function C2(a,c,h,d){for(var m,b=0;b<c.ranges.length;b++){var w=c.ranges[b],x=c.ranges.length==a.sel.ranges.length&&a.sel.ranges[b],k=am(a,w.anchor,x&&x.anchor,h,d),T=w.head==w.anchor?k:am(a,w.head,x&&x.head,h,d);(m||k!=w.anchor||T!=w.head)&&(m||(m=c.ranges.slice(0,b)),m[b]=new _t(k,T))}return m?Mr(a.cm,m,c.primIndex):c}function Zl(a,c,h,d,m){var b=Ie(a,c.line);if(b.markedSpans)for(var w=0;w<b.markedSpans.length;++w){var x=b.markedSpans[w],k=x.marker,T="selectLeft"in k?!k.selectLeft:k.inclusiveLeft,A="selectRight"in k?!k.selectRight:k.inclusiveRight;if((x.from==null||(T?x.from<=c.ch:x.from<c.ch))&&(x.to==null||(A?x.to>=c.ch:x.to>c.ch))){if(m&&(Bt(k,"beforeCursorEnter"),k.explicitlyCleared))if(b.markedSpans){--w;continue}else break;if(!k.atomic)continue;if(h){var R=k.find(d<0?1:-1),j=void 0;if((d<0?A:T)&&(R=T2(a,R,-d,R&&R.line==c.line?b:null)),R&&R.line==c.line&&(j=ze(R,h))&&(d<0?j<0:j>0))return Zl(a,R,c,d,m)}var B=k.find(d<0?-1:1);return(d<0?T:A)&&(B=T2(a,B,d,B.line==c.line?b:null)),B?Zl(a,B,c,d,m):null}}return c}function am(a,c,h,d,m){var b=d||1,w=Zl(a,c,h,b,m)||!m&&Zl(a,c,h,b,!0)||Zl(a,c,h,-b,m)||!m&&Zl(a,c,h,-b,!0);return w||(a.cantEdit=!0,re(a.first,0))}function T2(a,c,h,d){return h<0&&c.ch==0?c.line>a.first?Ue(a,re(c.line-1)):null:h>0&&c.ch==(d||Ie(a,c.line)).text.length?c.line<a.first+a.size-1?re(c.line+1,0):null:new re(c.line,c.ch+h)}function E2(a){a.setSelection(re(a.firstLine(),0),re(a.lastLine()),rt)}function S2(a,c,h){var d={canceled:!1,from:c.from,to:c.to,text:c.text,origin:c.origin,cancel:function(){return d.canceled=!0}};return h&&(d.update=function(m,b,w,x){m&&(d.from=Ue(a,m)),b&&(d.to=Ue(a,b)),w&&(d.text=w),x!==void 0&&(d.origin=x)}),Bt(a,"beforeChange",a,d),a.cm&&Bt(a.cm,"beforeChange",a.cm,d),d.canceled?(a.cm&&(a.cm.curOp.updateInput=2),null):{from:d.from,to:d.to,text:d.text,origin:d.origin}}function Jl(a,c,h){if(a.cm){if(!a.cm.curOp)return xi(a.cm,Jl)(a,c,h);if(a.cm.state.suppressEdits)return}if(!((An(a,"beforeChange")||a.cm&&An(a.cm,"beforeChange"))&&(c=S2(a,c,!0),!c))){var d=vk&&!h&&HN(a,c.from,c.to);if(d)for(var m=d.length-1;m>=0;--m)A2(a,{from:d[m].from,to:d[m].to,text:m?[""]:c.text,origin:c.origin});else A2(a,c)}}function A2(a,c){if(!(c.text.length==1&&c.text[0]==""&&ze(c.from,c.to)==0)){var h=Pv(a,c);p2(a,c,h,a.cm?a.cm.curOp.id:NaN),fd(a,c,h,nv(a,c));var d=[];Ro(a,function(m,b){!b&&be(d,m.history)==-1&&(O2(m.history,c),d.push(m.history)),fd(m,c,null,nv(m,c))})}}function lm(a,c,h){var d=a.cm&&a.cm.state.suppressEdits;if(!(d&&!h)){for(var m=a.history,b,w=a.sel,x=c=="undo"?m.done:m.undone,k=c=="undo"?m.undone:m.done,T=0;T<x.length&&(b=x[T],!(h?b.ranges&&!b.equals(a.sel):!b.ranges));T++);if(T!=x.length){for(m.lastOrigin=m.lastSelOrigin=null;;)if(b=x.pop(),b.ranges){if(rm(b,k),h&&!b.equals(a.sel)){Fi(a,b,{clearRedo:!1});return}w=b}else if(d){x.push(b);return}else break;var A=[];rm(w,k),k.push({changes:A,generation:m.generation}),m.generation=b.generation||++m.maxGeneration;for(var R=An(a,"beforeChange")||a.cm&&An(a.cm,"beforeChange"),j=function(J){var oe=b.changes[J];if(oe.origin=c,R&&!S2(a,oe,!1))return x.length=0,{};A.push(Mv(a,oe));var ue=J?Pv(a,oe):mt(x);fd(a,oe,ue,v2(a,oe)),!J&&a.cm&&a.cm.scrollIntoView({from:oe.from,to:Po(oe)});var ge=[];Ro(a,function(de,xe){!xe&&be(ge,de.history)==-1&&(O2(de.history,oe),ge.push(de.history)),fd(de,oe,null,v2(de,oe))})},B=b.changes.length-1;B>=0;--B){var G=j(B);if(G)return G.v}}}}function I2(a,c){if(c!=0&&(a.first+=c,a.sel=new qn(Rs(a.sel.ranges,function(m){return new _t(re(m.anchor.line+c,m.anchor.ch),re(m.head.line+c,m.head.ch))}),a.sel.primIndex),a.cm)){cn(a.cm,a.first,a.first-c,c);for(var h=a.cm.display,d=h.viewFrom;d<h.viewTo;d++)So(a.cm,d,"gutter")}}function fd(a,c,h,d){if(a.cm&&!a.cm.curOp)return xi(a.cm,fd)(a,c,h,d);if(c.to.line<a.first){I2(a,c.text.length-1-(c.to.line-c.from.line));return}if(!(c.from.line>a.lastLine())){if(c.from.line<a.first){var m=c.text.length-1-(a.first-c.from.line);I2(a,m),c={from:re(a.first,0),to:re(c.to.line+m,c.to.ch),text:[mt(c.text)],origin:c.origin}}var b=a.lastLine();c.to.line>b&&(c={from:c.from,to:re(b,Ie(a,b).text.length),text:[c.text[0]],origin:c.origin}),c.removed=Ta(a,c.from,c.to),h||(h=Pv(a,c)),a.cm?q8(a.cm,c,d):Ov(a,c,d),om(a,h,rt),a.cantEdit&&am(a,re(a.firstLine(),0))&&(a.cantEdit=!1)}}function q8(a,c,h){var d=a.doc,m=a.display,b=c.from,w=c.to,x=!1,k=b.line;a.options.lineWrapping||(k=Ct(Rr(Ie(d,b.line))),d.iter(k,w.line+1,function(B){if(B==m.maxLine)return x=!0,!0})),d.sel.contains(c.from,c.to)>-1&&Bf(a),Ov(d,c,h,Kk(a)),a.options.lineWrapping||(d.iter(k,b.line+c.text.length,function(B){var G=qf(B);G>m.maxLineLength&&(m.maxLine=B,m.maxLineLength=G,m.maxLineChanged=!0,x=!1)}),x&&(a.curOp.updateMaxLine=!0)),LN(d,b.line),ud(a,400);var T=c.text.length-(w.line-b.line)-1;c.full?cn(a):b.line==w.line&&c.text.length==1&&!h2(a.doc,c)?So(a,b.line,"text"):cn(a,b.line,w.line+1,T);var A=An(a,"changes"),R=An(a,"change");if(R||A){var j={from:b,to:w,text:c.text,removed:c.removed,origin:c.origin};R&&_i(a,"change",a,j),A&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(j)}a.display.selForContextMenu=null}function Xl(a,c,h,d,m){var b;d||(d=h),ze(d,h)<0&&(b=[d,h],h=b[0],d=b[1]),typeof c=="string"&&(c=a.splitLines(c)),Jl(a,{from:h,to:d,text:c,origin:m})}function P2(a,c,h,d){h<a.line?a.line+=d:c<a.line&&(a.line=c,a.ch=0)}function R2(a,c,h,d){for(var m=0;m<a.length;++m){var b=a[m],w=!0;if(b.ranges){b.copied||(b=a[m]=b.deepCopy(),b.copied=!0);for(var x=0;x<b.ranges.length;x++)P2(b.ranges[x].anchor,c,h,d),P2(b.ranges[x].head,c,h,d);continue}for(var k=0;k<b.changes.length;++k){var T=b.changes[k];if(h<T.from.line)T.from=re(T.from.line+d,T.from.ch),T.to=re(T.to.line+d,T.to.ch);else if(c<=T.to.line){w=!1;break}}w||(a.splice(0,m+1),m=0)}}function O2(a,c){var h=c.from.line,d=c.to.line,m=c.text.length-(d-h)-1;R2(a.done,h,d,m),R2(a.undone,h,d,m)}function md(a,c,h,d){var m=c,b=c;return typeof c=="number"?b=Ie(a,ck(a,c)):m=Ct(c),m==null?null:(d(b,m)&&a.cm&&So(a.cm,m,h),b)}function gd(a){this.lines=a,this.parent=null;for(var c=0,h=0;h<a.length;++h)a[h].parent=this,c+=a[h].height;this.height=c}gd.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,c){for(var h=a,d=a+c;h<d;++h){var m=this.lines[h];this.height-=m.height,$N(m),_i(m,"delete")}this.lines.splice(a,c)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,c,h){this.height+=h,this.lines=this.lines.slice(0,a).concat(c).concat(this.lines.slice(a));for(var d=0;d<c.length;++d)c[d].parent=this},iterN:function(a,c,h){for(var d=a+c;a<d;++a)if(h(this.lines[a]))return!0}};function pd(a){this.children=a;for(var c=0,h=0,d=0;d<a.length;++d){var m=a[d];c+=m.chunkSize(),h+=m.height,m.parent=this}this.size=c,this.height=h,this.parent=null}pd.prototype={chunkSize:function(){return this.size},removeInner:function(a,c){this.size-=c;for(var h=0;h<this.children.length;++h){var d=this.children[h],m=d.chunkSize();if(a<m){var b=Math.min(c,m-a),w=d.height;if(d.removeInner(a,b),this.height-=w-d.height,m==b&&(this.children.splice(h--,1),d.parent=null),(c-=b)==0)break;a=0}else a-=m}if(this.size-c<25&&(this.children.length>1||!(this.children[0]instanceof gd))){var x=[];this.collapse(x),this.children=[new gd(x)],this.children[0].parent=this}},collapse:function(a){for(var c=0;c<this.children.length;++c)this.children[c].collapse(a)},insertInner:function(a,c,h){this.size+=c.length,this.height+=h;for(var d=0;d<this.children.length;++d){var m=this.children[d],b=m.chunkSize();if(a<=b){if(m.insertInner(a,c,h),m.lines&&m.lines.length>50){for(var w=m.lines.length%25+25,x=w;x<m.lines.length;){var k=new gd(m.lines.slice(x,x+=25));m.height-=k.height,this.children.splice(++d,0,k),k.parent=this}m.lines=m.lines.slice(0,w),this.maybeSpill()}break}a-=b}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var c=a.children.splice(a.children.length-5,5),h=new pd(c);if(a.parent){a.size-=h.size,a.height-=h.height;var m=be(a.parent.children,a);a.parent.children.splice(m+1,0,h)}else{var d=new pd(a.children);d.parent=a,a.children=[d,h],a=d}h.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,c,h){for(var d=0;d<this.children.length;++d){var m=this.children[d],b=m.chunkSize();if(a<b){var w=Math.min(c,b-a);if(m.iterN(a,w,h))return!0;if((c-=w)==0)break;a=0}else a-=b}}};var bd=function(a,c,h){if(h)for(var d in h)h.hasOwnProperty(d)&&(this[d]=h[d]);this.doc=a,this.node=c};bd.prototype.clear=function(){var a=this.doc.cm,c=this.line.widgets,h=this.line,d=Ct(h);if(!(d==null||!c)){for(var m=0;m<c.length;++m)c[m]==this&&c.splice(m--,1);c.length||(h.widgets=null);var b=nd(this);es(h,Math.max(0,h.height-b)),a&&(Pn(a,function(){M2(a,h,-b),So(a,d,"widget")}),_i(a,"lineWidgetCleared",a,this,d))}},bd.prototype.changed=function(){var a=this,c=this.height,h=this.doc.cm,d=this.line;this.height=null;var m=nd(this)-c;!m||(Eo(this.doc,d)||es(d,d.height+m),h&&Pn(h,function(){h.curOp.forceUpdate=!0,M2(h,d,m),_i(h,"lineWidgetChanged",h,a,Ct(d))}))},S(bd);function M2(a,c,h){Ds(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Cv(a,h)}function $8(a,c,h,d){var m=new bd(a,h,d),b=a.cm;return b&&m.noHScroll&&(b.display.alignWidgets=!0),md(a,c,"widget",function(w){var x=w.widgets||(w.widgets=[]);if(m.insertAt==null?x.push(m):x.splice(Math.min(x.length,Math.max(0,m.insertAt)),0,m),m.line=w,b&&!Eo(a,w)){var k=Ds(w)<a.scrollTop;es(w,w.height+nd(m)),k&&Cv(b,m.height),b.curOp.forceUpdate=!0}return!0}),b&&_i(b,"lineWidgetAdded",b,m,typeof c=="number"?c:Ct(c)),m}var L2=0,Oo=function(a,c){this.lines=[],this.type=c,this.doc=a,this.id=++L2};Oo.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,c=a&&!a.curOp;if(c&&Ma(a),An(this,"clear")){var h=this.find();h&&_i(this,"clear",h.from,h.to)}for(var d=null,m=null,b=0;b<this.lines.length;++b){var w=this.lines[b],x=ed(w.markedSpans,this);a&&!this.collapsed?So(a,Ct(w),"text"):a&&(x.to!=null&&(m=Ct(w)),x.from!=null&&(d=Ct(w))),w.markedSpans=BN(w.markedSpans,x),x.from==null&&this.collapsed&&!Eo(this.doc,w)&&a&&es(w,Wl(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var k=0;k<this.lines.length;++k){var T=Rr(this.lines[k]),A=qf(T);A>a.display.maxLineLength&&(a.display.maxLine=T,a.display.maxLineLength=A,a.display.maxLineChanged=!0)}d!=null&&a&&this.collapsed&&cn(a,d,m+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&k2(a.doc)),a&&_i(a,"markerCleared",a,this,d,m),c&&La(a),this.parent&&this.parent.clear()}},Oo.prototype.find=function(a,c){a==null&&this.type=="bookmark"&&(a=1);for(var h,d,m=0;m<this.lines.length;++m){var b=this.lines[m],w=ed(b.markedSpans,this);if(w.from!=null&&(h=re(c?b:Ct(b),w.from),a==-1))return h;if(w.to!=null&&(d=re(c?b:Ct(b),w.to),a==1))return d}return h&&{from:h,to:d}},Oo.prototype.changed=function(){var a=this,c=this.find(-1,!0),h=this,d=this.doc.cm;!c||!d||Pn(d,function(){var m=c.line,b=Ct(c.line),w=dv(d,b);if(w&&(jk(w),d.curOp.selectionChanged=d.curOp.forceUpdate=!0),d.curOp.updateMaxLine=!0,!Eo(h.doc,m)&&h.height!=null){var x=h.height;h.height=null;var k=nd(h)-x;k&&es(m,m.height+k)}_i(d,"markerChanged",d,a)})},Oo.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var c=this.doc.cm.curOp;(!c.maybeHiddenMarkers||be(c.maybeHiddenMarkers,this)==-1)&&(c.maybeUnhiddenMarkers||(c.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},Oo.prototype.detachLine=function(a){if(this.lines.splice(be(this.lines,a),1),!this.lines.length&&this.doc.cm){var c=this.doc.cm.curOp;(c.maybeHiddenMarkers||(c.maybeHiddenMarkers=[])).push(this)}},S(Oo);function Ql(a,c,h,d,m){if(d&&d.shared)return G8(a,c,h,d,m);if(a.cm&&!a.cm.curOp)return xi(a.cm,Ql)(a,c,h,d,m);var b=new Oo(a,m),w=ze(c,h);if(d&&ht(d,b,!1),w>0||w==0&&b.clearWhenEmpty!==!1)return b;if(b.replacedWith&&(b.collapsed=!0,b.widgetNode=bt("span",[b.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||b.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(b.widgetNode.insertLeft=!0)),b.collapsed){if(Ck(a,c.line,c,h,b)||c.line!=h.line&&Ck(a,h.line,c,h,b))throw new Error("Inserting collapsed marker partially overlapping an existing one");VN()}b.addToHistory&&p2(a,{from:c,to:h,origin:"markText"},a.sel,NaN);var x=c.line,k=a.cm,T;if(a.iter(x,h.line+1,function(R){k&&b.collapsed&&!k.options.lineWrapping&&Rr(R)==k.display.maxLine&&(T=!0),b.collapsed&&x!=c.line&&es(R,0),NN(R,new Hf(b,x==c.line?c.ch:null,x==h.line?h.ch:null),a.cm&&a.cm.curOp),++x}),b.collapsed&&a.iter(c.line,h.line+1,function(R){Eo(a,R)&&es(R,0)}),b.clearOnEnter&&Oe(b,"beforeCursorEnter",function(){return b.clear()}),b.readOnly&&(DN(),(a.history.done.length||a.history.undone.length)&&a.clearHistory()),b.collapsed&&(b.id=++L2,b.atomic=!0),k){if(T&&(k.curOp.updateMaxLine=!0),b.collapsed)cn(k,c.line,h.line+1);else if(b.className||b.startStyle||b.endStyle||b.css||b.attributes||b.title)for(var A=c.line;A<=h.line;A++)So(k,A,"text");b.atomic&&k2(k.doc),_i(k,"markerAdded",k,b)}return b}var vd=function(a,c){this.markers=a,this.primary=c;for(var h=0;h<a.length;++h)a[h].parent=this};vd.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();_i(this,"clear")}},vd.prototype.find=function(a,c){return this.primary.find(a,c)},S(vd);function G8(a,c,h,d,m){d=ht(d),d.shared=!1;var b=[Ql(a,c,h,d,m)],w=b[0],x=d.widgetNode;return Ro(a,function(k){x&&(d.widgetNode=x.cloneNode(!0)),b.push(Ql(k,Ue(k,c),Ue(k,h),d,m));for(var T=0;T<k.linked.length;++T)if(k.linked[T].isParent)return;w=mt(b)}),new vd(b,w)}function D2(a){return a.findMarks(re(a.first,0),a.clipPos(re(a.lastLine())),function(c){return c.parent})}function K8(a,c){for(var h=0;h<c.length;h++){var d=c[h],m=d.find(),b=a.clipPos(m.from),w=a.clipPos(m.to);if(ze(b,w)){var x=Ql(a,b,w,d.primary,d.primary.type);d.markers.push(x),x.parent=d}}}function Y8(a){for(var c=function(d){var m=a[d],b=[m.primary.doc];Ro(m.primary.doc,function(k){return b.push(k)});for(var w=0;w<m.markers.length;w++){var x=m.markers[w];be(b,x.doc)==-1&&(x.parent=null,m.markers.splice(w--,1))}},h=0;h<a.length;h++)c(h)}var Z8=0,un=function(a,c,h,d,m){if(!(this instanceof un))return new un(a,c,h,d,m);h==null&&(h=0),pd.call(this,[new gd([new Hl("",null)])]),this.first=h,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=h;var b=re(h,0);this.sel=Io(b),this.history=new nm(null),this.id=++Z8,this.modeOption=c,this.lineSep=d,this.direction=m=="rtl"?"rtl":"ltr",this.extend=!1,typeof a=="string"&&(a=this.splitLines(a)),Ov(this,{from:b,to:b,text:a}),Fi(this,Io(b),rt)};un.prototype=$u(pd.prototype,{constructor:un,iter:function(a,c,h){h?this.iterN(a-this.first,c-a,h):this.iterN(this.first,this.first+this.size,a)},insert:function(a,c){for(var h=0,d=0;d<c.length;++d)h+=c[d].height;this.insertInner(a-this.first,c,h)},remove:function(a,c){this.removeInner(a-this.first,c)},getValue:function(a){var c=Jb(this,this.first,this.first+this.size);return a===!1?c:c.join(a||this.lineSeparator())},setValue:ki(function(a){var c=re(this.first,0),h=this.first+this.size-1;Jl(this,{from:c,to:re(h,Ie(this,h).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),this.cm&&od(this.cm,0,0),Fi(this,Io(c),rt)}),replaceRange:function(a,c,h,d){c=Ue(this,c),h=h?Ue(this,h):c,Xl(this,a,c,h,d)},getRange:function(a,c,h){var d=Ta(this,Ue(this,a),Ue(this,c));return h===!1?d:h===""?d.join(""):d.join(h||this.lineSeparator())},getLine:function(a){var c=this.getLineHandle(a);return c&&c.text},getLineHandle:function(a){if(Xu(this,a))return Ie(this,a)},getLineNumber:function(a){return Ct(a)},getLineHandleVisualStart:function(a){return typeof a=="number"&&(a=Ie(this,a)),Rr(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Ue(this,a)},getCursor:function(a){var c=this.sel.primary(),h;return a==null||a=="head"?h=c.head:a=="anchor"?h=c.anchor:a=="end"||a=="to"||a===!1?h=c.to():h=c.from(),h},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ki(function(a,c,h){y2(this,Ue(this,typeof a=="number"?re(a,c||0):a),null,h)}),setSelection:ki(function(a,c,h){y2(this,Ue(this,a),Ue(this,c||a),h)}),extendSelection:ki(function(a,c,h){sm(this,Ue(this,a),c&&Ue(this,c),h)}),extendSelections:ki(function(a,c){w2(this,uk(this,a),c)}),extendSelectionsBy:ki(function(a,c){var h=Rs(this.sel.ranges,a);w2(this,uk(this,h),c)}),setSelections:ki(function(a,c,h){if(!!a.length){for(var d=[],m=0;m<a.length;m++)d[m]=new _t(Ue(this,a[m].anchor),Ue(this,a[m].head||a[m].anchor));c==null&&(c=Math.min(a.length-1,this.sel.primIndex)),Fi(this,Mr(this.cm,d,c),h)}}),addSelection:ki(function(a,c,h){var d=this.sel.ranges.slice(0);d.push(new _t(Ue(this,a),Ue(this,c||a))),Fi(this,Mr(this.cm,d,d.length-1),h)}),getSelection:function(a){for(var c=this.sel.ranges,h,d=0;d<c.length;d++){var m=Ta(this,c[d].from(),c[d].to());h=h?h.concat(m):m}return a===!1?h:h.join(a||this.lineSeparator())},getSelections:function(a){for(var c=[],h=this.sel.ranges,d=0;d<h.length;d++){var m=Ta(this,h[d].from(),h[d].to());a!==!1&&(m=m.join(a||this.lineSeparator())),c[d]=m}return c},replaceSelection:function(a,c,h){for(var d=[],m=0;m<this.sel.ranges.length;m++)d[m]=a;this.replaceSelections(d,c,h||"+input")},replaceSelections:ki(function(a,c,h){for(var d=[],m=this.sel,b=0;b<m.ranges.length;b++){var w=m.ranges[b];d[b]={from:w.from(),to:w.to(),text:this.splitLines(a[b]),origin:h}}for(var x=c&&c!="end"&&B8(this,d,c),k=d.length-1;k>=0;k--)Jl(this,d[k]);x?_2(this,x):this.cm&&Gl(this.cm)}),undo:ki(function(){lm(this,"undo")}),redo:ki(function(){lm(this,"redo")}),undoSelection:ki(function(){lm(this,"undo",!0)}),redoSelection:ki(function(){lm(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,c=0,h=0,d=0;d<a.done.length;d++)a.done[d].ranges||++c;for(var m=0;m<a.undone.length;m++)a.undone[m].ranges||++h;return{undo:c,redo:h}},clearHistory:function(){var a=this;this.history=new nm(this.history),Ro(this,function(c){return c.history=a.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Yl(this.history.done),undone:Yl(this.history.undone)}},setHistory:function(a){var c=this.history=new nm(this.history);c.done=Yl(a.done.slice(0),null,!0),c.undone=Yl(a.undone.slice(0),null,!0)},setGutterMarker:ki(function(a,c,h){return md(this,a,"gutter",function(d){var m=d.gutterMarkers||(d.gutterMarkers={});return m[c]=h,!h&&Df(m)&&(d.gutterMarkers=null),!0})}),clearGutter:ki(function(a){var c=this;this.iter(function(h){h.gutterMarkers&&h.gutterMarkers[a]&&md(c,h,"gutter",function(){return h.gutterMarkers[a]=null,Df(h.gutterMarkers)&&(h.gutterMarkers=null),!0})})}),lineInfo:function(a){var c;if(typeof a=="number"){if(!Xu(this,a)||(c=a,a=Ie(this,a),!a))return null}else if(c=Ct(a),c==null)return null;return{line:c,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:ki(function(a,c,h){return md(this,a,c=="gutter"?"gutter":"class",function(d){var m=c=="text"?"textClass":c=="background"?"bgClass":c=="gutter"?"gutterClass":"wrapClass";if(!d[m])d[m]=h;else{if(F(h).test(d[m]))return!1;d[m]+=" "+h}return!0})}),removeLineClass:ki(function(a,c,h){return md(this,a,c=="gutter"?"gutter":"class",function(d){var m=c=="text"?"textClass":c=="background"?"bgClass":c=="gutter"?"gutterClass":"wrapClass",b=d[m];if(b)if(h==null)d[m]=null;else{var w=b.match(F(h));if(!w)return!1;var x=w.index+w[0].length;d[m]=b.slice(0,w.index)+(!w.index||x==b.length?"":" ")+b.slice(x)||null}else return!1;return!0})}),addLineWidget:ki(function(a,c,h){return $8(this,a,c,h)}),removeLineWidget:function(a){a.clear()},markText:function(a,c,h){return Ql(this,Ue(this,a),Ue(this,c),h,h&&h.type||"range")},setBookmark:function(a,c){var h={replacedWith:c&&(c.nodeType==null?c.widget:c),insertLeft:c&&c.insertLeft,clearWhenEmpty:!1,shared:c&&c.shared,handleMouseEvents:c&&c.handleMouseEvents};return a=Ue(this,a),Ql(this,a,a,h,"bookmark")},findMarksAt:function(a){a=Ue(this,a);var c=[],h=Ie(this,a.line).markedSpans;if(h)for(var d=0;d<h.length;++d){var m=h[d];(m.from==null||m.from<=a.ch)&&(m.to==null||m.to>=a.ch)&&c.push(m.marker.parent||m.marker)}return c},findMarks:function(a,c,h){a=Ue(this,a),c=Ue(this,c);var d=[],m=a.line;return this.iter(a.line,c.line+1,function(b){var w=b.markedSpans;if(w)for(var x=0;x<w.length;x++){var k=w[x];!(k.to!=null&&m==a.line&&a.ch>=k.to||k.from==null&&m!=a.line||k.from!=null&&m==c.line&&k.from>=c.ch)&&(!h||h(k.marker))&&d.push(k.marker.parent||k.marker)}++m}),d},getAllMarks:function(){var a=[];return this.iter(function(c){var h=c.markedSpans;if(h)for(var d=0;d<h.length;++d)h[d].from!=null&&a.push(h[d].marker)}),a},posFromIndex:function(a){var c,h=this.first,d=this.lineSeparator().length;return this.iter(function(m){var b=m.text.length+d;if(b>a)return c=a,!0;a-=b,++h}),Ue(this,re(h,c))},indexFromPos:function(a){a=Ue(this,a);var c=a.ch;if(a.line<this.first||a.ch<0)return 0;var h=this.lineSeparator().length;return this.iter(this.first,a.line,function(d){c+=d.text.length+h}),c},copy:function(a){var c=new un(Jb(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return c.scrollTop=this.scrollTop,c.scrollLeft=this.scrollLeft,c.sel=this.sel,c.extend=!1,a&&(c.history.undoDepth=this.history.undoDepth,c.setHistory(this.getHistory())),c},linkedDoc:function(a){a||(a={});var c=this.first,h=this.first+this.size;a.from!=null&&a.from>c&&(c=a.from),a.to!=null&&a.to<h&&(h=a.to);var d=new un(Jb(this,c,h),a.mode||this.modeOption,c,this.lineSep,this.direction);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],K8(d,D2(this)),d},unlinkDoc:function(a){if(a instanceof Nt&&(a=a.doc),this.linked)for(var c=0;c<this.linked.length;++c){var h=this.linked[c];if(h.doc==a){this.linked.splice(c,1),a.unlinkDoc(this),Y8(D2(this));break}}if(a.history==this.history){var d=[a.id];Ro(a,function(m){return d.push(m.id)},!0),a.history=new nm(null),a.history.done=Yl(this.history.done,d),a.history.undone=Yl(this.history.undone,d)}},iterLinkedDocs:function(a){Ro(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):In(a)},lineSeparator:function(){return this.lineSep||`
`},setDirection:ki(function(a){a!="rtl"&&(a="ltr"),a!=this.direction&&(this.direction=a,this.iter(function(c){return c.order=null}),this.cm&&N8(this.cm))})}),un.prototype.eachLine=un.prototype.iter;var V2=0;function J8(a){var c=this;if(B2(c),!(St(c,a)||Vs(c.display,a))){I(a),o&&(V2=+new Date);var h=Ia(c,a,!0),d=a.dataTransfer.files;if(!(!h||c.isReadOnly()))if(d&&d.length&&window.FileReader&&window.File)for(var m=d.length,b=Array(m),w=0,x=function(){++w==m&&xi(c,function(){h=Ue(c.doc,h);var B={from:h,to:h,text:c.doc.splitLines(b.filter(function(G){return G!=null}).join(c.doc.lineSeparator())),origin:"paste"};Jl(c.doc,B),_2(c.doc,Io(Ue(c.doc,h),Ue(c.doc,Po(B))))})()},k=function(B,G){if(c.options.allowDropFileTypes&&be(c.options.allowDropFileTypes,B.type)==-1){x();return}var J=new FileReader;J.onerror=function(){return x()},J.onload=function(){var oe=J.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(oe)){x();return}b[G]=oe,x()},J.readAsText(B)},T=0;T<d.length;T++)k(d[T],T);else{if(c.state.draggingText&&c.doc.sel.contains(h)>-1){c.state.draggingText(a),setTimeout(function(){return c.display.input.focus()},20);return}try{var A=a.dataTransfer.getData("Text");if(A){var R;if(c.state.draggingText&&!c.state.draggingText.copy&&(R=c.listSelections()),om(c.doc,Io(h,h)),R)for(var j=0;j<R.length;++j)Xl(c.doc,"",R[j].anchor,R[j].head,"drag");c.replaceSelection(A,"around","paste"),c.display.input.focus()}}catch(B){}}}}function X8(a,c){if(o&&(!a.state.draggingText||+new Date-V2<100)){le(c);return}if(!(St(a,c)||Vs(a.display,c))&&(c.dataTransfer.setData("Text",a.getSelection()),c.dataTransfer.effectAllowed="copyMove",c.dataTransfer.setDragImage&&!_)){var h=ae("img",null,null,"position: fixed; left: 0; top: 0;");h.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(h.width=h.height=1,a.display.wrapper.appendChild(h),h._top=h.offsetTop),c.dataTransfer.setDragImage(h,0,0),y&&h.parentNode.removeChild(h)}}function Q8(a,c){var h=Ia(a,c);if(!!h){var d=document.createDocumentFragment();wv(a,h,d),a.display.dragCursor||(a.display.dragCursor=ae("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),Ee(a.display.dragCursor,d)}}function B2(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function N2(a){if(!!document.getElementsByClassName){for(var c=document.getElementsByClassName("CodeMirror"),h=[],d=0;d<c.length;d++){var m=c[d].CodeMirror;m&&h.push(m)}h.length&&h[0].operation(function(){for(var b=0;b<h.length;b++)a(h[b])})}}var F2=!1;function eF(){F2||(tF(),F2=!0)}function tF(){var a;Oe(window,"resize",function(){a==null&&(a=setTimeout(function(){a=null,N2(iF)},100))}),Oe(window,"blur",function(){return N2($l)})}function iF(a){var c=a.display;c.cachedCharWidth=c.cachedTextHeight=c.cachedPaddingH=null,c.scrollbarsClipped=!1,a.setSize()}for(var Mo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},wd=0;wd<10;wd++)Mo[wd+48]=Mo[wd+96]=String(wd);for(var cm=65;cm<=90;cm++)Mo[cm]=String.fromCharCode(cm);for(var yd=1;yd<=12;yd++)Mo[yd+111]=Mo[yd+63235]="F"+yd;var Ns={};Ns.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ns.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ns.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ns.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ns.default=N?Ns.macDefault:Ns.pcDefault;function nF(a){var c=a.split(/-(?!$)/);a=c[c.length-1];for(var h,d,m,b,w=0;w<c.length-1;w++){var x=c[w];if(/^(cmd|meta|m)$/i.test(x))b=!0;else if(/^a(lt)?$/i.test(x))h=!0;else if(/^(c|ctrl|control)$/i.test(x))d=!0;else if(/^s(hift)?$/i.test(x))m=!0;else throw new Error("Unrecognized modifier name: "+x)}return h&&(a="Alt-"+a),d&&(a="Ctrl-"+a),b&&(a="Cmd-"+a),m&&(a="Shift-"+a),a}function rF(a){var c={};for(var h in a)if(a.hasOwnProperty(h)){var d=a[h];if(/^(name|fallthrough|(de|at)tach)$/.test(h))continue;if(d=="..."){delete a[h];continue}for(var m=Rs(h.split(" "),nF),b=0;b<m.length;b++){var w=void 0,x=void 0;b==m.length-1?(x=m.join(" "),w=d):(x=m.slice(0,b+1).join(" "),w="...");var k=c[x];if(!k)c[x]=w;else if(k!=w)throw new Error("Inconsistent bindings for "+x)}delete a[h]}for(var T in c)a[T]=c[T];return a}function ec(a,c,h,d){c=um(c);var m=c.call?c.call(a,d):c[a];if(m===!1)return"nothing";if(m==="...")return"multi";if(m!=null&&h(m))return"handled";if(c.fallthrough){if(Object.prototype.toString.call(c.fallthrough)!="[object Array]")return ec(a,c.fallthrough,h,d);for(var b=0;b<c.fallthrough.length;b++){var w=ec(a,c.fallthrough[b],h,d);if(w)return w}}}function j2(a){var c=typeof a=="string"?a:Mo[a.keyCode];return c=="Ctrl"||c=="Alt"||c=="Shift"||c=="Mod"}function H2(a,c,h){var d=a;return c.altKey&&d!="Alt"&&(a="Alt-"+a),(ie?c.metaKey:c.ctrlKey)&&d!="Ctrl"&&(a="Ctrl-"+a),(ie?c.ctrlKey:c.metaKey)&&d!="Mod"&&(a="Cmd-"+a),!h&&c.shiftKey&&d!="Shift"&&(a="Shift-"+a),a}function z2(a,c){if(y&&a.keyCode==34&&a.char)return!1;var h=Mo[a.keyCode];return h==null||a.altGraphKey?!1:(a.keyCode==3&&a.code&&(h=a.code),H2(h,a,c))}function um(a){return typeof a=="string"?Ns[a]:a}function tc(a,c){for(var h=a.doc.sel.ranges,d=[],m=0;m<h.length;m++){for(var b=c(h[m]);d.length&&ze(b.from,mt(d).to)<=0;){var w=d.pop();if(ze(w.from,b.from)<0){b.from=w.from;break}}d.push(b)}Pn(a,function(){for(var x=d.length-1;x>=0;x--)Xl(a.doc,"",d[x].from,d[x].to,"+delete");Gl(a)})}function Vv(a,c,h){var d=Yu(a.text,c+h,h);return d<0||d>a.text.length?null:d}function Bv(a,c,h){var d=Vv(a,c.ch,h);return d==null?null:new re(c.line,d,h<0?"after":"before")}function Nv(a,c,h,d,m){if(a){c.doc.direction=="rtl"&&(m=-m);var b=vt(h,c.doc.direction);if(b){var w=m<0?mt(b):b[0],x=m<0==(w.level==1),k=x?"after":"before",T;if(w.level>0||c.doc.direction=="rtl"){var A=Ul(c,h);T=m<0?h.text.length-1:0;var R=ns(c,A,T).top;T=_a(function(j){return ns(c,A,j).top==R},m<0==(w.level==1)?w.from:w.to-1,T),k=="before"&&(T=Vv(h,T,1))}else T=m<0?w.to:w.from;return new re(d,T,k)}}return new re(d,m<0?h.text.length:0,m<0?"before":"after")}function sF(a,c,h,d){var m=vt(c,a.doc.direction);if(!m)return Bv(c,h,d);h.ch>=c.text.length?(h.ch=c.text.length,h.sticky="before"):h.ch<=0&&(h.ch=0,h.sticky="after");var b=xa(m,h.ch,h.sticky),w=m[b];if(a.doc.direction=="ltr"&&w.level%2==0&&(d>0?w.to>h.ch:w.from<h.ch))return Bv(c,h,d);var x=function(ue,ge){return Vv(c,ue instanceof re?ue.ch:ue,ge)},k,T=function(ue){return a.options.lineWrapping?(k=k||Ul(a,c),Gk(a,c,k,ue)):{begin:0,end:c.text.length}},A=T(h.sticky=="before"?x(h,-1):h.ch);if(a.doc.direction=="rtl"||w.level==1){var R=w.level==1==d<0,j=x(h,R?1:-1);if(j!=null&&(R?j<=w.to&&j<=A.end:j>=w.from&&j>=A.begin)){var B=R?"before":"after";return new re(h.line,j,B)}}var G=function(ue,ge,de){for(var xe=function(Rt,Ci){return Ci?new re(h.line,x(Rt,1),"before"):new re(h.line,Rt,"after")};ue>=0&&ue<m.length;ue+=ge){var Me=m[ue],Re=ge>0==(Me.level!=1),Qe=Re?de.begin:x(de.end,-1);if(Me.from<=Qe&&Qe<Me.to||(Qe=Re?Me.from:x(Me.to,-1),de.begin<=Qe&&Qe<de.end))return xe(Qe,Re)}},J=G(b+d,d,A);if(J)return J;var oe=d>0?A.end:x(A.begin,-1);return oe!=null&&!(d>0&&oe==c.text.length)&&(J=G(d>0?0:m.length-1,d,T(oe)),J)?J:null}var _d={selectAll:E2,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),rt)},killLine:function(a){return tc(a,function(c){if(c.empty()){var h=Ie(a.doc,c.head.line).text.length;return c.head.ch==h&&c.head.line<a.lastLine()?{from:c.head,to:re(c.head.line+1,0)}:{from:c.head,to:re(c.head.line,h)}}else return{from:c.from(),to:c.to()}})},deleteLine:function(a){return tc(a,function(c){return{from:re(c.from().line,0),to:Ue(a.doc,re(c.to().line+1,0))}})},delLineLeft:function(a){return tc(a,function(c){return{from:re(c.from().line,0),to:c.from()}})},delWrappedLineLeft:function(a){return tc(a,function(c){var h=a.charCoords(c.head,"div").top+5,d=a.coordsChar({left:0,top:h},"div");return{from:d,to:c.from()}})},delWrappedLineRight:function(a){return tc(a,function(c){var h=a.charCoords(c.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:h},"div");return{from:c.from(),to:d}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(re(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(re(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(c){return U2(a,c.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(c){return W2(a,c.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(c){return oF(a,c.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(c){var h=a.cursorCoords(c.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:h},"div")},Et)},goLineLeft:function(a){return a.extendSelectionsBy(function(c){var h=a.cursorCoords(c.head,"div").top+5;return a.coordsChar({left:0,top:h},"div")},Et)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(c){var h=a.cursorCoords(c.head,"div").top+5,d=a.coordsChar({left:0,top:h},"div");return d.ch<a.getLine(d.line).search(/\S/)?W2(a,c.head):d},Et)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"codepoint")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("	")},insertSoftTab:function(a){for(var c=[],h=a.listSelections(),d=a.options.tabSize,m=0;m<h.length;m++){var b=h[m].from(),w=ce(a.getLine(b.line),b.ch,d);c.push(Ps(d-w%d))}a.replaceSelections(c)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return Pn(a,function(){for(var c=a.listSelections(),h=[],d=0;d<c.length;d++)if(!!c[d].empty()){var m=c[d].head,b=Ie(a.doc,m.line).text;if(b){if(m.ch==b.length&&(m=new re(m.line,m.ch-1)),m.ch>0)m=new re(m.line,m.ch+1),a.replaceRange(b.charAt(m.ch-1)+b.charAt(m.ch-2),re(m.line,m.ch-2),m,"+transpose");else if(m.line>a.doc.first){var w=Ie(a.doc,m.line-1).text;w&&(m=new re(m.line,1),a.replaceRange(b.charAt(0)+a.doc.lineSeparator()+w.charAt(w.length-1),re(m.line-1,w.length-1),m,"+transpose"))}}h.push(new _t(m,m))}a.setSelections(h)})},newlineAndIndent:function(a){return Pn(a,function(){for(var c=a.listSelections(),h=c.length-1;h>=0;h--)a.replaceRange(a.doc.lineSeparator(),c[h].anchor,c[h].head,"+input");c=a.listSelections();for(var d=0;d<c.length;d++)a.indentLine(c[d].from().line,null,!0);Gl(a)})},openLine:function(a){return a.replaceSelection(`
`,"start")},toggleOverwrite:function(a){return a.toggleOverwrite()}};function U2(a,c){var h=Ie(a.doc,c),d=Rr(h);return d!=h&&(c=Ct(d)),Nv(!0,a,d,c,1)}function oF(a,c){var h=Ie(a.doc,c),d=UN(h);return d!=h&&(c=Ct(d)),Nv(!0,a,h,c,-1)}function W2(a,c){var h=U2(a,c.line),d=Ie(a.doc,h.line),m=vt(d,a.doc.direction);if(!m||m[0].level==0){var b=Math.max(h.ch,d.text.search(/\S/)),w=c.line==h.line&&c.ch<=b&&c.ch;return re(h.line,w?0:b,h.sticky)}return h}function dm(a,c,h){if(typeof c=="string"&&(c=_d[c],!c))return!1;a.display.input.ensurePolled();var d=a.display.shift,m=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),h&&(a.display.shift=!1),m=c(a)!=ft}finally{a.display.shift=d,a.state.suppressEdits=!1}return m}function aF(a,c,h){for(var d=0;d<a.state.keyMaps.length;d++){var m=ec(c,a.state.keyMaps[d],h,a);if(m)return m}return a.options.extraKeys&&ec(c,a.options.extraKeys,h,a)||ec(c,a.options.keyMap,h,a)}var lF=new pe;function xd(a,c,h,d){var m=a.state.keySeq;if(m){if(j2(c))return"handled";if(/\'$/.test(c)?a.state.keySeq=null:lF.set(50,function(){a.state.keySeq==m&&(a.state.keySeq=null,a.display.input.reset())}),q2(a,m+" "+c,h,d))return!0}return q2(a,c,h,d)}function q2(a,c,h,d){var m=aF(a,c,d);return m=="multi"&&(a.state.keySeq=c),m=="handled"&&_i(a,"keyHandled",a,c,h),(m=="handled"||m=="multi")&&(I(h),yv(a)),!!m}function $2(a,c){var h=z2(c,!0);return h?c.shiftKey&&!a.state.keySeq?xd(a,"Shift-"+h,c,function(d){return dm(a,d,!0)})||xd(a,h,c,function(d){if(typeof d=="string"?/^go[A-Z]/.test(d):d.motion)return dm(a,d)}):xd(a,h,c,function(d){return dm(a,d)}):!1}function cF(a,c,h){return xd(a,"'"+h+"'",c,function(d){return dm(a,d,!0)})}var Fv=null;function G2(a){var c=this;if(!(a.target&&a.target!=c.display.input.getField())&&(c.curOp.focus=fe(se(c)),!St(c,a))){o&&l<11&&a.keyCode==27&&(a.returnValue=!1);var h=a.keyCode;c.display.shift=h==16||a.shiftKey;var d=$2(c,a);y&&(Fv=d?h:null,!d&&h==88&&!ka&&(N?a.metaKey:a.ctrlKey)&&c.replaceSelection("",null,"cut")),t&&!N&&!d&&h==46&&a.shiftKey&&!a.ctrlKey&&document.execCommand&&document.execCommand("cut"),h==18&&!/\bCodeMirror-crosshair\b/.test(c.display.lineDiv.className)&&uF(c)}}function uF(a){var c=a.display.lineDiv;ke(c,"CodeMirror-crosshair");function h(d){(d.keyCode==18||!d.altKey)&&(te(c,"CodeMirror-crosshair"),Mi(document,"keyup",h),Mi(document,"mouseover",h))}Oe(document,"keyup",h),Oe(document,"mouseover",h)}function K2(a){a.keyCode==16&&(this.doc.sel.shift=!1),St(this,a)}function Y2(a){var c=this;if(!(a.target&&a.target!=c.display.input.getField())&&!(Vs(c.display,a)||St(c,a)||a.ctrlKey&&!a.altKey||N&&a.metaKey)){var h=a.keyCode,d=a.charCode;if(y&&h==Fv){Fv=null,I(a);return}if(!(y&&(!a.which||a.which<10)&&$2(c,a))){var m=String.fromCharCode(d==null?h:d);m!="\b"&&(cF(c,a,m)||c.display.input.onKeyPress(a))}}}var dF=400,jv=function(a,c,h){this.time=a,this.pos=c,this.button=h};jv.prototype.compare=function(a,c,h){return this.time+dF>a&&ze(c,this.pos)==0&&h==this.button};var kd,Cd;function hF(a,c){var h=+new Date;return Cd&&Cd.compare(h,a,c)?(kd=Cd=null,"triple"):kd&&kd.compare(h,a,c)?(Cd=new jv(h,a,c),kd=null,"double"):(kd=new jv(h,a,c),Cd=null,"single")}function Z2(a){var c=this,h=c.display;if(!(St(c,a)||h.activeTouch&&h.input.supportsTouch())){if(h.input.ensurePolled(),h.shift=a.shiftKey,Vs(h,a)){u||(h.scroller.draggable=!1,setTimeout(function(){return h.scroller.draggable=!0},100));return}if(!Hv(c,a)){var d=Ia(c,a),m=Ke(a),b=d?hF(d,m):"single";nt(c).focus(),m==1&&c.state.selectingText&&c.state.selectingText(a),!(d&&fF(c,m,d,b,a))&&(m==1?d?gF(c,d,b,a):ve(a)==h.scroller&&I(a):m==2?(d&&sm(c.doc,d),setTimeout(function(){return h.input.focus()},20)):m==3&&(X?c.display.input.onContextMenu(a):_v(c)))}}}function fF(a,c,h,d,m){var b="Click";return d=="double"?b="Double"+b:d=="triple"&&(b="Triple"+b),b=(c==1?"Left":c==2?"Middle":"Right")+b,xd(a,H2(b,m),m,function(w){if(typeof w=="string"&&(w=_d[w]),!w)return!1;var x=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),x=w(a,h)!=ft}finally{a.state.suppressEdits=!1}return x})}function mF(a,c,h){var d=a.getOption("configureMouse"),m=d?d(a,c,h):{};if(m.unit==null){var b=W?h.shiftKey&&h.metaKey:h.altKey;m.unit=b?"rectangle":c=="single"?"char":c=="double"?"word":"line"}return(m.extend==null||a.doc.extend)&&(m.extend=a.doc.extend||h.shiftKey),m.addNew==null&&(m.addNew=N?h.metaKey:h.ctrlKey),m.moveOnDrag==null&&(m.moveOnDrag=!(N?h.altKey:h.ctrlKey)),m}function gF(a,c,h,d){o?setTimeout(Mt(Jk,a),0):a.curOp.focus=fe(se(a));var m=mF(a,h,d),b=a.doc.sel,w;a.options.dragDrop&&Ae&&!a.isReadOnly()&&h=="single"&&(w=b.contains(c))>-1&&(ze((w=b.ranges[w]).from(),c)<0||c.xRel>0)&&(ze(w.to(),c)>0||c.xRel<0)?pF(a,d,c,m):bF(a,d,c,m)}function pF(a,c,h,d){var m=a.display,b=!1,w=xi(a,function(T){u&&(m.scroller.draggable=!1),a.state.draggingText=!1,a.state.delayingBlurEvent&&(a.hasFocus()?a.state.delayingBlurEvent=!1:_v(a)),Mi(m.wrapper.ownerDocument,"mouseup",w),Mi(m.wrapper.ownerDocument,"mousemove",x),Mi(m.scroller,"dragstart",k),Mi(m.scroller,"drop",w),b||(I(T),d.addNew||sm(a.doc,h,null,null,d.extend),u&&!_||o&&l==9?setTimeout(function(){m.wrapper.ownerDocument.body.focus({preventScroll:!0}),m.input.focus()},20):m.input.focus())}),x=function(T){b=b||Math.abs(c.clientX-T.clientX)+Math.abs(c.clientY-T.clientY)>=10},k=function(){return b=!0};u&&(m.scroller.draggable=!0),a.state.draggingText=w,w.copy=!d.moveOnDrag,Oe(m.wrapper.ownerDocument,"mouseup",w),Oe(m.wrapper.ownerDocument,"mousemove",x),Oe(m.scroller,"dragstart",k),Oe(m.scroller,"drop",w),a.state.delayingBlurEvent=!0,setTimeout(function(){return m.input.focus()},20),m.scroller.dragDrop&&m.scroller.dragDrop()}function J2(a,c,h){if(h=="char")return new _t(c,c);if(h=="word")return a.findWordAt(c);if(h=="line")return new _t(re(c.line,0),Ue(a.doc,re(c.line+1,0)));var d=h(a,c);return new _t(d.from,d.to)}function bF(a,c,h,d){o&&_v(a);var m=a.display,b=a.doc;I(c);var w,x,k=b.sel,T=k.ranges;if(d.addNew&&!d.extend?(x=b.sel.contains(h),x>-1?w=T[x]:w=new _t(h,h)):(w=b.sel.primary(),x=b.sel.primIndex),d.unit=="rectangle")d.addNew||(w=new _t(h,h)),h=Ia(a,c,!0,!0),x=-1;else{var A=J2(a,h,d.unit);d.extend?w=Lv(w,A.anchor,A.head,d.extend):w=A}d.addNew?x==-1?(x=T.length,Fi(b,Mr(a,T.concat([w]),x),{scroll:!1,origin:"*mouse"})):T.length>1&&T[x].empty()&&d.unit=="char"&&!d.extend?(Fi(b,Mr(a,T.slice(0,x).concat(T.slice(x+1)),0),{scroll:!1,origin:"*mouse"}),k=b.sel):Dv(b,x,w,ai):(x=0,Fi(b,new qn([w],0),ai),k=b.sel);var R=h;function j(de){if(ze(R,de)!=0)if(R=de,d.unit=="rectangle"){for(var xe=[],Me=a.options.tabSize,Re=ce(Ie(b,h.line).text,h.ch,Me),Qe=ce(Ie(b,de.line).text,de.ch,Me),Rt=Math.min(Re,Qe),Ci=Math.max(Re,Qe),Wt=Math.min(h.line,de.line),Rn=Math.min(a.lastLine(),Math.max(h.line,de.line));Wt<=Rn;Wt++){var dn=Ie(b,Wt).text,ui=ot(dn,Rt,Me);Rt==Ci?xe.push(new _t(re(Wt,ui),re(Wt,ui))):dn.length>ui&&xe.push(new _t(re(Wt,ui),re(Wt,ot(dn,Ci,Me))))}xe.length||xe.push(new _t(h,h)),Fi(b,Mr(a,k.ranges.slice(0,x).concat(xe),x),{origin:"*mouse",scroll:!1}),a.scrollIntoView(de)}else{var hn=w,Li=J2(a,de,d.unit),mi=hn.anchor,di;ze(Li.anchor,mi)>0?(di=Li.head,mi=Ff(hn.from(),Li.anchor)):(di=Li.anchor,mi=Nf(hn.to(),Li.head));var Yt=k.ranges.slice(0);Yt[x]=vF(a,new _t(Ue(b,mi),di)),Fi(b,Mr(a,Yt,x),ai)}}var B=m.wrapper.getBoundingClientRect(),G=0;function J(de){var xe=++G,Me=Ia(a,de,!0,d.unit=="rectangle");if(!!Me)if(ze(Me,R)!=0){a.curOp.focus=fe(se(a)),j(Me);var Re=Qf(m,b);(Me.line>=Re.to||Me.line<Re.from)&&setTimeout(xi(a,function(){G==xe&&J(de)}),150)}else{var Qe=de.clientY<B.top?-20:de.clientY>B.bottom?20:0;Qe&&setTimeout(xi(a,function(){G==xe&&(m.scroller.scrollTop+=Qe,J(de))}),50)}}function oe(de){a.state.selectingText=!1,G=1/0,de&&(I(de),m.input.focus()),Mi(m.wrapper.ownerDocument,"mousemove",ue),Mi(m.wrapper.ownerDocument,"mouseup",ge),b.history.lastSelOrigin=null}var ue=xi(a,function(de){de.buttons===0||!Ke(de)?oe(de):J(de)}),ge=xi(a,oe);a.state.selectingText=ge,Oe(m.wrapper.ownerDocument,"mousemove",ue),Oe(m.wrapper.ownerDocument,"mouseup",ge)}function vF(a,c){var h=c.anchor,d=c.head,m=Ie(a.doc,h.line);if(ze(h,d)==0&&h.sticky==d.sticky)return c;var b=vt(m);if(!b)return c;var w=xa(b,h.ch,h.sticky),x=b[w];if(x.from!=h.ch&&x.to!=h.ch)return c;var k=w+(x.from==h.ch==(x.level!=1)?0:1);if(k==0||k==b.length)return c;var T;if(d.line!=h.line)T=(d.line-h.line)*(a.doc.direction=="ltr"?1:-1)>0;else{var A=xa(b,d.ch,d.sticky),R=A-w||(d.ch-h.ch)*(x.level==1?-1:1);A==k-1||A==k?T=R<0:T=R>0}var j=b[k+(T?-1:0)],B=T==(j.level==1),G=B?j.from:j.to,J=B?"after":"before";return h.ch==G&&h.sticky==J?c:new _t(new re(h.line,G,J),d)}function X2(a,c,h,d){var m,b;if(c.touches)m=c.touches[0].clientX,b=c.touches[0].clientY;else try{m=c.clientX,b=c.clientY}catch(j){return!1}if(m>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&I(c);var w=a.display,x=w.lineDiv.getBoundingClientRect();if(b>x.bottom||!An(a,h))return Y(c);b-=x.top-w.viewOffset;for(var k=0;k<a.display.gutterSpecs.length;++k){var T=w.gutters.childNodes[k];if(T&&T.getBoundingClientRect().right>=m){var A=Ea(a.doc,b),R=a.display.gutterSpecs[k];return Bt(a,h,a,A,R.className,c),Y(c)}}}function Hv(a,c){return X2(a,c,"gutterClick",!0)}function Q2(a,c){Vs(a.display,c)||wF(a,c)||St(a,c,"contextmenu")||X||a.display.input.onContextMenu(c)}function wF(a,c){return An(a,"gutterContextMenu")?X2(a,c,"gutterContextMenu",!1):!1}function eC(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),rd(a)}var ic={toString:function(){return"CodeMirror.Init"}},tC={},hm={};function yF(a){var c=a.optionHandlers;function h(d,m,b,w){a.defaults[d]=m,b&&(c[d]=w?function(x,k,T){T!=ic&&b(x,k,T)}:b)}a.defineOption=h,a.Init=ic,h("value","",function(d,m){return d.setValue(m)},!0),h("mode",null,function(d,m){d.doc.modeOption=m,Rv(d)},!0),h("indentUnit",2,Rv,!0),h("indentWithTabs",!1),h("smartIndent",!0),h("tabSize",4,function(d){hd(d),rd(d),cn(d)},!0),h("lineSeparator",null,function(d,m){if(d.doc.lineSep=m,!!m){var b=[],w=d.doc.first;d.doc.iter(function(k){for(var T=0;;){var A=k.text.indexOf(m,T);if(A==-1)break;T=A+m.length,b.push(re(w,A))}w++});for(var x=b.length-1;x>=0;x--)Xl(d.doc,m,b[x],re(b[x].line,b[x].ch+m.length))}}),h("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(d,m,b){d.state.specialChars=new RegExp(m.source+(m.test("	")?"":"|	"),"g"),b!=ic&&d.refresh()}),h("specialCharPlaceholder",YN,function(d){return d.refresh()},!0),h("electricChars",!0),h("inputStyle",O?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),h("spellcheck",!1,function(d,m){return d.getInputField().spellcheck=m},!0),h("autocorrect",!1,function(d,m){return d.getInputField().autocorrect=m},!0),h("autocapitalize",!1,function(d,m){return d.getInputField().autocapitalize=m},!0),h("rtlMoveVisually",!Z),h("wholeLineUpdateBefore",!0),h("theme","default",function(d){eC(d),dd(d)},!0),h("keyMap","default",function(d,m,b){var w=um(m),x=b!=ic&&um(b);x&&x.detach&&x.detach(d,w),w.attach&&w.attach(d,x||null)}),h("extraKeys",null),h("configureMouse",null),h("lineWrapping",!1,xF,!0),h("gutters",[],function(d,m){d.display.gutterSpecs=Iv(m,d.options.lineNumbers),dd(d)},!0),h("fixedGutter",!0,function(d,m){d.display.gutters.style.left=m?bv(d.display)+"px":"0",d.refresh()},!0),h("coverGutterNextToScrollbar",!1,function(d){return Kl(d)},!0),h("scrollbarStyle","native",function(d){n2(d),Kl(d),d.display.scrollbars.setScrollTop(d.doc.scrollTop),d.display.scrollbars.setScrollLeft(d.doc.scrollLeft)},!0),h("lineNumbers",!1,function(d,m){d.display.gutterSpecs=Iv(d.options.gutters,m),dd(d)},!0),h("firstLineNumber",1,dd,!0),h("lineNumberFormatter",function(d){return d},dd,!0),h("showCursorWhenSelecting",!1,sd,!0),h("resetSelectionOnContextMenu",!0),h("lineWiseCopyCut",!0),h("pasteLinesPerSelection",!0),h("selectionsMayTouch",!1),h("readOnly",!1,function(d,m){m=="nocursor"&&($l(d),d.display.input.blur()),d.display.input.readOnlyChanged(m)}),h("screenReaderLabel",null,function(d,m){m=m===""?null:m,d.display.input.screenReaderLabelChanged(m)}),h("disableInput",!1,function(d,m){m||d.display.input.reset()},!0),h("dragDrop",!0,_F),h("allowDropFileTypes",null),h("cursorBlinkRate",530),h("cursorScrollMargin",0),h("cursorHeight",1,sd,!0),h("singleCursorHeightPerLine",!0,sd,!0),h("workTime",100),h("workDelay",100),h("flattenSpans",!0,hd,!0),h("addModeClass",!1,hd,!0),h("pollInterval",100),h("undoDepth",200,function(d,m){return d.doc.history.undoDepth=m}),h("historyEventDelay",1250),h("viewportMargin",10,function(d){return d.refresh()},!0),h("maxHighlightLength",1e4,hd,!0),h("moveInputWithCursor",!0,function(d,m){m||d.display.input.resetPosition()}),h("tabindex",null,function(d,m){return d.display.input.getField().tabIndex=m||""}),h("autofocus",null),h("direction","ltr",function(d,m){return d.doc.setDirection(m)},!0),h("phrases",null)}function _F(a,c,h){var d=h&&h!=ic;if(!c!=!d){var m=a.display.dragFunctions,b=c?Oe:Mi;b(a.display.scroller,"dragstart",m.start),b(a.display.scroller,"dragenter",m.enter),b(a.display.scroller,"dragover",m.over),b(a.display.scroller,"dragleave",m.leave),b(a.display.scroller,"drop",m.drop)}}function xF(a){a.options.lineWrapping?(ke(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(te(a.display.wrapper,"CodeMirror-wrap"),av(a)),vv(a),cn(a),rd(a),setTimeout(function(){return Kl(a)},100)}function Nt(a,c){var h=this;if(!(this instanceof Nt))return new Nt(a,c);this.options=c=c?ht(c):{},ht(tC,c,!1);var d=c.value;typeof d=="string"?d=new un(d,c.mode,null,c.lineSeparator,c.direction):c.mode&&(d.modeOption=c.mode),this.doc=d;var m=new Nt.inputStyles[c.inputStyle](this),b=this.display=new D8(a,d,m,c);b.wrapper.CodeMirror=this,eC(this),c.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n2(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new pe,keySeq:null,specialChars:null},c.autofocus&&!O&&b.input.focus(),o&&l<11&&setTimeout(function(){return h.display.input.reset(!0)},20),kF(this),eF(),Ma(this),this.curOp.forceUpdate=!0,f2(this,d),c.autofocus&&!O||this.hasFocus()?setTimeout(function(){h.hasFocus()&&!h.state.focused&&xv(h)},20):$l(this);for(var w in hm)hm.hasOwnProperty(w)&&hm[w](this,c[w],ic);o2(this),c.finishInit&&c.finishInit(this);for(var x=0;x<zv.length;++x)zv[x](this);La(this),u&&c.lineWrapping&&getComputedStyle(b.lineDiv).textRendering=="optimizelegibility"&&(b.lineDiv.style.textRendering="auto")}Nt.defaults=tC,Nt.optionHandlers=hm;function kF(a){var c=a.display;Oe(c.scroller,"mousedown",xi(a,Z2)),o&&l<11?Oe(c.scroller,"dblclick",xi(a,function(k){if(!St(a,k)){var T=Ia(a,k);if(!(!T||Hv(a,k)||Vs(a.display,k))){I(k);var A=a.findWordAt(T);sm(a.doc,A.anchor,A.head)}}})):Oe(c.scroller,"dblclick",function(k){return St(a,k)||I(k)}),Oe(c.scroller,"contextmenu",function(k){return Q2(a,k)}),Oe(c.input.getField(),"contextmenu",function(k){c.scroller.contains(k.target)||Q2(a,k)});var h,d={end:0};function m(){c.activeTouch&&(h=setTimeout(function(){return c.activeTouch=null},1e3),d=c.activeTouch,d.end=+new Date)}function b(k){if(k.touches.length!=1)return!1;var T=k.touches[0];return T.radiusX<=1&&T.radiusY<=1}function w(k,T){if(T.left==null)return!0;var A=T.left-k.left,R=T.top-k.top;return A*A+R*R>20*20}Oe(c.scroller,"touchstart",function(k){if(!St(a,k)&&!b(k)&&!Hv(a,k)){c.input.ensurePolled(),clearTimeout(h);var T=+new Date;c.activeTouch={start:T,moved:!1,prev:T-d.end<=300?d:null},k.touches.length==1&&(c.activeTouch.left=k.touches[0].pageX,c.activeTouch.top=k.touches[0].pageY)}}),Oe(c.scroller,"touchmove",function(){c.activeTouch&&(c.activeTouch.moved=!0)}),Oe(c.scroller,"touchend",function(k){var T=c.activeTouch;if(T&&!Vs(c,k)&&T.left!=null&&!T.moved&&new Date-T.start<300){var A=a.coordsChar(c.activeTouch,"page"),R;!T.prev||w(T,T.prev)?R=new _t(A,A):!T.prev.prev||w(T,T.prev.prev)?R=a.findWordAt(A):R=new _t(re(A.line,0),Ue(a.doc,re(A.line+1,0))),a.setSelection(R.anchor,R.head),a.focus(),I(k)}m()}),Oe(c.scroller,"touchcancel",m),Oe(c.scroller,"scroll",function(){c.scroller.clientHeight&&(ad(a,c.scroller.scrollTop),Ra(a,c.scroller.scrollLeft,!0),Bt(a,"scroll",a))}),Oe(c.scroller,"mousewheel",function(k){return c2(a,k)}),Oe(c.scroller,"DOMMouseScroll",function(k){return c2(a,k)}),Oe(c.wrapper,"scroll",function(){return c.wrapper.scrollTop=c.wrapper.scrollLeft=0}),c.dragFunctions={enter:function(k){St(a,k)||le(k)},over:function(k){St(a,k)||(Q8(a,k),le(k))},start:function(k){return X8(a,k)},drop:xi(a,J8),leave:function(k){St(a,k)||B2(a)}};var x=c.input.getField();Oe(x,"keyup",function(k){return K2.call(a,k)}),Oe(x,"keydown",xi(a,G2)),Oe(x,"keypress",xi(a,Y2)),Oe(x,"focus",function(k){return xv(a,k)}),Oe(x,"blur",function(k){return $l(a,k)})}var zv=[];Nt.defineInitHook=function(a){return zv.push(a)};function Td(a,c,h,d){var m=a.doc,b;h==null&&(h="add"),h=="smart"&&(m.mode.indent?b=Qu(a,c).state:h="prev");var w=a.options.tabSize,x=Ie(m,c),k=ce(x.text,null,w);x.stateAfter&&(x.stateAfter=null);var T=x.text.match(/^\s*/)[0],A;if(!d&&!/\S/.test(x.text))A=0,h="not";else if(h=="smart"&&(A=m.mode.indent(b,x.text.slice(T.length),x.text),A==ft||A>150)){if(!d)return;h="prev"}h=="prev"?c>m.first?A=ce(Ie(m,c-1).text,null,w):A=0:h=="add"?A=k+a.options.indentUnit:h=="subtract"?A=k-a.options.indentUnit:typeof h=="number"&&(A=k+h),A=Math.max(0,A);var R="",j=0;if(a.options.indentWithTabs)for(var B=Math.floor(A/w);B;--B)j+=w,R+="	";if(j<A&&(R+=Ps(A-j)),R!=T)return Xl(m,R,re(c,0),re(c,T.length),"+input"),x.stateAfter=null,!0;for(var G=0;G<m.sel.ranges.length;G++){var J=m.sel.ranges[G];if(J.head.line==c&&J.head.ch<T.length){var oe=re(c,T.length);Dv(m,G,new _t(oe,oe));break}}}var Lr=null;function fm(a){Lr=a}function Uv(a,c,h,d,m){var b=a.doc;a.display.shift=!1,d||(d=b.sel);var w=+new Date-200,x=m=="paste"||a.state.pasteIncoming>w,k=In(c),T=null;if(x&&d.ranges.length>1)if(Lr&&Lr.text.join(`
`)==c){if(d.ranges.length%Lr.text.length==0){T=[];for(var A=0;A<Lr.text.length;A++)T.push(b.splitLines(Lr.text[A]))}}else k.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(T=Rs(k,function(ue){return[ue]}));for(var R=a.curOp.updateInput,j=d.ranges.length-1;j>=0;j--){var B=d.ranges[j],G=B.from(),J=B.to();B.empty()&&(h&&h>0?G=re(G.line,G.ch-h):a.state.overwrite&&!x?J=re(J.line,Math.min(Ie(b,J.line).text.length,J.ch+mt(k).length)):x&&Lr&&Lr.lineWise&&Lr.text.join(`
`)==k.join(`
`)&&(G=J=re(G.line,0)));var oe={from:G,to:J,text:T?T[j%T.length]:k,origin:m||(x?"paste":a.state.cutIncoming>w?"cut":"+input")};Jl(a.doc,oe),_i(a,"inputRead",a,oe)}c&&!x&&nC(a,c),Gl(a),a.curOp.updateInput<2&&(a.curOp.updateInput=R),a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=-1}function iC(a,c){var h=a.clipboardData&&a.clipboardData.getData("Text");if(h)return a.preventDefault(),!c.isReadOnly()&&!c.options.disableInput&&c.hasFocus()&&Pn(c,function(){return Uv(c,h,0,null,"paste")}),!0}function nC(a,c){if(!(!a.options.electricChars||!a.options.smartIndent))for(var h=a.doc.sel,d=h.ranges.length-1;d>=0;d--){var m=h.ranges[d];if(!(m.head.ch>100||d&&h.ranges[d-1].head.line==m.head.line)){var b=a.getModeAt(m.head),w=!1;if(b.electricChars){for(var x=0;x<b.electricChars.length;x++)if(c.indexOf(b.electricChars.charAt(x))>-1){w=Td(a,m.head.line,"smart");break}}else b.electricInput&&b.electricInput.test(Ie(a.doc,m.head.line).text.slice(0,m.head.ch))&&(w=Td(a,m.head.line,"smart"));w&&_i(a,"electricInput",a,m.head.line)}}}function rC(a){for(var c=[],h=[],d=0;d<a.doc.sel.ranges.length;d++){var m=a.doc.sel.ranges[d].head.line,b={anchor:re(m,0),head:re(m+1,0)};h.push(b),c.push(a.getRange(b.anchor,b.head))}return{text:c,ranges:h}}function Wv(a,c,h,d){a.setAttribute("autocorrect",h?"on":"off"),a.setAttribute("autocapitalize",d?"on":"off"),a.setAttribute("spellcheck",!!c)}function sC(){var a=ae("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),c=ae("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return u?a.style.width="1000px":a.setAttribute("wrap","off"),P&&(a.style.border="1px solid black"),c}function CF(a){var c=a.optionHandlers,h=a.helpers={};a.prototype={constructor:a,focus:function(){nt(this).focus(),this.display.input.focus()},setOption:function(d,m){var b=this.options,w=b[d];b[d]==m&&d!="mode"||(b[d]=m,c.hasOwnProperty(d)&&xi(this,c[d])(this,m,w),Bt(this,"optionChange",this,d))},getOption:function(d){return this.options[d]},getDoc:function(){return this.doc},addKeyMap:function(d,m){this.state.keyMaps[m?"push":"unshift"](um(d))},removeKeyMap:function(d){for(var m=this.state.keyMaps,b=0;b<m.length;++b)if(m[b]==d||m[b].name==d)return m.splice(b,1),!0},addOverlay:Ki(function(d,m){var b=d.token?d:a.getMode(this.options,d);if(b.startState)throw new Error("Overlays may not be stateful.");Ub(this.state.overlays,{mode:b,modeSpec:d,opaque:m&&m.opaque,priority:m&&m.priority||0},function(w){return w.priority}),this.state.modeGen++,cn(this)}),removeOverlay:Ki(function(d){for(var m=this.state.overlays,b=0;b<m.length;++b){var w=m[b].modeSpec;if(w==d||typeof d=="string"&&w.name==d){m.splice(b,1),this.state.modeGen++,cn(this);return}}}),indentLine:Ki(function(d,m,b){typeof m!="string"&&typeof m!="number"&&(m==null?m=this.options.smartIndent?"smart":"prev":m=m?"add":"subtract"),Xu(this.doc,d)&&Td(this,d,m,b)}),indentSelection:Ki(function(d){for(var m=this.doc.sel.ranges,b=-1,w=0;w<m.length;w++){var x=m[w];if(x.empty())x.head.line>b&&(Td(this,x.head.line,d,!0),b=x.head.line,w==this.doc.sel.primIndex&&Gl(this));else{var k=x.from(),T=x.to(),A=Math.max(b,k.line);b=Math.min(this.lastLine(),T.line-(T.ch?0:1))+1;for(var R=A;R<b;++R)Td(this,R,d);var j=this.doc.sel.ranges;k.ch==0&&m.length==j.length&&j[w].from().ch>0&&Dv(this.doc,w,new _t(k,j[w].to()),rt)}}}),getTokenAt:function(d,m){return gk(this,d,m)},getLineTokens:function(d,m){return gk(this,re(d),m,!0)},getTokenTypeAt:function(d){d=Ue(this.doc,d);var m=hk(this,Ie(this.doc,d.line)),b=0,w=(m.length-1)/2,x=d.ch,k;if(x==0)k=m[2];else for(;;){var T=b+w>>1;if((T?m[T*2-1]:0)>=x)w=T;else if(m[T*2+1]<x)b=T+1;else{k=m[T*2+2];break}}var A=k?k.indexOf("overlay "):-1;return A<0?k:A==0?null:k.slice(0,A-1)},getModeAt:function(d){var m=this.doc.mode;return m.innerMode?a.innerMode(m,this.getTokenAt(d).state).mode:m},getHelper:function(d,m){return this.getHelpers(d,m)[0]},getHelpers:function(d,m){var b=[];if(!h.hasOwnProperty(m))return b;var w=h[m],x=this.getModeAt(d);if(typeof x[m]=="string")w[x[m]]&&b.push(w[x[m]]);else if(x[m])for(var k=0;k<x[m].length;k++){var T=w[x[m][k]];T&&b.push(T)}else x.helperType&&w[x.helperType]?b.push(w[x.helperType]):w[x.name]&&b.push(w[x.name]);for(var A=0;A<w._global.length;A++){var R=w._global[A];R.pred(x,this)&&be(b,R.val)==-1&&b.push(R.val)}return b},getStateAfter:function(d,m){var b=this.doc;return d=ck(b,d==null?b.first+b.size-1:d),Qu(this,d+1,m).state},cursorCoords:function(d,m){var b,w=this.doc.sel.primary();return d==null?b=w.head:typeof d=="object"?b=Ue(this.doc,d):b=d?w.from():w.to(),Or(this,b,m||"page")},charCoords:function(d,m){return Yf(this,Ue(this.doc,d),m||"page")},coordsChar:function(d,m){return d=Wk(this,d,m||"page"),mv(this,d.left,d.top)},lineAtHeight:function(d,m){return d=Wk(this,{top:d,left:0},m||"page").top,Ea(this.doc,d+this.display.viewOffset)},heightAtLine:function(d,m,b){var w=!1,x;if(typeof d=="number"){var k=this.doc.first+this.doc.size-1;d<this.doc.first?d=this.doc.first:d>k&&(d=k,w=!0),x=Ie(this.doc,d)}else x=d;return Kf(this,x,{top:0,left:0},m||"page",b||w).top+(w?this.doc.height-Ds(x):0)},defaultTextHeight:function(){return Wl(this.display)},defaultCharWidth:function(){return ql(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(d,m,b,w,x){var k=this.display;d=Or(this,Ue(this.doc,d));var T=d.bottom,A=d.left;if(m.style.position="absolute",m.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(m),k.sizer.appendChild(m),w=="over")T=d.top;else if(w=="above"||w=="near"){var R=Math.max(k.wrapper.clientHeight,this.doc.height),j=Math.max(k.sizer.clientWidth,k.lineSpace.clientWidth);(w=="above"||d.bottom+m.offsetHeight>R)&&d.top>m.offsetHeight?T=d.top-m.offsetHeight:d.bottom+m.offsetHeight<=R&&(T=d.bottom),A+m.offsetWidth>j&&(A=j-m.offsetWidth)}m.style.top=T+"px",m.style.left=m.style.right="",x=="right"?(A=k.sizer.clientWidth-m.offsetWidth,m.style.right="0px"):(x=="left"?A=0:x=="middle"&&(A=(k.sizer.clientWidth-m.offsetWidth)/2),m.style.left=A+"px"),b&&_8(this,{left:A,top:T,right:A+m.offsetWidth,bottom:T+m.offsetHeight})},triggerOnKeyDown:Ki(G2),triggerOnKeyPress:Ki(Y2),triggerOnKeyUp:K2,triggerOnMouseDown:Ki(Z2),execCommand:function(d){if(_d.hasOwnProperty(d))return _d[d].call(null,this)},triggerElectric:Ki(function(d){nC(this,d)}),findPosH:function(d,m,b,w){var x=1;m<0&&(x=-1,m=-m);for(var k=Ue(this.doc,d),T=0;T<m&&(k=qv(this.doc,k,x,b,w),!k.hitSide);++T);return k},moveH:Ki(function(d,m){var b=this;this.extendSelectionsBy(function(w){return b.display.shift||b.doc.extend||w.empty()?qv(b.doc,w.head,d,m,b.options.rtlMoveVisually):d<0?w.from():w.to()},Et)}),deleteH:Ki(function(d,m){var b=this.doc.sel,w=this.doc;b.somethingSelected()?w.replaceSelection("",null,"+delete"):tc(this,function(x){var k=qv(w,x.head,d,m,!1);return d<0?{from:k,to:x.head}:{from:x.head,to:k}})}),findPosV:function(d,m,b,w){var x=1,k=w;m<0&&(x=-1,m=-m);for(var T=Ue(this.doc,d),A=0;A<m;++A){var R=Or(this,T,"div");if(k==null?k=R.left:R.left=k,T=oC(this,R,x,b),T.hitSide)break}return T},moveV:Ki(function(d,m){var b=this,w=this.doc,x=[],k=!this.display.shift&&!w.extend&&w.sel.somethingSelected();if(w.extendSelectionsBy(function(A){if(k)return d<0?A.from():A.to();var R=Or(b,A.head,"div");A.goalColumn!=null&&(R.left=A.goalColumn),x.push(R.left);var j=oC(b,R,d,m);return m=="page"&&A==w.sel.primary()&&Cv(b,Yf(b,j,"div").top-R.top),j},Et),x.length)for(var T=0;T<w.sel.ranges.length;T++)w.sel.ranges[T].goalColumn=x[T]}),findWordAt:function(d){var m=this.doc,b=Ie(m,d.line).text,w=d.ch,x=d.ch;if(b){var k=this.getHelper(d,"wordChars");(d.sticky=="before"||x==b.length)&&w?--w:++x;for(var T=b.charAt(w),A=Os(T,k)?function(R){return Os(R,k)}:/\s/.test(T)?function(R){return/\s/.test(R)}:function(R){return!/\s/.test(R)&&!Os(R)};w>0&&A(b.charAt(w-1));)--w;for(;x<b.length&&A(b.charAt(x));)++x}return new _t(re(d.line,w),re(d.line,x))},toggleOverwrite:function(d){d!=null&&d==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ke(this.display.cursorDiv,"CodeMirror-overwrite"):te(this.display.cursorDiv,"CodeMirror-overwrite"),Bt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==fe(se(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ki(function(d,m){od(this,d,m)}),getScrollInfo:function(){var d=this.display.scroller;return{left:d.scrollLeft,top:d.scrollTop,height:d.scrollHeight-is(this)-this.display.barHeight,width:d.scrollWidth-is(this)-this.display.barWidth,clientHeight:uv(this),clientWidth:Sa(this)}},scrollIntoView:Ki(function(d,m){d==null?(d={from:this.doc.sel.primary().head,to:null},m==null&&(m=this.options.cursorScrollMargin)):typeof d=="number"?d={from:re(d,0),to:null}:d.from==null&&(d={from:d,to:null}),d.to||(d.to=d.from),d.margin=m||0,d.from.line!=null?x8(this,d):Qk(this,d.from,d.to,d.margin)}),setSize:Ki(function(d,m){var b=this,w=function(k){return typeof k=="number"||/^\d+$/.test(String(k))?k+"px":k};d!=null&&(this.display.wrapper.style.width=w(d)),m!=null&&(this.display.wrapper.style.height=w(m)),this.options.lineWrapping&&Hk(this);var x=this.display.viewFrom;this.doc.iter(x,this.display.viewTo,function(k){if(k.widgets){for(var T=0;T<k.widgets.length;T++)if(k.widgets[T].noHScroll){So(b,x,"widget");break}}++x}),this.curOp.forceUpdate=!0,Bt(this,"refresh",this)}),operation:function(d){return Pn(this,d)},startOperation:function(){return Ma(this)},endOperation:function(){return La(this)},refresh:Ki(function(){var d=this.display.cachedTextHeight;cn(this),this.curOp.forceUpdate=!0,rd(this),od(this,this.doc.scrollLeft,this.doc.scrollTop),Sv(this.display),(d==null||Math.abs(d-Wl(this.display))>.5||this.options.lineWrapping)&&vv(this),Bt(this,"refresh",this)}),swapDoc:Ki(function(d){var m=this.doc;return m.cm=null,this.state.selectingText&&this.state.selectingText(),f2(this,d),rd(this),this.display.input.reset(),od(this,d.scrollLeft,d.scrollTop),this.curOp.forceScroll=!0,_i(this,"swapDoc",this,m),m}),phrase:function(d){var m=this.options.phrases;return m&&Object.prototype.hasOwnProperty.call(m,d)?m[d]:d},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},S(a),a.registerHelper=function(d,m,b){h.hasOwnProperty(d)||(h[d]=a[d]={_global:[]}),h[d][m]=b},a.registerGlobalHelper=function(d,m,b,w){a.registerHelper(d,m,w),h[d]._global.push({pred:b,val:w})}}function qv(a,c,h,d,m){var b=c,w=h,x=Ie(a,c.line),k=m&&a.direction=="rtl"?-h:h;function T(){var ge=c.line+k;return ge<a.first||ge>=a.first+a.size?!1:(c=new re(ge,c.ch,c.sticky),x=Ie(a,ge))}function A(ge){var de;if(d=="codepoint"){var xe=x.text.charCodeAt(c.ch+(h>0?0:-1));if(isNaN(xe))de=null;else{var Me=h>0?xe>=55296&&xe<56320:xe>=56320&&xe<57343;de=new re(c.line,Math.max(0,Math.min(x.text.length,c.ch+h*(Me?2:1))),-h)}}else m?de=sF(a.cm,x,c,h):de=Bv(x,c,h);if(de==null)if(!ge&&T())c=Nv(m,a.cm,x,c.line,k);else return!1;else c=de;return!0}if(d=="char"||d=="codepoint")A();else if(d=="column")A(!0);else if(d=="word"||d=="group")for(var R=null,j=d=="group",B=a.cm&&a.cm.getHelper(c,"wordChars"),G=!0;!(h<0&&!A(!G));G=!1){var J=x.text.charAt(c.ch)||`
`,oe=Os(J,B)?"w":j&&J==`
`?"n":!j||/\s/.test(J)?null:"p";if(j&&!G&&!oe&&(oe="s"),R&&R!=oe){h<0&&(h=1,A(),c.sticky="after");break}if(oe&&(R=oe),h>0&&!A(!G))break}var ue=am(a,c,b,w,!0);return Qb(b,ue)&&(ue.hitSide=!0),ue}function oC(a,c,h,d){var m=a.doc,b=c.left,w;if(d=="page"){var x=Math.min(a.display.wrapper.clientHeight,nt(a).innerHeight||m(a).documentElement.clientHeight),k=Math.max(x-.5*Wl(a.display),3);w=(h>0?c.bottom:c.top)+h*k}else d=="line"&&(w=h>0?c.bottom+3:c.top-3);for(var T;T=mv(a,b,w),!!T.outside;){if(h<0?w<=0:w>=m.height){T.hitSide=!0;break}w+=h*5}return T}var Tt=function(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new pe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Tt.prototype.init=function(a){var c=this,h=this,d=h.cm,m=h.div=a.lineDiv;m.contentEditable=!0,Wv(m,d.options.spellcheck,d.options.autocorrect,d.options.autocapitalize);function b(x){for(var k=x.target;k;k=k.parentNode){if(k==m)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(k.className))break}return!1}Oe(m,"paste",function(x){!b(x)||St(d,x)||iC(x,d)||l<=11&&setTimeout(xi(d,function(){return c.updateFromDOM()}),20)}),Oe(m,"compositionstart",function(x){c.composing={data:x.data,done:!1}}),Oe(m,"compositionupdate",function(x){c.composing||(c.composing={data:x.data,done:!1})}),Oe(m,"compositionend",function(x){c.composing&&(x.data!=c.composing.data&&c.readFromDOMSoon(),c.composing.done=!0)}),Oe(m,"touchstart",function(){return h.forceCompositionEnd()}),Oe(m,"input",function(){c.composing||c.readFromDOMSoon()});function w(x){if(!(!b(x)||St(d,x))){if(d.somethingSelected())fm({lineWise:!1,text:d.getSelections()}),x.type=="cut"&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var k=rC(d);fm({lineWise:!0,text:k.text}),x.type=="cut"&&d.operation(function(){d.setSelections(k.ranges,0,rt),d.replaceSelection("",null,"cut")})}else return;if(x.clipboardData){x.clipboardData.clearData();var T=Lr.text.join(`
`);if(x.clipboardData.setData("Text",T),x.clipboardData.getData("Text")==T){x.preventDefault();return}}var A=sC(),R=A.firstChild;Wv(R),d.display.lineSpace.insertBefore(A,d.display.lineSpace.firstChild),R.value=Lr.text.join(`
`);var j=fe(_e(m));H(R),setTimeout(function(){d.display.lineSpace.removeChild(A),j.focus(),j==m&&h.showPrimarySelection()},50)}}Oe(m,"copy",w),Oe(m,"cut",w)},Tt.prototype.screenReaderLabelChanged=function(a){a?this.div.setAttribute("aria-label",a):this.div.removeAttribute("aria-label")},Tt.prototype.prepareSelection=function(){var a=Zk(this.cm,!1);return a.focus=fe(_e(this.div))==this.div,a},Tt.prototype.showSelection=function(a,c){!a||!this.cm.display.view.length||((a.focus||c)&&this.showPrimarySelection(),this.showMultipleSelections(a))},Tt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Tt.prototype.showPrimarySelection=function(){var a=this.getSelection(),c=this.cm,h=c.doc.sel.primary(),d=h.from(),m=h.to();if(c.display.viewTo==c.display.viewFrom||d.line>=c.display.viewTo||m.line<c.display.viewFrom){a.removeAllRanges();return}var b=mm(c,a.anchorNode,a.anchorOffset),w=mm(c,a.focusNode,a.focusOffset);if(!(b&&!b.bad&&w&&!w.bad&&ze(Ff(b,w),d)==0&&ze(Nf(b,w),m)==0)){var x=c.display.view,k=d.line>=c.display.viewFrom&&aC(c,d)||{node:x[0].measure.map[2],offset:0},T=m.line<c.display.viewTo&&aC(c,m);if(!T){var A=x[x.length-1].measure,R=A.maps?A.maps[A.maps.length-1]:A.map;T={node:R[R.length-1],offset:R[R.length-2]-R[R.length-3]}}if(!k||!T){a.removeAllRanges();return}var j=a.rangeCount&&a.getRangeAt(0),B;try{B=et(k.node,k.offset,T.offset,T.node)}catch(G){}B&&(!t&&c.state.focused?(a.collapse(k.node,k.offset),B.collapsed||(a.removeAllRanges(),a.addRange(B))):(a.removeAllRanges(),a.addRange(B)),j&&a.anchorNode==null?a.addRange(j):t&&this.startGracePeriod()),this.rememberSelection()}},Tt.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)},Tt.prototype.showMultipleSelections=function(a){Ee(this.cm.display.cursorDiv,a.cursors),Ee(this.cm.display.selectionDiv,a.selection)},Tt.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},Tt.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount)return!1;var c=a.getRangeAt(0).commonAncestorContainer;return Je(this.div,c)},Tt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||fe(_e(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Tt.prototype.blur=function(){this.div.blur()},Tt.prototype.getField=function(){return this.div},Tt.prototype.supportsTouch=function(){return!0},Tt.prototype.receivedFocus=function(){var a=this,c=this;this.selectionInEditor()?setTimeout(function(){return a.pollSelection()},20):Pn(this.cm,function(){return c.cm.curOp.selectionChanged=!0});function h(){c.cm.state.focused&&(c.pollSelection(),c.polling.set(c.cm.options.pollInterval,h))}this.polling.set(this.cm.options.pollInterval,h)},Tt.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},Tt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var a=this.getSelection(),c=this.cm;if(M&&g&&this.cm.display.gutterSpecs.length&&TF(a.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var h=mm(c,a.anchorNode,a.anchorOffset),d=mm(c,a.focusNode,a.focusOffset);h&&d&&Pn(c,function(){Fi(c.doc,Io(h,d),rt),(h.bad||d.bad)&&(c.curOp.selectionChanged=!0)})}}},Tt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,c=a.display,h=a.doc.sel.primary(),d=h.from(),m=h.to();if(d.ch==0&&d.line>a.firstLine()&&(d=re(d.line-1,Ie(a.doc,d.line-1).length)),m.ch==Ie(a.doc,m.line).text.length&&m.line<a.lastLine()&&(m=re(m.line+1,0)),d.line<c.viewFrom||m.line>c.viewTo-1)return!1;var b,w,x;d.line==c.viewFrom||(b=Pa(a,d.line))==0?(w=Ct(c.view[0].line),x=c.view[0].node):(w=Ct(c.view[b].line),x=c.view[b-1].node.nextSibling);var k=Pa(a,m.line),T,A;if(k==c.view.length-1?(T=c.viewTo-1,A=c.lineDiv.lastChild):(T=Ct(c.view[k+1].line)-1,A=c.view[k+1].node.previousSibling),!x)return!1;for(var R=a.doc.splitLines(EF(a,x,A,w,T)),j=Ta(a.doc,re(w,0),re(T,Ie(a.doc,T).text.length));R.length>1&&j.length>1;)if(mt(R)==mt(j))R.pop(),j.pop(),T--;else if(R[0]==j[0])R.shift(),j.shift(),w++;else break;for(var B=0,G=0,J=R[0],oe=j[0],ue=Math.min(J.length,oe.length);B<ue&&J.charCodeAt(B)==oe.charCodeAt(B);)++B;for(var ge=mt(R),de=mt(j),xe=Math.min(ge.length-(R.length==1?B:0),de.length-(j.length==1?B:0));G<xe&&ge.charCodeAt(ge.length-G-1)==de.charCodeAt(de.length-G-1);)++G;if(R.length==1&&j.length==1&&w==d.line)for(;B&&B>d.ch&&ge.charCodeAt(ge.length-G-1)==de.charCodeAt(de.length-G-1);)B--,G++;R[R.length-1]=ge.slice(0,ge.length-G).replace(/^\u200b+/,""),R[0]=R[0].slice(B).replace(/\u200b+$/,"");var Me=re(w,B),Re=re(T,j.length?mt(j).length-G:0);if(R.length>1||R[0]||ze(Me,Re))return Xl(a.doc,R,Me,Re,"+input"),!0},Tt.prototype.ensurePolled=function(){this.forceCompositionEnd()},Tt.prototype.reset=function(){this.forceCompositionEnd()},Tt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Tt.prototype.readFromDOMSoon=function(){var a=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(a.readDOMTimeout=null,a.composing)if(a.composing.done)a.composing=null;else return;a.updateFromDOM()},80))},Tt.prototype.updateFromDOM=function(){var a=this;(this.cm.isReadOnly()||!this.pollContent())&&Pn(this.cm,function(){return cn(a.cm)})},Tt.prototype.setUneditable=function(a){a.contentEditable="false"},Tt.prototype.onKeyPress=function(a){a.charCode==0||this.composing||(a.preventDefault(),this.cm.isReadOnly()||xi(this.cm,Uv)(this.cm,String.fromCharCode(a.charCode==null?a.keyCode:a.charCode),0))},Tt.prototype.readOnlyChanged=function(a){this.div.contentEditable=String(a!="nocursor")},Tt.prototype.onContextMenu=function(){},Tt.prototype.resetPosition=function(){},Tt.prototype.needsContentAttribute=!0;function aC(a,c){var h=dv(a,c.line);if(!h||h.hidden)return null;var d=Ie(a.doc,c.line),m=Vk(h,d,c.line),b=vt(d,a.doc.direction),w="left";if(b){var x=xa(b,c.ch);w=x%2?"right":"left"}var k=Fk(m.map,c.ch,w);return k.offset=k.collapse=="right"?k.end:k.start,k}function TF(a){for(var c=a;c;c=c.parentNode)if(/CodeMirror-gutter-wrapper/.test(c.className))return!0;return!1}function nc(a,c){return c&&(a.bad=!0),a}function EF(a,c,h,d,m){var b="",w=!1,x=a.doc.lineSeparator(),k=!1;function T(B){return function(G){return G.id==B}}function A(){w&&(b+=x,k&&(b+=x),w=k=!1)}function R(B){B&&(A(),b+=B)}function j(B){if(B.nodeType==1){var G=B.getAttribute("cm-text");if(G){R(G);return}var J=B.getAttribute("cm-marker"),oe;if(J){var ue=a.findMarks(re(d,0),re(m+1,0),T(+J));ue.length&&(oe=ue[0].find(0))&&R(Ta(a.doc,oe.from,oe.to).join(x));return}if(B.getAttribute("contenteditable")=="false")return;var ge=/^(pre|div|p|li|table|br)$/i.test(B.nodeName);if(!/^br$/i.test(B.nodeName)&&B.textContent.length==0)return;ge&&A();for(var de=0;de<B.childNodes.length;de++)j(B.childNodes[de]);/^(pre|p)$/i.test(B.nodeName)&&(k=!0),ge&&(w=!0)}else B.nodeType==3&&R(B.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;j(c),c!=h;)c=c.nextSibling,k=!1;return b}function mm(a,c,h){var d;if(c==a.display.lineDiv){if(d=a.display.lineDiv.childNodes[h],!d)return nc(a.clipPos(re(a.display.viewTo-1)),!0);c=null,h=0}else for(d=c;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var m=0;m<a.display.view.length;m++){var b=a.display.view[m];if(b.node==d)return SF(b,c,h)}}function SF(a,c,h){var d=a.text.firstChild,m=!1;if(!c||!Je(d,c))return nc(re(Ct(a.line),0),!0);if(c==d&&(m=!0,c=d.childNodes[h],h=0,!c)){var b=a.rest?mt(a.rest):a.line;return nc(re(Ct(b),b.text.length),m)}var w=c.nodeType==3?c:null,x=c;for(!w&&c.childNodes.length==1&&c.firstChild.nodeType==3&&(w=c.firstChild,h&&(h=w.nodeValue.length));x.parentNode!=d;)x=x.parentNode;var k=a.measure,T=k.maps;function A(oe,ue,ge){for(var de=-1;de<(T?T.length:0);de++)for(var xe=de<0?k.map:T[de],Me=0;Me<xe.length;Me+=3){var Re=xe[Me+2];if(Re==oe||Re==ue){var Qe=Ct(de<0?a.line:a.rest[de]),Rt=xe[Me]+ge;return(ge<0||Re!=oe)&&(Rt=xe[Me+(ge?1:0)]),re(Qe,Rt)}}}var R=A(w,x,h);if(R)return nc(R,m);for(var j=x.nextSibling,B=w?w.nodeValue.length-h:0;j;j=j.nextSibling){if(R=A(j,j.firstChild,0),R)return nc(re(R.line,R.ch-B),m);B+=j.textContent.length}for(var G=x.previousSibling,J=h;G;G=G.previousSibling){if(R=A(G,G.firstChild,-1),R)return nc(re(R.line,R.ch+J),m);J+=G.textContent.length}}var ei=function(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new pe,this.hasSelection=!1,this.composing=null,this.resetting=!1};ei.prototype.init=function(a){var c=this,h=this,d=this.cm;this.createField(a);var m=this.textarea;a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild),P&&(m.style.width="0px"),Oe(m,"input",function(){o&&l>=9&&c.hasSelection&&(c.hasSelection=null),h.poll()}),Oe(m,"paste",function(w){St(d,w)||iC(w,d)||(d.state.pasteIncoming=+new Date,h.fastPoll())});function b(w){if(!St(d,w)){if(d.somethingSelected())fm({lineWise:!1,text:d.getSelections()});else if(d.options.lineWiseCopyCut){var x=rC(d);fm({lineWise:!0,text:x.text}),w.type=="cut"?d.setSelections(x.ranges,null,rt):(h.prevInput="",m.value=x.text.join(`
`),H(m))}else return;w.type=="cut"&&(d.state.cutIncoming=+new Date)}}Oe(m,"cut",b),Oe(m,"copy",b),Oe(a.scroller,"paste",function(w){if(!(Vs(a,w)||St(d,w))){if(!m.dispatchEvent){d.state.pasteIncoming=+new Date,h.focus();return}var x=new Event("paste");x.clipboardData=w.clipboardData,m.dispatchEvent(x)}}),Oe(a.lineSpace,"selectstart",function(w){Vs(a,w)||I(w)}),Oe(m,"compositionstart",function(){var w=d.getCursor("from");h.composing&&h.composing.range.clear(),h.composing={start:w,range:d.markText(w,d.getCursor("to"),{className:"CodeMirror-composing"})}}),Oe(m,"compositionend",function(){h.composing&&(h.poll(),h.composing.range.clear(),h.composing=null)})},ei.prototype.createField=function(a){this.wrapper=sC(),this.textarea=this.wrapper.firstChild;var c=this.cm.options;Wv(this.textarea,c.spellcheck,c.autocorrect,c.autocapitalize)},ei.prototype.screenReaderLabelChanged=function(a){a?this.textarea.setAttribute("aria-label",a):this.textarea.removeAttribute("aria-label")},ei.prototype.prepareSelection=function(){var a=this.cm,c=a.display,h=a.doc,d=Zk(a);if(a.options.moveInputWithCursor){var m=Or(a,h.sel.primary().head,"div"),b=c.wrapper.getBoundingClientRect(),w=c.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(c.wrapper.clientHeight-10,m.top+w.top-b.top)),d.teLeft=Math.max(0,Math.min(c.wrapper.clientWidth-10,m.left+w.left-b.left))}return d},ei.prototype.showSelection=function(a){var c=this.cm,h=c.display;Ee(h.cursorDiv,a.cursors),Ee(h.selectionDiv,a.selection),a.teTop!=null&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},ei.prototype.reset=function(a){if(!(this.contextMenuPending||this.composing&&a)){var c=this.cm;if(this.resetting=!0,c.somethingSelected()){this.prevInput="";var h=c.getSelection();this.textarea.value=h,c.state.focused&&H(this.textarea),o&&l>=9&&(this.hasSelection=h)}else a||(this.prevInput=this.textarea.value="",o&&l>=9&&(this.hasSelection=null));this.resetting=!1}},ei.prototype.getField=function(){return this.textarea},ei.prototype.supportsTouch=function(){return!1},ei.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!O||fe(_e(this.textarea))!=this.textarea))try{this.textarea.focus()}catch(a){}},ei.prototype.blur=function(){this.textarea.blur()},ei.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ei.prototype.receivedFocus=function(){this.slowPoll()},ei.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},ei.prototype.fastPoll=function(){var a=!1,c=this;c.pollingFast=!0;function h(){var d=c.poll();!d&&!a?(a=!0,c.polling.set(60,h)):(c.pollingFast=!1,c.slowPoll())}c.polling.set(20,h)},ei.prototype.poll=function(){var a=this,c=this.cm,h=this.textarea,d=this.prevInput;if(this.contextMenuPending||this.resetting||!c.state.focused||ln(h)&&!d&&!this.composing||c.isReadOnly()||c.options.disableInput||c.state.keySeq)return!1;var m=h.value;if(m==d&&!c.somethingSelected())return!1;if(o&&l>=9&&this.hasSelection===m||N&&/[\uf700-\uf7ff]/.test(m))return c.display.input.reset(),!1;if(c.doc.sel==c.display.selForContextMenu){var b=m.charCodeAt(0);if(b==8203&&!d&&(d="\u200B"),b==8666)return this.reset(),this.cm.execCommand("undo")}for(var w=0,x=Math.min(d.length,m.length);w<x&&d.charCodeAt(w)==m.charCodeAt(w);)++w;return Pn(c,function(){Uv(c,m.slice(w),d.length-w,null,a.composing?"*compose":null),m.length>1e3||m.indexOf(`
`)>-1?h.value=a.prevInput="":a.prevInput=m,a.composing&&(a.composing.range.clear(),a.composing.range=c.markText(a.composing.start,c.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ei.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ei.prototype.onKeyPress=function(){o&&l>=9&&(this.hasSelection=null),this.fastPoll()},ei.prototype.onContextMenu=function(a){var c=this,h=c.cm,d=h.display,m=c.textarea;c.contextMenuPending&&c.contextMenuPending();var b=Ia(h,a),w=d.scroller.scrollTop;if(!b||y)return;var x=h.options.resetSelectionOnContextMenu;x&&h.doc.sel.contains(b)==-1&&xi(h,Fi)(h.doc,Io(b),rt);var k=m.style.cssText,T=c.wrapper.style.cssText,A=c.wrapper.offsetParent.getBoundingClientRect();c.wrapper.style.cssText="position: static",m.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(a.clientY-A.top-5)+"px; left: "+(a.clientX-A.left-5)+`px;
      z-index: 1000; background: `+(o?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var R;u&&(R=m.ownerDocument.defaultView.scrollY),d.input.focus(),u&&m.ownerDocument.defaultView.scrollTo(null,R),d.input.reset(),h.somethingSelected()||(m.value=c.prevInput=" "),c.contextMenuPending=B,d.selForContextMenu=h.doc.sel,clearTimeout(d.detectingSelectAll);function j(){if(m.selectionStart!=null){var J=h.somethingSelected(),oe="\u200B"+(J?m.value:"");m.value="\u21DA",m.value=oe,c.prevInput=J?"":"\u200B",m.selectionStart=1,m.selectionEnd=oe.length,d.selForContextMenu=h.doc.sel}}function B(){if(c.contextMenuPending==B&&(c.contextMenuPending=!1,c.wrapper.style.cssText=T,m.style.cssText=k,o&&l<9&&d.scrollbars.setScrollTop(d.scroller.scrollTop=w),m.selectionStart!=null)){(!o||o&&l<9)&&j();var J=0,oe=function(){d.selForContextMenu==h.doc.sel&&m.selectionStart==0&&m.selectionEnd>0&&c.prevInput=="\u200B"?xi(h,E2)(h):J++<10?d.detectingSelectAll=setTimeout(oe,500):(d.selForContextMenu=null,d.input.reset())};d.detectingSelectAll=setTimeout(oe,200)}}if(o&&l>=9&&j(),X){le(a);var G=function(){Mi(window,"mouseup",G),setTimeout(B,20)};Oe(window,"mouseup",G)}else setTimeout(B,50)},ei.prototype.readOnlyChanged=function(a){a||this.reset(),this.textarea.disabled=a=="nocursor",this.textarea.readOnly=!!a},ei.prototype.setUneditable=function(){},ei.prototype.needsContentAttribute=!1;function AF(a,c){if(c=c?ht(c):{},c.value=a.value,!c.tabindex&&a.tabIndex&&(c.tabindex=a.tabIndex),!c.placeholder&&a.placeholder&&(c.placeholder=a.placeholder),c.autofocus==null){var h=fe(_e(a));c.autofocus=h==a||a.getAttribute("autofocus")!=null&&h==document.body}function d(){a.value=x.getValue()}var m;if(a.form&&(Oe(a.form,"submit",d),!c.leaveSubmitMethodAlone)){var b=a.form;m=b.submit;try{var w=b.submit=function(){d(),b.submit=m,b.submit(),b.submit=w}}catch(k){}}c.finishInit=function(k){k.save=d,k.getTextArea=function(){return a},k.toTextArea=function(){k.toTextArea=isNaN,d(),a.parentNode.removeChild(k.getWrapperElement()),a.style.display="",a.form&&(Mi(a.form,"submit",d),!c.leaveSubmitMethodAlone&&typeof a.form.submit=="function"&&(a.form.submit=m))}},a.style.display="none";var x=Nt(function(k){return a.parentNode.insertBefore(k,a.nextSibling)},c);return x}function IF(a){a.off=Mi,a.on=Oe,a.wheelEventPixels=V8,a.Doc=un,a.splitLines=In,a.countColumn=ce,a.findColumn=ot,a.isWordChar=Nl,a.Pass=ft,a.signal=Bt,a.Line=Hl,a.changeEnd=Po,a.scrollbarModel=i2,a.Pos=re,a.cmpPos=ze,a.modes=Ca,a.mimeModes=Co,a.resolveMode=jl,a.getMode=Ju,a.modeExtensions=To,a.extendMode=Yb,a.copyState=Ms,a.startState=lk,a.innerMode=Zb,a.commands=_d,a.keyMap=Ns,a.keyName=z2,a.isModifierKey=j2,a.lookupKey=ec,a.normalizeKeyMap=rF,a.StringStream=ci,a.SharedTextMarker=vd,a.TextMarker=Oo,a.LineWidget=bd,a.e_preventDefault=I,a.e_stopPropagation=z,a.e_stop=le,a.addClass=ke,a.contains=Je,a.rmClass=te,a.keyNames=Mo}yF(Nt),CF(Nt);var PF="iter insert remove copy getEditor constructor".split(" ");for(var gm in un.prototype)un.prototype.hasOwnProperty(gm)&&be(PF,gm)<0&&(Nt.prototype[gm]=function(a){return function(){return a.apply(this.doc,arguments)}}(un.prototype[gm]));return S(un),Nt.inputStyles={textarea:ei,contenteditable:Tt},Nt.defineMode=function(a){!Nt.defaults.mode&&a!="null"&&(Nt.defaults.mode=a),Gb.apply(this,arguments)},Nt.defineMIME=Kb,Nt.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}}),Nt.defineMIME("text/plain","null"),Nt.defineExtension=function(a,c){Nt.prototype[a]=c},Nt.defineDocExtension=function(a,c){un.prototype[a]=c},Nt.fromTextArea=AF,IF(Nt),Nt.version="5.65.18",Nt})});typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(i),t=1;t<arguments.length;t++){var n=arguments[t];if(n!=null)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e});(function(){function i(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}typeof window.CustomEvent!="function"&&(i.prototype=window.Event.prototype,window.CustomEvent=i)})();String.prototype.startsWith||(String.prototype.startsWith=function(i,e){return e=e||0,this.substr(e,i.length)===i});(function(){var i,e,t,n;Array.from||(Array.from=(i=Object.prototype.toString,e=function(r){return typeof r=="function"||i.call(r)==="[object Function]"},t=Math.pow(2,53)-1,n=function(r){var s,o=(s=Number(r),isNaN(s)?0:s!==0&&isFinite(s)?(0<s?1:-1)*Math.floor(Math.abs(s)):s);return Math.min(Math.max(o,0),t)},function(r){var s=Object(r);if(r==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,l=1<arguments.length?arguments[1]:void 0;if(l!==void 0){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(o=arguments[2])}for(var u,f=n(s.length),g=e(this)?Object(new this(f)):new Array(f),p=0;p<f;)u=s[p],g[p]=l?o===void 0?l(u,p):l.call(o,u,p):u,p+=1;return g.length=f,g}))})();Array.prototype.find||(Array.prototype.find=function(i){if(this==null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("predicate must be a function");for(var e=Object(this),t=e.length>>>0,n=arguments[1],r=void 0,s=0;s<t;s++)if(r=e[s],i.call(n,r,s,e))return r});Array.prototype.some||(Array.prototype.some=function(i,e){if(this==null)throw new TypeError("Array.prototype.some called on null or undefined");if(typeof i!="function")throw new TypeError(i+" is not a function");for(var t=Object(this),n=t.length>>>0,r=(e=2<=arguments.length?e:void 0,0);r<n;r++)if(r in t&&i.call(e,t[r],r,t))return!0;return!1});window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(i,e){e=e||window;for(var t=0;t<this.length;t++)i.call(e,this[t],t,this)});Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(i){var e=this;do{if(e.matches(i))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null});Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);(function(){function i(){this.parentNode!==null&&this.parentNode.removeChild(this)}[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:i})})})();function Zv(){var i=this.parentNode,e=arguments.length,t;if(!!i)for(e||i.removeChild(this);e--;)t=arguments[e],typeof t!="object"?t=this.ownerDocument.createTextNode(t):t.parentNode&&t.parentNode.removeChild(t),e?i.insertBefore(this.previousSibling,t):i.replaceChild(t,this)}Element.prototype.replaceWith||(Element.prototype.replaceWith=Zv);CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=Zv);DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=Zv);var iDe=Vo(uC());(function(){var i;function e(V){var H=0;return function(){return H<V.length?{done:!1,value:V[H++]}:{done:!0}}}var t=typeof Object.defineProperties=="function"?Object.defineProperty:function(V,H,$){return V==Array.prototype||V==Object.prototype||(V[H]=$.value),V};function n(V){V=[typeof globalThis=="object"&&globalThis,V,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var H=0;H<V.length;++H){var $=V[H];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var r=n(this);function s(V,H){if(H){for(var $=r,se=V.split("."),_e=0;_e<se.length-1;_e++){var nt=se[_e];nt in $||($[nt]={}),$=$[nt]}se=se[se.length-1],_e=$[se],nt=H(_e),nt!=_e&&nt!=null&&t($,se,{configurable:!0,writable:!0,value:nt})}}s("Symbol",function(V){function H(_e){if(this instanceof H)throw new TypeError("Symbol is not a constructor");return new $("jscomp_symbol_"+(_e||"")+"_"+se++,_e)}function $(_e,nt){this.o=_e,t(this,"description",{configurable:!0,writable:!0,value:nt})}if(V)return V;$.prototype.toString=function(){return this.o};var se=0;return H}),s("Symbol.iterator",function(V){if(V)return V;V=Symbol("Symbol.iterator");for(var H="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),$=0;$<H.length;$++){var se=r[H[$]];typeof se=="function"&&typeof se.prototype[V]!="function"&&t(se.prototype,V,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return V});function o(V){return V={next:V},V[Symbol.iterator]=function(){return this},V}function l(V){var H=typeof Symbol!="undefined"&&Symbol.iterator&&V[Symbol.iterator];return H?H.call(V):{next:e(V)}}var u;if(typeof Object.setPrototypeOf=="function")u=Object.setPrototypeOf;else{var f;e:{var g={u:!0},p={};try{p.__proto__=g,f=p.u;break e}catch(V){}f=!1}u=f?function(V,H){if(V.__proto__=H,V.__proto__!==H)throw new TypeError(V+" is not extensible");return V}:null}var y=u;function _(){this.h=!1,this.f=null,this.m=void 0,this.b=1,this.l=this.v=0,this.g=null}function C(V){if(V.h)throw new TypeError("Generator is already running");V.h=!0}_.prototype.i=function(V){this.m=V},_.prototype.j=function(V){this.g={w:V,A:!0},this.b=this.v||this.l},_.prototype.return=function(V){this.g={return:V},this.b=this.l};function E(V,H){return V.b=3,{value:H}}function P(V){this.a=new _,this.B=V}P.prototype.i=function(V){return C(this.a),this.a.f?O(this,this.a.f.next,V,this.a.i):(this.a.i(V),N(this))};function M(V,H){C(V.a);var $=V.a.f;return $?O(V,"return"in $?$.return:function(se){return{value:se,done:!0}},H,V.a.return):(V.a.return(H),N(V))}P.prototype.j=function(V){return C(this.a),this.a.f?O(this,this.a.f.throw,V,this.a.i):(this.a.j(V),N(this))};function O(V,H,$,se){try{var _e=H.call(V.a.f,$);if(!(_e instanceof Object))throw new TypeError("Iterator result "+_e+" is not an object");if(!_e.done)return V.a.h=!1,_e;var nt=_e.value}catch(Mt){return V.a.f=null,V.a.j(Mt),N(V)}return V.a.f=null,se.call(V.a,nt),N(V)}function N(V){for(;V.a.b;)try{var H=V.B(V.a);if(H)return V.a.h=!1,{value:H.value,done:!1}}catch($){V.a.m=void 0,V.a.j($)}if(V.a.h=!1,V.a.g){if(H=V.a.g,V.a.g=null,H.A)throw H.w;return{value:H.return,done:!0}}return{value:void 0,done:!0}}function W(V){this.next=function(H){return V.i(H)},this.throw=function(H){return V.j(H)},this.return=function(H){return M(V,H)},this[Symbol.iterator]=function(){return this}}function Z(V,H){var $=new W(new P(H));return y&&y($,V.prototype),$}if(typeof Blob!="undefined"&&(typeof FormData=="undefined"||!FormData.prototype.keys)){var U=function(V,H){for(var $=0;$<V.length;$++)H(V[$])},ie=function(V,H,$){return H instanceof Blob?[String(V),H,$!==void 0?$+"":typeof H.name=="string"?H.name:"blob"]:[String(V),String(H)]},X=function(V,H){if(V.length<H)throw new TypeError(H+" argument required, but only "+V.length+" present.")},F=function(V){var H=l(V);V=H.next().value;var $=H.next().value;return H=H.next().value,$ instanceof Blob&&($=new File([$],H,{type:$.type,lastModified:$.lastModified})),[V,$]},te=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,ye=te.FormData,Ee=te.XMLHttpRequest&&te.XMLHttpRequest.prototype.send,ae=te.Request&&te.fetch,bt=te.navigator&&te.navigator.sendBeacon,et=te.Element&&te.Element.prototype,Je=te.Symbol&&Symbol.toStringTag;Je&&(Blob.prototype[Je]||(Blob.prototype[Je]="Blob"),"File"in te&&!File.prototype[Je]&&(File.prototype[Je]="File"));try{new File([],"")}catch(V){te.File=function(H,$,se){return H=new Blob(H,se),se=se&&se.lastModified!==void 0?new Date(se.lastModified):new Date,Object.defineProperties(H,{name:{value:$},lastModifiedDate:{value:se},lastModified:{value:+se},toString:{value:function(){return"[object File]"}}}),Je&&Object.defineProperty(H,Je,{value:"File"}),H}}var fe=function(V){this.c=[];var H=this;V&&U(V.elements,function($){if($.name&&!$.disabled&&$.type!=="submit"&&$.type!=="button"&&!$.matches("form fieldset[disabled] *"))if($.type==="file"){var se=$.files&&$.files.length?$.files:[new File([],"",{type:"application/octet-stream"})];U(se,function(_e){H.append($.name,_e)})}else $.type==="select-multiple"||$.type==="select-one"?U($.options,function(_e){!_e.disabled&&_e.selected&&H.append($.name,_e.value)}):$.type==="checkbox"||$.type==="radio"?$.checked&&H.append($.name,$.value):(se=$.type==="textarea"?$.value.replace(/\r\n/g,`
`).replace(/\n/g,`\r
`):$.value,H.append($.name,se))})};if(i=fe.prototype,i.append=function(V,H,$){X(arguments,2),this.c.push(ie(V,H,$))},i.delete=function(V){X(arguments,1);var H=[];V=String(V),U(this.c,function($){$[0]!==V&&H.push($)}),this.c=H},i.entries=function V(){var H,$=this;return Z(V,function(se){if(se.b==1&&(H=0),se.b!=3)return H<$.c.length?se=E(se,F($.c[H])):(se.b=0,se=void 0),se;H++,se.b=2})},i.forEach=function(V,H){X(arguments,1);for(var $=l(this),se=$.next();!se.done;se=$.next()){var _e=l(se.value);se=_e.next().value,_e=_e.next().value,V.call(H,_e,se,this)}},i.get=function(V){X(arguments,1);var H=this.c;V=String(V);for(var $=0;$<H.length;$++)if(H[$][0]===V)return F(H[$])[1];return null},i.getAll=function(V){X(arguments,1);var H=[];return V=String(V),U(this.c,function($){$[0]===V&&H.push(F($)[1])}),H},i.has=function(V){X(arguments,1),V=String(V);for(var H=0;H<this.c.length;H++)if(this.c[H][0]===V)return!0;return!1},i.keys=function V(){var H=this,$,se,_e,nt,Mt;return Z(V,function(ht){if(ht.b==1&&($=l(H),se=$.next()),ht.b!=3){if(se.done){ht.b=0;return}return _e=se.value,nt=l(_e),Mt=nt.next().value,E(ht,Mt)}se=$.next(),ht.b=2})},i.set=function(V,H,$){X(arguments,2),V=String(V);var se=[],_e=ie(V,H,$),nt=!0;U(this.c,function(Mt){Mt[0]===V?nt&&(nt=!se.push(_e)):se.push(Mt)}),nt&&se.push(_e),this.c=se},i.values=function V(){var H=this,$,se,_e,nt,Mt;return Z(V,function(ht){if(ht.b==1&&($=l(H),se=$.next()),ht.b!=3){if(se.done){ht.b=0;return}return _e=se.value,nt=l(_e),nt.next(),Mt=nt.next().value,E(ht,Mt)}se=$.next(),ht.b=2})},fe.prototype._asNative=function(){for(var V=new ye,H=l(this),$=H.next();!$.done;$=H.next()){var se=l($.value);$=se.next().value,se=se.next().value,V.append($,se)}return V},fe.prototype._blob=function(){for(var V="----formdata-polyfill-"+Math.random(),H=[],$=l(this),se=$.next();!se.done;se=$.next()){var _e=l(se.value);se=_e.next().value,_e=_e.next().value,H.push("--"+V+`\r
`),_e instanceof Blob?H.push('Content-Disposition: form-data; name="'+se+'"; filename="'+_e.name+`"\r
Content-Type: `+((_e.type||"application/octet-stream")+`\r
\r
`),_e,`\r
`):H.push('Content-Disposition: form-data; name="'+se+`"\r
\r
`+_e+`\r
`)}return H.push("--"+V+"--"),new Blob(H,{type:"multipart/form-data; boundary="+V})},fe.prototype[Symbol.iterator]=function(){return this.entries()},fe.prototype.toString=function(){return"[object FormData]"},et&&!et.matches&&(et.matches=et.matchesSelector||et.mozMatchesSelector||et.msMatchesSelector||et.oMatchesSelector||et.webkitMatchesSelector||function(V){V=(this.document||this.ownerDocument).querySelectorAll(V);for(var H=V.length;0<=--H&&V.item(H)!==this;);return-1<H}),Je&&(fe.prototype[Je]="FormData"),Ee){var ke=te.XMLHttpRequest.prototype.setRequestHeader;te.XMLHttpRequest.prototype.setRequestHeader=function(V,H){ke.call(this,V,H),V.toLowerCase()==="content-type"&&(this.s=!0)},te.XMLHttpRequest.prototype.send=function(V){V instanceof fe?(V=V._blob(),this.s||this.setRequestHeader("Content-Type",V.type),Ee.call(this,V)):Ee.call(this,V)}}ae&&(te.fetch=function(V,H){return H&&H.body&&H.body instanceof fe&&(H.body=H.body._blob()),ae.call(this,V,H)}),bt&&(te.navigator.sendBeacon=function(V,H){return H instanceof fe&&(H=H._asNative()),bt.call(this,V,H)}),te.FormData=fe}})();"document"in window.self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(i){"use strict";if("Element"in i){var e="classList",t="prototype",n=i.Element[t],r=Object,s=String[t].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[t].indexOf||function(_){for(var C=0,E=this.length;C<E;C++)if(C in this&&this[C]===_)return C;return-1},l=function(_,C){this.name=_,this.code=DOMException[_],this.message=C},u=function(_,C){if(C==="")throw new l("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(C))throw new l("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(_,C)},f=function(_){for(var C=s.call(_.getAttribute("class")||""),E=C?C.split(/\s+/):[],P=0,M=E.length;P<M;P++)this.push(E[P]);this._updateClassName=function(){_.setAttribute("class",this.toString())}},g=f[t]=[],p=function(){return new f(this)};if(l[t]=Error[t],g.item=function(_){return this[_]||null},g.contains=function(_){return _+="",u(this,_)!==-1},g.add=function(){var _=arguments,C=0,E=_.length,P,M=!1;do P=_[C]+"",u(this,P)===-1&&(this.push(P),M=!0);while(++C<E);M&&this._updateClassName()},g.remove=function(){var _=arguments,C=0,E=_.length,P,M=!1,O;do for(P=_[C]+"",O=u(this,P);O!==-1;)this.splice(O,1),M=!0,O=u(this,P);while(++C<E);M&&this._updateClassName()},g.toggle=function(_,C){_+="";var E=this.contains(_),P=E?C!==!0&&"remove":C!==!1&&"add";return P&&this[P](_),C===!0||C===!1?C:!E},g.toString=function(){return this.join(" ")},r.defineProperty){var y={get:p,enumerable:!0,configurable:!0};try{r.defineProperty(n,e,y)}catch(_){(_.number===void 0||_.number===-2146823252)&&(y.enumerable=!1,r.defineProperty(n,e,y))}}else r[t].__defineGetter__&&n.__defineGetter__(e,p)}}(window.self),function(){"use strict";var i=document.createElement("_");if(i.classList.add("c1","c2"),!i.classList.contains("c2")){var e=function(n){var r=DOMTokenList.prototype[n];DOMTokenList.prototype[n]=function(s){var o,l=arguments.length;for(o=0;o<l;o++)s=arguments[o],r.call(this,s)}};e("add"),e("remove")}if(i.classList.toggle("c3",!1),i.classList.contains("c3")){var t=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(n,r){return 1 in arguments&&!this.contains(n)==!r?r:t.call(this,n)}}i=null}());(function(){function i(e,t){t=t||{bubbles:!1,cancelable:!1,composed:!1};var n=document.createEvent("Event");return n.initEvent(e,t.bubbles,t.cancelable,t.detail),n}typeof window.Event!="function"&&(i.prototype=window.Event.prototype,window.Event=i)})();(function(){"use strict";var i=typeof HTMLTemplateElement=="undefined",e=!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment),t=!1;/Trident/.test(navigator.userAgent)&&function(){t=!0;var ce=Node.prototype.cloneNode;Node.prototype.cloneNode=function(ot){var li=ce.call(this,ot);return this instanceof DocumentFragment&&(li.__proto__=DocumentFragment.prototype),li},DocumentFragment.prototype.querySelectorAll=HTMLElement.prototype.querySelectorAll,DocumentFragment.prototype.querySelector=HTMLElement.prototype.querySelector,Object.defineProperties(DocumentFragment.prototype,{nodeType:{get:function(){return Node.DOCUMENT_FRAGMENT_NODE},configurable:!0},localName:{get:function(){},configurable:!0},nodeName:{get:function(){return"#document-fragment"},configurable:!0}});var pe=Node.prototype.insertBefore;function be(Et,ot){if(Et instanceof DocumentFragment)for(var li;li=Et.firstChild;)pe.call(this,li,ot);else pe.call(this,Et,ot);return Et}Node.prototype.insertBefore=be;var He=Node.prototype.appendChild;Node.prototype.appendChild=function(ot){return ot instanceof DocumentFragment?be.call(this,ot,null):He.call(this,ot),ot};var ft=Node.prototype.removeChild,rt=Node.prototype.replaceChild;Node.prototype.replaceChild=function(ot,li){return ot instanceof DocumentFragment?(be.call(this,ot,li),ft.call(this,li)):rt.call(this,ot,li),li},Document.prototype.createDocumentFragment=function(){var ot=this.createElement("df");return ot.__proto__=DocumentFragment.prototype,ot};var ai=Document.prototype.importNode;Document.prototype.importNode=function(ot,li){li=li||!1;var Ps=ai.call(this,ot,li);return ot instanceof DocumentFragment&&(Ps.__proto__=DocumentFragment.prototype),Ps}}();var n=Node.prototype.cloneNode,r=Document.prototype.createElement,s=Document.prototype.importNode,o=Node.prototype.removeChild,l=Node.prototype.appendChild,u=Node.prototype.replaceChild,f=DOMParser.prototype.parseFromString,g=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML")||{get:function(){return this.innerHTML},set:function(ce){this.innerHTML=ce}},p=Object.getOwnPropertyDescriptor(window.Node.prototype,"childNodes")||{get:function(){return this.childNodes}},y=Element.prototype.querySelectorAll,_=Document.prototype.querySelectorAll,C=DocumentFragment.prototype.querySelectorAll,E='script:not([type]),script[type="application/javascript"],script[type="text/javascript"]';function P(ce,pe){if(!ce.childNodes.length)return[];switch(ce.nodeType){case Node.DOCUMENT_NODE:return _.call(ce,pe);case Node.DOCUMENT_FRAGMENT_NODE:return C.call(ce,pe);default:return y.call(ce,pe)}}var M=function(){if(!i){var ce=document.createElement("template"),pe=document.createElement("template");pe.content.appendChild(document.createElement("div")),ce.content.appendChild(pe);var be=ce.cloneNode(!0);return be.content.childNodes.length===0||be.content.firstChild.content.childNodes.length===0||e}}(),O="template",N=function(){};if(i){var W=document.implementation.createHTMLDocument("template"),Z=!0,U=document.createElement("style");U.textContent=O+"{display:none;}";var ie=document.head;ie.insertBefore(U,ie.firstElementChild),N.prototype=Object.create(HTMLElement.prototype);var X=!document.createElement("div").hasOwnProperty("innerHTML");N.decorate=function(ce){if(!(ce.content||ce.namespaceURI!==document.documentElement.namespaceURI)){ce.content=W.createDocumentFragment();for(var pe;pe=ce.firstChild;)l.call(ce.content,pe);if(X)ce.__proto__=N.prototype;else if(ce.cloneNode=function(be){return N._cloneNode(this,be)},Z)try{ye(ce),Ee(ce)}catch(be){Z=!1}N.bootstrap(ce.content)}};var F={option:["select"],thead:["table"],col:["colgroup","table"],tr:["tbody","table"],th:["tr","tbody","table"],td:["tr","tbody","table"]},te=function(ce){return(/<([a-z][^/\0>\x20\t\r\n\f]+)/i.exec(ce)||["",""])[1].toLowerCase()},ye=function(pe){Object.defineProperty(pe,"innerHTML",{get:function(){return se(this)},set:function(be){var He=F[te(be)];if(He)for(var ft=0;ft<He.length;ft++)be="<"+He[ft]+">"+be+"</"+He[ft]+">";for(W.body.innerHTML=be,N.bootstrap(W);this.content.firstChild;)o.call(this.content,this.content.firstChild);var rt=W.body;if(He)for(var ai=0;ai<He.length;ai++)rt=rt.lastChild;for(;rt.firstChild;)l.call(this.content,rt.firstChild)},configurable:!0})},Ee=function(pe){Object.defineProperty(pe,"outerHTML",{get:function(){return`<${O}>${this.innerHTML}</${O}>`},set:function(be){if(this.parentNode){W.body.innerHTML=be;for(var He=this.ownerDocument.createDocumentFragment();W.body.firstChild;)l.call(He,W.body.firstChild);u.call(this.parentNode,He,this)}else throw new Error("Failed to set the 'outerHTML' property on 'Element': This element has no parent node.")},configurable:!0})};ye(N.prototype),Ee(N.prototype),N.bootstrap=function(pe){for(var be=P(pe,O),He=0,ft=be.length,rt;He<ft&&(rt=be[He]);He++)N.decorate(rt)},document.addEventListener("DOMContentLoaded",function(){N.bootstrap(document)}),Document.prototype.createElement=function(){var pe=r.apply(this,arguments);return pe.localName==="template"&&N.decorate(pe),pe},DOMParser.prototype.parseFromString=function(){var ce=f.apply(this,arguments);return N.bootstrap(ce),ce},Object.defineProperty(HTMLElement.prototype,"innerHTML",{get:function(){return se(this)},set:function(ce){g.set.call(this,ce),N.bootstrap(this)},configurable:!0,enumerable:!0});var ae=/[&\u00A0"]/g,bt=/[&\u00A0<>]/g,et=function(ce){switch(ce){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"\xA0":return"&nbsp;"}},Je=function(ce){return ce.replace(ae,et)},fe=function(ce){return ce.replace(bt,et)},ke=function(ce){for(var pe={},be=0;be<ce.length;be++)pe[ce[be]]=!0;return pe},V=ke(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),H=ke(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),$=function(ce,pe,be){switch(ce.nodeType){case Node.ELEMENT_NODE:{for(var He=ce.localName,ft="<"+He,rt=ce.attributes,ai=0,Et;Et=rt[ai];ai++)ft+=" "+Et.name+'="'+Je(Et.value)+'"';return ft+=">",V[He]?ft:ft+se(ce,be)+"</"+He+">"}case Node.TEXT_NODE:{var ot=ce.data;return pe&&H[pe.localName]?ot:fe(ot)}case Node.COMMENT_NODE:return"<!--"+ce.data+"-->";default:throw window.console.error(ce),new Error("not implemented")}},se=function(ce,pe){ce.localName==="template"&&(ce=ce.content);for(var be="",He=pe?pe(ce):p.get.call(ce),ft=0,rt=He.length,ai;ft<rt&&(ai=He[ft]);ft++)be+=$(ai,ce,pe);return be}}if(i||M){N._cloneNode=function(pe,be){var He=n.call(pe,!1);return this.decorate&&this.decorate(He),be&&(l.call(He.content,n.call(pe.content,!0)),_e(He.content,pe.content)),He};var _e=function(pe,be){if(!!be.querySelectorAll){var He=P(be,O);if(He.length!==0)for(var ft=P(pe,O),rt=0,ai=ft.length,Et,ot;rt<ai;rt++)ot=He[rt],Et=ft[rt],N&&N.decorate&&N.decorate(ot),u.call(Et.parentNode,Mt.call(ot,!0),Et)}},nt=function(pe){for(var be=P(pe,E),He,ft,rt=0;rt<be.length;rt++){ft=be[rt],He=r.call(document,"script"),He.textContent=ft.textContent;for(var ai=ft.attributes,Et=0,ot;Et<ai.length;Et++)ot=ai[Et],He.setAttribute(ot.name,ot.value);u.call(ft.parentNode,He,ft)}},Mt=Node.prototype.cloneNode=function(pe){var be;if(!t&&e&&this instanceof DocumentFragment)if(pe)be=ht.call(this.ownerDocument,this,!0);else return this.ownerDocument.createDocumentFragment();else this.nodeType===Node.ELEMENT_NODE&&this.localName===O&&this.namespaceURI==document.documentElement.namespaceURI?be=N._cloneNode(this,pe):be=n.call(this,pe);return pe&&_e(be,this),be},ht=Document.prototype.importNode=function(pe,be){if(be=be||!1,pe.localName===O)return N._cloneNode(pe,be);var He=s.call(this,pe,be);return be&&(_e(He,pe),nt(He)),He}}i&&(window.HTMLTemplateElement=N)})();(function(){"use strict";if(!!self.document){var i=KeyboardEvent.prototype,e=Object.getOwnPropertyDescriptor(i,"key");if(!!e){var t={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};Object.defineProperty(i,"key",{get:function(){var n=e.get.call(this);return t.hasOwnProperty(n)?t[n]:n}})}}})();var lDe=Vo(tI()),cDe=Vo(iR());"use strict";(function(){var i=e();function e(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function r(s,o){o=o||{bubbles:!1,cancelable:!1,detail:void 0};var l=document.createEvent("CustomEvent");return l.initCustomEvent(s,o.bubbles,o.cancelable,o.detail),l}return r.prototype=window.Event.prototype,r}function t(r,s){var o=document.createElement("input");return o.type="hidden",o.name=r,o.value=s,o}function n(r,s){var o=r.getAttribute("data-to"),l=t("_method",r.getAttribute("data-method")),u=t("_csrf_token",r.getAttribute("data-csrf")),f=document.createElement("form"),g=document.createElement("input"),p=r.getAttribute("target");f.method=r.getAttribute("data-method")==="get"?"get":"post",f.action=o,f.style.display="none",p?f.target=p:s&&(f.target="_blank"),f.appendChild(u),f.appendChild(l),document.body.appendChild(f),g.type="submit",f.appendChild(g),g.click()}window.addEventListener("click",function(r){var s=r.target;if(!r.defaultPrevented)for(;s&&s.getAttribute;){var o=new i("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!s.dispatchEvent(o))return r.preventDefault(),r.stopImmediatePropagation(),!1;if(s.getAttribute("data-method")&&s.getAttribute("data-to"))return n(s,r.metaKey||r.shiftKey),r.preventDefault(),!1;s=s.parentNode}},!1),window.addEventListener("phoenix.link.click",function(r){var s=r.target.getAttribute("data-confirm");s&&!window.confirm(s)&&r.preventDefault()},!1)})();var Jd=i=>typeof i=="function"?i:function(){return i},wJ=typeof self!="undefined"?self:null,Xd=typeof window!="undefined"?window:null,Ya=wJ||Xd||Ya,yJ="2.0.0",as={connecting:0,open:1,closing:2,closed:3},_J=1e4,xJ=1e3,Kn={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},Ws={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},y0={longpoll:"longpoll",websocket:"websocket"},kJ={complete:4},wg=class{constructor(i,e,t,n){this.channel=i,this.event=e,this.payload=t||function(){return{}},this.receivedResp=null,this.timeout=n,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(i){this.timeout=i,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(i,e){return this.hasReceived(i)&&e(this.receivedResp.response),this.recHooks.push({status:i,callback:e}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:i,response:e,_ref:t}){this.recHooks.filter(n=>n.status===i).forEach(n=>n.callback(e))}cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,i=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=i,this.matchReceive(i)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}trigger(i,e){this.channel.trigger(this.refEvent,{status:i,response:e})}},nR=class{constructor(i,e){this.callback=i,this.timerCalc=e,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},CJ=class{constructor(i,e,t){this.state=Kn.closed,this.topic=i,this.params=Jd(e||{}),this.socket=t,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new wg(this,Ws.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new nR(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=Kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=Kn.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=Kn.closed,this.socket.remove(this)}),this.onError(n=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,n),this.isJoining()&&this.joinPush.reset(),this.state=Kn.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new wg(this,Ws.leave,Jd({}),this.timeout).send(),this.state=Kn.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(Ws.reply,(n,r)=>{this.trigger(this.replyEventName(r),n)})}join(i=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=i,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(i){this.on(Ws.close,i)}onError(i){return this.on(Ws.error,e=>i(e))}on(i,e){let t=this.bindingRef++;return this.bindings.push({event:i,ref:t,callback:e}),t}off(i,e){this.bindings=this.bindings.filter(t=>!(t.event===i&&(typeof e=="undefined"||e===t.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(i,e,t=this.timeout){if(e=e||{},!this.joinedOnce)throw new Error(`tried to push '${i}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let n=new wg(this,i,function(){return e},t);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}leave(i=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=Kn.leaving;let e=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(Ws.close,"leave")},t=new wg(this,Ws.leave,Jd({}),i);return t.receive("ok",()=>e()).receive("timeout",()=>e()),t.send(),this.canPush()||t.trigger("ok",{}),t}onMessage(i,e,t){return e}isMember(i,e,t,n){return this.topic!==i?!1:n&&n!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:i,event:e,payload:t,joinRef:n}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(i=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=Kn.joining,this.joinPush.resend(i))}trigger(i,e,t,n){let r=this.onMessage(i,e,t,n);if(e&&!r)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let s=this.bindings.filter(o=>o.event===i);for(let o=0;o<s.length;o++)s[o].callback(r,t,n||this.joinRef())}replyEventName(i){return`chan_reply_${i}`}isClosed(){return this.state===Kn.closed}isErrored(){return this.state===Kn.errored}isJoined(){return this.state===Kn.joined}isJoining(){return this.state===Kn.joining}isLeaving(){return this.state===Kn.leaving}},yg=class{static request(i,e,t,n,r,s,o){if(Ya.XDomainRequest){let l=new Ya.XDomainRequest;return this.xdomainRequest(l,i,e,n,r,s,o)}else{let l=new Ya.XMLHttpRequest;return this.xhrRequest(l,i,e,t,n,r,s,o)}}static xdomainRequest(i,e,t,n,r,s,o){return i.timeout=r,i.open(e,t),i.onload=()=>{let l=this.parseJSON(i.responseText);o&&o(l)},s&&(i.ontimeout=s),i.onprogress=()=>{},i.send(n),i}static xhrRequest(i,e,t,n,r,s,o,l){return i.open(e,t,!0),i.timeout=s,i.setRequestHeader("Content-Type",n),i.onerror=()=>l&&l(null),i.onreadystatechange=()=>{if(i.readyState===kJ.complete&&l){let u=this.parseJSON(i.responseText);l(u)}},o&&(i.ontimeout=o),i.send(r),i}static parseJSON(i){if(!i||i==="")return null;try{return JSON.parse(i)}catch(e){return console&&console.log("failed to parse JSON response",i),null}}static serialize(i,e){let t=[];for(var n in i){if(!Object.prototype.hasOwnProperty.call(i,n))continue;let r=e?`${e}[${n}]`:n,s=i[n];typeof s=="object"?t.push(this.serialize(s,r)):t.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}return t.join("&")}static appendParams(i,e){if(Object.keys(e).length===0)return i;let t=i.match(/\?/)?"&":"?";return`${i}${t}${this.serialize(e)}`}},TJ=i=>{let e="",t=new Uint8Array(i),n=t.byteLength;for(let r=0;r<n;r++)e+=String.fromCharCode(t[r]);return btoa(e)},Qd=class{constructor(i){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(i),this.readyState=as.connecting,setTimeout(()=>this.poll(),0)}normalizeEndpoint(i){return i.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+y0.websocket),"$1/"+y0.longpoll)}endpointURL(){return yg.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(i,e,t){this.close(i,e,t),this.readyState=as.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===as.open||this.readyState===as.connecting}poll(){this.ajax("GET","application/json",null,()=>this.ontimeout(),i=>{if(i){var{status:e,token:t,messages:n}=i;this.token=t}else e=0;switch(e){case 200:n.forEach(r=>{setTimeout(()=>this.onmessage({data:r}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=as.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${e}`)}})}send(i){typeof i!="string"&&(i=TJ(i)),this.currentBatch?this.currentBatch.push(i):this.awaitingBatchAck?this.batchBuffer.push(i):(this.currentBatch=[i],this.currentBatchTimer=setTimeout(()=>{this.batchSend(this.currentBatch),this.currentBatch=null},0))}batchSend(i){this.awaitingBatchAck=!0,this.ajax("POST","application/x-ndjson",i.join(`
`),()=>this.onerror("timeout"),e=>{this.awaitingBatchAck=!1,!e||e.status!==200?(this.onerror(e&&e.status),this.closeAndRetry(1011,"internal server error",!1)):this.batchBuffer.length>0&&(this.batchSend(this.batchBuffer),this.batchBuffer=[])})}close(i,e,t){for(let r of this.reqs)r.abort();this.readyState=as.closed;let n=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:i,reason:e,wasClean:t});this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent!="undefined"?this.onclose(new CloseEvent("close",n)):this.onclose(n)}ajax(i,e,t,n,r){let s,o=()=>{this.reqs.delete(s),n()};s=yg.request(i,this.endpointURL(),e,t,this.timeout,o,l=>{this.reqs.delete(s),this.isActive()&&r(l)}),this.reqs.add(s)}};var _g={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(i,e){if(i.payload.constructor===ArrayBuffer)return e(this.binaryEncode(i));{let t=[i.join_ref,i.ref,i.topic,i.event,i.payload];return e(JSON.stringify(t))}},decode(i,e){if(i.constructor===ArrayBuffer)return e(this.binaryDecode(i));{let[t,n,r,s,o]=JSON.parse(i);return e({join_ref:t,ref:n,topic:r,event:s,payload:o})}},binaryEncode(i){let{join_ref:e,ref:t,event:n,topic:r,payload:s}=i,o=this.META_LENGTH+e.length+t.length+r.length+n.length,l=new ArrayBuffer(this.HEADER_LENGTH+o),u=new DataView(l),f=0;u.setUint8(f++,this.KINDS.push),u.setUint8(f++,e.length),u.setUint8(f++,t.length),u.setUint8(f++,r.length),u.setUint8(f++,n.length),Array.from(e,p=>u.setUint8(f++,p.charCodeAt(0))),Array.from(t,p=>u.setUint8(f++,p.charCodeAt(0))),Array.from(r,p=>u.setUint8(f++,p.charCodeAt(0))),Array.from(n,p=>u.setUint8(f++,p.charCodeAt(0)));var g=new Uint8Array(l.byteLength+s.byteLength);return g.set(new Uint8Array(l),0),g.set(new Uint8Array(s),l.byteLength),g.buffer},binaryDecode(i){let e=new DataView(i),t=e.getUint8(0),n=new TextDecoder;switch(t){case this.KINDS.push:return this.decodePush(i,e,n);case this.KINDS.reply:return this.decodeReply(i,e,n);case this.KINDS.broadcast:return this.decodeBroadcast(i,e,n)}},decodePush(i,e,t){let n=e.getUint8(1),r=e.getUint8(2),s=e.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,l=t.decode(i.slice(o,o+n));o=o+n;let u=t.decode(i.slice(o,o+r));o=o+r;let f=t.decode(i.slice(o,o+s));o=o+s;let g=i.slice(o,i.byteLength);return{join_ref:l,ref:null,topic:u,event:f,payload:g}},decodeReply(i,e,t){let n=e.getUint8(1),r=e.getUint8(2),s=e.getUint8(3),o=e.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,u=t.decode(i.slice(l,l+n));l=l+n;let f=t.decode(i.slice(l,l+r));l=l+r;let g=t.decode(i.slice(l,l+s));l=l+s;let p=t.decode(i.slice(l,l+o));l=l+o;let y=i.slice(l,i.byteLength),_={status:p,response:y};return{join_ref:u,ref:f,topic:g,event:Ws.reply,payload:_}},decodeBroadcast(i,e,t){let n=e.getUint8(1),r=e.getUint8(2),s=this.HEADER_LENGTH+2,o=t.decode(i.slice(s,s+n));s=s+n;let l=t.decode(i.slice(s,s+r));s=s+r;let u=i.slice(s,i.byteLength);return{join_ref:null,ref:null,topic:o,event:l,payload:u}}},rR=class{constructor(i,e={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=e.timeout||_J,this.transport=e.transport||Ya.WebSocket||Qd,this.primaryPassedHealthCheck=!1,this.longPollFallbackMs=e.longPollFallbackMs,this.fallbackTimer=null,this.sessionStore=e.sessionStorage||Ya&&Ya.sessionStorage,this.establishedConnections=0,this.defaultEncoder=_g.encode.bind(_g),this.defaultDecoder=_g.decode.bind(_g),this.closeWasClean=!1,this.binaryType=e.binaryType||"arraybuffer",this.connectClock=1,this.transport!==Qd?(this.encode=e.encode||this.defaultEncoder,this.decode=e.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let t=null;Xd&&Xd.addEventListener&&(Xd.addEventListener("pagehide",n=>{this.conn&&(this.disconnect(),t=this.connectClock)}),Xd.addEventListener("pageshow",n=>{t===this.connectClock&&(t=null,this.connect())})),this.heartbeatIntervalMs=e.heartbeatIntervalMs||3e4,this.rejoinAfterMs=n=>e.rejoinAfterMs?e.rejoinAfterMs(n):[1e3,2e3,5e3][n-1]||1e4,this.reconnectAfterMs=n=>e.reconnectAfterMs?e.reconnectAfterMs(n):[10,50,100,150,200,250,500,1e3,2e3][n-1]||5e3,this.logger=e.logger||null,!this.logger&&e.debug&&(this.logger=(n,r,s)=>{console.log(`${n}: ${r}`,s)}),this.longpollerTimeout=e.longpollerTimeout||2e4,this.params=Jd(e.params||{}),this.endPoint=`${i}/${y0.websocket}`,this.vsn=e.vsn||yJ,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new nR(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return Qd}replaceTransport(i){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.conn&&(this.conn.close(),this.conn=null),this.transport=i}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let i=yg.appendParams(yg.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return i.charAt(0)!=="/"?i:i.charAt(1)==="/"?`${this.protocol()}:${i}`:`${this.protocol()}://${location.host}${i}`}disconnect(i,e,t){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.teardown(i,e,t)}connect(i){i&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=Jd(i)),!this.conn&&(this.longPollFallbackMs&&this.transport!==Qd?this.connectWithFallback(Qd,this.longPollFallbackMs):this.transportConnect())}log(i,e,t){this.logger&&this.logger(i,e,t)}hasLogger(){return this.logger!==null}onOpen(i){let e=this.makeRef();return this.stateChangeCallbacks.open.push([e,i]),e}onClose(i){let e=this.makeRef();return this.stateChangeCallbacks.close.push([e,i]),e}onError(i){let e=this.makeRef();return this.stateChangeCallbacks.error.push([e,i]),e}onMessage(i){let e=this.makeRef();return this.stateChangeCallbacks.message.push([e,i]),e}ping(i){if(!this.isConnected())return!1;let e=this.makeRef(),t=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:e});let n=this.onMessage(r=>{r.ref===e&&(this.off([n]),i(Date.now()-t))});return!0}transportConnect(){this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=i=>this.onConnError(i),this.conn.onmessage=i=>this.onConnMessage(i),this.conn.onclose=i=>this.onConnClose(i)}getSession(i){return this.sessionStore&&this.sessionStore.getItem(i)}storeSession(i,e){this.sessionStore&&this.sessionStore.setItem(i,e)}connectWithFallback(i,e=2500){clearTimeout(this.fallbackTimer);let t=!1,n=!0,r,s,o=l=>{this.log("transport",`falling back to ${i.name}...`,l),this.off([r,s]),n=!1,this.replaceTransport(i),this.transportConnect()};if(this.getSession(`phx:fallback:${i.name}`))return o("memorized");this.fallbackTimer=setTimeout(o,e),s=this.onError(l=>{this.log("transport","error",l),n&&!t&&(clearTimeout(this.fallbackTimer),o(l))}),this.onOpen(()=>{if(t=!0,!n)return this.primaryPassedHealthCheck||this.storeSession(`phx:fallback:${i.name}`,"true"),this.log("transport",`established ${i.name} fallback`);clearTimeout(this.fallbackTimer),this.fallbackTimer=setTimeout(o,e),this.ping(l=>{this.log("transport","connected to primary after",l),this.primaryPassedHealthCheck=!0,clearTimeout(this.fallbackTimer)})}),this.transportConnect()}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){this.hasLogger()&&this.log("transport",`${this.transport.name} connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,i])=>i())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),xJ,"heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(i,e,t){if(!this.conn)return i&&i();this.waitForBufferDone(()=>{this.conn&&(e?this.conn.close(e,t||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null),i&&i()})})}waitForBufferDone(i,e=1){if(e===5||!this.conn||!this.conn.bufferedAmount){i();return}setTimeout(()=>{this.waitForBufferDone(i,e+1)},150*e)}waitForSocketClosed(i,e=1){if(e===5||!this.conn||this.conn.readyState===as.closed){i();return}setTimeout(()=>{this.waitForSocketClosed(i,e+1)},150*e)}onConnClose(i){let e=i&&i.code;this.hasLogger()&&this.log("transport","close",i),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&e!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,t])=>t(i))}onConnError(i){this.hasLogger()&&this.log("transport",i);let e=this.transport,t=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,n])=>{n(i,e,t)}),(e===this.transport||t>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(i=>{i.isErrored()||i.isLeaving()||i.isClosed()||i.trigger(Ws.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case as.connecting:return"connecting";case as.open:return"open";case as.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(i){this.off(i.stateChangeRefs),this.channels=this.channels.filter(e=>e!==i)}off(i){for(let e in this.stateChangeCallbacks)this.stateChangeCallbacks[e]=this.stateChangeCallbacks[e].filter(([t])=>i.indexOf(t)===-1)}channel(i,e={}){let t=new CJ(i,e,this);return this.channels.push(t),t}push(i){if(this.hasLogger()){let{topic:e,event:t,payload:n,ref:r,join_ref:s}=i;this.log("push",`${e} ${t} (${s}, ${r})`,n)}this.isConnected()?this.encode(i,e=>this.conn.send(e)):this.sendBuffer.push(()=>this.encode(i,e=>this.conn.send(e)))}makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}onConnMessage(i){this.decode(i.data,e=>{let{topic:t,event:n,payload:r,ref:s,join_ref:o}=e;s&&s===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${r.status||""} ${t} ${n} ${s&&"("+s+")"||""}`,r);for(let l=0;l<this.channels.length;l++){let u=this.channels[l];!u.isMember(t,n,r,o)||u.trigger(n,r,s,o)}for(let l=0;l<this.stateChangeCallbacks.message.length;l++){let[,u]=this.stateChangeCallbacks.message[l];u(e)}})}leaveOpenTopic(i){let e=this.channels.find(t=>t.topic===i&&(t.isJoined()||t.isJoining()));e&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${i}"`),e.leave())}};var sR="consecutive-reloads",EJ=10,SJ=5e3,AJ=1e4,IJ=3e4,oR=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading","phx-hook-loading"],qs="data-phx-component",_0="data-phx-link",PJ="track-static",RJ="data-phx-link-state",Yn="data-phx-ref",Wo="data-phx-ref-src",aR="track-uploads",$s="data-phx-upload-ref",x0="data-phx-preflighted-refs",OJ="data-phx-done-refs",lR="drop-target",k0="data-phx-active-refs",xg="phx:live-file:updated",cR="data-phx-skip",uR="data-phx-id",dR="data-phx-prune",hR="page-loading",fR="phx-connected",eh="phx-loading",kg="phx-no-feedback",Cg="phx-error",mR="phx-client-error",C0="phx-server-error",Za="data-phx-parent-id",T0="data-phx-main",Ja="data-phx-root-id",E0="viewport-top",S0="viewport-bottom",MJ="trigger-action",Tg="feedback-for",Eg="feedback-group",A0="phx-has-focused",LJ=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],gR=["checkbox","radio"],Sg="phx-has-submitted",Gs="data-phx-session",kc=`[${Gs}]`,pR="data-phx-sticky",Cc="data-phx-static",I0="data-phx-readonly",Tc="data-phx-disabled",P0="disable-with",Ag="data-phx-disable-with-restore",th="hook",DJ="debounce",VJ="throttle",Ig="update",R0="stream",O0="data-phx-stream",BJ="key",ls="phxPrivate",bR="auto-recover",Pg="phx:live-socket:debug",M0="phx:live-socket:profiling",L0="phx:live-socket:latency-sim",NJ="progress",vR="mounted",FJ=1,jJ=200,HJ="phx-",zJ=3e4,ih="debounce-trigger",nh="throttled",wR="debounce-prev-key",UJ={debounce:300,throttle:300},Rg="d",cs="s",D0="r",bn="c",yR="e",_R="r",xR="t",WJ="p",kR="stream",qJ=class{constructor(i,e,t){this.liveSocket=t,this.entry=i,this.offset=0,this.chunkSize=e,this.chunkTimer=null,this.errored=!1,this.uploadChannel=t.channel(`lvu:${i.ref}`,{token:i.metadata()})}error(i){this.errored||(this.uploadChannel.leave(),this.errored=!0,clearTimeout(this.chunkTimer),this.entry.error(i))}upload(){this.uploadChannel.onError(i=>this.error(i)),this.uploadChannel.join().receive("ok",i=>this.readNextChunk()).receive("error",i=>this.error(i))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let i=new window.FileReader,e=this.entry.file.slice(this.offset,this.chunkSize+this.offset);i.onload=t=>{if(t.target.error===null)this.offset+=t.target.result.byteLength,this.pushChunk(t.target.result);else return Zn("Read error: "+t.target.error)},i.readAsArrayBuffer(e)}pushChunk(i){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",i).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))}).receive("error",({reason:e})=>this.error(e))}},Zn=(i,e)=>console.error&&console.error(i,e),Ks=i=>{let e=typeof i;return e==="number"||e==="string"&&/^(0|[1-9]\d*)$/.test(i)};function $J(){let i=new Set,e=document.querySelectorAll("*[id]");for(let t=0,n=e.length;t<n;t++)i.has(e[t].id)?console.error(`Multiple IDs detected: ${e[t].id}. Ensure unique element ids.`):i.add(e[t].id)}var GJ=(i,e,t,n)=>{i.liveSocket.isDebugEnabled()&&console.log(`${i.id} ${e}: ${t} - `,n)},rh=i=>typeof i=="function"?i:function(){return i},Og=i=>JSON.parse(JSON.stringify(i)),sh=(i,e,t)=>{do{if(i.matches(`[${e}]`)&&!i.disabled)return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1&&!(t&&t.isSameNode(i)||i.matches(kc)));return null},Ec=i=>i!==null&&typeof i=="object"&&!(i instanceof Array),KJ=(i,e)=>JSON.stringify(i)===JSON.stringify(e),CR=i=>{for(let e in i)return!1;return!0},qo=(i,e)=>i&&e(i),YJ=function(i,e,t,n){i.forEach(r=>{new qJ(r,t.config.chunk_size,n).upload()})},TR={canPushState(){return typeof history.pushState!="undefined"},dropLocal(i,e,t){return i.removeItem(this.localKey(e,t))},updateLocal(i,e,t,n,r){let s=this.getLocal(i,e,t),o=this.localKey(e,t),l=s===null?n:r(s);return i.setItem(o,JSON.stringify(l)),l},getLocal(i,e,t){return JSON.parse(i.getItem(this.localKey(e,t)))},updateCurrentState(i){!this.canPushState()||history.replaceState(i(history.state||{}),"",window.location.href)},pushState(i,e,t){if(this.canPushState()){if(t!==window.location.href){if(e.type=="redirect"&&e.scroll){let r=history.state||{};r.scroll=e.scroll,history.replaceState(r,"",window.location.href)}delete e.scroll,history[i+"State"](e,"",t||null);let n=this.getHashTargetEl(window.location.hash);n?n.scrollIntoView():e.type==="redirect"&&window.scroll(0,0)}}else this.redirect(t)},setCookie(i,e){document.cookie=`${i}=${e}`},getCookie(i){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${i}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(i,e){e&&TR.setCookie("__phoenix_flash__",e+"; max-age=60000; path=/"),window.location=i},localKey(i,e){return`${i}-${e}`},getHashTargetEl(i){let e=i.toString().substring(1);if(e!=="")return document.getElementById(e)||document.querySelector(`a[name="${e}"]`)}},us=TR,ZJ={focusMain(){let i=document.querySelector("main h1, main, h1");if(i){let e=i.tabIndex;i.tabIndex=-1,i.focus(),i.tabIndex=e}},anyOf(i,e){return e.find(t=>i instanceof t)},isFocusable(i,e){return i instanceof HTMLAnchorElement&&i.rel!=="ignore"||i instanceof HTMLAreaElement&&i.href!==void 0||!i.disabled&&this.anyOf(i,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||i instanceof HTMLIFrameElement||i.tabIndex>0||!e&&i.getAttribute("tabindex")!==null&&i.getAttribute("aria-hidden")!=="true"},attemptFocus(i,e){if(this.isFocusable(i,e))try{i.focus()}catch(t){}return!!document.activeElement&&document.activeElement.isSameNode(i)},focusFirstInteractive(i){let e=i.firstElementChild;for(;e;){if(this.attemptFocus(e,!0)||this.focusFirstInteractive(e,!0))return!0;e=e.nextElementSibling}},focusFirst(i){let e=i.firstElementChild;for(;e;){if(this.attemptFocus(e)||this.focusFirst(e))return!0;e=e.nextElementSibling}},focusLast(i){let e=i.lastElementChild;for(;e;){if(this.attemptFocus(e)||this.focusLast(e))return!0;e=e.previousElementSibling}}},Sc=ZJ,ER=[],SR=200,JJ={exec(i,e,t,n,r){let[s,o]=r||[null,{callback:r&&r.callback}];(e.charAt(0)==="["?JSON.parse(e):[[s,o]]).forEach(([u,f])=>{u===s&&o.data&&(f.data=Object.assign(f.data||{},o.data),f.callback=f.callback||o.callback),this.filterToEls(n,f).forEach(g=>{this[`exec_${u}`](i,e,t,n,g,f)})})},isVisible(i){return!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length>0)},isInViewport(i){let e=i.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth;return e.right>0&&e.bottom>0&&e.left<n&&e.top<t},exec_exec(i,e,t,n,r,{attr:s,to:o}){(o?K.all(document,o):[n]).forEach(u=>{let f=u.getAttribute(s);if(!f)throw new Error(`expected ${s} to contain JS command on "${o}"`);t.liveSocket.execJS(u,f,i)})},exec_dispatch(i,e,t,n,r,{to:s,event:o,detail:l,bubbles:u}){l=l||{},l.dispatcher=n,K.dispatchEvent(r,o,{detail:l,bubbles:u})},exec_push(i,e,t,n,r,s){let{event:o,data:l,target:u,page_loading:f,loading:g,value:p,dispatcher:y,callback:_}=s,C={loading:g,value:p,target:u,page_loading:!!f},E=i==="change"&&y?y:n,P=u||E.getAttribute(t.binding("target"))||E;t.withinTargets(P,(M,O)=>{if(!!M.isConnected())if(i==="change"){let{newCid:N,_target:W}=s;W=W||(K.isFormInput(n)?n.name:void 0),W&&(C._target=W),M.pushInput(n,O,N,o||e,C,_)}else if(i==="submit"){let{submitter:N}=s;M.submitForm(n,O,o||e,N,C,_)}else M.pushEvent(i,n,O,o||e,l,C,_)})},exec_navigate(i,e,t,n,r,{href:s,replace:o}){t.liveSocket.historyRedirect(s,o?"replace":"push")},exec_patch(i,e,t,n,r,{href:s,replace:o}){t.liveSocket.pushHistoryPatch(s,o?"replace":"push",n)},exec_focus(i,e,t,n,r){window.requestAnimationFrame(()=>Sc.attemptFocus(r))},exec_focus_first(i,e,t,n,r){window.requestAnimationFrame(()=>Sc.focusFirstInteractive(r)||Sc.focusFirst(r))},exec_push_focus(i,e,t,n,r){window.requestAnimationFrame(()=>ER.push(r||n))},exec_pop_focus(i,e,t,n,r){window.requestAnimationFrame(()=>{let s=ER.pop();s&&s.focus()})},exec_add_class(i,e,t,n,r,{names:s,transition:o,time:l}){this.addOrRemoveClasses(r,s,[],o,l,t)},exec_remove_class(i,e,t,n,r,{names:s,transition:o,time:l}){this.addOrRemoveClasses(r,[],s,o,l,t)},exec_toggle_class(i,e,t,n,r,{to:s,names:o,transition:l,time:u}){this.toggleClasses(r,o,l,u,t)},exec_toggle_attr(i,e,t,n,r,{attr:[s,o,l]}){r.hasAttribute(s)?l!==void 0?r.getAttribute(s)===o?this.setOrRemoveAttrs(r,[[s,l]],[]):this.setOrRemoveAttrs(r,[[s,o]],[]):this.setOrRemoveAttrs(r,[],[s]):this.setOrRemoveAttrs(r,[[s,o]],[])},exec_transition(i,e,t,n,r,{time:s,transition:o}){this.addOrRemoveClasses(r,[],[],o,s,t)},exec_toggle(i,e,t,n,r,{display:s,ins:o,outs:l,time:u}){this.toggle(i,t,r,s,o,l,u)},exec_show(i,e,t,n,r,{display:s,transition:o,time:l}){this.show(i,t,r,s,o,l)},exec_hide(i,e,t,n,r,{display:s,transition:o,time:l}){this.hide(i,t,r,s,o,l)},exec_set_attr(i,e,t,n,r,{attr:[s,o]}){this.setOrRemoveAttrs(r,[[s,o]],[])},exec_remove_attr(i,e,t,n,r,{attr:s}){this.setOrRemoveAttrs(r,[],[s])},show(i,e,t,n,r,s){this.isVisible(t)||this.toggle(i,e,t,n,r,null,s)},hide(i,e,t,n,r,s){this.isVisible(t)&&this.toggle(i,e,t,n,null,r,s)},toggle(i,e,t,n,r,s,o){o=o||SR;let[l,u,f]=r||[[],[],[]],[g,p,y]=s||[[],[],[]];if(l.length>0||g.length>0)if(this.isVisible(t)){let _=()=>{this.addOrRemoveClasses(t,p,l.concat(u).concat(f)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(t,g,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(t,y,p))})};t.dispatchEvent(new Event("phx:hide-start")),e.transition(o,_,()=>{this.addOrRemoveClasses(t,[],g.concat(y)),K.putSticky(t,"toggle",C=>C.style.display="none"),t.dispatchEvent(new Event("phx:hide-end"))})}else{if(i==="remove")return;let _=()=>{this.addOrRemoveClasses(t,u,g.concat(p).concat(y));let C=n||this.defaultDisplay(t);K.putSticky(t,"toggle",E=>E.style.display=C),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(t,l,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(t,f,u))})};t.dispatchEvent(new Event("phx:show-start")),e.transition(o,_,()=>{this.addOrRemoveClasses(t,[],l.concat(f)),t.dispatchEvent(new Event("phx:show-end"))})}else this.isVisible(t)?window.requestAnimationFrame(()=>{t.dispatchEvent(new Event("phx:hide-start")),K.putSticky(t,"toggle",_=>_.style.display="none"),t.dispatchEvent(new Event("phx:hide-end"))}):window.requestAnimationFrame(()=>{t.dispatchEvent(new Event("phx:show-start"));let _=n||this.defaultDisplay(t);K.putSticky(t,"toggle",C=>C.style.display=_),t.dispatchEvent(new Event("phx:show-end"))})},toggleClasses(i,e,t,n,r){window.requestAnimationFrame(()=>{let[s,o]=K.getSticky(i,"classes",[[],[]]),l=e.filter(f=>s.indexOf(f)<0&&!i.classList.contains(f)),u=e.filter(f=>o.indexOf(f)<0&&i.classList.contains(f));this.addOrRemoveClasses(i,l,u,t,n,r)})},addOrRemoveClasses(i,e,t,n,r,s){r=r||SR;let[o,l,u]=n||[[],[],[]];if(o.length>0){let f=()=>{this.addOrRemoveClasses(i,l,[].concat(o).concat(u)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,o,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,u,l))})},g=()=>this.addOrRemoveClasses(i,e.concat(u),t.concat(o).concat(l));return s.transition(r,f,g)}window.requestAnimationFrame(()=>{let[f,g]=K.getSticky(i,"classes",[[],[]]),p=e.filter(E=>f.indexOf(E)<0&&!i.classList.contains(E)),y=t.filter(E=>g.indexOf(E)<0&&i.classList.contains(E)),_=f.filter(E=>t.indexOf(E)<0).concat(p),C=g.filter(E=>e.indexOf(E)<0).concat(y);K.putSticky(i,"classes",E=>(E.classList.remove(...C),E.classList.add(..._),[_,C]))})},setOrRemoveAttrs(i,e,t){let[n,r]=K.getSticky(i,"attrs",[[],[]]),s=e.map(([u,f])=>u).concat(t),o=n.filter(([u,f])=>!s.includes(u)).concat(e),l=r.filter(u=>!s.includes(u)).concat(t);K.putSticky(i,"attrs",u=>(l.forEach(f=>u.removeAttribute(f)),o.forEach(([f,g])=>u.setAttribute(f,g)),[o,l]))},hasAllClasses(i,e){return e.every(t=>i.classList.contains(t))},isToggledOut(i,e){return!this.isVisible(i)||this.hasAllClasses(i,e)},filterToEls(i,{to:e}){return e?K.all(document,e):[i]},defaultDisplay(i){return{tr:"table-row",td:"table-cell"}[i.tagName.toLowerCase()]||"block"}},vn=JJ,gr={byId(i){return document.getElementById(i)||Zn(`no id found for ${i}`)},removeClass(i,e){i.classList.remove(e),i.classList.length===0&&i.removeAttribute("class")},all(i,e,t){if(!i)return[];let n=Array.from(i.querySelectorAll(e));return t?n.forEach(t):n},childNodeLength(i){let e=document.createElement("template");return e.innerHTML=i,e.content.childElementCount},isUploadInput(i){return i.type==="file"&&i.getAttribute($s)!==null},isAutoUpload(i){return i.hasAttribute("data-phx-auto-upload")},findUploadInputs(i){let e=i.id,t=this.all(document,`input[type="file"][${$s}][form="${e}"]`);return this.all(i,`input[type="file"][${$s}]`).concat(t)},findComponentNodeList(i,e){return this.filterWithinSameLiveView(this.all(i,`[${qs}="${e}"]`),i)},isPhxDestroyed(i){return!!(i.id&&gr.private(i,"destroyed"))},wantsNewTab(i){let e=i.ctrlKey||i.shiftKey||i.metaKey||i.button&&i.button===1,t=i.target instanceof HTMLAnchorElement&&i.target.hasAttribute("download"),n=i.target.hasAttribute("target")&&i.target.getAttribute("target").toLowerCase()==="_blank",r=i.target.hasAttribute("target")&&!i.target.getAttribute("target").startsWith("_");return e||n||t||r},isUnloadableFormSubmit(i){return i.target&&i.target.getAttribute("method")==="dialog"||i.submitter&&i.submitter.getAttribute("formmethod")==="dialog"?!1:!i.defaultPrevented&&!this.wantsNewTab(i)},isNewPageClick(i,e){let t=i.target instanceof HTMLAnchorElement?i.target.getAttribute("href"):null,n;if(i.defaultPrevented||t===null||this.wantsNewTab(i)||t.startsWith("mailto:")||t.startsWith("tel:")||i.target.isContentEditable)return!1;try{n=new URL(t)}catch(r){try{n=new URL(t,e)}catch(s){return!0}}return n.host===e.host&&n.protocol===e.protocol&&n.pathname===e.pathname&&n.search===e.search?n.hash===""&&!n.href.endsWith("#"):n.protocol.startsWith("http")},markPhxChildDestroyed(i){this.isPhxChild(i)&&i.setAttribute(Gs,""),this.putPrivate(i,"destroyed",!0)},findPhxChildrenInFragment(i,e){let t=document.createElement("template");return t.innerHTML=i,this.findPhxChildren(t.content,e)},isIgnored(i,e){return(i.getAttribute(e)||i.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(i,e,t){return i.getAttribute&&t.indexOf(i.getAttribute(e))>=0},findPhxSticky(i){return this.all(i,`[${pR}]`)},findPhxChildren(i,e){return this.all(i,`${kc}[${Za}="${e}"]`)},findExistingParentCIDs(i,e){let t=new Set,n=new Set;return e.forEach(r=>{this.filterWithinSameLiveView(this.all(i,`[${qs}="${r}"]`),i).forEach(s=>{t.add(r),this.all(s,`[${qs}]`).map(o=>parseInt(o.getAttribute(qs))).forEach(o=>n.add(o))})}),n.forEach(r=>t.delete(r)),t},filterWithinSameLiveView(i,e){return e.querySelector(kc)?i.filter(t=>this.withinSameLiveView(t,e)):i},withinSameLiveView(i,e){for(;i=i.parentNode;){if(i.isSameNode(e))return!0;if(i.getAttribute(Gs)!==null)return!1}},private(i,e){return i[ls]&&i[ls][e]},deletePrivate(i,e){i[ls]&&delete i[ls][e]},putPrivate(i,e,t){i[ls]||(i[ls]={}),i[ls][e]=t},updatePrivate(i,e,t,n){let r=this.private(i,e);r===void 0?this.putPrivate(i,e,n(t)):this.putPrivate(i,e,n(r))},copyPrivates(i,e){e[ls]&&(i[ls]=e[ls])},putTitle(i){let e=document.querySelector("title");if(e){let{prefix:t,suffix:n}=e.dataset;document.title=`${t||""}${i}${n||""}`}else document.title=i},debounce(i,e,t,n,r,s,o,l){let u=i.getAttribute(t),f=i.getAttribute(r);u===""&&(u=n),f===""&&(f=s);let g=u||f;switch(g){case null:return l();case"blur":this.once(i,"debounce-blur")&&i.addEventListener("blur",()=>{o()&&l()});return;default:let p=parseInt(g),y=()=>f?this.deletePrivate(i,nh):l(),_=this.incCycle(i,ih,y);if(isNaN(p))return Zn(`invalid throttle/debounce value: ${g}`);if(f){let E=!1;if(e.type==="keydown"){let P=this.private(i,wR);this.putPrivate(i,wR,e.key),E=P!==e.key}if(!E&&this.private(i,nh))return!1;{l();let P=setTimeout(()=>{o()&&this.triggerCycle(i,ih)},p);this.putPrivate(i,nh,P)}}else setTimeout(()=>{o()&&this.triggerCycle(i,ih,_)},p);let C=i.form;C&&this.once(C,"bind-debounce")&&C.addEventListener("submit",()=>{Array.from(new FormData(C).entries(),([E])=>{let P=C.querySelector(`[name="${E}"]`);this.incCycle(P,ih),this.deletePrivate(P,nh)})}),this.once(i,"bind-debounce")&&i.addEventListener("blur",()=>{clearTimeout(this.private(i,nh)),this.triggerCycle(i,ih)})}},triggerCycle(i,e,t){let[n,r]=this.private(i,e);t||(t=n),t===n&&(this.incCycle(i,e),r())},once(i,e){return this.private(i,e)===!0?!1:(this.putPrivate(i,e,!0),!0)},incCycle(i,e,t=function(){}){let[n]=this.private(i,e)||[0,t];return n++,this.putPrivate(i,e,[n,t]),n},maybeAddPrivateHooks(i,e,t){i.hasAttribute&&(i.hasAttribute(e)||i.hasAttribute(t))&&i.setAttribute("data-phx-hook","Phoenix.InfiniteScroll")},isFeedbackContainer(i,e){return i.hasAttribute&&i.hasAttribute(e)},maybeHideFeedback(i,e,t,n){let r={};e.forEach(s=>{if(!i.contains(s))return;let o=s.getAttribute(t);if(!o){vn.addOrRemoveClasses(s,[],[kg]);return}if(r[o]===!0){this.hideFeedback(s);return}r[o]=this.shouldHideFeedback(i,o,n),r[o]===!0&&this.hideFeedback(s)})},hideFeedback(i){vn.addOrRemoveClasses(i,[kg],[])},shouldHideFeedback(i,e,t){let n=`[name="${e}"],
                   [name="${e}[]"],
                   [${t}="${e}"]`,r=!1;return gr.all(i,n,s=>{(this.private(s,A0)||this.private(s,Sg))&&(r=!0)}),!r},feedbackSelector(i,e,t){let n=`[${e}="${i.name}"],
                 [${e}="${i.name.replace(/\[\]$/,"")}"]`;return i.getAttribute(t)&&(n+=`,[${e}="${i.getAttribute(t)}"]`),n},resetForm(i,e,t){Array.from(i.elements).forEach(n=>{let r=this.feedbackSelector(n,e,t);this.deletePrivate(n,A0),this.deletePrivate(n,Sg),this.all(document,r,s=>{vn.addOrRemoveClasses(s,[kg],[])})})},showError(i,e,t){if(i.name){let n=this.feedbackSelector(i,e,t);this.all(document,n,r=>{vn.addOrRemoveClasses(r,[],[kg])})}},isPhxChild(i){return i.getAttribute&&i.getAttribute(Za)},isPhxSticky(i){return i.getAttribute&&i.getAttribute(pR)!==null},isChildOfAny(i,e){return!!e.find(t=>t.contains(i))},firstPhxChild(i){return this.isPhxChild(i)?i:this.all(i,`[${Za}]`)[0]},dispatchEvent(i,e,t={}){let n=!0;i.nodeName==="INPUT"&&i.type==="file"&&e==="click"&&(n=!1);let o={bubbles:t.bubbles===void 0?n:!!t.bubbles,cancelable:!0,detail:t.detail||{}},l=e==="click"?new MouseEvent("click",o):new CustomEvent(e,o);i.dispatchEvent(l)},cloneNode(i,e){if(typeof e=="undefined")return i.cloneNode(!0);{let t=i.cloneNode(!1);return t.innerHTML=e,t}},mergeAttrs(i,e,t={}){let n=new Set(t.exclude||[]),r=t.isIgnored,s=e.attributes;for(let l=s.length-1;l>=0;l--){let u=s[l].name;if(n.has(u))u==="value"&&i.value===e.value&&i.setAttribute("value",e.getAttribute(u));else{let f=e.getAttribute(u);i.getAttribute(u)!==f&&(!r||r&&u.startsWith("data-"))&&i.setAttribute(u,f)}}let o=i.attributes;for(let l=o.length-1;l>=0;l--){let u=o[l].name;r?u.startsWith("data-")&&!e.hasAttribute(u)&&![Yn,Wo].includes(u)&&i.removeAttribute(u):e.hasAttribute(u)||i.removeAttribute(u)}},mergeFocusedInput(i,e){i instanceof HTMLSelectElement||gr.mergeAttrs(i,e,{exclude:["value"]}),e.readOnly?i.setAttribute("readonly",!0):i.removeAttribute("readonly")},hasSelectionRange(i){return i.setSelectionRange&&(i.type==="text"||i.type==="textarea")},restoreFocus(i,e,t){if(i instanceof HTMLSelectElement&&i.focus(),!gr.isTextualInput(i))return;i.matches(":focus")||i.focus(),this.hasSelectionRange(i)&&i.setSelectionRange(e,t)},isFormInput(i){return/^(?:input|select|textarea)$/i.test(i.tagName)&&i.type!=="button"},syncAttrsToProps(i){i instanceof HTMLInputElement&&gR.indexOf(i.type.toLocaleLowerCase())>=0&&(i.checked=i.getAttribute("checked")!==null)},isTextualInput(i){return LJ.indexOf(i.type)>=0},isNowTriggerFormExternal(i,e){return i.getAttribute&&i.getAttribute(e)!==null},syncPendingRef(i,e,t){let n=i.getAttribute(Yn);if(n===null)return!0;let r=i.getAttribute(Wo);return gr.isFormInput(i)||i.getAttribute(t)!==null?(gr.isUploadInput(i)&&gr.mergeAttrs(i,e,{isIgnored:!0}),gr.putPrivate(i,Yn,e),!1):(oR.forEach(s=>{i.classList.contains(s)&&e.classList.add(s)}),e.setAttribute(Yn,n),e.setAttribute(Wo,r),!0)},cleanChildNodes(i,e){if(gr.isPhxUpdate(i,e,["append","prepend"])){let t=[];i.childNodes.forEach(n=>{n.id||(!(n.nodeType===Node.TEXT_NODE&&n.nodeValue.trim()==="")&&n.nodeType!==Node.COMMENT_NODE&&Zn(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(n.outerHTML||n.nodeValue).trim()}"

`),t.push(n))}),t.forEach(n=>n.remove())}},replaceRootContainer(i,e,t){let n=new Set(["id",Gs,Cc,T0,Ja]);if(i.tagName.toLowerCase()===e.toLowerCase())return Array.from(i.attributes).filter(r=>!n.has(r.name.toLowerCase())).forEach(r=>i.removeAttribute(r.name)),Object.keys(t).filter(r=>!n.has(r.toLowerCase())).forEach(r=>i.setAttribute(r,t[r])),i;{let r=document.createElement(e);return Object.keys(t).forEach(s=>r.setAttribute(s,t[s])),n.forEach(s=>r.setAttribute(s,i.getAttribute(s))),r.innerHTML=i.innerHTML,i.replaceWith(r),r}},getSticky(i,e,t){let n=(gr.private(i,"sticky")||[]).find(([r])=>e===r);if(n){let[r,s,o]=n;return o}else return typeof t=="function"?t():t},deleteSticky(i,e){this.updatePrivate(i,"sticky",[],t=>t.filter(([n,r])=>n!==e))},putSticky(i,e,t){let n=t(i);this.updatePrivate(i,"sticky",[],r=>{let s=r.findIndex(([o])=>e===o);return s>=0?r[s]=[e,t,n]:r.push([e,t,n]),r})},applyStickyOperations(i){let e=gr.private(i,"sticky");!e||e.forEach(([t,n,r])=>this.putSticky(i,t,n))}},K=gr,oh=class{static isActive(i,e){let t=e._phxRef===void 0,r=i.getAttribute(k0).split(",").indexOf(bi.genFileRef(e))>=0;return e.size>0&&(t||r)}static isPreflighted(i,e){return i.getAttribute(x0).split(",").indexOf(bi.genFileRef(e))>=0&&this.isActive(i,e)}static isPreflightInProgress(i){return i._preflightInProgress===!0}static markPreflightInProgress(i){i._preflightInProgress=!0}constructor(i,e,t,n){this.ref=bi.genFileRef(e),this.fileEl=i,this.file=e,this.view=t,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(xg,this._onElUpdated),this.autoUpload=n}metadata(){return this.meta}progress(i){this._progress=Math.floor(i),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{bi.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}isCancelled(){return this._isCancelled}cancel(){this.file._preflightInProgress=!1,this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(i="failed"){this.fileEl.removeEventListener(xg,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:i}),this.isAutoUpload()||bi.clearFiles(this.fileEl)}isAutoUpload(){return this.autoUpload}onDone(i){this._onDone=()=>{this.fileEl.removeEventListener(xg,this._onElUpdated),i()}}onElUpdated(){this.fileEl.getAttribute(k0).split(",").indexOf(this.ref)===-1&&(bi.untrackFile(this.fileEl,this.file),this.cancel())}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref,meta:typeof this.file.meta=="function"?this.file.meta():void 0}}uploader(i){if(this.meta.uploader){let e=i[this.meta.uploader]||Zn(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:e}}else return{name:"channel",callback:YJ}}zipPostFlight(i){this.meta=i.entries[this.ref],this.meta||Zn(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:i})}},XJ=0,bi=class{static genFileRef(i){let e=i._phxRef;return e!==void 0?e:(i._phxRef=(XJ++).toString(),i._phxRef)}static getEntryDataURL(i,e,t){let n=this.activeFiles(i).find(r=>this.genFileRef(r)===e);t(URL.createObjectURL(n))}static hasUploadsInProgress(i){let e=0;return K.findUploadInputs(i).forEach(t=>{t.getAttribute(x0)!==t.getAttribute(OJ)&&e++}),e>0}static serializeUploads(i){let e=this.activeFiles(i),t={};return e.forEach(n=>{let r={path:i.name},s=i.getAttribute($s);t[s]=t[s]||[],r.ref=this.genFileRef(n),r.last_modified=n.lastModified,r.name=n.name||r.ref,r.relative_path=n.webkitRelativePath,r.type=n.type,r.size=n.size,typeof n.meta=="function"&&(r.meta=n.meta()),t[s].push(r)}),t}static clearFiles(i){i.value=null,i.removeAttribute($s),K.putPrivate(i,"files",[])}static untrackFile(i,e){K.putPrivate(i,"files",K.private(i,"files").filter(t=>!Object.is(t,e)))}static trackFiles(i,e,t){if(i.getAttribute("multiple")!==null){let n=e.filter(r=>!this.activeFiles(i).find(s=>Object.is(s,r)));K.updatePrivate(i,"files",[],r=>r.concat(n)),i.value=null}else t&&t.files.length>0&&(i.files=t.files),K.putPrivate(i,"files",e)}static activeFileInputs(i){let e=K.findUploadInputs(i);return Array.from(e).filter(t=>t.files&&this.activeFiles(t).length>0)}static activeFiles(i){return(K.private(i,"files")||[]).filter(e=>oh.isActive(i,e))}static inputsAwaitingPreflight(i){let e=K.findUploadInputs(i);return Array.from(e).filter(t=>this.filesAwaitingPreflight(t).length>0)}static filesAwaitingPreflight(i){return this.activeFiles(i).filter(e=>!oh.isPreflighted(i,e)&&!oh.isPreflightInProgress(e))}static markPreflightInProgress(i){i.forEach(e=>oh.markPreflightInProgress(e.file))}constructor(i,e,t){this.autoUpload=K.isAutoUpload(i),this.view=e,this.onComplete=t,this._entries=Array.from(bi.filesAwaitingPreflight(i)||[]).map(n=>new oh(i,n,e,this.autoUpload)),bi.markPreflightInProgress(this._entries),this.numEntriesInProgress=this._entries.length}isAutoUpload(){return this.autoUpload}entries(){return this._entries}initAdapterUpload(i,e,t){this._entries=this._entries.map(r=>(r.isCancelled()?(this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()):(r.zipPostFlight(i),r.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()})),r));let n=this._entries.reduce((r,s)=>{if(!s.meta)return r;let{name:o,callback:l}=s.uploader(t.uploaders);return r[o]=r[o]||{callback:l,entries:[]},r[o].entries.push(s),r},{});for(let r in n){let{callback:s,entries:o}=n[r];s(o,e,i,t)}}},AR={LiveFileUpload:{activeRefs(){return this.el.getAttribute(k0)},preflightedRefs(){return this.el.getAttribute(x0)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let i=this.preflightedRefs();this.preflightedWas!==i&&(this.preflightedWas=i,i===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(xg))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute($s)),bi.getEntryDataURL(this.inputEl,this.ref,i=>{this.url=i,this.el.src=i})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>Sc.focusLast(this.el)),this.focusEnd.addEventListener("focus",()=>Sc.focusFirst(this.el)),this.el.addEventListener("phx:show-end",()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none"&&Sc.focusFirst(this.el)}}},IR=i=>["HTML","BODY"].indexOf(i.nodeName.toUpperCase())>=0?null:["scroll","auto"].indexOf(getComputedStyle(i).overflowY)>=0?i:IR(i.parentElement),PR=i=>i?i.scrollTop:document.documentElement.scrollTop||document.body.scrollTop,V0=i=>i?i.getBoundingClientRect().bottom:window.innerHeight||document.documentElement.clientHeight,B0=i=>i?i.getBoundingClientRect().top:0,QJ=(i,e)=>{let t=i.getBoundingClientRect();return t.top>=B0(e)&&t.left>=0&&t.top<=V0(e)},eX=(i,e)=>{let t=i.getBoundingClientRect();return t.right>=B0(e)&&t.left>=0&&t.bottom<=V0(e)},RR=(i,e)=>{let t=i.getBoundingClientRect();return t.top>=B0(e)&&t.left>=0&&t.top<=V0(e)};AR.InfiniteScroll={mounted(){this.scrollContainer=IR(this.el);let i=PR(this.scrollContainer),e=!1,t=500,n=null,r=this.throttle(t,(l,u)=>{n=()=>!0,this.liveSocket.execJSHookPush(this.el,l,{id:u.id,_overran:!0},()=>{n=null})}),s=this.throttle(t,(l,u)=>{n=()=>u.scrollIntoView({block:"start"}),this.liveSocket.execJSHookPush(this.el,l,{id:u.id},()=>{n=null,window.requestAnimationFrame(()=>{RR(u,this.scrollContainer)||u.scrollIntoView({block:"start"})})})}),o=this.throttle(t,(l,u)=>{n=()=>u.scrollIntoView({block:"end"}),this.liveSocket.execJSHookPush(this.el,l,{id:u.id},()=>{n=null,window.requestAnimationFrame(()=>{RR(u,this.scrollContainer)||u.scrollIntoView({block:"end"})})})});this.onScroll=l=>{let u=PR(this.scrollContainer);if(n)return i=u,n();let f=this.el.getBoundingClientRect(),g=this.el.getAttribute(this.liveSocket.binding("viewport-top")),p=this.el.getAttribute(this.liveSocket.binding("viewport-bottom")),y=this.el.lastElementChild,_=this.el.firstElementChild,C=u<i,E=u>i;C&&g&&!e&&f.top>=0?(e=!0,r(g,_)):E&&e&&f.top<=0&&(e=!1),g&&C&&QJ(_,this.scrollContainer)?s(g,_):p&&E&&eX(y,this.scrollContainer)&&o(p,y),i=u},this.scrollContainer?this.scrollContainer.addEventListener("scroll",this.onScroll):window.addEventListener("scroll",this.onScroll)},destroyed(){this.scrollContainer?this.scrollContainer.removeEventListener("scroll",this.onScroll):window.removeEventListener("scroll",this.onScroll)},throttle(i,e){let t=0,n;return(...r)=>{let s=Date.now(),o=i-(s-t);o<=0||o>i?(n&&(clearTimeout(n),n=null),t=s,e(...r)):n||(n=setTimeout(()=>{t=Date.now(),n=null,e(...r)},o))}}};var tX=AR,iX=class{constructor(i,e,t){let n=new Set,r=new Set([...e.children].map(o=>o.id)),s=[];Array.from(i.children).forEach(o=>{if(o.id&&(n.add(o.id),r.has(o.id))){let l=o.previousElementSibling&&o.previousElementSibling.id;s.push({elementId:o.id,previousElementId:l})}}),this.containerId=e.id,this.updateType=t,this.elementsToModify=s,this.elementIdsToAdd=[...r].filter(o=>!n.has(o))}perform(){let i=K.byId(this.containerId);this.elementsToModify.forEach(e=>{e.previousElementId?qo(document.getElementById(e.previousElementId),t=>{qo(document.getElementById(e.elementId),n=>{n.previousElementSibling&&n.previousElementSibling.id==t.id||t.insertAdjacentElement("afterend",n)})}):qo(document.getElementById(e.elementId),t=>{t.previousElementSibling==null||i.insertAdjacentElement("afterbegin",t)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(e=>{qo(document.getElementById(e),t=>i.insertAdjacentElement("afterbegin",t))})}},OR=11;function nX(i,e){var t=e.attributes,n,r,s,o,l;if(!(e.nodeType===OR||i.nodeType===OR)){for(var u=t.length-1;u>=0;u--)n=t[u],r=n.name,s=n.namespaceURI,o=n.value,s?(r=n.localName||r,l=i.getAttributeNS(s,r),l!==o&&(n.prefix==="xmlns"&&(r=n.name),i.setAttributeNS(s,r,o))):(l=i.getAttribute(r),l!==o&&i.setAttribute(r,o));for(var f=i.attributes,g=f.length-1;g>=0;g--)n=f[g],r=n.name,s=n.namespaceURI,s?(r=n.localName||r,e.hasAttributeNS(s,r)||i.removeAttributeNS(s,r)):e.hasAttribute(r)||i.removeAttribute(r)}}var Mg,rX="http://www.w3.org/1999/xhtml",Mn=typeof document=="undefined"?void 0:document,sX=!!Mn&&"content"in Mn.createElement("template"),oX=!!Mn&&Mn.createRange&&"createContextualFragment"in Mn.createRange();function aX(i){var e=Mn.createElement("template");return e.innerHTML=i,e.content.childNodes[0]}function lX(i){Mg||(Mg=Mn.createRange(),Mg.selectNode(Mn.body));var e=Mg.createContextualFragment(i);return e.childNodes[0]}function cX(i){var e=Mn.createElement("body");return e.innerHTML=i,e.childNodes[0]}function uX(i){return i=i.trim(),sX?aX(i):oX?lX(i):cX(i)}function Lg(i,e){var t=i.nodeName,n=e.nodeName,r,s;return t===n?!0:(r=t.charCodeAt(0),s=n.charCodeAt(0),r<=90&&s>=97?t===n.toUpperCase():s<=90&&r>=97?n===t.toUpperCase():!1)}function dX(i,e){return!e||e===rX?Mn.createElement(i):Mn.createElementNS(e,i)}function hX(i,e){for(var t=i.firstChild;t;){var n=t.nextSibling;e.appendChild(t),t=n}return e}function N0(i,e,t){i[t]!==e[t]&&(i[t]=e[t],i[t]?i.setAttribute(t,""):i.removeAttribute(t))}var MR={OPTION:function(i,e){var t=i.parentNode;if(t){var n=t.nodeName.toUpperCase();n==="OPTGROUP"&&(t=t.parentNode,n=t&&t.nodeName.toUpperCase()),n==="SELECT"&&!t.hasAttribute("multiple")&&(i.hasAttribute("selected")&&!e.selected&&(i.setAttribute("selected","selected"),i.removeAttribute("selected")),t.selectedIndex=-1)}N0(i,e,"selected")},INPUT:function(i,e){N0(i,e,"checked"),N0(i,e,"disabled"),i.value!==e.value&&(i.value=e.value),e.hasAttribute("value")||i.removeAttribute("value")},TEXTAREA:function(i,e){var t=e.value;i.value!==t&&(i.value=t);var n=i.firstChild;if(n){var r=n.nodeValue;if(r==t||!t&&r==i.placeholder)return;n.nodeValue=t}},SELECT:function(i,e){if(!e.hasAttribute("multiple")){for(var t=-1,n=0,r=i.firstChild,s,o;r;)if(o=r.nodeName&&r.nodeName.toUpperCase(),o==="OPTGROUP")s=r,r=s.firstChild;else{if(o==="OPTION"){if(r.hasAttribute("selected")){t=n;break}n++}r=r.nextSibling,!r&&s&&(r=s.nextSibling,s=null)}i.selectedIndex=t}}},ah=1,LR=11,DR=3,VR=8;function $o(){}function fX(i){if(i)return i.getAttribute&&i.getAttribute("id")||i.id}function mX(i){return function(t,n,r){if(r||(r={}),typeof n=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var s=n;n=Mn.createElement("html"),n.innerHTML=s}else n=uX(n);else n.nodeType===LR&&(n=n.firstElementChild);var o=r.getNodeKey||fX,l=r.onBeforeNodeAdded||$o,u=r.onNodeAdded||$o,f=r.onBeforeElUpdated||$o,g=r.onElUpdated||$o,p=r.onBeforeNodeDiscarded||$o,y=r.onNodeDiscarded||$o,_=r.onBeforeElChildrenUpdated||$o,C=r.skipFromChildren||$o,E=r.addChild||function(fe,ke){return fe.appendChild(ke)},P=r.childrenOnly===!0,M=Object.create(null),O=[];function N(fe){O.push(fe)}function W(fe,ke){if(fe.nodeType===ah)for(var V=fe.firstChild;V;){var H=void 0;ke&&(H=o(V))?N(H):(y(V),V.firstChild&&W(V,ke)),V=V.nextSibling}}function Z(fe,ke,V){p(fe)!==!1&&(ke&&ke.removeChild(fe),y(fe),W(fe,V))}function U(fe){if(fe.nodeType===ah||fe.nodeType===LR)for(var ke=fe.firstChild;ke;){var V=o(ke);V&&(M[V]=ke),U(ke),ke=ke.nextSibling}}U(t);function ie(fe){u(fe);for(var ke=fe.firstChild;ke;){var V=ke.nextSibling,H=o(ke);if(H){var $=M[H];$&&Lg(ke,$)?(ke.parentNode.replaceChild($,ke),F($,ke)):ie(ke)}else ie(ke);ke=V}}function X(fe,ke,V){for(;ke;){var H=ke.nextSibling;(V=o(ke))?N(V):Z(ke,fe,!0),ke=H}}function F(fe,ke,V){var H=o(ke);H&&delete M[H],!(!V&&(f(fe,ke)===!1||(i(fe,ke),g(fe),_(fe,ke)===!1)))&&(fe.nodeName!=="TEXTAREA"?te(fe,ke):MR.TEXTAREA(fe,ke))}function te(fe,ke){var V=C(fe,ke),H=ke.firstChild,$=fe.firstChild,se,_e,nt,Mt,ht;e:for(;H;){for(Mt=H.nextSibling,se=o(H);!V&&$;){if(nt=$.nextSibling,H.isSameNode&&H.isSameNode($)){H=Mt,$=nt;continue e}_e=o($);var ce=$.nodeType,pe=void 0;if(ce===H.nodeType&&(ce===ah?(se?se!==_e&&((ht=M[se])?nt===ht?pe=!1:(fe.insertBefore(ht,$),_e?N(_e):Z($,fe,!0),$=ht,_e=o($)):pe=!1):_e&&(pe=!1),pe=pe!==!1&&Lg($,H),pe&&F($,H)):(ce===DR||ce==VR)&&(pe=!0,$.nodeValue!==H.nodeValue&&($.nodeValue=H.nodeValue))),pe){H=Mt,$=nt;continue e}_e?N(_e):Z($,fe,!0),$=nt}if(se&&(ht=M[se])&&Lg(ht,H))V||E(fe,ht),F(ht,H);else{var be=l(H);be!==!1&&(be&&(H=be),H.actualize&&(H=H.actualize(fe.ownerDocument||Mn)),E(fe,H),ie(H))}H=Mt,$=nt}X(fe,$,_e);var He=MR[fe.nodeName];He&&He(fe,ke)}var ye=t,Ee=ye.nodeType,ae=n.nodeType;if(!P){if(Ee===ah)ae===ah?Lg(t,n)||(y(t),ye=hX(t,dX(n.nodeName,n.namespaceURI))):ye=n;else if(Ee===DR||Ee===VR){if(ae===Ee)return ye.nodeValue!==n.nodeValue&&(ye.nodeValue=n.nodeValue),ye;ye=n}}if(ye===n)y(t);else{if(n.isSameNode&&n.isSameNode(ye))return;if(F(ye,n,P),O)for(var bt=0,et=O.length;bt<et;bt++){var Je=M[O[bt]];Je&&Z(Je,Je.parentNode,!1)}}return!P&&ye!==t&&t.parentNode&&(ye.actualize&&(ye=ye.actualize(t.ownerDocument||Mn)),t.parentNode.replaceChild(ye,t)),ye}}var gX=mX(nX),BR=gX,Dg=class{static patchEl(i,e,t){BR(i,e,{childrenOnly:!1,onBeforeElUpdated:(n,r)=>{if(t&&t.isSameNode(n)&&K.isFormInput(n))return K.mergeFocusedInput(n,r),!1}})}constructor(i,e,t,n,r,s){this.view=i,this.liveSocket=i.liveSocket,this.container=e,this.id=t,this.rootID=i.root.id,this.html=n,this.streams=r,this.streamInserts={},this.streamComponentRestore={},this.targetCID=s,this.cidPatch=Ks(this.targetCID),this.pendingRemoves=[],this.phxRemove=this.liveSocket.binding("remove"),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(i,e){this.callbacks[`before${i}`].push(e)}after(i,e){this.callbacks[`after${i}`].push(e)}trackBefore(i,...e){this.callbacks[`before${i}`].forEach(t=>t(...e))}trackAfter(i,...e){this.callbacks[`after${i}`].forEach(t=>t(...e))}markPrunableContentForRemoval(){let i=this.liveSocket.binding(Ig);K.all(this.container,`[${i}=append] > *, [${i}=prepend] > *`,e=>{e.setAttribute(dR,"")})}perform(i){let{view:e,liveSocket:t,container:n,html:r}=this,s=this.isCIDPatch()?this.targetCIDContainer(r):n;if(this.isCIDPatch()&&!s)return;let o=t.getActiveElement(),{selectionStart:l,selectionEnd:u}=o&&K.hasSelectionRange(o)?o:{},f=t.binding(Ig),g=t.binding(Tg),p=t.binding(Eg),y=t.binding(P0),_=t.binding(E0),C=t.binding(S0),E=t.binding(MJ),P=[],M=[],O=[],N=[],W=null;function Z(U,ie,X=!1){BR(U,ie,{childrenOnly:U.getAttribute(qs)===null&&!X,getNodeKey:F=>K.isPhxDestroyed(F)?null:i?F.id:F.id||F.getAttribute&&F.getAttribute(uR),skipFromChildren:F=>F.getAttribute(f)===R0,addChild:(F,te)=>{let{ref:ye,streamAt:Ee}=this.getStreamInsert(te);if(ye===void 0)return F.appendChild(te);if(this.setStreamRef(te,ye),Ee===0)F.insertAdjacentElement("afterbegin",te);else if(Ee===-1)F.appendChild(te);else if(Ee>0){let ae=Array.from(F.children)[Ee];F.insertBefore(te,ae)}},onBeforeNodeAdded:F=>{K.maybeAddPrivateHooks(F,_,C),this.trackBefore("added",F);let te=F;return!i&&this.streamComponentRestore[F.id]&&(te=this.streamComponentRestore[F.id],delete this.streamComponentRestore[F.id],Z.call(this,te,F,!0)),te},onNodeAdded:F=>{F.getAttribute&&this.maybeReOrderStream(F,!0),K.isFeedbackContainer(F,g)&&M.push(F),F instanceof HTMLImageElement&&F.srcset?F.srcset=F.srcset:F instanceof HTMLVideoElement&&F.autoplay&&F.play(),K.isNowTriggerFormExternal(F,E)&&(W=F),(K.isPhxChild(F)&&e.ownsElement(F)||K.isPhxSticky(F)&&e.ownsElement(F.parentNode))&&this.trackAfter("phxChildAdded",F),P.push(F)},onNodeDiscarded:F=>this.onNodeDiscarded(F),onBeforeNodeDiscarded:F=>F.getAttribute&&F.getAttribute(dR)!==null?!0:!(F.parentElement!==null&&F.id&&K.isPhxUpdate(F.parentElement,f,[R0,"append","prepend"])||this.maybePendingRemove(F)||this.skipCIDSibling(F)),onElUpdated:F=>{K.isNowTriggerFormExternal(F,E)&&(W=F),O.push(F),this.maybeReOrderStream(F,!1)},onBeforeElUpdated:(F,te)=>{if(K.maybeAddPrivateHooks(te,_,C),(K.isFeedbackContainer(F,g)||K.isFeedbackContainer(te,g))&&(M.push(F),M.push(te)),K.cleanChildNodes(te,f),this.skipCIDSibling(te))return this.maybeReOrderStream(F),!1;if(K.isPhxSticky(F))return!1;if(K.isIgnored(F,f)||F.form&&F.form.isSameNode(W))return this.trackBefore("updated",F,te),K.mergeAttrs(F,te,{isIgnored:K.isIgnored(F,f)}),O.push(F),K.applyStickyOperations(F),!1;if(F.type==="number"&&F.validity&&F.validity.badInput)return!1;if(!K.syncPendingRef(F,te,y))return K.isUploadInput(F)&&(this.trackBefore("updated",F,te),O.push(F)),K.applyStickyOperations(F),!1;if(K.isPhxChild(te)){let ae=F.getAttribute(Gs);return K.mergeAttrs(F,te,{exclude:[Cc]}),ae!==""&&F.setAttribute(Gs,ae),F.setAttribute(Ja,this.rootID),K.applyStickyOperations(F),!1}K.copyPrivates(te,F);let ye=o&&F.isSameNode(o)&&K.isFormInput(F),Ee=ye&&this.isChangedSelect(F,te);return ye&&F.type!=="hidden"&&!Ee?(this.trackBefore("updated",F,te),K.mergeFocusedInput(F,te),K.syncAttrsToProps(F),O.push(F),K.applyStickyOperations(F),!1):(Ee&&F.blur(),K.isPhxUpdate(te,f,["append","prepend"])&&N.push(new iX(F,te,te.getAttribute(f))),K.syncAttrsToProps(te),K.applyStickyOperations(te),this.trackBefore("updated",F,te),!0)}})}return this.trackBefore("added",n),this.trackBefore("updated",n,n),t.time("morphdom",()=>{this.streams.forEach(([U,ie,X,F])=>{ie.forEach(([te,ye,Ee])=>{this.streamInserts[te]={ref:U,streamAt:ye,limit:Ee,reset:F}}),F!==void 0&&K.all(n,`[${O0}="${U}"]`,te=>{this.removeStreamChildElement(te)}),X.forEach(te=>{let ye=n.querySelector(`[id="${te}"]`);ye&&this.removeStreamChildElement(ye)})}),i&&K.all(this.container,`[${f}=${R0}]`,U=>{this.liveSocket.owner(U,ie=>{ie===this.view&&Array.from(U.children).forEach(X=>{this.removeStreamChildElement(X)})})}),Z.call(this,s,r)}),t.isDebugEnabled()&&($J(),Array.from(document.querySelectorAll("input[name=id]")).forEach(U=>{U.form&&console.error(`Detected an input with name="id" inside a form! This will cause problems when patching the DOM.
`,U)})),N.length>0&&t.time("post-morph append/prepend restoration",()=>{N.forEach(U=>U.perform())}),K.maybeHideFeedback(s,M,g,p),t.silenceEvents(()=>K.restoreFocus(o,l,u)),K.dispatchEvent(document,"phx:update"),P.forEach(U=>this.trackAfter("added",U)),O.forEach(U=>this.trackAfter("updated",U)),this.transitionPendingRemoves(),W&&(t.unload(),Object.getPrototypeOf(W).submit.call(W)),!0}onNodeDiscarded(i){(K.isPhxChild(i)||K.isPhxSticky(i))&&this.liveSocket.destroyViewByEl(i),this.trackAfter("discarded",i)}maybePendingRemove(i){return i.getAttribute&&i.getAttribute(this.phxRemove)!==null?(this.pendingRemoves.push(i),!0):!1}removeStreamChildElement(i){this.streamInserts[i.id]?(this.streamComponentRestore[i.id]=i,i.remove()):this.maybePendingRemove(i)||(i.remove(),this.onNodeDiscarded(i))}getStreamInsert(i){return(i.id?this.streamInserts[i.id]:{})||{}}setStreamRef(i,e){K.putSticky(i,O0,t=>t.setAttribute(O0,e))}maybeReOrderStream(i,e){let{ref:t,streamAt:n,reset:r}=this.getStreamInsert(i);if(n!==void 0&&(this.setStreamRef(i,t),!(!r&&!e)&&!!i.parentElement)){if(n===0)i.parentElement.insertBefore(i,i.parentElement.firstElementChild);else if(n>0){let s=Array.from(i.parentElement.children),o=s.indexOf(i);if(n>=s.length-1)i.parentElement.appendChild(i);else{let l=s[n];o>n?i.parentElement.insertBefore(i,l):i.parentElement.insertBefore(i,l.nextElementSibling)}}this.maybeLimitStream(i)}}maybeLimitStream(i){let{limit:e}=this.getStreamInsert(i),t=e!==null&&Array.from(i.parentElement.children);e&&e<0&&t.length>e*-1?t.slice(0,t.length+e).forEach(n=>this.removeStreamChildElement(n)):e&&e>=0&&t.length>e&&t.slice(e).forEach(n=>this.removeStreamChildElement(n))}transitionPendingRemoves(){let{pendingRemoves:i,liveSocket:e}=this;i.length>0&&(e.transitionRemoves(i),e.requestDOMUpdate(()=>{i.forEach(t=>{let n=K.firstPhxChild(t);n&&e.destroyViewByEl(n),t.remove()}),this.trackAfter("transitionsDiscarded",i)}))}isChangedSelect(i,e){if(!(i instanceof HTMLSelectElement)||i.multiple)return!1;if(i.options.length!==e.options.length)return!0;let t=i.selectedOptions[0],n=e.selectedOptions[0];return t&&t.hasAttribute("selected")&&n.setAttribute("selected",t.getAttribute("selected")),!i.isEqualNode(e)}isCIDPatch(){return this.cidPatch}skipCIDSibling(i){return i.nodeType===Node.ELEMENT_NODE&&i.hasAttribute(cR)}targetCIDContainer(i){if(!this.isCIDPatch())return;let[e,...t]=K.findComponentNodeList(this.container,this.targetCID);return t.length===0&&K.childNodeLength(i)===1?e:e&&e.parentNode}indexOf(i,e){return Array.from(i.children).indexOf(e)}},pX=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),bX=new Set(["'",'"']),NR=(i,e,t)=>{let n=0,r=!1,s,o,l,u,f,g,p=i.match(/^(\s*(?:<!--.*?-->\s*)*)<([^\s\/>]+)/);if(p===null)throw new Error(`malformed html ${i}`);for(n=p[0].length,s=p[1],l=p[2],u=n,n;n<i.length&&i.charAt(n)!==">";n++)if(i.charAt(n)==="="){let C=i.slice(n-3,n)===" id";n++;let E=i.charAt(n);if(bX.has(E)){let P=n;for(n++,n;n<i.length&&i.charAt(n)!==E;n++);if(C){f=i.slice(P+1,n);break}}}let y=i.length-1;for(r=!1;y>=s.length+l.length;){let C=i.charAt(y);if(r)C==="-"&&i.slice(y-3,y)==="<!-"?(r=!1,y-=4):y-=1;else if(C===">"&&i.slice(y-2,y)==="--")r=!0,y-=3;else{if(C===">")break;y-=1}}o=i.slice(y+1,i.length);let _=Object.keys(e).map(C=>e[C]===!0?C:`${C}="${e[C]}"`).join(" ");if(t){let C=f?` id="${f}"`:"";pX.has(l)?g=`<${l}${C}${_===""?"":" "}${_}/>`:g=`<${l}${C}${_===""?"":" "}${_}></${l}>`}else{let C=i.slice(u,y+1);g=`<${l}${_===""?"":" "}${_}${C}`}return[g,s,o]},FR=class{static extract(i){let{[_R]:e,[yR]:t,[xR]:n}=i;return delete i[_R],delete i[yR],delete i[xR],{diff:i,title:n,reply:e||null,events:t||[]}}constructor(i,e){this.viewId=i,this.rendered={},this.magicId=0,this.mergeDiff(e)}parentViewId(){return this.viewId}toString(i){let[e,t]=this.recursiveToString(this.rendered,this.rendered[bn],i,!0,{});return[e,t]}recursiveToString(i,e=i[bn],t,n,r){t=t?new Set(t):null;let s={buffer:"",components:e,onlyCids:t,streams:new Set};return this.toOutputBuffer(i,null,s,n,r),[s.buffer,s.streams]}componentCIDs(i){return Object.keys(i[bn]||{}).map(e=>parseInt(e))}isComponentOnlyDiff(i){return i[bn]?Object.keys(i).length===1:!1}getComponent(i,e){return i[bn][e]}resetRender(i){this.rendered[bn][i]&&(this.rendered[bn][i].reset=!0)}mergeDiff(i){let e=i[bn],t={};if(delete i[bn],this.rendered=this.mutableMerge(this.rendered,i),this.rendered[bn]=this.rendered[bn]||{},e){let n=this.rendered[bn];for(let r in e)e[r]=this.cachedFindComponent(r,e[r],n,e,t);for(let r in e)n[r]=e[r];i[bn]=e}}cachedFindComponent(i,e,t,n,r){if(r[i])return r[i];{let s,o,l=e[cs];if(Ks(l)){let u;l>0?u=this.cachedFindComponent(l,n[l],t,n,r):u=t[-l],o=u[cs],s=this.cloneMerge(u,e,!0),s[cs]=o}else s=e[cs]!==void 0||t[i]===void 0?e:this.cloneMerge(t[i],e,!1);return r[i]=s,s}}mutableMerge(i,e){return e[cs]!==void 0?e:(this.doMutableMerge(i,e),i)}doMutableMerge(i,e){for(let t in e){let n=e[t],r=i[t];Ec(n)&&n[cs]===void 0&&Ec(r)?this.doMutableMerge(r,n):i[t]=n}i[D0]&&(i.newRender=!0)}cloneMerge(i,e,t){let n=ee(ee({},i),e);for(let r in n){let s=e[r],o=i[r];Ec(s)&&s[cs]===void 0&&Ec(o)?n[r]=this.cloneMerge(o,s,t):s===void 0&&Ec(o)&&(n[r]=this.cloneMerge(o,{},t))}return t?(delete n.magicId,delete n.newRender):i[D0]&&(n.newRender=!0),n}componentToString(i){let[e,t]=this.recursiveCIDToString(this.rendered[bn],i,null),[n,r,s]=NR(e,{});return[n,t]}pruneCIDs(i){i.forEach(e=>delete this.rendered[bn][e])}get(){return this.rendered}isNewFingerprint(i={}){return!!i[cs]}templateStatic(i,e){return typeof i=="number"?e[i]:i}nextMagicID(){return this.magicId++,`m${this.magicId}-${this.parentViewId()}`}toOutputBuffer(i,e,t,n,r={}){if(i[Rg])return this.comprehensionToBuffer(i,e,t);let{[cs]:s}=i;s=this.templateStatic(s,e);let o=i[D0],l=t.buffer;o&&(t.buffer=""),n&&o&&!i.magicId&&(i.newRender=!0,i.magicId=this.nextMagicID()),t.buffer+=s[0];for(let u=1;u<s.length;u++)this.dynamicToBuffer(i[u-1],e,t,n),t.buffer+=s[u];if(o){let u=!1,f;n||i.magicId?(u=n&&!i.newRender,f=ee({[uR]:i.magicId},r)):f=r,u&&(f[cR]=!0);let[g,p,y]=NR(t.buffer,f,u);i.newRender=!1,t.buffer=l+p+g+y}}comprehensionToBuffer(i,e,t){let{[Rg]:n,[cs]:r,[kR]:s}=i,[o,l,u,f]=s||[null,{},[],null];r=this.templateStatic(r,e);let g=e||i[WJ];for(let p=0;p<n.length;p++){let y=n[p];t.buffer+=r[0];for(let _=1;_<r.length;_++){let C=!1;this.dynamicToBuffer(y[_-1],g,t,C),t.buffer+=r[_]}}s!==void 0&&(i[Rg].length>0||u.length>0||f)&&(delete i[kR],i[Rg]=[],t.streams.add(s))}dynamicToBuffer(i,e,t,n){if(typeof i=="number"){let[r,s]=this.recursiveCIDToString(t.components,i,t.onlyCids);t.buffer+=r,t.streams=new Set([...t.streams,...s])}else Ec(i)?this.toOutputBuffer(i,e,t,n,{}):t.buffer+=i}recursiveCIDToString(i,e,t){let n=i[e]||Zn(`no component for CID ${e}`,i),r={[qs]:e},s=t&&!t.has(e);n.newRender=!s,n.magicId=`c${e}-${this.parentViewId()}`;let o=!n.reset,[l,u]=this.recursiveToString(n,i,t,o,r);return delete n.reset,[l,u]}},vX=1,lh=class{static makeID(){return vX++}static elementID(i){return i.phxHookId}constructor(i,e,t){this.__view=i,this.liveSocket=i.liveSocket,this.__callbacks=t,this.__listeners=new Set,this.__isDisconnected=!1,this.el=e,this.el.phxHookId=this.constructor.makeID();for(let n in this.__callbacks)this[n]=this.__callbacks[n]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(i,e={},t=function(){}){return this.__view.pushHookEvent(this.el,null,i,e,t)}pushEventTo(i,e,t={},n=function(){}){return this.__view.withinTargets(i,(r,s)=>r.pushHookEvent(this.el,s,e,t,n))}handleEvent(i,e){let t=(n,r)=>r?i:e(n.detail);return window.addEventListener(`phx:${i}`,t),this.__listeners.add(t),t}removeHandleEvent(i){let e=i(null,!0);window.removeEventListener(`phx:${e}`,i),this.__listeners.delete(i)}upload(i,e){return this.__view.dispatchUploads(null,i,e)}uploadTo(i,e,t){return this.__view.withinTargets(i,(n,r)=>{n.dispatchUploads(r,e,t)})}__cleanup__(){this.__listeners.forEach(i=>this.removeHandleEvent(i))}},Vg=(i,e,t=[])=>{let f=e,{submitter:n}=f,r=Do(f,["submitter"]),s;if(n&&n.name){let g=document.createElement("input");g.type="hidden";let p=n.getAttribute("form");p&&g.setAttribute("form",p),g.name=n.name,g.value=n.value,n.parentElement.insertBefore(g,n),s=g}let o=new FormData(i),l=[];o.forEach((g,p,y)=>{g instanceof File&&l.push(p)}),l.forEach(g=>o.delete(g));let u=new URLSearchParams;for(let[g,p]of o.entries())(t.length===0||t.indexOf(g)>=0)&&u.append(g,p);n&&s&&n.parentElement.removeChild(s);for(let g in r)u.append(g,r[g]);return u.toString()},jR=class{constructor(i,e,t,n,r){this.isDead=!1,this.liveSocket=e,this.flash=n,this.parent=t,this.root=t?t.root:this,this.el=i,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pendingForms=new Set,this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(s){s&&s()},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.formsForRecovery={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>{let s=this.href&&this.expandURL(this.href);return{redirect:this.redirect?s:void 0,url:this.redirect?void 0:s||void 0,params:this.connectParams(r),session:this.getSession(),static:this.getStatic(),flash:this.flash}})}setHref(i){this.href=i}setRedirect(i){this.redirect=!0,this.href=i}isMain(){return this.el.hasAttribute(T0)}connectParams(i){let e=this.liveSocket.params(this.el),t=K.all(document,`[${this.binding(PJ)}]`).map(n=>n.src||n.href).filter(n=>typeof n=="string");return t.length>0&&(e._track_static=t),e._mounts=this.joinCount,e._live_referer=i,e}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(Gs)}getStatic(){let i=this.el.getAttribute(Cc);return i===""?null:i}destroy(i=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let e=()=>{i();for(let t in this.viewHooks)this.destroyHook(this.viewHooks[t])};K.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",e).receive("error",e).receive("timeout",e)}setContainerClasses(...i){this.el.classList.remove(fR,eh,Cg,mR,C0),this.el.classList.add(...i)}showLoader(i){if(clearTimeout(this.loaderTimer),i)this.loaderTimer=setTimeout(()=>this.showLoader(),i);else{for(let e in this.viewHooks)this.viewHooks[e].__disconnected();this.setContainerClasses(eh)}}execAll(i){K.all(this.el,`[${i}]`,e=>this.liveSocket.execJS(e,e.getAttribute(i)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(fR),this.execAll(this.binding("connected"))}triggerReconnected(){for(let i in this.viewHooks)this.viewHooks[i].__reconnected()}log(i,e){this.liveSocket.log(this,i,e)}transition(i,e,t=function(){}){this.liveSocket.transition(i,e,t)}withinTargets(i,e,t=document,n){if(i instanceof HTMLElement||i instanceof SVGElement)return this.liveSocket.owner(i,r=>e(r,i));if(Ks(i))K.findComponentNodeList(n||this.el,i).length===0?Zn(`no component found matching phx-target of ${i}`):e(this,parseInt(i));else{let r=Array.from(t.querySelectorAll(i));r.length===0&&Zn(`nothing found matching the phx-target selector "${i}"`),r.forEach(s=>this.liveSocket.owner(s,o=>e(o,s)))}}applyDiff(i,e,t){this.log(i,()=>["",Og(e)]);let{diff:n,reply:r,events:s,title:o}=FR.extract(e);t({diff:n,reply:r,events:s}),typeof o=="string"&&window.requestAnimationFrame(()=>K.putTitle(o))}onJoin(i){let{rendered:e,container:t,liveview_version:n}=i;if(t){let[r,s]=t;this.el=K.replaceRootContainer(this.el,r,s)}this.childJoins=0,this.joinPending=!0,this.flash=null,this.root===this&&(this.formsForRecovery=this.getFormsForRecovery()),n!==this.liveSocket.version()&&console.error(`LiveView asset version mismatch. JavaScript version ${this.liveSocket.version()} vs. server ${n}. To avoid issues, please ensure that your assets use the same version as the server.`),us.dropLocal(this.liveSocket.localStorage,window.location.pathname,sR),this.applyDiff("mount",e,({diff:r,events:s})=>{this.rendered=new FR(this.id,r);let[o,l]=this.renderContainer(null,"join");this.dropPendingRefs(),this.joinCount++,this.maybeRecoverForms(o,()=>{this.onJoinComplete(i,o,l,s)})})}dropPendingRefs(){K.all(document,`[${Wo}="${this.id}"][${Yn}]`,i=>{i.removeAttribute(Yn),i.removeAttribute(Wo)})}onJoinComplete({live_patch:i},e,t,n){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(i,e,t,n);K.findPhxChildrenInFragment(e,this.id).filter(s=>{let o=s.id&&this.el.querySelector(`[id="${s.id}"]`),l=o&&o.getAttribute(Cc);return l&&s.setAttribute(Cc,l),o&&o.setAttribute(Ja,this.root.id),this.joinChild(s)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(i,e,t,n)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(i,e,t,n)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(i,e,t,n)])}attachTrueDocEl(){this.el=K.byId(this.id),this.el.setAttribute(Ja,this.root.id)}execNewMounted(){let i=this.binding(E0),e=this.binding(S0);K.all(this.el,`[${i}], [${e}]`,t=>{this.ownsElement(t)&&(K.maybeAddPrivateHooks(t,i,e),this.maybeAddNewHook(t))}),K.all(this.el,`[${this.binding(th)}], [data-phx-${th}]`,t=>{this.ownsElement(t)&&this.maybeAddNewHook(t)}),K.all(this.el,`[${this.binding(vR)}]`,t=>{this.ownsElement(t)&&this.maybeMounted(t)})}applyJoinPatch(i,e,t,n){this.attachTrueDocEl();let r=new Dg(this,this.el,this.id,e,t,null);if(r.markPrunableContentForRemoval(),this.performPatch(r,!1,!0),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(n),this.applyPendingUpdates(),i){let{kind:s,to:o}=i;this.liveSocket.historyPatch(o,s)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(i,e){this.liveSocket.triggerDOM("onBeforeElUpdated",[i,e]);let t=this.getHook(i),n=t&&K.isIgnored(i,this.binding(Ig));if(t&&!i.isEqualNode(e)&&!(n&&KJ(i.dataset,e.dataset)))return t.__beforeUpdate(),t}maybeMounted(i){let e=i.getAttribute(this.binding(vR)),t=e&&K.private(i,"mounted");e&&!t&&(this.liveSocket.execJS(i,e),K.putPrivate(i,"mounted",!0))}maybeAddNewHook(i,e){let t=this.addHook(i);t&&t.__mounted()}performPatch(i,e,t=!1){let n=[],r=!1,s=new Set;return i.after("added",o=>{this.liveSocket.triggerDOM("onNodeAdded",[o]);let l=this.binding(E0),u=this.binding(S0);K.maybeAddPrivateHooks(o,l,u),this.maybeAddNewHook(o),o.getAttribute&&this.maybeMounted(o)}),i.after("phxChildAdded",o=>{K.isPhxSticky(o)?this.liveSocket.joinRootViews():r=!0}),i.before("updated",(o,l)=>{this.triggerBeforeUpdateHook(o,l)&&s.add(o.id)}),i.after("updated",o=>{s.has(o.id)&&this.getHook(o).__updated()}),i.after("discarded",o=>{o.nodeType===Node.ELEMENT_NODE&&n.push(o)}),i.after("transitionsDiscarded",o=>this.afterElementsRemoved(o,e)),i.perform(t),this.afterElementsRemoved(n,e),r}afterElementsRemoved(i,e){let t=[];i.forEach(n=>{let r=K.all(n,`[${qs}]`),s=K.all(n,`[${this.binding(th)}]`);r.concat(n).forEach(o=>{let l=this.componentID(o);Ks(l)&&t.indexOf(l)===-1&&t.push(l)}),s.concat(n).forEach(o=>{let l=this.getHook(o);l&&this.destroyHook(l)})}),e&&this.maybePushComponentsDestroyed(t)}joinNewChildren(){K.findPhxChildren(this.el,this.id).forEach(i=>this.joinChild(i))}maybeRecoverForms(i,e){let t=this.binding("change"),n=this.root.formsForRecovery,r=document.createElement("template");r.innerHTML=i;let s=r.content.firstElementChild;s.id=this.id,s.setAttribute(Ja,this.root.id),s.setAttribute(Gs,this.getSession()),s.setAttribute(Cc,this.getStatic()),s.setAttribute(Za,this.parent?this.parent.id:null);let o=K.all(r.content,"form").filter(l=>l.id&&n[l.id]).filter(l=>!this.pendingForms.has(l.id)).filter(l=>n[l.id].getAttribute(t)===l.getAttribute(t)).map(l=>[n[l.id],l]);if(o.length===0)return e();o.forEach(([l,u],f)=>{this.pendingForms.add(u.id),this.pushFormRecovery(l,u,r.content,()=>{this.pendingForms.delete(u.id),f===o.length-1&&e()})})}getChildById(i){return this.root.children[this.id][i]}getDescendentByEl(i){return i.id===this.id?this:this.children[i.getAttribute(Za)][i.id]}destroyDescendent(i){for(let e in this.root.children)for(let t in this.root.children[e])if(t===i)return this.root.children[e][t].destroy()}joinChild(i){if(!this.getChildById(i.id)){let t=new jR(i,this.liveSocket,this);return this.root.children[this.id][t.id]=t,t.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(i){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.pendingForms.clear(),this.formsForRecovery={},this.joinCallback(()=>{this.pendingJoinOps.forEach(([i,e])=>{i.isDestroyed()||e()}),this.pendingJoinOps=[]})}update(i,e){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:i,events:e});this.rendered.mergeDiff(i);let t=!1;this.rendered.isComponentOnlyDiff(i)?this.liveSocket.time("component patch complete",()=>{K.findExistingParentCIDs(this.el,this.rendered.componentCIDs(i)).forEach(r=>{this.componentPatch(this.rendered.getComponent(i,r),r)&&(t=!0)})}):CR(i)||this.liveSocket.time("full patch complete",()=>{let[n,r]=this.renderContainer(i,"update"),s=new Dg(this,this.el,this.id,n,r,null);t=this.performPatch(s,!0)}),this.liveSocket.dispatchEvents(e),t&&this.joinNewChildren()}renderContainer(i,e){return this.liveSocket.time(`toString diff (${e})`,()=>{let t=this.el.tagName,n=i?this.rendered.componentCIDs(i):null,[r,s]=this.rendered.toString(n);return[`<${t}>${r}</${t}>`,s]})}componentPatch(i,e){if(CR(i))return!1;let[t,n]=this.rendered.componentToString(e),r=new Dg(this,this.el,this.id,t,n,e);return this.performPatch(r,!0)}getHook(i){return this.viewHooks[lh.elementID(i)]}addHook(i){if(lh.elementID(i)||!i.getAttribute)return;let e=i.getAttribute(`data-phx-${th}`)||i.getAttribute(this.binding(th));if(e&&!this.ownsElement(i))return;let t=this.liveSocket.getHookCallbacks(e);if(t){i.id||Zn(`no DOM ID for hook "${e}". Hooks require a unique ID on each element.`,i);let n=new lh(this,i,t);return this.viewHooks[lh.elementID(n.el)]=n,n}else e!==null&&Zn(`unknown hook found for "${e}"`,i)}destroyHook(i){i.__destroyed(),i.__cleanup__(),delete this.viewHooks[lh.elementID(i.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:i,events:e})=>this.update(i,e)),this.pendingDiffs=[],this.eachChild(i=>i.applyPendingUpdates())}eachChild(i){let e=this.root.children[this.id]||{};for(let t in e)i(this.getChildById(t))}onChannel(i,e){this.liveSocket.onChannel(this.channel,i,t=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>e(t)]):this.liveSocket.requestDOMUpdate(()=>e(t))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",i=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",i,({diff:e,events:t})=>this.update(e,t))})}),this.onChannel("redirect",({to:i,flash:e})=>this.onRedirect({to:i,flash:e})),this.onChannel("live_patch",i=>this.onLivePatch(i)),this.onChannel("live_redirect",i=>this.onLiveRedirect(i)),this.channel.onError(i=>this.onError(i)),this.channel.onClose(i=>this.onClose(i))}destroyAllChildren(){this.eachChild(i=>i.destroy())}onLiveRedirect(i){let{to:e,kind:t,flash:n}=i,r=this.expandURL(e);this.liveSocket.historyRedirect(r,t,n)}onLivePatch(i){let{to:e,kind:t}=i;this.href=this.expandURL(e),this.liveSocket.historyPatch(e,t)}expandURL(i){return i.startsWith("/")?`${window.location.protocol}//${window.location.host}${i}`:i}onRedirect({to:i,flash:e}){this.liveSocket.redirect(i,e)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}join(i){this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=e=>{e=e||function(){},i?i(this.joinCount,e):e()},this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",e=>{this.isDestroyed()||this.liveSocket.requestDOMUpdate(()=>this.onJoin(e))}).receive("error",e=>!this.isDestroyed()&&this.onJoinError(e)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(i){if(i.reason==="reload"){this.log("error",()=>[`failed mount with ${i.status}. Falling back to page request`,i]),this.isMain()&&this.onRedirect({to:this.href});return}else if(i.reason==="unauthorized"||i.reason==="stale"){this.log("error",()=>["unauthorized live_redirect. Falling back to page request",i]),this.isMain()&&this.onRedirect({to:this.href});return}if((i.redirect||i.live_redirect)&&(this.joinPending=!1,this.channel.leave()),i.redirect)return this.onRedirect(i.redirect);if(i.live_redirect)return this.onLiveRedirect(i.live_redirect);this.displayError([eh,Cg,C0]),this.log("error",()=>["unable to join",i]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this)}onClose(i){if(!this.isDestroyed()){if(this.liveSocket.hasPendingLink()&&i!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(jJ)}}onError(i){this.onClose(i),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",i]),this.liveSocket.isUnloaded()||(this.liveSocket.isConnected()?this.displayError([eh,Cg,C0]):this.displayError([eh,Cg,mR]))}displayError(i){this.isMain()&&K.dispatchEvent(window,"phx:page-loading-start",{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(...i),this.execAll(this.binding("disconnected"))}pushWithReply(i,e,t,n=function(){}){if(!this.isConnected())return;let[r,[s],o]=i?i():[null,[],{}],l=function(){};return(o.page_loading||s&&s.getAttribute(this.binding(hR))!==null)&&(l=this.liveSocket.withPageLoading({kind:"element",target:s})),typeof t.cid!="number"&&delete t.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(e,t,zJ).receive("ok",u=>{let f=g=>{u.redirect&&this.onRedirect(u.redirect),u.live_patch&&this.onLivePatch(u.live_patch),u.live_redirect&&this.onLiveRedirect(u.live_redirect),l(),n(u,g)};u.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",u.diff,({diff:g,reply:p,events:y})=>{r!==null&&this.undoRefs(r),this.update(g,y),f(p)})}):(r!==null&&this.undoRefs(r),f(null))}))}undoRefs(i,e){e=e?new Set(e):null,!!this.isConnected()&&K.all(document,`[${Wo}="${this.id}"][${Yn}="${i}"]`,t=>{if(e&&!e.has(t))return;t.dispatchEvent(new CustomEvent("phx:unlock",{bubbles:!0,cancelable:!1}));let n=t.getAttribute(Tc),r=t.getAttribute(I0);t.removeAttribute(Yn),t.removeAttribute(Wo),r!==null&&(t.readOnly=r==="true",t.removeAttribute(I0)),n!==null&&(t.disabled=n==="true",t.removeAttribute(Tc)),oR.forEach(l=>K.removeClass(t,l));let s=t.getAttribute(Ag);s!==null&&(t.innerText=s,t.removeAttribute(Ag));let o=K.private(t,Yn);if(o){let l=this.triggerBeforeUpdateHook(t,o);Dg.patchEl(t,o,this.liveSocket.getActiveElement()),l&&l.__updated(),K.deletePrivate(t,Yn)}})}putRef(i,e,t={}){let n=this.ref++,r=this.binding(P0);t.loading&&(i=i.concat(K.all(document,t.loading)));for(let s of i){if(s.setAttribute(Yn,n),s.setAttribute(Wo,this.el.id),t.submitter&&!(s===t.submitter||s===t.form))continue;s.classList.add(`phx-${e}-loading`),s.dispatchEvent(new CustomEvent(`phx:${e}-loading`,{bubbles:!0,cancelable:!1}));let o=s.getAttribute(r);o!==null&&(s.getAttribute(Ag)||s.setAttribute(Ag,s.innerText),o!==""&&(s.innerText=o),s.setAttribute(Tc,s.getAttribute(Tc)||s.disabled),s.setAttribute("disabled",""))}return[n,i,t]}componentID(i){let e=i.getAttribute&&i.getAttribute(qs);return e?parseInt(e):null}targetComponentID(i,e,t={}){if(Ks(e))return e;let n=t.target||i.getAttribute(this.binding("target"));return Ks(n)?parseInt(n):e&&(n!==null||t.target)?this.closestComponentID(e):null}closestComponentID(i){return Ks(i)?i:i?qo(i.closest(`[${qs}]`),e=>this.ownsElement(e)&&this.componentID(e)):null}pushHookEvent(i,e,t,n,r){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",t,n]),!1;let[s,o,l]=this.putRef([i],"hook");return this.pushWithReply(()=>[s,o,l],"event",{type:"hook",event:t,value:n,cid:this.closestComponentID(e)},(u,f)=>r(f,s)),s}extractMeta(i,e,t){let n=this.binding("value-");for(let r=0;r<i.attributes.length;r++){e||(e={});let s=i.attributes[r].name;s.startsWith(n)&&(e[s.replace(n,"")]=i.getAttribute(s))}if(i.value!==void 0&&!(i instanceof HTMLFormElement)&&(e||(e={}),e.value=i.value,i.tagName==="INPUT"&&gR.indexOf(i.type)>=0&&!i.checked&&delete e.value),t){e||(e={});for(let r in t)e[r]=t[r]}return e}pushEvent(i,e,t,n,r,s={},o){this.pushWithReply(()=>this.putRef([e],i,s),"event",{type:i,event:n,value:this.extractMeta(e,r,s.value),cid:this.targetComponentID(e,t,s)},(l,u)=>o&&o(u))}pushFileProgress(i,e,t,n=function(){}){this.liveSocket.withinOwners(i.form,(r,s)=>{r.pushWithReply(null,"progress",{event:i.getAttribute(r.binding(NJ)),ref:i.getAttribute($s),entry_ref:e,progress:t,cid:r.targetComponentID(i.form,s)},n)})}pushInput(i,e,t,n,r,s){let o,l=Ks(t)?t:this.targetComponentID(i.form,e,r),u=()=>this.putRef([i,i.form],"change",r),f,g=this.extractMeta(i.form);i instanceof HTMLButtonElement&&(g.submitter=i),i.getAttribute(this.binding("change"))?f=Vg(i.form,ee({_target:r._target},g),[i.name]):f=Vg(i.form,ee({_target:r._target},g)),K.isUploadInput(i)&&i.files&&i.files.length>0&&bi.trackFiles(i,Array.from(i.files)),o=bi.serializeUploads(i);let p={type:"form",event:n,value:f,uploads:o,cid:l};this.pushWithReply(u,"event",p,y=>{if(K.showError(i,this.liveSocket.binding(Tg),this.liveSocket.binding(Eg)),K.isUploadInput(i)&&K.isAutoUpload(i)){if(bi.filesAwaitingPreflight(i).length>0){let[_,C]=u();this.undoRefs(_,[i.form]),this.uploadFiles(i.form,e,_,l,E=>{s&&s(y),this.triggerAwaitingSubmit(i.form),this.undoRefs(_)})}}else s&&s(y)})}triggerAwaitingSubmit(i){let e=this.getScheduledSubmit(i);if(e){let[t,n,r,s]=e;this.cancelSubmit(i),s()}}getScheduledSubmit(i){return this.formSubmits.find(([e,t,n,r])=>e.isSameNode(i))}scheduleSubmit(i,e,t,n){if(this.getScheduledSubmit(i))return!0;this.formSubmits.push([i,e,t,n])}cancelSubmit(i){this.formSubmits=this.formSubmits.filter(([e,t,n])=>e.isSameNode(i)?(this.undoRefs(t),!1):!0)}disableForm(i,e={}){let t=g=>!(sh(g,`${this.binding(Ig)}=ignore`,g.form)||sh(g,"data-phx-update=ignore",g.form)),n=g=>g.hasAttribute(this.binding(P0)),r=g=>g.tagName=="BUTTON",s=g=>["INPUT","TEXTAREA","SELECT"].includes(g.tagName),o=Array.from(i.elements),l=o.filter(n),u=o.filter(r).filter(t),f=o.filter(s).filter(t);return u.forEach(g=>{g.setAttribute(Tc,g.disabled),g.disabled=!0}),f.forEach(g=>{g.setAttribute(I0,g.readOnly),g.readOnly=!0,g.files&&(g.setAttribute(Tc,g.disabled),g.disabled=!0)}),i.setAttribute(this.binding(hR),""),this.putRef([i].concat(l).concat(u).concat(f),"submit",e)}pushFormSubmit(i,e,t,n,r,s){let o=()=>this.disableForm(i,tt(ee({},r),{form:i,submitter:n})),l=this.targetComponentID(i,e);if(bi.hasUploadsInProgress(i)){let[u,f]=o(),g=()=>this.pushFormSubmit(i,e,t,n,r,s);return this.scheduleSubmit(i,u,r,g)}else if(bi.inputsAwaitingPreflight(i).length>0){let[u,f]=o(),g=()=>[u,f,r];this.uploadFiles(i,e,u,l,p=>{if(bi.inputsAwaitingPreflight(i).length>0)return this.undoRefs(u);let y=this.extractMeta(i),_=Vg(i,ee({submitter:n},y));this.pushWithReply(g,"event",{type:"form",event:t,value:_,cid:l},s)})}else if(!(i.hasAttribute(Yn)&&i.classList.contains("phx-submit-loading"))){let u=this.extractMeta(i),f=Vg(i,ee({submitter:n},u));this.pushWithReply(o,"event",{type:"form",event:t,value:f,cid:l},s)}}uploadFiles(i,e,t,n,r){let s=this.joinCount,o=bi.activeFileInputs(i),l=o.length;o.forEach(u=>{let f=new bi(u,this,()=>{l--,l===0&&r()}),g=f.entries().map(y=>y.toPreflightPayload());if(g.length===0){l--;return}let p={ref:u.getAttribute($s),entries:g,cid:this.targetComponentID(u.form,e)};this.log("upload",()=>["sending preflight request",p]),this.pushWithReply(null,"allow_upload",p,y=>{if(this.log("upload",()=>["got preflight response",y]),f.entries().forEach(_=>{y.entries&&!y.entries[_.ref]&&this.handleFailedEntryPreflight(_.ref,"failed preflight",f)}),y.error||Object.keys(y.entries).length===0)this.undoRefs(t),(y.error||[]).map(([C,E])=>{this.handleFailedEntryPreflight(C,E,f)});else{let _=C=>{this.channel.onError(()=>{this.joinCount===s&&C()})};f.initAdapterUpload(y,_,this.liveSocket)}})})}handleFailedEntryPreflight(i,e,t){if(t.isAutoUpload()){let n=t.entries().find(r=>r.ref===i.toString());n&&n.cancel()}else t.entries().map(n=>n.cancel());this.log("upload",()=>[`error for entry ${i}`,e])}dispatchUploads(i,e,t){let n=this.targetCtxElement(i)||this.el,r=K.findUploadInputs(n).filter(s=>s.name===e);r.length===0?Zn(`no live file inputs found matching the name "${e}"`):r.length>1?Zn(`duplicate live file inputs found matching the name "${e}"`):K.dispatchEvent(r[0],aR,{detail:{files:t}})}targetCtxElement(i){if(Ks(i)){let[e]=K.findComponentNodeList(this.el,i);return e}else return i||null}pushFormRecovery(i,e,t,n){let r=this.binding("change"),s=e.getAttribute(this.binding("target"))||e,o=e.getAttribute(this.binding(bR))||e.getAttribute(this.binding("change")),l=Array.from(i.elements).filter(g=>K.isFormInput(g)&&g.name&&!g.hasAttribute(r));if(l.length===0)return;l.forEach(g=>g.hasAttribute($s)&&bi.clearFiles(g));let u=l.find(g=>g.type!=="hidden")||l[0],f=0;this.withinTargets(s,(g,p)=>{let y=this.targetComponentID(e,p);f++,g.pushInput(u,p,y,o,{_target:u.name},()=>{f--,f===0&&n()})},t,t)}pushLinkPatch(i,e,t){let n=this.liveSocket.setPendingLink(i),r=e?()=>this.putRef([e],"click"):null,s=()=>this.liveSocket.redirect(window.location.href),o=i.startsWith("/")?`${location.protocol}//${location.host}${i}`:i,l=this.pushWithReply(r,"live_patch",{url:o},u=>{this.liveSocket.requestDOMUpdate(()=>{u.link_redirect?this.liveSocket.replaceMain(i,null,t,n):(this.liveSocket.commitPendingLink(n)&&(this.href=i),this.applyPendingUpdates(),t&&t(n))})});l?l.receive("timeout",s):s()}getFormsForRecovery(){if(this.joinCount===0)return{};let i=this.binding("change");return K.all(this.el,`form[${i}]`).filter(e=>e.id).filter(e=>e.elements.length>0).filter(e=>e.getAttribute(this.binding(bR))!=="ignore").map(e=>e.cloneNode(!0)).reduce((e,t)=>(e[t.id]=t,e),{})}maybePushComponentsDestroyed(i){let e=i.filter(t=>K.findComponentNodeList(this.el,t).length===0);e.length>0&&(e.forEach(t=>this.rendered.resetRender(t)),this.pushWithReply(null,"cids_will_destroy",{cids:e},()=>{this.liveSocket.requestDOMUpdate(()=>{let t=e.filter(n=>K.findComponentNodeList(this.el,n).length===0);t.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:t},n=>{this.rendered.pruneCIDs(n.cids)})})}))}ownsElement(i){let e=i.closest(kc);return i.getAttribute(Za)===this.id||e&&e.id===this.id||!e&&this.isDead}submitForm(i,e,t,n,r={}){K.putPrivate(i,Sg,!0);let s=this.liveSocket.binding(Tg),o=this.liveSocket.binding(Eg),l=Array.from(i.elements);l.forEach(u=>K.putPrivate(u,Sg,!0)),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(i,e,t,n,r,()=>{l.forEach(u=>K.showError(u,s,o)),this.liveSocket.restorePreviouslyActiveFocus()})}binding(i){return this.liveSocket.binding(i)}},HR=class{constructor(i,e,t={}){if(this.unloaded=!1,!e||e.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new e(i,t),this.bindingPrefix=t.bindingPrefix||HJ,this.opts=t,this.params=rh(t.params||{}),this.viewLogger=t.viewLogger,this.metadataCallbacks=t.metadata||{},this.defaults=Object.assign(Og(UJ),t.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=Og(window.location),this.hooks=t.hooks||{},this.uploaders=t.uploaders||{},this.loaderTimeout=t.loaderTimeout||FJ,this.reloadWithJitterTimer=null,this.maxReloads=t.maxReloads||EJ,this.reloadJitterMin=t.reloadJitterMin||SJ,this.reloadJitterMax=t.reloadJitterMax||AJ,this.failsafeJitter=t.failsafeJitter||IJ,this.localStorage=t.localStorage||window.localStorage,this.sessionStorage=t.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.serverCloseRef=null,this.domCallbacks=Object.assign({onPatchStart:rh(),onPatchEnd:rh(),onNodeAdded:rh(),onBeforeElUpdated:rh()},t.dom||{}),this.transitions=new wX,window.addEventListener("pagehide",n=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}version(){return"0.20.17"}isProfileEnabled(){return this.sessionStorage.getItem(M0)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(Pg)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(Pg)==="false"}enableDebug(){this.sessionStorage.setItem(Pg,"true")}enableProfiling(){this.sessionStorage.setItem(M0,"true")}disableDebug(){this.sessionStorage.setItem(Pg,"false")}disableProfiling(){this.sessionStorage.removeItem(M0)}enableLatencySim(i){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(L0,i)}disableLatencySim(){this.sessionStorage.removeItem(L0)}getLatencySim(){let i=this.sessionStorage.getItem(L0);return i?parseInt(i):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug();let i=()=>{this.joinRootViews()?(this.bindTopLevelEvents(),this.socket.connect()):this.main?this.socket.connect():this.bindTopLevelEvents({dead:!0}),this.joinDeadView()};["complete","loaded","interactive"].indexOf(document.readyState)>=0?i():document.addEventListener("DOMContentLoaded",()=>i())}disconnect(i){clearTimeout(this.reloadWithJitterTimer),this.serverCloseRef&&(this.socket.off(this.serverCloseRef),this.serverCloseRef=null),this.socket.disconnect(i)}replaceTransport(i){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(i),this.connect()}execJS(i,e,t=null){this.owner(i,n=>vn.exec(t,e,n,i))}execJSHookPush(i,e,t,n){this.withinOwners(i,r=>{vn.exec("hook",e,r,i,["push",{data:t,callback:n}])})}unload(){this.unloaded||(this.main&&this.isConnected()&&this.log(this.main,"socket",()=>["disconnect for page nav"]),this.unloaded=!0,this.destroyAllViews(),this.disconnect())}triggerDOM(i,e){this.domCallbacks[i](...e)}time(i,e){if(!this.isProfileEnabled()||!console.time)return e();console.time(i);let t=e();return console.timeEnd(i),t}log(i,e,t){if(this.viewLogger){let[n,r]=t();this.viewLogger(i,e,n,r)}else if(this.isDebugEnabled()){let[n,r]=t();GJ(i,e,n,r)}}requestDOMUpdate(i){this.transitions.after(i)}transition(i,e,t=function(){}){this.transitions.addTransition(i,e,t)}onChannel(i,e,t){i.on(e,n=>{let r=this.getLatencySim();r?setTimeout(()=>t(n),r):t(n)})}wrapPush(i,e,t){let n=this.getLatencySim(),r=i.joinCount;if(!n)return this.isConnected()&&e.timeout?t().receive("timeout",()=>{i.joinCount===r&&!i.isDestroyed()&&this.reloadWithJitter(i,()=>{this.log(i,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):t();let s={receives:[],receive(o,l){this.receives.push([o,l])}};return setTimeout(()=>{i.isDestroyed()||s.receives.reduce((o,[l,u])=>o.receive(l,u),t())},n),s}reloadWithJitter(i,e){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let t=this.reloadJitterMin,n=this.reloadJitterMax,r=Math.floor(Math.random()*(n-t+1))+t,s=us.updateLocal(this.localStorage,window.location.pathname,sR,0,o=>o+1);s>this.maxReloads&&(r=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(()=>{i.isDestroyed()||i.isConnected()||(i.destroy(),e?e():this.log(i,"join",()=>[`encountered ${s} consecutive reloads`]),s>this.maxReloads&&this.log(i,"join",()=>[`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]),this.hasPendingLink()?window.location=this.pendingLink:window.location.reload())},r)}getHookCallbacks(i){return i&&i.startsWith("Phoenix.")?tX[i.split(".")[1]]:this.hooks[i]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(i){return`${this.getBindingPrefix()}${i}`}channel(i,e){return this.socket.channel(i,e)}joinDeadView(){let i=document.body;if(i&&!this.isPhxView(i)&&!this.isPhxView(document.firstElementChild)){let e=this.newRootView(i);e.setHref(this.getHref()),e.joinDead(),this.main||(this.main=e),window.requestAnimationFrame(()=>e.execNewMounted())}}joinRootViews(){let i=!1;return K.all(document,`${kc}:not([${Za}])`,e=>{if(!this.getRootById(e.id)){let t=this.newRootView(e);t.setHref(this.getHref()),t.join(),e.hasAttribute(T0)&&(this.main=t)}i=!0}),i}redirect(i,e){this.unload(),us.redirect(i,e)}replaceMain(i,e,t=null,n=this.setPendingLink(i)){let r=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let s=K.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(s,e,r),this.main.setRedirect(i),this.transitionRemoves(null,!0),this.main.join((o,l)=>{o===1&&this.commitPendingLink(n)&&this.requestDOMUpdate(()=>{K.findPhxSticky(document).forEach(u=>s.appendChild(u)),this.outgoingMainEl.replaceWith(s),this.outgoingMainEl=null,t&&t(n),l()})})}transitionRemoves(i,e){let t=this.binding("remove");if(i=i||K.all(document,`[${t}]`),e){let n=K.findPhxSticky(document)||[];i=i.filter(r=>!K.isChildOfAny(r,n))}i.forEach(n=>{this.execJS(n,n.getAttribute(t),"remove")})}isPhxView(i){return i.getAttribute&&i.getAttribute(Gs)!==null}newRootView(i,e,t){let n=new jR(i,this,null,e,t);return this.roots[n.id]=n,n}owner(i,e){let t=qo(i.closest(kc),n=>this.getViewByEl(n))||this.main;t&&e(t)}withinOwners(i,e){this.owner(i,t=>e(t,i))}getViewByEl(i){let e=i.getAttribute(Ja);return qo(this.getRootById(e),t=>t.getDescendentByEl(i))}getRootById(i){return this.roots[i]}destroyAllViews(){for(let i in this.roots)this.roots[i].destroy(),delete this.roots[i];this.main=null}destroyViewByEl(i){let e=this.getRootById(i.getAttribute(Ja));e&&e.id===i.id?(e.destroy(),delete this.roots[e.id]):e&&e.destroyDescendent(i.id)}setActiveElement(i){if(this.activeElement===i)return;this.activeElement=i;let e=()=>{i===this.activeElement&&(this.activeElement=null),i.removeEventListener("mouseup",this),i.removeEventListener("touchend",this)};i.addEventListener("mouseup",e),i.addEventListener("touchend",e)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(i){this.prevActive&&i.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:i}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.serverCloseRef=this.socket.onClose(e=>{if(e&&e.code===1e3&&this.main)return this.reloadWithJitter(this.main)}),document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",e=>{e.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),i||this.bindNav(),this.bindClicks(),i||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(e,t,n,r,s,o)=>{let l=r.getAttribute(this.binding(BJ)),u=e.key&&e.key.toLowerCase();if(l&&l.toLowerCase()!==u)return;let f=ee({key:e.key},this.eventMeta(t,e,r));vn.exec(t,s,n,r,["push",{data:f}])}),this.bind({blur:"focusout",focus:"focusin"},(e,t,n,r,s,o)=>{if(!o){let l=ee({key:e.key},this.eventMeta(t,e,r));vn.exec(t,s,n,r,["push",{data:l}])}}),this.bind({blur:"blur",focus:"focus"},(e,t,n,r,s,o)=>{if(o==="window"){let l=this.eventMeta(t,e,r);vn.exec(t,s,n,r,["push",{data:l}])}}),window.addEventListener("dragover",e=>e.preventDefault()),window.addEventListener("drop",e=>{e.preventDefault();let t=qo(sh(e.target,this.binding(lR)),s=>s.getAttribute(this.binding(lR))),n=t&&document.getElementById(t),r=Array.from(e.dataTransfer.files||[]);!n||n.disabled||r.length===0||!(n.files instanceof FileList)||(bi.trackFiles(n,r,e.dataTransfer),n.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(aR,e=>{let t=e.target;if(!K.isUploadInput(t))return;let n=Array.from(e.detail.files||[]).filter(r=>r instanceof File||r instanceof Blob);bi.trackFiles(t,n),t.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(i,e,t){let n=this.metadataCallbacks[i];return n?n(e,t):{}}setPendingLink(i){return this.linkRef++,this.pendingLink=i,this.linkRef}commitPendingLink(i){return this.linkRef!==i?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(i,e){for(let t in i){let n=i[t];this.on(n,r=>{let s=this.binding(t),o=this.binding(`window-${t}`),l=r.target.getAttribute&&r.target.getAttribute(s);l?this.debounce(r.target,r,n,()=>{this.withinOwners(r.target,u=>{e(r,t,u,r.target,l,null)})}):K.all(document,`[${o}]`,u=>{let f=u.getAttribute(o);this.debounce(u,r,n,()=>{this.withinOwners(u,g=>{e(r,t,g,u,f,"window")})})})})}}bindClicks(){window.addEventListener("mousedown",i=>this.clickStartedAtTarget=i.target),this.bindClick("click","click")}bindClick(i,e){let t=this.binding(e);window.addEventListener(i,n=>{let r=null;n.detail===0&&(this.clickStartedAtTarget=n.target);let s=this.clickStartedAtTarget||n.target;r=sh(s,t),this.dispatchClickAway(n,s),this.clickStartedAtTarget=null;let o=r&&r.getAttribute(t);if(!o){K.isNewPageClick(n,window.location)&&this.unload();return}r.getAttribute("href")==="#"&&n.preventDefault(),!r.hasAttribute(Yn)&&this.debounce(r,n,"click",()=>{this.withinOwners(r,l=>{vn.exec("click",o,l,r,["push",{data:this.eventMeta("click",n,r)}])})})},!1)}dispatchClickAway(i,e){let t=this.binding("click-away");K.all(document,`[${t}]`,n=>{n.isSameNode(e)||n.contains(e)||this.withinOwners(n,r=>{let s=n.getAttribute(t);vn.isVisible(n)&&vn.isInViewport(n)&&vn.exec("click",s,r,n,["push",{data:this.eventMeta("click",i,i.target)}])})})}bindNav(){if(!us.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let i=null;window.addEventListener("scroll",e=>{clearTimeout(i),i=setTimeout(()=>{us.updateCurrentState(t=>Object.assign(t,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",e=>{if(!this.registerNewLocation(window.location))return;let{type:t,id:n,root:r,scroll:s}=e.state||{},o=window.location.href;K.dispatchEvent(window,"phx:navigate",{detail:{href:o,patch:t==="patch",pop:!0}}),this.requestDOMUpdate(()=>{this.main.isConnected()&&t==="patch"&&n===this.main.id?this.main.pushLinkPatch(o,null,()=>{this.maybeScroll(s)}):this.replaceMain(o,null,()=>{r&&this.replaceRootHistory(),this.maybeScroll(s)})})},!1),window.addEventListener("click",e=>{let t=sh(e.target,_0),n=t&&t.getAttribute(_0);if(!n||!this.isConnected()||!this.main||K.wantsNewTab(e))return;let r=t.href instanceof SVGAnimatedString?t.href.baseVal:t.href,s=t.getAttribute(RJ);e.preventDefault(),e.stopImmediatePropagation(),this.pendingLink!==r&&this.requestDOMUpdate(()=>{if(n==="patch")this.pushHistoryPatch(r,s,t);else if(n==="redirect")this.historyRedirect(r,s);else throw new Error(`expected ${_0} to be "patch" or "redirect", got: ${n}`);let o=t.getAttribute(this.binding("click"));o&&this.requestDOMUpdate(()=>this.execJS(t,o,"click"))})},!1)}maybeScroll(i){typeof i=="number"&&requestAnimationFrame(()=>{window.scrollTo(0,i)})}dispatchEvent(i,e={}){K.dispatchEvent(window,`phx:${i}`,{detail:e})}dispatchEvents(i){i.forEach(([e,t])=>this.dispatchEvent(e,t))}withPageLoading(i,e){K.dispatchEvent(window,"phx:page-loading-start",{detail:i});let t=()=>K.dispatchEvent(window,"phx:page-loading-stop",{detail:i});return e?e(t):t}pushHistoryPatch(i,e,t){if(!this.isConnected()||!this.main.isMain())return us.redirect(i);this.withPageLoading({to:i,kind:"patch"},n=>{this.main.pushLinkPatch(i,t,r=>{this.historyPatch(i,e,r),n()})})}historyPatch(i,e,t=this.setPendingLink(i)){!this.commitPendingLink(t)||(us.pushState(e,{type:"patch",id:this.main.id},i),K.dispatchEvent(window,"phx:navigate",{detail:{patch:!0,href:i,pop:!1}}),this.registerNewLocation(window.location))}historyRedirect(i,e,t){if(!this.isConnected()||!this.main.isMain())return us.redirect(i,t);if(/^\/$|^\/[^\/]+.*$/.test(i)){let{protocol:r,host:s}=window.location;i=`${r}//${s}${i}`}let n=window.scrollY;this.withPageLoading({to:i,kind:"redirect"},r=>{this.replaceMain(i,t,s=>{s===this.linkRef&&(us.pushState(e,{type:"redirect",id:this.main.id,scroll:n},i),K.dispatchEvent(window,"phx:navigate",{detail:{href:i,patch:!1,pop:!1}}),this.registerNewLocation(window.location)),r()})})}replaceRootHistory(){us.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(i){let{pathname:e,search:t}=this.currentLocation;return e+t===i.pathname+i.search?!1:(this.currentLocation=Og(i),!0)}bindForms(){let i=0,e=!1;this.on("submit",t=>{let n=t.target.getAttribute(this.binding("submit")),r=t.target.getAttribute(this.binding("change"));!e&&r&&!n&&(e=!0,t.preventDefault(),this.withinOwners(t.target,s=>{s.disableForm(t.target),window.requestAnimationFrame(()=>{K.isUnloadableFormSubmit(t)&&this.unload(),t.target.submit()})}))},!0),this.on("submit",t=>{let n=t.target.getAttribute(this.binding("submit"));if(!n){K.isUnloadableFormSubmit(t)&&this.unload();return}t.preventDefault(),t.target.disabled=!0,this.withinOwners(t.target,r=>{vn.exec("submit",n,r,t.target,["push",{submitter:t.submitter}])})},!1);for(let t of["change","input"])this.on(t,n=>{let r=this.binding("change"),s=n.target,o=s.getAttribute(r),l=s.form&&s.form.getAttribute(r),u=o||l;if(!u||s.type==="number"&&s.validity&&s.validity.badInput)return;let f=o?s:s.form,g=i;i++;let{at:p,type:y}=K.private(s,"prev-iteration")||{};p===g-1&&t==="change"&&y==="input"||(K.putPrivate(s,"prev-iteration",{at:g,type:t}),this.debounce(s,n,t,()=>{this.withinOwners(f,_=>{K.putPrivate(s,A0,!0),K.isTextualInput(s)||this.setActiveElement(s),vn.exec("change",u,_,s,["push",{_target:n.target.name,dispatcher:f}])})}))},!1);this.on("reset",t=>{let n=t.target;K.resetForm(n,this.binding(Tg),this.binding(Eg));let r=Array.from(n.elements).find(s=>s.type==="reset");r&&window.requestAnimationFrame(()=>{r.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))})})}debounce(i,e,t,n){if(t==="blur"||t==="focusout")return n();let r=this.binding(DJ),s=this.binding(VJ),o=this.defaults.debounce.toString(),l=this.defaults.throttle.toString();this.withinOwners(i,u=>{let f=()=>!u.isDestroyed()&&document.body.contains(i);K.debounce(i,e,r,o,s,l,f,()=>{n()})})}silenceEvents(i){this.silenced=!0,i(),this.silenced=!1}on(i,e){window.addEventListener(i,t=>{this.silenced||e(t)})}},wX=class{constructor(){this.transitions=new Set,this.pendingOps=[]}reset(){this.transitions.forEach(i=>{clearTimeout(i),this.transitions.delete(i)}),this.flushPendingOps()}after(i){this.size()===0?i():this.pushPendingOp(i)}addTransition(i,e,t){e();let n=setTimeout(()=>{this.transitions.delete(n),t(),this.flushPendingOps()},i);this.transitions.add(n)}pushPendingOp(i){this.pendingOps.push(i)}size(){return this.transitions.size}flushPendingOps(){if(this.size()>0)return;let i=this.pendingOps.shift();i&&(i(),this.flushPendingOps())}};var Bg=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Go={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(i){return typeof console!="undefined"&&console.warn(i)},getWeek:function(i){var e=new Date(i.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var Ng={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(i){var e=i%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Fg=Ng;var Ji=function(i,e){return e===void 0&&(e=2),("000"+i).slice(e*-1)},Ln=function(i){return i===!0?1:0};function F0(i,e){var t;return function(){var n=this,r=arguments;clearTimeout(t),t=setTimeout(function(){return i.apply(n,r)},e)}}var jg=function(i){return i instanceof Array?i:[i]};function Xi(i,e,t){if(t===!0)return i.classList.add(e);i.classList.remove(e)}function xt(i,e,t){var n=window.document.createElement(i);return e=e||"",t=t||"",n.className=e,t!==void 0&&(n.textContent=t),n}function ch(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function j0(i,e){if(e(i))return i;if(i.parentNode)return j0(i.parentNode,e)}function uh(i,e){var t=xt("div","numInputWrapper"),n=xt("input","numInput "+i),r=xt("span","arrowUp"),s=xt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),e!==void 0)for(var o in e)n.setAttribute(o,e[o]);return t.appendChild(n),t.appendChild(r),t.appendChild(s),t}function Dn(i){try{if(typeof i.composedPath=="function"){var e=i.composedPath();return e[0]}return i.target}catch(t){return i.target}}var H0=function(){},dh=function(i,e,t){return t.months[e?"shorthand":"longhand"][i]},zR={D:H0,F:function(i,e,t){i.setMonth(t.months.longhand.indexOf(e))},G:function(i,e){i.setHours((i.getHours()>=12?12:0)+parseFloat(e))},H:function(i,e){i.setHours(parseFloat(e))},J:function(i,e){i.setDate(parseFloat(e))},K:function(i,e,t){i.setHours(i.getHours()%12+12*Ln(new RegExp(t.amPM[1],"i").test(e)))},M:function(i,e,t){i.setMonth(t.months.shorthand.indexOf(e))},S:function(i,e){i.setSeconds(parseFloat(e))},U:function(i,e){return new Date(parseFloat(e)*1e3)},W:function(i,e,t){var n=parseInt(e),r=new Date(i.getFullYear(),0,2+(n-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+t.firstDayOfWeek),r},Y:function(i,e){i.setFullYear(parseFloat(e))},Z:function(i,e){return new Date(e)},d:function(i,e){i.setDate(parseFloat(e))},h:function(i,e){i.setHours((i.getHours()>=12?12:0)+parseFloat(e))},i:function(i,e){i.setMinutes(parseFloat(e))},j:function(i,e){i.setDate(parseFloat(e))},l:H0,m:function(i,e){i.setMonth(parseFloat(e)-1)},n:function(i,e){i.setMonth(parseFloat(e)-1)},s:function(i,e){i.setSeconds(parseFloat(e))},u:function(i,e){return new Date(parseFloat(e))},w:H0,y:function(i,e){i.setFullYear(2e3+parseFloat(e))}},Ys={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Ac={Z:function(i){return i.toISOString()},D:function(i,e,t){return e.weekdays.shorthand[Ac.w(i,e,t)]},F:function(i,e,t){return dh(Ac.n(i,e,t)-1,!1,e)},G:function(i,e,t){return Ji(Ac.h(i,e,t))},H:function(i){return Ji(i.getHours())},J:function(i,e){return e.ordinal!==void 0?i.getDate()+e.ordinal(i.getDate()):i.getDate()},K:function(i,e){return e.amPM[Ln(i.getHours()>11)]},M:function(i,e){return dh(i.getMonth(),!0,e)},S:function(i){return Ji(i.getSeconds())},U:function(i){return i.getTime()/1e3},W:function(i,e,t){return t.getWeek(i)},Y:function(i){return Ji(i.getFullYear(),4)},d:function(i){return Ji(i.getDate())},h:function(i){return i.getHours()%12?i.getHours()%12:12},i:function(i){return Ji(i.getMinutes())},j:function(i){return i.getDate()},l:function(i,e){return e.weekdays.longhand[i.getDay()]},m:function(i){return Ji(i.getMonth()+1)},n:function(i){return i.getMonth()+1},s:function(i){return i.getSeconds()},u:function(i){return i.getTime()},w:function(i){return i.getDay()},y:function(i){return String(i.getFullYear()).substring(2)}};var z0=function(i){var e=i.config,t=e===void 0?Go:e,n=i.l10n,r=n===void 0?Ng:n,s=i.isMobile,o=s===void 0?!1:s;return function(l,u,f){var g=f||r;return t.formatDate!==void 0&&!o?t.formatDate(l,u,g):u.split("").map(function(p,y,_){return Ac[p]&&_[y-1]!=="\\"?Ac[p](l,g,t):p!=="\\"?p:""}).join("")}},Hg=function(i){var e=i.config,t=e===void 0?Go:e,n=i.l10n,r=n===void 0?Ng:n;return function(s,o,l,u){if(!(s!==0&&!s)){var f=u||r,g,p=s;if(s instanceof Date)g=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)g=new Date(s);else if(typeof s=="string"){var y=o||(t||Go).dateFormat,_=String(s).trim();if(_==="today")g=new Date,l=!0;else if(t&&t.parseDate)g=t.parseDate(s,y);else if(/Z$/.test(_)||/GMT$/.test(_))g=new Date(s);else{for(var C=void 0,E=[],P=0,M=0,O="";P<y.length;P++){var N=y[P],W=N==="\\",Z=y[P-1]==="\\"||W;if(Ys[N]&&!Z){O+=Ys[N];var U=new RegExp(O).exec(s);U&&(C=!0)&&E[N!=="Y"?"push":"unshift"]({fn:zR[N],val:U[++M]})}else W||(O+=".")}g=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),E.forEach(function(ie){var X=ie.fn,F=ie.val;return g=X(g,F,f)||g}),g=C?g:void 0}}if(!(g instanceof Date&&!isNaN(g.getTime()))){t.errorHandler(new Error("Invalid date provided: "+p));return}return l===!0&&g.setHours(0,0,0,0),g}}};function Vn(i,e,t){return t===void 0&&(t=!0),t!==!1?new Date(i.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):i.getTime()-e.getTime()}var UR=function(i,e,t){return i>Math.min(e,t)&&i<Math.max(e,t)},zg=function(i,e,t){return i*3600+e*60+t},WR=function(i){var e=Math.floor(i/3600),t=(i-e*3600)/60;return[e,t,i-e*3600-t*60]},qR={DAY:864e5};function Ug(i){var e=i.defaultHour,t=i.defaultMinute,n=i.defaultSeconds;if(i.minDate!==void 0){var r=i.minDate.getHours(),s=i.minDate.getMinutes(),o=i.minDate.getSeconds();e<r&&(e=r),e===r&&t<s&&(t=s),e===r&&t===s&&n<o&&(n=i.minDate.getSeconds())}if(i.maxDate!==void 0){var l=i.maxDate.getHours(),u=i.maxDate.getMinutes();e=Math.min(e,l),e===l&&(t=Math.min(u,t)),e===l&&t===u&&(n=i.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:n}}"use strict";typeof Object.assign!="function"&&(Object.assign=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!i)throw TypeError("Cannot convert undefined or null to object");for(var n=function(l){l&&Object.keys(l).forEach(function(u){return i[u]=l[u]})},r=0,s=e;r<s.length;r++){var o=s[r];n(o)}return i});var Qi=function(){return Qi=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Qi.apply(this,arguments)},$R=function(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var n=Array(i),r=0,e=0;e<t;e++)for(var s=arguments[e],o=0,l=s.length;o<l;o++,r++)n[r]=s[o];return n},yX=300;function _X(i,e){var t={config:Qi(Qi({},Go),vi.defaultConfig),l10n:Fg};t.parseDate=Hg({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=E,t._setHoursFromDate=y,t._positionCalendar=Rs,t.changeMonth=$,t.changeYear=ce,t.clear=se,t.close=_e,t.onMouseOver=rt,t._createElement=xt,t.createDay=U,t.destroy=nt,t.isEnabled=pe,t.jumpToDate=O,t.updateValue=St,t.open=Et,t.redraw=$u,t.set=Df,t.setDate=Ku,t.toggle=qb;function n(){t.utils={getDaysInMonth:function(S,I){return S===void 0&&(S=t.currentMonth),I===void 0&&(I=t.currentYear),S===1&&(I%4==0&&I%100!=0||I%400==0)?29:t.l10n.daysInMonth[S]}}}function r(){t.element=t.input=i,t.isOpen=!1,li(),mt(),Wb(),_a(),n(),t.isMobile||Z(),M(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&y(t.config.noCalendar?t.latestSelectedDateObj:void 0),St(!1)),l();var S=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&S&&Rs(),vt("onReady")}function s(){var S;return((S=t.calendarContainer)===null||S===void 0?void 0:S.getRootNode()).activeElement||document.activeElement}function o(S){return S.bind(t)}function l(){var S=t.config;S.weekNumbers===!1&&S.showMonths===1||S.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var I=(t.days.offsetWidth+1)*S.showMonths;t.daysContainer.style.width=I+"px",t.calendarContainer.style.width=I+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function u(S){if(t.selectedDates.length===0){var I=t.config.minDate===void 0||Vn(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),z=Ug(t.config);I.setHours(z.hours,z.minutes,z.seconds,I.getMilliseconds()),t.selectedDates=[I],t.latestSelectedDateObj=I}S!==void 0&&S.type!=="blur"&&An(S);var Y=t._input.value;p(),St(),t._input.value!==Y&&t._debouncedChange()}function f(S,I){return S%12+12*Ln(I===t.l10n.amPM[1])}function g(S){switch(S%24){case 0:case 12:return 12;default:return S%12}}function p(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var S=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,I=(parseInt(t.minuteElement.value,10)||0)%60,z=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(S=f(S,t.amPM.textContent));var Y=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Vn(t.latestSelectedDateObj,t.config.minDate,!0)===0,le=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Vn(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var ve=zg(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Ke=zg(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),Ae=zg(S,I,z);if(Ae>Ke&&Ae<ve){var Xe=WR(ve);S=Xe[0],I=Xe[1],z=Xe[2]}}else{if(le){var Se=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;S=Math.min(S,Se.getHours()),S===Se.getHours()&&(I=Math.min(I,Se.getMinutes())),I===Se.getMinutes()&&(z=Math.min(z,Se.getSeconds()))}if(Y){var Ve=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;S=Math.max(S,Ve.getHours()),S===Ve.getHours()&&I<Ve.getMinutes()&&(I=Ve.getMinutes()),I===Ve.getMinutes()&&(z=Math.max(z,Ve.getSeconds()))}}_(S,I,z)}}function y(S){var I=S||t.latestSelectedDateObj;I&&I instanceof Date&&_(I.getHours(),I.getMinutes(),I.getSeconds())}function _(S,I,z){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(S%24,I,z||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Ji(t.config.time_24hr?S:(12+S)%12+12*Ln(S%12==0)),t.minuteElement.value=Ji(I),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Ln(S>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Ji(z)))}function C(S){var I=Dn(S),z=parseInt(I.value)+(S.delta||0);(z/1e3>1||S.key==="Enter"&&!/[^\d]/.test(z.toString()))&&ce(z)}function E(S,I,z,Y){if(I instanceof Array)return I.forEach(function(le){return E(S,le,z,Y)});if(S instanceof Array)return S.forEach(function(le){return E(le,I,z,Y)});S.addEventListener(I,z,Y),t._handlers.push({remove:function(){return S.removeEventListener(I,z,Y)}})}function P(){vt("onChange")}function M(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(z){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+z+"]"),function(Y){return E(Y,"click",t[z])})}),t.isMobile){xa();return}var S=F0(ai,50);if(t._debouncedChange=F0(P,yX),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&E(t.daysContainer,"mouseover",function(z){t.config.mode==="range"&&rt(Dn(z))}),E(t._input,"keydown",ft),t.calendarContainer!==void 0&&E(t.calendarContainer,"keydown",ft),!t.config.inline&&!t.config.static&&E(window,"resize",S),window.ontouchstart!==void 0?E(window.document,"touchstart",ht):E(window.document,"mousedown",ht),E(window.document,"focus",ht,{capture:!0}),t.config.clickOpens===!0&&(E(t._input,"focus",t.open),E(t._input,"click",t.open)),t.daysContainer!==void 0&&(E(t.monthNav,"click",Bf),E(t.monthNav,["keyup","increment"],C),E(t.daysContainer,"click",Nl)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var I=function(z){return Dn(z).select()};E(t.timeContainer,["increment"],u),E(t.timeContainer,"blur",u,{capture:!0}),E(t.timeContainer,"click",N),E([t.hourElement,t.minuteElement],["focus","click"],I),t.secondElement!==void 0&&E(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&E(t.amPM,"click",function(z){u(z)})}t.config.allowInput&&E(t._input,"blur",He)}function O(S,I){var z=S!==void 0?t.parseDate(S):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),Y=t.currentYear,le=t.currentMonth;try{z!==void 0&&(t.currentYear=z.getFullYear(),t.currentMonth=z.getMonth())}catch(ve){ve.message="Invalid date supplied: "+z,t.config.errorHandler(ve)}I&&t.currentYear!==Y&&(vt("onYearChange"),ae()),I&&(t.currentYear!==Y||t.currentMonth!==le)&&vt("onMonthChange"),t.redraw()}function N(S){var I=Dn(S);~I.className.indexOf("arrow")&&W(S,I.classList.contains("arrowUp")?1:-1)}function W(S,I,z){var Y=S&&Dn(S),le=z||Y&&Y.parentNode&&Y.parentNode.firstChild,ve=Fl("increment");ve.delta=I,le&&le.dispatchEvent(ve)}function Z(){var S=window.document.createDocumentFragment();if(t.calendarContainer=xt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(S.appendChild(Je()),t.innerContainer=xt("div","flatpickr-innerContainer"),t.config.weekNumbers){var I=H(),z=I.weekWrapper,Y=I.weekNumbers;t.innerContainer.appendChild(z),t.weekNumbers=Y,t.weekWrapper=z}t.rContainer=xt("div","flatpickr-rContainer"),t.rContainer.appendChild(ke()),t.daysContainer||(t.daysContainer=xt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),Ee(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),S.appendChild(t.innerContainer)}t.config.enableTime&&S.appendChild(fe()),Xi(t.calendarContainer,"rangeMode",t.config.mode==="range"),Xi(t.calendarContainer,"animate",t.config.animate===!0),Xi(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(S);var le=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!le&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var ve=xt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(ve,t.element),ve.appendChild(t.element),t.altInput&&ve.appendChild(t.altInput),ve.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function U(S,I,z,Y){var le=pe(I,!0),ve=xt("span",S,I.getDate().toString());return ve.dateObj=I,ve.$i=Y,ve.setAttribute("aria-label",t.formatDate(I,t.config.ariaDateFormat)),S.indexOf("hidden")===-1&&Vn(I,t.now)===0&&(t.todayDateElem=ve,ve.classList.add("today"),ve.setAttribute("aria-current","date")),le?(ve.tabIndex=-1,Oe(I)&&(ve.classList.add("selected"),t.selectedDateElem=ve,t.config.mode==="range"&&(Xi(ve,"startRange",t.selectedDates[0]&&Vn(I,t.selectedDates[0],!0)===0),Xi(ve,"endRange",t.selectedDates[1]&&Vn(I,t.selectedDates[1],!0)===0),S==="nextMonthDay"&&ve.classList.add("inRange")))):ve.classList.add("flatpickr-disabled"),t.config.mode==="range"&&Zu(I)&&!Oe(I)&&ve.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&S!=="prevMonthDay"&&Y%7==6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(I)+"</span>"),vt("onDayCreate",ve),ve}function ie(S){S.focus(),t.config.mode==="range"&&rt(S)}function X(S){for(var I=S>0?0:t.config.showMonths-1,z=S>0?t.config.showMonths:-1,Y=I;Y!=z;Y+=S)for(var le=t.daysContainer.children[Y],ve=S>0?0:le.children.length-1,Ke=S>0?le.children.length:-1,Ae=ve;Ae!=Ke;Ae+=S){var Xe=le.children[Ae];if(Xe.className.indexOf("hidden")===-1&&pe(Xe.dateObj))return Xe}}function F(S,I){for(var z=S.className.indexOf("Month")===-1?S.dateObj.getMonth():t.currentMonth,Y=I>0?t.config.showMonths:-1,le=I>0?1:-1,ve=z-t.currentMonth;ve!=Y;ve+=le)for(var Ke=t.daysContainer.children[ve],Ae=z-t.currentMonth===ve?S.$i+I:I<0?Ke.children.length-1:0,Xe=Ke.children.length,Se=Ae;Se>=0&&Se<Xe&&Se!=(I>0?Xe:-1);Se+=le){var Ve=Ke.children[Se];if(Ve.className.indexOf("hidden")===-1&&pe(Ve.dateObj)&&Math.abs(S.$i-Se)>=Math.abs(I))return ie(Ve)}t.changeMonth(le),te(X(le),0)}function te(S,I){var z=s(),Y=be(z||document.body),le=S!==void 0?S:Y?z:t.selectedDateElem!==void 0&&be(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&be(t.todayDateElem)?t.todayDateElem:X(I>0?1:-1);le===void 0?t._input.focus():Y?F(le,I):ie(le)}function ye(S,I){for(var z=(new Date(S,I,1).getDay()-t.l10n.firstDayOfWeek+7)%7,Y=t.utils.getDaysInMonth((I-1+12)%12,S),le=t.utils.getDaysInMonth(I,S),ve=window.document.createDocumentFragment(),Ke=t.config.showMonths>1,Ae=Ke?"prevMonthDay hidden":"prevMonthDay",Xe=Ke?"nextMonthDay hidden":"nextMonthDay",Se=Y+1-z,Ve=0;Se<=Y;Se++,Ve++)ve.appendChild(U("flatpickr-day "+Ae,new Date(S,I-1,Se),Se,Ve));for(Se=1;Se<=le;Se++,Ve++)ve.appendChild(U("flatpickr-day",new Date(S,I,Se),Se,Ve));for(var At=le+1;At<=42-z&&(t.config.showMonths===1||Ve%7!=0);At++,Ve++)ve.appendChild(U("flatpickr-day "+Xe,new Date(S,I+1,At%le),At,Ve));var In=xt("div","dayContainer");return In.appendChild(ve),In}function Ee(){if(t.daysContainer!==void 0){ch(t.daysContainer),t.weekNumbers&&ch(t.weekNumbers);for(var S=document.createDocumentFragment(),I=0;I<t.config.showMonths;I++){var z=new Date(t.currentYear,t.currentMonth,1);z.setMonth(t.currentMonth+I),S.appendChild(ye(z.getFullYear(),z.getMonth()))}t.daysContainer.appendChild(S),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&rt()}}function ae(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var S=function(Y){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&Y<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&Y>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var I=0;I<12;I++)if(!!S(I)){var z=xt("option","flatpickr-monthDropdown-month");z.value=new Date(t.currentYear,I).getMonth().toString(),z.textContent=dh(I,t.config.shorthandCurrentMonth,t.l10n),z.tabIndex=-1,t.currentMonth===I&&(z.selected=!0),t.monthsDropdownContainer.appendChild(z)}}}function bt(){var S=xt("div","flatpickr-month"),I=window.document.createDocumentFragment(),z;t.config.showMonths>1||t.config.monthSelectorType==="static"?z=xt("span","cur-month"):(t.monthsDropdownContainer=xt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),E(t.monthsDropdownContainer,"change",function(Ke){var Ae=Dn(Ke),Xe=parseInt(Ae.value,10);t.changeMonth(Xe-t.currentMonth),vt("onMonthChange")}),ae(),z=t.monthsDropdownContainer);var Y=uh("cur-year",{tabindex:"-1"}),le=Y.getElementsByTagName("input")[0];le.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&le.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(le.setAttribute("max",t.config.maxDate.getFullYear().toString()),le.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var ve=xt("div","flatpickr-current-month");return ve.appendChild(z),ve.appendChild(Y),I.appendChild(ve),S.appendChild(I),{container:S,yearElement:le,monthElement:z}}function et(){ch(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var S=t.config.showMonths;S--;){var I=bt();t.yearElements.push(I.yearElement),t.monthElements.push(I.monthElement),t.monthNav.appendChild(I.container)}t.monthNav.appendChild(t.nextMonthNav)}function Je(){return t.monthNav=xt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=xt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=xt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,et(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(S){t.__hidePrevMonthArrow!==S&&(Xi(t.prevMonthNav,"flatpickr-disabled",S),t.__hidePrevMonthArrow=S)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(S){t.__hideNextMonthArrow!==S&&(Xi(t.nextMonthNav,"flatpickr-disabled",S),t.__hideNextMonthArrow=S)}}),t.currentYearElement=t.yearElements[0],Mi(),t.monthNav}function fe(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var S=Ug(t.config);t.timeContainer=xt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var I=xt("span","flatpickr-time-separator",":"),z=uh("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=z.getElementsByTagName("input")[0];var Y=uh("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=Y.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Ji(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?S.hours:g(S.hours)),t.minuteElement.value=Ji(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():S.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(z),t.timeContainer.appendChild(I),t.timeContainer.appendChild(Y),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var le=uh("flatpickr-second");t.secondElement=le.getElementsByTagName("input")[0],t.secondElement.value=Ji(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():S.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(xt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(le)}return t.config.time_24hr||(t.amPM=xt("span","flatpickr-am-pm",t.l10n.amPM[Ln((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function ke(){t.weekdayContainer?ch(t.weekdayContainer):t.weekdayContainer=xt("div","flatpickr-weekdays");for(var S=t.config.showMonths;S--;){var I=xt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(I)}return V(),t.weekdayContainer}function V(){if(!!t.weekdayContainer){var S=t.l10n.firstDayOfWeek,I=$R(t.l10n.weekdays.shorthand);S>0&&S<I.length&&(I=$R(I.splice(S,I.length),I.splice(0,S)));for(var z=t.config.showMonths;z--;)t.weekdayContainer.children[z].innerHTML=`
      <span class='flatpickr-weekday'>
        `+I.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function H(){t.calendarContainer.classList.add("hasWeeks");var S=xt("div","flatpickr-weekwrapper");S.appendChild(xt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var I=xt("div","flatpickr-weeks");return S.appendChild(I),{weekWrapper:S,weekNumbers:I}}function $(S,I){I===void 0&&(I=!0);var z=I?S:S-t.currentMonth;z<0&&t._hidePrevMonthArrow===!0||z>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=z,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,vt("onYearChange"),ae()),Ee(),vt("onMonthChange"),Mi())}function se(S,I){if(S===void 0&&(S=!0),I===void 0&&(I=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,I===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var z=Ug(t.config),Y=z.hours,le=z.minutes,ve=z.seconds;_(Y,le,ve)}t.redraw(),S&&vt("onChange")}function _e(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),vt("onClose")}function nt(){t.config!==void 0&&vt("onDestroy");for(var S=t._handlers.length;S--;)t._handlers[S].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var I=t.calendarContainer.parentNode;if(I.lastChild&&I.removeChild(I.lastChild),I.parentNode){for(;I.firstChild;)I.parentNode.insertBefore(I.firstChild,I);I.parentNode.removeChild(I)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(z){try{delete t[z]}catch(Y){}})}function Mt(S){return t.calendarContainer.contains(S)}function ht(S){if(t.isOpen&&!t.config.inline){var I=Dn(S),z=Mt(I),Y=I===t.input||I===t.altInput||t.element.contains(I)||S.path&&S.path.indexOf&&(~S.path.indexOf(t.input)||~S.path.indexOf(t.altInput)),le=!Y&&!z&&!Mt(S.relatedTarget),ve=!t.config.ignoredFocusElements.some(function(Ke){return Ke.contains(I)});le&&ve&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&u(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function ce(S){if(!(!S||t.config.minDate&&S<t.config.minDate.getFullYear()||t.config.maxDate&&S>t.config.maxDate.getFullYear())){var I=S,z=t.currentYear!==I;t.currentYear=I||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),z&&(t.redraw(),vt("onYearChange"),ae())}}function pe(S,I){var z;I===void 0&&(I=!0);var Y=t.parseDate(S,void 0,I);if(t.config.minDate&&Y&&Vn(Y,t.config.minDate,I!==void 0?I:!t.minDateHasTime)<0||t.config.maxDate&&Y&&Vn(Y,t.config.maxDate,I!==void 0?I:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(Y===void 0)return!1;for(var le=!!t.config.enable,ve=(z=t.config.enable)!==null&&z!==void 0?z:t.config.disable,Ke=0,Ae=void 0;Ke<ve.length;Ke++){if(Ae=ve[Ke],typeof Ae=="function"&&Ae(Y))return le;if(Ae instanceof Date&&Y!==void 0&&Ae.getTime()===Y.getTime())return le;if(typeof Ae=="string"){var Xe=t.parseDate(Ae,void 0,!0);return Xe&&Xe.getTime()===Y.getTime()?le:!le}else if(typeof Ae=="object"&&Y!==void 0&&Ae.from&&Ae.to&&Y.getTime()>=Ae.from.getTime()&&Y.getTime()<=Ae.to.getTime())return le}return!le}function be(S){return t.daysContainer!==void 0?S.className.indexOf("hidden")===-1&&S.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(S):!1}function He(S){var I=S.target===t._input,z=t._input.value.trimEnd()!==Bt();I&&z&&!(S.relatedTarget&&Mt(S.relatedTarget))&&t.setDate(t._input.value,!0,S.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function ft(S){var I=Dn(S),z=t.config.wrap?i.contains(I):I===t._input,Y=t.config.allowInput,le=t.isOpen&&(!Y||!z),ve=t.config.inline&&z&&!Y;if(S.keyCode===13&&z){if(Y)return t.setDate(t._input.value,!0,I===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),I.blur();t.open()}else if(Mt(I)||le||ve){var Ke=!!t.timeContainer&&t.timeContainer.contains(I);switch(S.keyCode){case 13:Ke?(S.preventDefault(),u(),Gu()):Nl(S);break;case 27:S.preventDefault(),Gu();break;case 8:case 46:z&&!t.config.allowInput&&(S.preventDefault(),t.clear());break;case 37:case 39:if(!Ke&&!z){S.preventDefault();var Ae=s();if(t.daysContainer!==void 0&&(Y===!1||Ae&&be(Ae))){var Xe=S.keyCode===39?1:-1;S.ctrlKey?(S.stopPropagation(),$(Xe),te(X(1),0)):te(void 0,Xe)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:S.preventDefault();var Se=S.keyCode===40?1:-1;t.daysContainer&&I.$i!==void 0||I===t.input||I===t.altInput?S.ctrlKey?(S.stopPropagation(),ce(t.currentYear-Se),te(X(1),0)):Ke||te(void 0,Se*7):I===t.currentYearElement?ce(t.currentYear-Se):t.config.enableTime&&(!Ke&&t.hourElement&&t.hourElement.focus(),u(S),t._debouncedChange());break;case 9:if(Ke){var Ve=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(ln){return ln}),At=Ve.indexOf(I);if(At!==-1){var In=Ve[At+(S.shiftKey?-1:1)];S.preventDefault(),(In||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(I)&&S.shiftKey&&(S.preventDefault(),t._input.focus());break;default:break}}if(t.amPM!==void 0&&I===t.amPM)switch(S.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],p(),St();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],p(),St();break}(z||Mt(I))&&vt("onKeyDown",S)}function rt(S,I){if(I===void 0&&(I="flatpickr-day"),!(t.selectedDates.length!==1||S&&(!S.classList.contains(I)||S.classList.contains("flatpickr-disabled")))){for(var z=S?S.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),Y=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),le=Math.min(z,t.selectedDates[0].getTime()),ve=Math.max(z,t.selectedDates[0].getTime()),Ke=!1,Ae=0,Xe=0,Se=le;Se<ve;Se+=qR.DAY)pe(new Date(Se),!0)||(Ke=Ke||Se>le&&Se<ve,Se<Y&&(!Ae||Se>Ae)?Ae=Se:Se>Y&&(!Xe||Se<Xe)&&(Xe=Se));var Ve=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+I));Ve.forEach(function(At){var In=At.dateObj,ln=In.getTime(),ka=Ae>0&&ln<Ae||Xe>0&&ln>Xe;if(ka){At.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Qr){At.classList.remove(Qr)});return}else if(Ke&&!ka)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Qr){At.classList.remove(Qr)}),S!==void 0&&(S.classList.add(z<=t.selectedDates[0].getTime()?"startRange":"endRange"),Y<z&&ln===Y?At.classList.add("startRange"):Y>z&&ln===Y&&At.classList.add("endRange"),ln>=Ae&&(Xe===0||ln<=Xe)&&UR(ln,Y,z)&&At.classList.add("inRange"))})}}function ai(){t.isOpen&&!t.config.static&&!t.config.inline&&Rs()}function Et(S,I){if(I===void 0&&(I=t._positionElement),t.isMobile===!0){if(S){S.preventDefault();var z=Dn(S);z&&z.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),vt("onOpen");return}else if(t._input.disabled||t.config.inline)return;var Y=t.isOpen;t.isOpen=!0,Y||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),vt("onOpen"),Rs(I)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(S===void 0||!t.timeContainer.contains(S.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function ot(S){return function(I){var z=t.config["_"+S+"Date"]=t.parseDate(I,t.config.dateFormat),Y=t.config["_"+(S==="min"?"max":"min")+"Date"];z!==void 0&&(t[S==="min"?"minDateHasTime":"maxDateHasTime"]=z.getHours()>0||z.getMinutes()>0||z.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(le){return pe(le)}),!t.selectedDates.length&&S==="min"&&y(z),St()),t.daysContainer&&($u(),z!==void 0?t.currentYearElement[S]=z.getFullYear().toString():t.currentYearElement.removeAttribute(S),t.currentYearElement.disabled=!!Y&&z!==void 0&&Y.getFullYear()===z.getFullYear())}}function li(){var S=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],I=Qi(Qi({},JSON.parse(JSON.stringify(i.dataset||{}))),e),z={};t.config.parseDate=I.parseDate,t.config.formatDate=I.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Ve){t.config._enable=Yu(Ve)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Ve){t.config._disable=Yu(Ve)}});var Y=I.mode==="time";if(!I.dateFormat&&(I.enableTime||Y)){var le=vi.defaultConfig.dateFormat||Go.dateFormat;z.dateFormat=I.noCalendar||Y?"H:i"+(I.enableSeconds?":S":""):le+" H:i"+(I.enableSeconds?":S":"")}if(I.altInput&&(I.enableTime||Y)&&!I.altFormat){var ve=vi.defaultConfig.altFormat||Go.altFormat;z.altFormat=I.noCalendar||Y?"h:i"+(I.enableSeconds?":S K":" K"):ve+(" h:i"+(I.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:ot("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:ot("max")});var Ke=function(Ve){return function(At){t.config[Ve==="min"?"_minTime":"_maxTime"]=t.parseDate(At,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Ke("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Ke("max")}),I.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,z,I);for(var Ae=0;Ae<S.length;Ae++)t.config[S[Ae]]=t.config[S[Ae]]===!0||t.config[S[Ae]]==="true";Bg.filter(function(Ve){return t.config[Ve]!==void 0}).forEach(function(Ve){t.config[Ve]=jg(t.config[Ve]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Ae=0;Ae<t.config.plugins.length;Ae++){var Xe=t.config.plugins[Ae](t)||{};for(var Se in Xe)Bg.indexOf(Se)>-1?t.config[Se]=jg(Xe[Se]).map(o).concat(t.config[Se]):typeof I[Se]=="undefined"&&(t.config[Se]=Xe[Se])}I.altInputClass||(t.config.altInputClass=Ps().className+" "+t.config.altInputClass),vt("onParseConfig")}function Ps(){return t.config.wrap?i.querySelector("[data-input]"):i}function mt(){typeof t.config.locale!="object"&&typeof vi.l10ns[t.config.locale]=="undefined"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Qi(Qi({},vi.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?vi.l10ns[t.config.locale]:void 0),Ys.D="("+t.l10n.weekdays.shorthand.join("|")+")",Ys.l="("+t.l10n.weekdays.longhand.join("|")+")",Ys.M="("+t.l10n.months.shorthand.join("|")+")",Ys.F="("+t.l10n.months.longhand.join("|")+")",Ys.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var S=Qi(Qi({},e),JSON.parse(JSON.stringify(i.dataset||{})));S.time_24hr===void 0&&vi.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=z0(t),t.parseDate=Hg({config:t.config,l10n:t.l10n})}function Rs(S){if(typeof t.config.position=="function")return void t.config.position(t,S);if(t.calendarContainer!==void 0){vt("onPreCalendarPosition");var I=S||t._positionElement,z=Array.prototype.reduce.call(t.calendarContainer.children,function(Yb,Ms){return Yb+Ms.offsetHeight},0),Y=t.calendarContainer.offsetWidth,le=t.config.position.split(" "),ve=le[0],Ke=le.length>1?le[1]:null,Ae=I.getBoundingClientRect(),Xe=window.innerHeight-Ae.bottom,Se=ve==="above"||ve!=="below"&&Xe<z&&Ae.top>z,Ve=window.pageYOffset+Ae.top+(Se?-z-2:I.offsetHeight+2);if(Xi(t.calendarContainer,"arrowTop",!Se),Xi(t.calendarContainer,"arrowBottom",Se),!t.config.inline){var At=window.pageXOffset+Ae.left,In=!1,ln=!1;Ke==="center"?(At-=(Y-Ae.width)/2,In=!0):Ke==="right"&&(At-=Y-Ae.width,ln=!0),Xi(t.calendarContainer,"arrowLeft",!In&&!ln),Xi(t.calendarContainer,"arrowCenter",In),Xi(t.calendarContainer,"arrowRight",ln);var ka=window.document.body.offsetWidth-(window.pageXOffset+Ae.right),Qr=At+Y>window.document.body.offsetWidth,$b=ka+Y>window.document.body.offsetWidth;if(Xi(t.calendarContainer,"rightMost",Qr),!t.config.static)if(t.calendarContainer.style.top=Ve+"px",!Qr)t.calendarContainer.style.left=At+"px",t.calendarContainer.style.right="auto";else if(!$b)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=ka+"px";else{var Ca=Ub();if(Ca===void 0)return;var Co=window.document.body.offsetWidth,Gb=Math.max(0,Co/2-Y/2),Kb=".flatpickr-calendar.centerMost:before",jl=".flatpickr-calendar.centerMost:after",Ju=Ca.cssRules.length,To="{left:"+Ae.left+"px;right:auto;}";Xi(t.calendarContainer,"rightMost",!1),Xi(t.calendarContainer,"centerMost",!0),Ca.insertRule(Kb+","+jl+To,Ju),t.calendarContainer.style.left=Gb+"px",t.calendarContainer.style.right="auto"}}}}function Ub(){for(var S=null,I=0;I<document.styleSheets.length;I++){var z=document.styleSheets[I];if(!!z.cssRules){try{z.cssRules}catch(Y){continue}S=z;break}}return S!=null?S:Lf()}function Lf(){var S=document.createElement("style");return document.head.appendChild(S),S.sheet}function $u(){t.config.noCalendar||t.isMobile||(ae(),Mi(),Ee())}function Gu(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function Nl(S){S.preventDefault(),S.stopPropagation();var I=function(Ve){return Ve.classList&&Ve.classList.contains("flatpickr-day")&&!Ve.classList.contains("flatpickr-disabled")&&!Ve.classList.contains("notAllowed")},z=j0(Dn(S),I);if(z!==void 0){var Y=z,le=t.latestSelectedDateObj=new Date(Y.dateObj.getTime()),ve=(le.getMonth()<t.currentMonth||le.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=Y,t.config.mode==="single")t.selectedDates=[le];else if(t.config.mode==="multiple"){var Ke=Oe(le);Ke?t.selectedDates.splice(parseInt(Ke),1):t.selectedDates.push(le)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=le,t.selectedDates.push(le),Vn(le,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Ve,At){return Ve.getTime()-At.getTime()}));if(p(),ve){var Ae=t.currentYear!==le.getFullYear();t.currentYear=le.getFullYear(),t.currentMonth=le.getMonth(),Ae&&(vt("onYearChange"),ae()),vt("onMonthChange")}if(Mi(),Ee(),St(),!ve&&t.config.mode!=="range"&&t.config.showMonths===1?ie(Y):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Xe=t.config.mode==="single"&&!t.config.enableTime,Se=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Xe||Se)&&Gu()}P()}}var Os={locale:[mt,V],showMonths:[et,l,ke],minDate:[O],maxDate:[O],positionElement:[ko],clickOpens:[function(){t.config.clickOpens===!0?(E(t._input,"focus",t.open),E(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function Df(S,I){if(S!==null&&typeof S=="object"){Object.assign(t.config,S);for(var z in S)Os[z]!==void 0&&Os[z].forEach(function(Y){return Y()})}else t.config[S]=I,Os[S]!==void 0?Os[S].forEach(function(Y){return Y()}):Bg.indexOf(S)>-1&&(t.config[S]=jg(I));t.redraw(),St(!0)}function Vf(S,I){var z=[];if(S instanceof Array)z=S.map(function(Y){return t.parseDate(Y,I)});else if(S instanceof Date||typeof S=="number")z=[t.parseDate(S,I)];else if(typeof S=="string")switch(t.config.mode){case"single":case"time":z=[t.parseDate(S,I)];break;case"multiple":z=S.split(t.config.conjunction).map(function(Y){return t.parseDate(Y,I)});break;case"range":z=S.split(t.l10n.rangeSeparator).map(function(Y){return t.parseDate(Y,I)});break;default:break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(S)));t.selectedDates=t.config.allowInvalidPreload?z:z.filter(function(Y){return Y instanceof Date&&pe(Y,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(Y,le){return Y.getTime()-le.getTime()})}function Ku(S,I,z){if(I===void 0&&(I=!1),z===void 0&&(z=t.config.dateFormat),S!==0&&!S||S instanceof Array&&S.length===0)return t.clear(I);Vf(S,z),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),O(void 0,I),y(),t.selectedDates.length===0&&t.clear(!1),St(I),I&&vt("onChange")}function Yu(S){return S.slice().map(function(I){return typeof I=="string"||typeof I=="number"||I instanceof Date?t.parseDate(I,void 0,!0):I&&typeof I=="object"&&I.from&&I.to?{from:t.parseDate(I.from,void 0),to:t.parseDate(I.to,void 0)}:I}).filter(function(I){return I})}function _a(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var S=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);S&&Vf(S,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Wb(){if(t.input=Ps(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=xt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),ko()}function ko(){t._positionElement=t.config.positionElement||t._input}function xa(){var S=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=xt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=S,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=S==="datetime-local"?"Y-m-d\\TH:i:S":S==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch(I){}E(t.mobileInput,"change",function(I){t.setDate(Dn(I).value,!1,t.mobileFormatStr),vt("onChange"),vt("onClose")})}function qb(S){if(t.isOpen===!0)return t.close();t.open(S)}function vt(S,I){if(t.config!==void 0){var z=t.config[S];if(z!==void 0&&z.length>0)for(var Y=0;z[Y]&&Y<z.length;Y++)z[Y](t.selectedDates,t.input.value,t,I);S==="onChange"&&(t.input.dispatchEvent(Fl("change")),t.input.dispatchEvent(Fl("input")))}}function Fl(S){var I=document.createEvent("Event");return I.initEvent(S,!0,!0),I}function Oe(S){for(var I=0;I<t.selectedDates.length;I++){var z=t.selectedDates[I];if(z instanceof Date&&Vn(z,S)===0)return""+I}return!1}function Zu(S){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Vn(S,t.selectedDates[0])>=0&&Vn(S,t.selectedDates[1])<=0}function Mi(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(S,I){var z=new Date(t.currentYear,t.currentMonth,1);z.setMonth(t.currentMonth+I),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[I].textContent=dh(z.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=z.getMonth().toString(),S.value=z.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function Bt(S){var I=S||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(z){return t.formatDate(z,I)}).filter(function(z,Y,le){return t.config.mode!=="range"||t.config.enableTime||le.indexOf(z)===Y}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function St(S){S===void 0&&(S=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Bt(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Bt(t.config.altFormat)),S!==!1&&vt("onValueUpdate")}function Bf(S){var I=Dn(S),z=t.prevMonthNav.contains(I),Y=t.nextMonthNav.contains(I);z||Y?$(z?-1:1):t.yearElements.indexOf(I)>=0?I.select():I.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):I.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function An(S){S.preventDefault();var I=S.type==="keydown",z=Dn(S),Y=z;t.amPM!==void 0&&z===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Ln(t.amPM.textContent===t.l10n.amPM[0])]);var le=parseFloat(Y.getAttribute("min")),ve=parseFloat(Y.getAttribute("max")),Ke=parseFloat(Y.getAttribute("step")),Ae=parseInt(Y.value,10),Xe=S.delta||(I?S.which===38?1:-1:0),Se=Ae+Ke*Xe;if(typeof Y.value!="undefined"&&Y.value.length===2){var Ve=Y===t.hourElement,At=Y===t.minuteElement;Se<le?(Se=ve+Se+Ln(!Ve)+(Ln(Ve)&&Ln(!t.amPM)),At&&W(void 0,-1,t.hourElement)):Se>ve&&(Se=Y===t.hourElement?Se-ve-Ln(!t.amPM):le,At&&W(void 0,1,t.hourElement)),t.amPM&&Ve&&(Ke===1?Se+Ae===23:Math.abs(Se-Ae)>Ke)&&(t.amPM.textContent=t.l10n.amPM[Ln(t.amPM.textContent===t.l10n.amPM[0])]),Y.value=Ji(Se)}}return r(),t}function Ic(i,e){for(var t=Array.prototype.slice.call(i).filter(function(o){return o instanceof HTMLElement}),n=[],r=0;r<t.length;r++){var s=t[r];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=_X(s,e||{}),n.push(s._flatpickr)}catch(o){console.error(o)}}return n.length===1?n[0]:n}typeof HTMLElement!="undefined"&&typeof HTMLCollection!="undefined"&&typeof NodeList!="undefined"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(i){return Ic(this,i)},HTMLElement.prototype.flatpickr=function(i){return Ic([this],i)});var vi=function(i,e){return typeof i=="string"?Ic(window.document.querySelectorAll(i),e):i instanceof Node?Ic([i],e):Ic(i,e)};vi.defaultConfig={};vi.l10ns={en:Qi({},Fg),default:Qi({},Fg)};vi.localize=function(i){vi.l10ns.default=Qi(Qi({},vi.l10ns.default),i)};vi.setDefaults=function(i){vi.defaultConfig=Qi(Qi({},vi.defaultConfig),i)};vi.parseDate=Hg({});vi.formatDate=z0({});vi.compareDates=Vn;typeof jQuery!="undefined"&&typeof jQuery.fn!="undefined"&&(jQuery.fn.flatpickr=function(i){return Ic(this,i)});Date.prototype.fp_incr=function(i){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof i=="string"?parseInt(i,10):i))};typeof window!="undefined"&&(window.flatpickr=vi);var GR=vi;var ok=Vo(KR()),ak=Vo(JR());var CX=typeof global=="object"&&global&&global.Object===Object&&global,Wg=CX;var TX=typeof self=="object"&&self&&self.Object===Object&&self,EX=Wg||TX||Function("return this")(),ti=EX;var SX=ti.Symbol,wn=SX;var XR=Object.prototype,AX=XR.hasOwnProperty,IX=XR.toString,fh=wn?wn.toStringTag:void 0;function PX(i){var e=AX.call(i,fh),t=i[fh];try{i[fh]=void 0;var n=!0}catch(s){}var r=IX.call(i);return n&&(e?i[fh]=t:delete i[fh]),r}var QR=PX;var RX=Object.prototype,OX=RX.toString;function MX(i){return OX.call(i)}var eO=MX;var LX="[object Null]",DX="[object Undefined]",tO=wn?wn.toStringTag:void 0;function VX(i){return i==null?i===void 0?DX:LX:tO&&tO in Object(i)?QR(i):eO(i)}var yn=VX;function BX(i){return i!=null&&typeof i=="object"}var Zt=BX;var NX="[object Symbol]";function FX(i){return typeof i=="symbol"||Zt(i)&&yn(i)==NX}var Ko=FX;function jX(i,e){for(var t=-1,n=i==null?0:i.length,r=Array(n);++t<n;)r[t]=e(i[t],t,i);return r}var iO=jX;var HX=Array.isArray,qt=HX;var zX=1/0,nO=wn?wn.prototype:void 0,rO=nO?nO.toString:void 0;function sO(i){if(typeof i=="string")return i;if(qt(i))return iO(i,sO)+"";if(Ko(i))return rO?rO.call(i):"";var e=i+"";return e=="0"&&1/i==-zX?"-0":e}var oO=sO;var UX=/\s/;function WX(i){for(var e=i.length;e--&&UX.test(i.charAt(e)););return e}var aO=WX;var qX=/^\s+/;function $X(i){return i&&i.slice(0,aO(i)+1).replace(qX,"")}var lO=$X;function GX(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var it=GX;var cO=0/0,KX=/^[-+]0x[0-9a-f]+$/i,YX=/^0b[01]+$/i,ZX=/^0o[0-7]+$/i,JX=parseInt;function XX(i){if(typeof i=="number")return i;if(Ko(i))return cO;if(it(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=it(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=lO(i);var t=YX.test(i);return t||ZX.test(i)?JX(i.slice(2),t?2:8):KX.test(i)?cO:+i}var W0=XX;function QX(i){return i}var Pc=QX;var eQ="[object AsyncFunction]",tQ="[object Function]",iQ="[object GeneratorFunction]",nQ="[object Proxy]";function rQ(i){if(!it(i))return!1;var e=yn(i);return e==tQ||e==iQ||e==eQ||e==nQ}var Jn=rQ;var sQ=ti["__core-js_shared__"],qg=sQ;var uO=function(){var i=/[^.]+$/.exec(qg&&qg.keys&&qg.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function oQ(i){return!!uO&&uO in i}var dO=oQ;var aQ=Function.prototype,lQ=aQ.toString;function cQ(i){if(i!=null){try{return lQ.call(i)}catch(e){}try{return i+""}catch(e){}}return""}var Zs=cQ;var uQ=/[\\^$.*+?()[\]{}|]/g,dQ=/^\[object .+?Constructor\]$/,hQ=Function.prototype,fQ=Object.prototype,mQ=hQ.toString,gQ=fQ.hasOwnProperty,pQ=RegExp("^"+mQ.call(gQ).replace(uQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bQ(i){if(!it(i)||dO(i))return!1;var e=Jn(i)?pQ:dQ;return e.test(Zs(i))}var hO=bQ;function vQ(i,e){return i==null?void 0:i[e]}var fO=vQ;function wQ(i,e){var t=fO(i,e);return hO(t)?t:void 0}var Bn=wQ;var yQ=Bn(ti,"WeakMap"),$g=yQ;var mO=Object.create,_Q=function(){function i(){}return function(e){if(!it(e))return{};if(mO)return mO(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),gO=_Q;function xQ(i,e,t){switch(t.length){case 0:return i.call(e);case 1:return i.call(e,t[0]);case 2:return i.call(e,t[0],t[1]);case 3:return i.call(e,t[0],t[1],t[2])}return i.apply(e,t)}var pO=xQ;function kQ(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var Gg=kQ;var CQ=800,TQ=16,EQ=Date.now;function SQ(i){var e=0,t=0;return function(){var n=EQ(),r=TQ-(n-t);if(t=n,r>0){if(++e>=CQ)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}var bO=SQ;function AQ(i){return function(){return i}}var vO=AQ;var IQ=function(){try{var i=Bn(Object,"defineProperty");return i({},"",{}),i}catch(e){}}(),Rc=IQ;var PQ=Rc?function(i,e){return Rc(i,"toString",{configurable:!0,enumerable:!1,value:vO(e),writable:!0})}:Pc,wO=PQ;var RQ=bO(wO),yO=RQ;function OQ(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var _O=OQ;var MQ=9007199254740991,LQ=/^(?:0|[1-9]\d*)$/;function DQ(i,e){var t=typeof i;return e=e==null?MQ:e,!!e&&(t=="number"||t!="symbol"&&LQ.test(i))&&i>-1&&i%1==0&&i<e}var Yo=DQ;function VQ(i,e,t){e=="__proto__"&&Rc?Rc(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var Zo=VQ;function BQ(i,e){return i===e||i!==i&&e!==e}var ds=BQ;var NQ=Object.prototype,FQ=NQ.hasOwnProperty;function jQ(i,e,t){var n=i[e];(!(FQ.call(i,e)&&ds(n,t))||t===void 0&&!(e in i))&&Zo(i,e,t)}var Oc=jQ;function HQ(i,e,t,n){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var l=e[s],u=n?n(t[l],i[l],l,t,i):void 0;u===void 0&&(u=i[l]),r?Zo(t,l,u):Oc(t,l,u)}return t}var pr=HQ;var xO=Math.max;function zQ(i,e,t){return e=xO(e===void 0?i.length-1:e,0),function(){for(var n=arguments,r=-1,s=xO(n.length-e,0),o=Array(s);++r<s;)o[r]=n[e+r];r=-1;for(var l=Array(e+1);++r<e;)l[r]=n[r];return l[e]=t(o),pO(i,this,l)}}var kO=zQ;function UQ(i,e){return yO(kO(i,e,Pc),i+"")}var CO=UQ;var WQ=9007199254740991;function qQ(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=WQ}var Mc=qQ;function $Q(i){return i!=null&&Mc(i.length)&&!Jn(i)}var Jo=$Q;function GQ(i,e,t){if(!it(t))return!1;var n=typeof e;return(n=="number"?Jo(t)&&Yo(e,t.length):n=="string"&&e in t)?ds(t[e],i):!1}var TO=GQ;function KQ(i){return CO(function(e,t){var n=-1,r=t.length,s=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(s=i.length>3&&typeof s=="function"?(r--,s):void 0,o&&TO(t[0],t[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++n<r;){var l=t[n];l&&i(e,l,n,s)}return e})}var Lc=KQ;var YQ=Object.prototype;function ZQ(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||YQ;return i===t}var Dc=ZQ;function JQ(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var EO=JQ;var XQ="[object Arguments]";function QQ(i){return Zt(i)&&yn(i)==XQ}var q0=QQ;var SO=Object.prototype,eee=SO.hasOwnProperty,tee=SO.propertyIsEnumerable,iee=q0(function(){return arguments}())?q0:function(i){return Zt(i)&&eee.call(i,"callee")&&!tee.call(i,"callee")},Xa=iee;function nee(){return!1}var AO=nee;var IO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,PO=IO&&typeof module=="object"&&module&&!module.nodeType&&module,ree=PO&&PO.exports===IO,RO=ree?ti.Buffer:void 0,see=RO?RO.isBuffer:void 0,oee=see||AO,Js=oee;var aee="[object Arguments]",lee="[object Array]",cee="[object Boolean]",uee="[object Date]",dee="[object Error]",hee="[object Function]",fee="[object Map]",mee="[object Number]",gee="[object Object]",pee="[object RegExp]",bee="[object Set]",vee="[object String]",wee="[object WeakMap]",yee="[object ArrayBuffer]",_ee="[object DataView]",xee="[object Float32Array]",kee="[object Float64Array]",Cee="[object Int8Array]",Tee="[object Int16Array]",Eee="[object Int32Array]",See="[object Uint8Array]",Aee="[object Uint8ClampedArray]",Iee="[object Uint16Array]",Pee="[object Uint32Array]",Ft={};Ft[xee]=Ft[kee]=Ft[Cee]=Ft[Tee]=Ft[Eee]=Ft[See]=Ft[Aee]=Ft[Iee]=Ft[Pee]=!0;Ft[aee]=Ft[lee]=Ft[yee]=Ft[cee]=Ft[_ee]=Ft[uee]=Ft[dee]=Ft[hee]=Ft[fee]=Ft[mee]=Ft[gee]=Ft[pee]=Ft[bee]=Ft[vee]=Ft[wee]=!1;function Ree(i){return Zt(i)&&Mc(i.length)&&!!Ft[yn(i)]}var OO=Ree;function Oee(i){return function(e){return i(e)}}var Vc=Oee;var MO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mh=MO&&typeof module=="object"&&module&&!module.nodeType&&module,Mee=mh&&mh.exports===MO,$0=Mee&&Wg.process,Lee=function(){try{var i=mh&&mh.require&&mh.require("util").types;return i||$0&&$0.binding&&$0.binding("util")}catch(e){}}(),Xs=Lee;var LO=Xs&&Xs.isTypedArray,Dee=LO?Vc(LO):OO,Bc=Dee;var Vee=Object.prototype,Bee=Vee.hasOwnProperty;function Nee(i,e){var t=qt(i),n=!t&&Xa(i),r=!t&&!n&&Js(i),s=!t&&!n&&!r&&Bc(i),o=t||n||r||s,l=o?EO(i.length,String):[],u=l.length;for(var f in i)(e||Bee.call(i,f))&&!(o&&(f=="length"||r&&(f=="offset"||f=="parent")||s&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Yo(f,u)))&&l.push(f);return l}var Kg=Nee;function Fee(i,e){return function(t){return i(e(t))}}var Yg=Fee;var jee=Yg(Object.keys,Object),DO=jee;var Hee=Object.prototype,zee=Hee.hasOwnProperty;function Uee(i){if(!Dc(i))return DO(i);var e=[];for(var t in Object(i))zee.call(i,t)&&t!="constructor"&&e.push(t);return e}var VO=Uee;function Wee(i){return Jo(i)?Kg(i):VO(i)}var hs=Wee;function qee(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var BO=qee;var $ee=Object.prototype,Gee=$ee.hasOwnProperty;function Kee(i){if(!it(i))return BO(i);var e=Dc(i),t=[];for(var n in i)n=="constructor"&&(e||!Gee.call(i,n))||t.push(n);return t}var NO=Kee;function Yee(i){return Jo(i)?Kg(i,!0):NO(i)}var br=Yee;var Zee=Lc(function(i,e){pr(e,br(e),i)}),Nc=Zee;var Jee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xee=/^\w*$/;function Qee(i,e){if(qt(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||Ko(i)?!0:Xee.test(i)||!Jee.test(i)||e!=null&&i in Object(e)}var Fc=Qee;var ete=Bn(Object,"create"),Qs=ete;function tte(){this.__data__=Qs?Qs(null):{},this.size=0}var FO=tte;function ite(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var jO=ite;var nte="__lodash_hash_undefined__",rte=Object.prototype,ste=rte.hasOwnProperty;function ote(i){var e=this.__data__;if(Qs){var t=e[i];return t===nte?void 0:t}return ste.call(e,i)?e[i]:void 0}var HO=ote;var ate=Object.prototype,lte=ate.hasOwnProperty;function cte(i){var e=this.__data__;return Qs?e[i]!==void 0:lte.call(e,i)}var zO=cte;var ute="__lodash_hash_undefined__";function dte(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=Qs&&e===void 0?ute:e,this}var UO=dte;function jc(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}jc.prototype.clear=FO;jc.prototype.delete=jO;jc.prototype.get=HO;jc.prototype.has=zO;jc.prototype.set=UO;var G0=jc;function hte(){this.__data__=[],this.size=0}var WO=hte;function fte(i,e){for(var t=i.length;t--;)if(ds(i[t][0],e))return t;return-1}var Xo=fte;var mte=Array.prototype,gte=mte.splice;function pte(i){var e=this.__data__,t=Xo(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():gte.call(e,t,1),--this.size,!0}var qO=pte;function bte(i){var e=this.__data__,t=Xo(e,i);return t<0?void 0:e[t][1]}var $O=bte;function vte(i){return Xo(this.__data__,i)>-1}var GO=vte;function wte(i,e){var t=this.__data__,n=Xo(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var KO=wte;function Hc(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Hc.prototype.clear=WO;Hc.prototype.delete=qO;Hc.prototype.get=$O;Hc.prototype.has=GO;Hc.prototype.set=KO;var Qo=Hc;var yte=Bn(ti,"Map"),ea=yte;function _te(){this.size=0,this.__data__={hash:new G0,map:new(ea||Qo),string:new G0}}var YO=_te;function xte(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var ZO=xte;function kte(i,e){var t=i.__data__;return ZO(e)?t[typeof e=="string"?"string":"hash"]:t.map}var ta=kte;function Cte(i){var e=ta(this,i).delete(i);return this.size-=e?1:0,e}var JO=Cte;function Tte(i){return ta(this,i).get(i)}var XO=Tte;function Ete(i){return ta(this,i).has(i)}var QO=Ete;function Ste(i,e){var t=ta(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var e3=Ste;function zc(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}zc.prototype.clear=YO;zc.prototype.delete=JO;zc.prototype.get=XO;zc.prototype.has=QO;zc.prototype.set=e3;var Qa=zc;var Ate="Expected a function";function K0(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(Ate);var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],s=t.cache;if(s.has(r))return s.get(r);var o=i.apply(this,n);return t.cache=s.set(r,o)||s,o};return t.cache=new(K0.Cache||Qa),t}K0.Cache=Qa;var t3=K0;var Ite=500;function Pte(i){var e=t3(i,function(n){return t.size===Ite&&t.clear(),n}),t=e.cache;return e}var i3=Pte;var Rte=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ote=/\\(\\)?/g,Mte=i3(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(Rte,function(t,n,r,s){e.push(r?s.replace(Ote,"$1"):n||t)}),e}),n3=Mte;function Lte(i){return i==null?"":oO(i)}var fs=Lte;function Dte(i,e){return qt(i)?i:Fc(i,e)?[i]:n3(fs(i))}var ia=Dte;var Vte=1/0;function Bte(i){if(typeof i=="string"||Ko(i))return i;var e=i+"";return e=="0"&&1/i==-Vte?"-0":e}var vr=Bte;function Nte(i,e){e=ia(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[vr(e[t++])];return t&&t==n?i:void 0}var Uc=Nte;function Fte(i,e,t){var n=i==null?void 0:Uc(i,e);return n===void 0?t:n}var na=Fte;function jte(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var Zg=jte;var Hte=Yg(Object.getPrototypeOf,Object),Wc=Hte;var zte="[object Object]",Ute=Function.prototype,Wte=Object.prototype,r3=Ute.toString,qte=Wte.hasOwnProperty,$te=r3.call(Object);function Gte(i){if(!Zt(i)||yn(i)!=zte)return!1;var e=Wc(i);if(e===null)return!0;var t=qte.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&r3.call(t)==$te}var fi=Gte;function Kte(i,e,t){var n=-1,r=i.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++n<r;)s[n]=i[n+e];return s}var Jg=Kte;function Yte(i,e,t){var n=i.length;return t=t===void 0?n:t,!e&&t>=n?i:Jg(i,e,t)}var s3=Yte;var Zte="\\ud800-\\udfff",Jte="\\u0300-\\u036f",Xte="\\ufe20-\\ufe2f",Qte="\\u20d0-\\u20ff",eie=Jte+Xte+Qte,tie="\\ufe0e\\ufe0f",iie="\\u200d",nie=RegExp("["+iie+Zte+eie+tie+"]");function rie(i){return nie.test(i)}var Xg=rie;function sie(i){return i.split("")}var o3=sie;var a3="\\ud800-\\udfff",oie="\\u0300-\\u036f",aie="\\ufe20-\\ufe2f",lie="\\u20d0-\\u20ff",cie=oie+aie+lie,uie="\\ufe0e\\ufe0f",die="["+a3+"]",Y0="["+cie+"]",Z0="\\ud83c[\\udffb-\\udfff]",hie="(?:"+Y0+"|"+Z0+")",l3="[^"+a3+"]",c3="(?:\\ud83c[\\udde6-\\uddff]){2}",u3="[\\ud800-\\udbff][\\udc00-\\udfff]",fie="\\u200d",d3=hie+"?",h3="["+uie+"]?",mie="(?:"+fie+"(?:"+[l3,c3,u3].join("|")+")"+h3+d3+")*",gie=h3+d3+mie,pie="(?:"+[l3+Y0+"?",Y0,c3,u3,die].join("|")+")",bie=RegExp(Z0+"(?="+Z0+")|"+pie+gie,"g");function vie(i){return i.match(bie)||[]}var f3=vie;function wie(i){return Xg(i)?f3(i):o3(i)}var m3=wie;function yie(i){return function(e){e=fs(e);var t=Xg(e)?m3(e):void 0,n=t?t[0]:e.charAt(0),r=t?s3(t,1).join(""):e.slice(1);return n[i]()+r}}var g3=yie;var _ie=g3("toUpperCase"),gh=_ie;function xie(i,e,t,n){var r=-1,s=i==null?0:i.length;for(n&&s&&(t=i[++r]);++r<s;)t=e(t,i[r],r,i);return t}var p3=xie;function kie(i){return function(e){return i==null?void 0:i[e]}}var b3=kie;var Cie={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Tie=b3(Cie),v3=Tie;var Eie=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Sie="\\u0300-\\u036f",Aie="\\ufe20-\\ufe2f",Iie="\\u20d0-\\u20ff",Pie=Sie+Aie+Iie,Rie="["+Pie+"]",Oie=RegExp(Rie,"g");function Mie(i){return i=fs(i),i&&i.replace(Eie,v3).replace(Oie,"")}var w3=Mie;var Lie=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Die(i){return i.match(Lie)||[]}var y3=Die;var Vie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Bie(i){return Vie.test(i)}var _3=Bie;var x3="\\ud800-\\udfff",Nie="\\u0300-\\u036f",Fie="\\ufe20-\\ufe2f",jie="\\u20d0-\\u20ff",Hie=Nie+Fie+jie,k3="\\u2700-\\u27bf",C3="a-z\\xdf-\\xf6\\xf8-\\xff",zie="\\xac\\xb1\\xd7\\xf7",Uie="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Wie="\\u2000-\\u206f",qie=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",T3="A-Z\\xc0-\\xd6\\xd8-\\xde",$ie="\\ufe0e\\ufe0f",E3=zie+Uie+Wie+qie,S3="['\u2019]",A3="["+E3+"]",Gie="["+Hie+"]",I3="\\d+",Kie="["+k3+"]",P3="["+C3+"]",R3="[^"+x3+E3+I3+k3+C3+T3+"]",Yie="\\ud83c[\\udffb-\\udfff]",Zie="(?:"+Gie+"|"+Yie+")",Jie="[^"+x3+"]",O3="(?:\\ud83c[\\udde6-\\uddff]){2}",M3="[\\ud800-\\udbff][\\udc00-\\udfff]",qc="["+T3+"]",Xie="\\u200d",L3="(?:"+P3+"|"+R3+")",Qie="(?:"+qc+"|"+R3+")",D3="(?:"+S3+"(?:d|ll|m|re|s|t|ve))?",V3="(?:"+S3+"(?:D|LL|M|RE|S|T|VE))?",B3=Zie+"?",N3="["+$ie+"]?",ene="(?:"+Xie+"(?:"+[Jie,O3,M3].join("|")+")"+N3+B3+")*",tne="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ine="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nne=N3+B3+ene,rne="(?:"+[Kie,O3,M3].join("|")+")"+nne,sne=RegExp([qc+"?"+P3+"+"+D3+"(?="+[A3,qc,"$"].join("|")+")",Qie+"+"+V3+"(?="+[A3,qc+L3,"$"].join("|")+")",qc+"?"+L3+"+"+D3,qc+"+"+V3,ine,tne,I3,rne].join("|"),"g");function one(i){return i.match(sne)||[]}var F3=one;function ane(i,e,t){return i=fs(i),e=t?void 0:e,e===void 0?_3(i)?F3(i):y3(i):i.match(e)||[]}var j3=ane;var lne="['\u2019]",cne=RegExp(lne,"g");function une(i){return function(e){return p3(j3(w3(e).replace(cne,"")),i,"")}}var H3=une;function dne(){this.__data__=new Qo,this.size=0}var z3=dne;function hne(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var U3=hne;function fne(i){return this.__data__.get(i)}var W3=fne;function mne(i){return this.__data__.has(i)}var q3=mne;var gne=200;function pne(i,e){var t=this.__data__;if(t instanceof Qo){var n=t.__data__;if(!ea||n.length<gne-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new Qa(n)}return t.set(i,e),this.size=t.size,this}var $3=pne;function $c(i){var e=this.__data__=new Qo(i);this.size=e.size}$c.prototype.clear=z3;$c.prototype.delete=U3;$c.prototype.get=W3;$c.prototype.has=q3;$c.prototype.set=$3;var ms=$c;function bne(i,e){return i&&pr(e,hs(e),i)}var G3=bne;function vne(i,e){return i&&pr(e,br(e),i)}var K3=vne;var Y3=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Z3=Y3&&typeof module=="object"&&module&&!module.nodeType&&module,wne=Z3&&Z3.exports===Y3,J3=wne?ti.Buffer:void 0,X3=J3?J3.allocUnsafe:void 0;function yne(i,e){if(e)return i.slice();var t=i.length,n=X3?X3(t):new i.constructor(t);return i.copy(n),n}var Qg=yne;function _ne(i,e){for(var t=-1,n=i==null?0:i.length,r=0,s=[];++t<n;){var o=i[t];e(o,t,i)&&(s[r++]=o)}return s}var Q3=_ne;function xne(){return[]}var ep=xne;var kne=Object.prototype,Cne=kne.propertyIsEnumerable,eM=Object.getOwnPropertySymbols,Tne=eM?function(i){return i==null?[]:(i=Object(i),Q3(eM(i),function(e){return Cne.call(i,e)}))}:ep,Gc=Tne;function Ene(i,e){return pr(i,Gc(i),e)}var tM=Ene;var Sne=Object.getOwnPropertySymbols,Ane=Sne?function(i){for(var e=[];i;)Zg(e,Gc(i)),i=Wc(i);return e}:ep,tp=Ane;function Ine(i,e){return pr(i,tp(i),e)}var iM=Ine;function Pne(i,e,t){var n=e(i);return qt(i)?n:Zg(n,t(i))}var ip=Pne;function Rne(i){return ip(i,hs,Gc)}var ph=Rne;function One(i){return ip(i,br,tp)}var nM=One;var Mne=Bn(ti,"DataView"),np=Mne;var Lne=Bn(ti,"Promise"),rp=Lne;var Dne=Bn(ti,"Set"),sp=Dne;var rM="[object Map]",Vne="[object Object]",sM="[object Promise]",oM="[object Set]",aM="[object WeakMap]",lM="[object DataView]",Bne=Zs(np),Nne=Zs(ea),Fne=Zs(rp),jne=Zs(sp),Hne=Zs($g),el=yn;(np&&el(new np(new ArrayBuffer(1)))!=lM||ea&&el(new ea)!=rM||rp&&el(rp.resolve())!=sM||sp&&el(new sp)!=oM||$g&&el(new $g)!=aM)&&(el=function(i){var e=yn(i),t=e==Vne?i.constructor:void 0,n=t?Zs(t):"";if(n)switch(n){case Bne:return lM;case Nne:return rM;case Fne:return sM;case jne:return oM;case Hne:return aM}return e});var eo=el;var zne=Object.prototype,Une=zne.hasOwnProperty;function Wne(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&Une.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var cM=Wne;var qne=ti.Uint8Array,Kc=qne;function $ne(i){var e=new i.constructor(i.byteLength);return new Kc(e).set(new Kc(i)),e}var Yc=$ne;function Gne(i,e){var t=e?Yc(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var uM=Gne;var Kne=/\w*$/;function Yne(i){var e=new i.constructor(i.source,Kne.exec(i));return e.lastIndex=i.lastIndex,e}var dM=Yne;var hM=wn?wn.prototype:void 0,fM=hM?hM.valueOf:void 0;function Zne(i){return fM?Object(fM.call(i)):{}}var mM=Zne;function Jne(i,e){var t=e?Yc(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var op=Jne;var Xne="[object Boolean]",Qne="[object Date]",ere="[object Map]",tre="[object Number]",ire="[object RegExp]",nre="[object Set]",rre="[object String]",sre="[object Symbol]",ore="[object ArrayBuffer]",are="[object DataView]",lre="[object Float32Array]",cre="[object Float64Array]",ure="[object Int8Array]",dre="[object Int16Array]",hre="[object Int32Array]",fre="[object Uint8Array]",mre="[object Uint8ClampedArray]",gre="[object Uint16Array]",pre="[object Uint32Array]";function bre(i,e,t){var n=i.constructor;switch(e){case ore:return Yc(i);case Xne:case Qne:return new n(+i);case are:return uM(i,t);case lre:case cre:case ure:case dre:case hre:case fre:case mre:case gre:case pre:return op(i,t);case ere:return new n;case tre:case rre:return new n(i);case ire:return dM(i);case nre:return new n;case sre:return mM(i)}}var gM=bre;function vre(i){return typeof i.constructor=="function"&&!Dc(i)?gO(Wc(i)):{}}var ap=vre;var wre="[object Map]";function yre(i){return Zt(i)&&eo(i)==wre}var pM=yre;var bM=Xs&&Xs.isMap,_re=bM?Vc(bM):pM,vM=_re;var xre="[object Set]";function kre(i){return Zt(i)&&eo(i)==xre}var wM=kre;var yM=Xs&&Xs.isSet,Cre=yM?Vc(yM):wM,_M=Cre;var Tre=1,Ere=2,Sre=4,xM="[object Arguments]",Are="[object Array]",Ire="[object Boolean]",Pre="[object Date]",Rre="[object Error]",kM="[object Function]",Ore="[object GeneratorFunction]",Mre="[object Map]",Lre="[object Number]",CM="[object Object]",Dre="[object RegExp]",Vre="[object Set]",Bre="[object String]",Nre="[object Symbol]",Fre="[object WeakMap]",jre="[object ArrayBuffer]",Hre="[object DataView]",zre="[object Float32Array]",Ure="[object Float64Array]",Wre="[object Int8Array]",qre="[object Int16Array]",$re="[object Int32Array]",Gre="[object Uint8Array]",Kre="[object Uint8ClampedArray]",Yre="[object Uint16Array]",Zre="[object Uint32Array]",Dt={};Dt[xM]=Dt[Are]=Dt[jre]=Dt[Hre]=Dt[Ire]=Dt[Pre]=Dt[zre]=Dt[Ure]=Dt[Wre]=Dt[qre]=Dt[$re]=Dt[Mre]=Dt[Lre]=Dt[CM]=Dt[Dre]=Dt[Vre]=Dt[Bre]=Dt[Nre]=Dt[Gre]=Dt[Kre]=Dt[Yre]=Dt[Zre]=!0;Dt[Rre]=Dt[kM]=Dt[Fre]=!1;function lp(i,e,t,n,r,s){var o,l=e&Tre,u=e&Ere,f=e&Sre;if(t&&(o=r?t(i,n,r,s):t(i)),o!==void 0)return o;if(!it(i))return i;var g=qt(i);if(g){if(o=cM(i),!l)return Gg(i,o)}else{var p=eo(i),y=p==kM||p==Ore;if(Js(i))return Qg(i,l);if(p==CM||p==xM||y&&!r){if(o=u||y?{}:ap(i),!l)return u?iM(i,K3(o,i)):tM(i,G3(o,i))}else{if(!Dt[p])return r?i:{};o=gM(i,p,l)}}s||(s=new ms);var _=s.get(i);if(_)return _;s.set(i,o),_M(i)?i.forEach(function(P){o.add(lp(P,e,t,P,i,s))}):vM(i)&&i.forEach(function(P,M){o.set(M,lp(P,e,t,M,i,s))});var C=f?u?nM:ph:u?br:hs,E=g?void 0:C(i);return _O(E||i,function(P,M){E&&(M=P,P=i[M]),Oc(o,M,lp(P,e,t,M,i,s))}),o}var Zc=lp;var Jre=4;function Xre(i){return Zc(i,Jre)}var cp=Xre;var Qre=1,ese=4;function tse(i){return Zc(i,Qre|ese)}var en=tse;var ise=1,nse=4;function rse(i,e){return e=typeof e=="function"?e:void 0,Zc(i,ise|nse,e)}var tl=rse;var sse="__lodash_hash_undefined__";function ose(i){return this.__data__.set(i,sse),this}var TM=ose;function ase(i){return this.__data__.has(i)}var EM=ase;function up(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new Qa;++e<t;)this.add(i[e])}up.prototype.add=up.prototype.push=TM;up.prototype.has=EM;var SM=up;function lse(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var AM=lse;function cse(i,e){return i.has(e)}var IM=cse;var use=1,dse=2;function hse(i,e,t,n,r,s){var o=t&use,l=i.length,u=e.length;if(l!=u&&!(o&&u>l))return!1;var f=s.get(i),g=s.get(e);if(f&&g)return f==e&&g==i;var p=-1,y=!0,_=t&dse?new SM:void 0;for(s.set(i,e),s.set(e,i);++p<l;){var C=i[p],E=e[p];if(n)var P=o?n(E,C,p,e,i,s):n(C,E,p,i,e,s);if(P!==void 0){if(P)continue;y=!1;break}if(_){if(!AM(e,function(M,O){if(!IM(_,O)&&(C===M||r(C,M,t,n,s)))return _.push(O)})){y=!1;break}}else if(!(C===E||r(C,E,t,n,s))){y=!1;break}}return s.delete(i),s.delete(e),y}var dp=hse;function fse(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var PM=fse;function mse(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var RM=mse;var gse=1,pse=2,bse="[object Boolean]",vse="[object Date]",wse="[object Error]",yse="[object Map]",_se="[object Number]",xse="[object RegExp]",kse="[object Set]",Cse="[object String]",Tse="[object Symbol]",Ese="[object ArrayBuffer]",Sse="[object DataView]",OM=wn?wn.prototype:void 0,J0=OM?OM.valueOf:void 0;function Ase(i,e,t,n,r,s,o){switch(t){case Sse:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case Ese:return!(i.byteLength!=e.byteLength||!s(new Kc(i),new Kc(e)));case bse:case vse:case _se:return ds(+i,+e);case wse:return i.name==e.name&&i.message==e.message;case xse:case Cse:return i==e+"";case yse:var l=PM;case kse:var u=n&gse;if(l||(l=RM),i.size!=e.size&&!u)return!1;var f=o.get(i);if(f)return f==e;n|=pse,o.set(i,e);var g=dp(l(i),l(e),n,r,s,o);return o.delete(i),g;case Tse:if(J0)return J0.call(i)==J0.call(e)}return!1}var MM=Ase;var Ise=1,Pse=Object.prototype,Rse=Pse.hasOwnProperty;function Ose(i,e,t,n,r,s){var o=t&Ise,l=ph(i),u=l.length,f=ph(e),g=f.length;if(u!=g&&!o)return!1;for(var p=u;p--;){var y=l[p];if(!(o?y in e:Rse.call(e,y)))return!1}var _=s.get(i),C=s.get(e);if(_&&C)return _==e&&C==i;var E=!0;s.set(i,e),s.set(e,i);for(var P=o;++p<u;){y=l[p];var M=i[y],O=e[y];if(n)var N=o?n(O,M,y,e,i,s):n(M,O,y,i,e,s);if(!(N===void 0?M===O||r(M,O,t,n,s):N)){E=!1;break}P||(P=y=="constructor")}if(E&&!P){var W=i.constructor,Z=e.constructor;W!=Z&&"constructor"in i&&"constructor"in e&&!(typeof W=="function"&&W instanceof W&&typeof Z=="function"&&Z instanceof Z)&&(E=!1)}return s.delete(i),s.delete(e),E}var LM=Ose;var Mse=1,DM="[object Arguments]",VM="[object Array]",hp="[object Object]",Lse=Object.prototype,BM=Lse.hasOwnProperty;function Dse(i,e,t,n,r,s){var o=qt(i),l=qt(e),u=o?VM:eo(i),f=l?VM:eo(e);u=u==DM?hp:u,f=f==DM?hp:f;var g=u==hp,p=f==hp,y=u==f;if(y&&Js(i)){if(!Js(e))return!1;o=!0,g=!1}if(y&&!g)return s||(s=new ms),o||Bc(i)?dp(i,e,t,n,r,s):MM(i,e,u,t,n,r,s);if(!(t&Mse)){var _=g&&BM.call(i,"__wrapped__"),C=p&&BM.call(e,"__wrapped__");if(_||C){var E=_?i.value():i,P=C?e.value():e;return s||(s=new ms),r(E,P,t,n,s)}}return y?(s||(s=new ms),LM(i,e,t,n,r,s)):!1}var NM=Dse;function FM(i,e,t,n,r){return i===e?!0:i==null||e==null||!Zt(i)&&!Zt(e)?i!==i&&e!==e:NM(i,e,t,n,FM,r)}var ra=FM;var Vse=1,Bse=2;function Nse(i,e,t,n){var r=t.length,s=r,o=!n;if(i==null)return!s;for(i=Object(i);r--;){var l=t[r];if(o&&l[2]?l[1]!==i[l[0]]:!(l[0]in i))return!1}for(;++r<s;){l=t[r];var u=l[0],f=i[u],g=l[1];if(o&&l[2]){if(f===void 0&&!(u in i))return!1}else{var p=new ms;if(n)var y=n(f,g,u,i,e,p);if(!(y===void 0?ra(g,f,Vse|Bse,n,p):y))return!1}}return!0}var jM=Nse;function Fse(i){return i===i&&!it(i)}var fp=Fse;function jse(i){for(var e=hs(i),t=e.length;t--;){var n=e[t],r=i[n];e[t]=[n,r,fp(r)]}return e}var HM=jse;function Hse(i,e){return function(t){return t==null?!1:t[i]===e&&(e!==void 0||i in Object(t))}}var mp=Hse;function zse(i){var e=HM(i);return e.length==1&&e[0][2]?mp(e[0][0],e[0][1]):function(t){return t===i||jM(t,i,e)}}var zM=zse;function Use(i,e){return i!=null&&e in Object(i)}var UM=Use;function Wse(i,e,t){e=ia(e,i);for(var n=-1,r=e.length,s=!1;++n<r;){var o=vr(e[n]);if(!(s=i!=null&&t(i,o)))break;i=i[o]}return s||++n!=r?s:(r=i==null?0:i.length,!!r&&Mc(r)&&Yo(o,r)&&(qt(i)||Xa(i)))}var WM=Wse;function qse(i,e){return i!=null&&WM(i,e,UM)}var qM=qse;var $se=1,Gse=2;function Kse(i,e){return Fc(i)&&fp(e)?mp(vr(i),e):function(t){var n=na(t,i);return n===void 0&&n===e?qM(t,i):ra(e,n,$se|Gse)}}var $M=Kse;function Yse(i){return function(e){return e==null?void 0:e[i]}}var GM=Yse;function Zse(i){return function(e){return Uc(e,i)}}var KM=Zse;function Jse(i){return Fc(i)?GM(vr(i)):KM(i)}var YM=Jse;function Xse(i){return typeof i=="function"?i:i==null?Pc:typeof i=="object"?qt(i)?$M(i[0],i[1]):zM(i):YM(i)}var ZM=Xse;function Qse(i){return function(e,t,n){for(var r=-1,s=Object(e),o=n(e),l=o.length;l--;){var u=o[i?l:++r];if(t(s[u],u,s)===!1)break}return e}}var JM=Qse;var eoe=JM(),gp=eoe;function toe(i,e){return i&&gp(i,e,hs)}var XM=toe;var ioe=function(){return ti.Date.now()},pp=ioe;var noe="Expected a function",roe=Math.max,soe=Math.min;function ooe(i,e,t){var n,r,s,o,l,u,f=0,g=!1,p=!1,y=!0;if(typeof i!="function")throw new TypeError(noe);e=W0(e)||0,it(t)&&(g=!!t.leading,p="maxWait"in t,s=p?roe(W0(t.maxWait)||0,e):s,y="trailing"in t?!!t.trailing:y);function _(U){var ie=n,X=r;return n=r=void 0,f=U,o=i.apply(X,ie),o}function C(U){return f=U,l=setTimeout(M,e),g?_(U):o}function E(U){var ie=U-u,X=U-f,F=e-ie;return p?soe(F,s-X):F}function P(U){var ie=U-u,X=U-f;return u===void 0||ie>=e||ie<0||p&&X>=s}function M(){var U=pp();if(P(U))return O(U);l=setTimeout(M,E(U))}function O(U){return l=void 0,y&&n?_(U):(n=r=void 0,o)}function N(){l!==void 0&&clearTimeout(l),f=0,n=u=r=l=void 0}function W(){return l===void 0?o:O(pp())}function Z(){var U=pp(),ie=P(U);if(n=arguments,r=this,u=U,ie){if(l===void 0)return C(u);if(p)return clearTimeout(l),l=setTimeout(M,e),_(u)}return l===void 0&&(l=setTimeout(M,e)),o}return Z.cancel=N,Z.flush=W,Z}var wr=ooe;function aoe(i,e,t){(t!==void 0&&!ds(i[e],t)||t===void 0&&!(e in i))&&Zo(i,e,t)}var bh=aoe;function loe(i){return Zt(i)&&Jo(i)}var QM=loe;function coe(i,e){if(!(e==="constructor"&&typeof i[e]=="function")&&e!="__proto__")return i[e]}var vh=coe;function uoe(i){return pr(i,br(i))}var eL=uoe;function doe(i,e,t,n,r,s,o){var l=vh(i,t),u=vh(e,t),f=o.get(u);if(f){bh(i,t,f);return}var g=s?s(l,u,t+"",i,e,o):void 0,p=g===void 0;if(p){var y=qt(u),_=!y&&Js(u),C=!y&&!_&&Bc(u);g=u,y||_||C?qt(l)?g=l:QM(l)?g=Gg(l):_?(p=!1,g=Qg(u,!0)):C?(p=!1,g=op(u,!0)):g=[]:fi(u)||Xa(u)?(g=l,Xa(l)?g=eL(l):(!it(l)||Jn(l))&&(g=ap(u))):p=!1}p&&(o.set(u,g),r(g,u,n,s,o),o.delete(u)),bh(i,t,g)}var tL=doe;function iL(i,e,t,n,r){i!==e&&gp(e,function(s,o){if(r||(r=new ms),it(s))tL(i,e,o,t,iL,n,r);else{var l=n?n(vh(i,o),s,o+"",i,e,r):void 0;l===void 0&&(l=s),bh(i,o,l)}},br)}var bp=iL;var hoe=Lc(function(i,e,t,n){bp(i,e,t,n)}),X0=hoe;function foe(i){var e=i==null?0:i.length;return e?i[e-1]:void 0}var nL=foe;var rL=/[\\^$.*+?()[\]{}|]/g,moe=RegExp(rL.source);function goe(i){return i=fs(i),i&&moe.test(i)?i.replace(rL,"\\$&"):i}var vp=goe;var poe="[object String]";function boe(i){return typeof i=="string"||!qt(i)&&Zt(i)&&yn(i)==poe}var wp=boe;function voe(i,e){return e.length<2?i:Uc(i,Jg(e,0,-1))}var sL=voe;function woe(i){return Zt(i)&&i.nodeType===1&&!fi(i)}var Xn=woe;function yoe(i,e){return ra(i,e)}var il=yoe;function _oe(i,e,t){t=typeof t=="function"?t:void 0;var n=t?t(i,e):void 0;return n===void 0?ra(i,e,void 0,t):!!n}var Q0=_oe;function xoe(i,e){var t={};return e=ZM(e,3),XM(i,function(n,r,s){Zo(t,r,e(n,r,s))}),t}var ey=xoe;var koe=Lc(function(i,e,t){bp(i,e,t)}),Jc=koe;function Coe(i,e){return e=ia(e,i),i=sL(i,e),i==null||delete i[vr(nL(e))]}var oL=Coe;function Toe(i,e,t,n){if(!it(i))return i;e=ia(e,i);for(var r=-1,s=e.length,o=s-1,l=i;l!=null&&++r<s;){var u=vr(e[r]),f=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return i;if(r!=o){var g=l[u];f=n?n(g,u,l):void 0,f===void 0&&(f=it(g)?g:Yo(e[r+1])?[]:{})}Oc(l,u,f),l=l[u]}return i}var aL=Toe;function Eoe(i,e,t){return i==null?i:aL(i,e,t)}var ty=Eoe;var Soe=H3(function(i,e,t){return i+(t?" ":"")+gh(e)}),iy=Soe;var Aoe="Expected a function";function Ioe(i,e,t){var n=!0,r=!0;if(typeof i!="function")throw new TypeError(Aoe);return it(t)&&(n="leading"in t?!!t.leading:n,r="trailing"in t?!!t.trailing:r),wr(i,e,{leading:n,maxWait:e,trailing:r})}var sa=Ioe;function Poe(i,e){return i==null?!0:oL(i,e)}var ny=Poe;var ry;try{ry={window,document}}catch(i){ry={window:{},document:{}}}var we=ry;function Roe(){try{return navigator.userAgent.toLowerCase()}catch(i){return""}}var nl=Roe(),Le={isMac:cL(nl),isWindows:Ooe(nl),isGecko:Moe(nl),isSafari:Loe(nl),isiOS:Doe(nl),isAndroid:Voe(nl),isBlink:Boe(nl),get isMediaForcedColors(){return Foe()},get isMotionReduced(){return joe()},features:{isRegExpUnicodePropertySupported:Noe()}};function cL(i){return i.indexOf("macintosh")>-1}function Ooe(i){return i.indexOf("windows")>-1}function Moe(i){return!!i.match(/gecko\/\d+/)}function Loe(i){return i.indexOf(" applewebkit/")>-1&&i.indexOf("chrome")===-1}function Doe(i){return!!i.match(/iphone|ipad/i)||cL(i)&&navigator.maxTouchPoints>0}function Voe(i){return i.indexOf("android")>-1}function Boe(i){return i.indexOf("chrome/")>-1&&i.indexOf("edge/")<0}function Noe(){let i=!1;try{i="\u0107".search(new RegExp("[\\p{L}]","u"))===0}catch(e){}return i}function Foe(){return we.window.matchMedia?we.window.matchMedia("(forced-colors: active)").matches:!1}function joe(){return we.window.matchMedia?we.window.matchMedia("(prefers-reduced-motion)").matches:!1}function sy(i,e,t,n){t=t||function(u,f){return u===f};let r=Array.isArray(i)?i:Array.prototype.slice.call(i),s=Array.isArray(e)?e:Array.prototype.slice.call(e),o=Hoe(r,s,t);return n?Uoe(o,s.length):zoe(s,o)}function Hoe(i,e,t){let n=uL(i,e,t);if(n===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};let r=dL(i,n),s=dL(e,n),o=uL(r,s,t),l=i.length-o,u=e.length-o;return{firstIndex:n,lastIndexOld:l,lastIndexNew:u}}function uL(i,e,t){for(let n=0;n<Math.max(i.length,e.length);n++)if(i[n]===void 0||e[n]===void 0||!t(i[n],e[n]))return n;return-1}function dL(i,e){return i.slice(e).reverse()}function zoe(i,e){let t=[],{firstIndex:n,lastIndexOld:r,lastIndexNew:s}=e;return s-n>0&&t.push({index:n,type:"insert",values:i.slice(n,s)}),r-n>0&&t.push({index:n+(s-n),type:"delete",howMany:r-n}),t}function Uoe(i,e){let{firstIndex:t,lastIndexOld:n,lastIndexNew:r}=i;if(t===-1)return Array(e).fill("equal");let s=[];return t>0&&(s=s.concat(Array(t).fill("equal"))),r-t>0&&(s=s.concat(Array(r-t).fill("insert"))),n-t>0&&(s=s.concat(Array(n-t).fill("delete"))),r<e&&(s=s.concat(Array(e-r).fill("equal"))),s}function Xc(i,e,t){t=t||function(E,P){return E===P};let n=i.length,r=e.length;if(n>200||r>200||n+r>300)return Xc.fastDiff(i,e,t,!0);let s,o;if(r<n){let E=i;i=e,e=E,s="delete",o="insert"}else s="insert",o="delete";let l=i.length,u=e.length,f=u-l,g={},p={};function y(E){let P=(p[E-1]!==void 0?p[E-1]:-1)+1,M=p[E+1]!==void 0?p[E+1]:-1,O=P>M?-1:1;g[E+O]&&(g[E]=g[E+O].slice(0)),g[E]||(g[E]=[]),g[E].push(P>M?s:o);let N=Math.max(P,M),W=N-E;for(;W<l&&N<u&&t(i[W],e[N]);)W++,N++,g[E].push("equal");return N}let _=0,C;do{for(C=-_;C<f;C++)p[C]=y(C);for(C=f+_;C>f;C--)p[C]=y(C);p[f]=y(f),_++}while(p[f]!==u);return g[f].slice(1)}Xc.fastDiff=sy;function hL(){return function i(){i.called=!0}}var Qn=class{constructor(e,t){v(this,"source");v(this,"name");v(this,"path");v(this,"stop");v(this,"off");v(this,"return");this.source=e,this.name=t,this.path=[],this.stop=hL(),this.off=hL()}};var tn=new Array(256).fill("").map((i,e)=>("0"+e.toString(16)).slice(-2));function Si(){let[i,e,t,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+tn[i>>0&255]+tn[i>>8&255]+tn[i>>16&255]+tn[i>>24&255]+tn[e>>0&255]+tn[e>>8&255]+tn[e>>16&255]+tn[e>>24&255]+tn[t>>0&255]+tn[t>>8&255]+tn[t>>16&255]+tn[t>>24&255]+tn[n>>0&255]+tn[n>>8&255]+tn[n>>16&255]+tn[n>>24&255]}var Ui={get(i="normal"){return typeof i!="number"?this[i]||this.normal:i},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function fL(i,e){let t=Ui.get(e.priority);for(let n=0;n<i.length;n++)if(Ui.get(i[n].priority)<t){i.splice(n,0,e);return}i.push(e)}var Woe="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html",L=class extends Error{constructor(e,t,n){super(qoe(e,n));v(this,"context");v(this,"data");this.name="CKEditorError",this.context=t,this.data=n}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;let n=new L(e.message,t);throw n.stack=e.stack,n}};function at(i,e){console.warn(...$oe(i,e))}function mL(i){return`
Read more: ${Woe}#error-${i}`}function qoe(i,e){let t=new WeakSet,n=(o,l)=>{if(typeof l=="object"&&l!==null){if(t.has(l))return`[object ${l.constructor.name}]`;t.add(l)}return l},r=e?` ${JSON.stringify(e,n)}`:"",s=mL(i);return i+r+s}function $oe(i,e){let t=mL(i);return e?[i,e,t]:[i,t]}var Goe="43.3.1",Koe=new Date(2024,10,6);if(globalThis.CKEDITOR_VERSION)throw new L("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Goe;var Qc=Symbol("listeningTo"),oy=Symbol("emitterId"),to=Symbol("delegations"),gL=wt(Object);function wt(i){if(!i)return gL;class e extends i{on(n,r,s){this.listenTo(this,n,r,s)}once(n,r,s){let o=!1,l=(u,...f)=>{o||(o=!0,u.off(),r.call(this,u,...f))};this.listenTo(this,n,l,s)}off(n,r){this.stopListening(this,n,r)}listenTo(n,r,s,o={}){let l,u;this[Qc]||(this[Qc]={});let f=this[Qc];ay(n)||pL(n);let g=ay(n);(l=f[g])||(l=f[g]={emitter:n,callbacks:{}}),(u=l.callbacks[r])||(u=l.callbacks[r]=[]),u.push(s),Xoe(this,n,r,s,o)}stopListening(n,r,s){let o=this[Qc],l=n&&ay(n),u=o&&l?o[l]:void 0,f=u&&r?u.callbacks[r]:void 0;if(!(!o||n&&!u||r&&!f))if(s)cy(this,n,r,s),f.indexOf(s)!==-1&&(f.length===1?delete u.callbacks[r]:cy(this,n,r,s));else if(f){for(;s=f.pop();)cy(this,n,r,s);delete u.callbacks[r]}else if(u){for(r in u.callbacks)this.stopListening(n,r);delete o[l]}else{for(l in o)this.stopListening(o[l].emitter);delete this[Qc]}}fire(n,...r){try{let s=n instanceof Qn?n:new Qn(this,n),o=s.name,l=vL(this,o);if(s.path.push(this),l){let f=[s,...r];l=Array.from(l);for(let g=0;g<l.length&&(l[g].callback.apply(this,f),s.off.called&&(delete s.off.called,this._removeEventListener(o,l[g].callback)),!s.stop.called);g++);}let u=this[to];if(u){let f=u.get(o),g=u.get("*");f&&wL(f,s,r),g&&wL(g,s,r)}return s.return}catch(s){L.rethrowUnexpectedError(s,this)}}delegate(...n){return{to:(r,s)=>{this[to]||(this[to]=new Map),n.forEach(o=>{let l=this[to].get(o);l?l.set(r,s):this[to].set(o,new Map([[r,s]]))})}}}stopDelegating(n,r){if(!!this[to])if(!n)this[to].clear();else if(!r)this[to].delete(n);else{let s=this[to].get(n);s&&s.delete(r)}}_addEventListener(n,r,s){Joe(this,n);let o=ly(this,n),l=Ui.get(s.priority),u={callback:r,priority:l};for(let f of o)fL(f,u)}_removeEventListener(n,r){let s=ly(this,n);for(let o of s)for(let l=0;l<o.length;l++)o[l].callback==r&&(o.splice(l,1),l--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{wt[i]=gL.prototype[i]});function Yoe(i,e){let t=i[Qc];return t&&t[e]?t[e].emitter:null}function pL(i,e){i[oy]||(i[oy]=e||Si())}function ay(i){return i[oy]}function bL(i){return i._events||Object.defineProperty(i,"_events",{value:{}}),i._events}function Zoe(){return{callbacks:[],childEvents:[]}}function Joe(i,e){let t=bL(i);if(t[e])return;let n=e,r=null,s=[];for(;n!==""&&!t[n];)t[n]=Zoe(),s.push(t[n]),r&&t[n].childEvents.push(r),r=n,n=n.substr(0,n.lastIndexOf(":"));if(n!==""){for(let o of s)o.callbacks=t[n].callbacks.slice();t[n].childEvents.push(r)}}function ly(i,e){let t=bL(i)[e];if(!t)return[];let n=[t.callbacks];for(let r=0;r<t.childEvents.length;r++){let s=ly(i,t.childEvents[r]);n=n.concat(s)}return n}function vL(i,e){let t;return!i._events||!(t=i._events[e])||!t.callbacks.length?e.indexOf(":")>-1?vL(i,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function wL(i,e,t){for(let[n,r]of i){r?typeof r=="function"&&(r=r(e.name)):r=e.name;let s=new Qn(e.source,r);s.path=[...e.path],n.fire(s,...t)}}function Xoe(i,e,t,n,r){e._addEventListener?e._addEventListener(t,n,r):i._addEventListener.call(e,t,n,r)}function cy(i,e,t,n){e._removeEventListener?e._removeEventListener(t,n):i._removeEventListener.call(e,t,n)}var wh=Symbol("observableProperties"),yh=Symbol("boundObservables"),_h=Symbol("boundProperties"),rl=Symbol("decoratedMethods"),yL=Symbol("decoratedOriginal"),_L=gt(wt());function gt(i){var t,n,r,s;if(!i)return _L;class e extends i{constructor(){super(...arguments);v(this,t);v(this,n);v(this,r);v(this,s)}set(l,u){if(it(l)){Object.keys(l).forEach(g=>{this.set(g,l[g])},this);return}uy(this);let f=this[wh];if(l in this&&!f.has(l))throw new L("observable-set-cannot-override",this);Object.defineProperty(this,l,{enumerable:!0,configurable:!0,get(){return f.get(l)},set(g){let p=f.get(l),y=this.fire(`set:${l}`,l,g,p);y===void 0&&(y=g),(p!==y||!f.has(l))&&(f.set(l,y),this.fire(`change:${l}`,l,y,p))}}),this[l]=u}bind(...l){if(!l.length||!xL(l))throw new L("observable-bind-wrong-properties",this);if(new Set(l).size!==l.length)throw new L("observable-bind-duplicate-properties",this);uy(this);let u=this[_h];l.forEach(g=>{if(u.has(g))throw new L("observable-bind-rebind",this)});let f=new Map;return l.forEach(g=>{let p={property:g,to:[]};u.set(g,p),f.set(g,p)}),{to:Qoe,toMany:eae,_observable:this,_bindProperties:l,_to:[],_bindings:f}}unbind(...l){if(!this[wh])return;let u=this[_h],f=this[yh];if(l.length){if(!xL(l))throw new L("observable-unbind-wrong-properties",this);l.forEach(g=>{let p=u.get(g);!p||(p.to.forEach(([y,_])=>{let C=f.get(y),E=C[_];E.delete(p),E.size||delete C[_],Object.keys(C).length||(f.delete(y),this.stopListening(y,"change"))}),u.delete(g))})}else f.forEach((g,p)=>{this.stopListening(p,"change")}),f.clear(),u.clear()}decorate(l){uy(this);let u=this[l];if(!u)throw new L("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:l});this.on(l,(f,g)=>{f.return=u.apply(this,g)}),this[l]=function(...f){return this.fire(l,f)},this[l][yL]=u,this[rl]||(this[rl]=[]),this[rl].push(l)}stopListening(l,u,f){if(!l&&this[rl]){for(let g of this[rl])this[g]=this[g][yL];delete this[rl]}super.stopListening(l,u,f)}}return t=wh,n=rl,r=_h,s=yh,e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{gt[i]=_L.prototype[i]});function uy(i){i[wh]||(Object.defineProperty(i,wh,{value:new Map}),Object.defineProperty(i,yh,{value:new Map}),Object.defineProperty(i,_h,{value:new Map}))}function Qoe(...i){let e=iae(...i),t=Array.from(this._bindings.keys()),n=t.length;if(!e.callback&&e.to.length>1)throw new L("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new L("observable-bind-to-extra-callback",this);e.to.forEach(r=>{if(r.properties.length&&r.properties.length!==n)throw new L("observable-bind-to-properties-length",this);r.properties.length||(r.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),sae(this._observable,this._to),rae(this),this._bindProperties.forEach(r=>{kL(this._observable,r)})}function eae(i,e,t){if(this._bindings.size>1)throw new L("observable-bind-to-many-not-one-binding",this);this.to(...tae(i,e),t)}function tae(i,e){let t=i.map(n=>[n,e]);return Array.prototype.concat.apply([],t)}function xL(i){return i.every(e=>typeof e=="string")}function iae(...i){if(!i.length)throw new L("observable-bind-to-parse-error",null);let e={to:[]},t;return typeof i[i.length-1]=="function"&&(e.callback=i.pop()),i.forEach(n=>{if(typeof n=="string")t.properties.push(n);else if(typeof n=="object")t={observable:n,properties:[]},e.to.push(t);else throw new L("observable-bind-to-parse-error",null)}),e}function nae(i,e,t,n){let r=i[yh],s=r.get(t),o=s||{};o[n]||(o[n]=new Set),o[n].add(e),s||r.set(t,o)}function rae(i){let e;i._bindings.forEach((t,n)=>{i._to.forEach(r=>{e=r.properties[t.callback?0:i._bindProperties.indexOf(n)],t.to.push([r.observable,e]),nae(i._observable,t,r.observable,e)})})}function kL(i,e){let n=i[_h].get(e),r;n.callback?r=n.callback.apply(i,n.to.map(s=>s[0][s[1]])):(r=n.to[0],r=r[0][r[1]]),Object.prototype.hasOwnProperty.call(i,e)?i[e]=r:i.set(e,r)}function sae(i,e){e.forEach(t=>{let n=i[yh],r;n.get(t.observable)||i.listenTo(t.observable,"change",(s,o)=>{r=n.get(t.observable)[o],r&&r.forEach(l=>{kL(i,l.property)})})})}var xh=class{constructor(){v(this,"_replacedElements");this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}};function kh(i){let e=0;for(let t of i)e++;return e}function Wi(i,e){let t=Math.min(i.length,e.length);for(let n=0;n<t;n++)if(i[n]!=e[n])return n;return i.length==e.length?"same":i.length<e.length?"prefix":"extension"}function _n(i){return!!(i&&i[Symbol.iterator])}function Ai(i,e,t={},n=[]){let r=t&&t.xmlns,s=r?i.createElementNS(r,e):i.createElement(e);for(let o in t)s.setAttribute(o,t[o]);(wp(n)||!_n(n))&&(n=[n]);for(let o of n)wp(o)&&(o=i.createTextNode(o)),s.appendChild(o);return s}var yp=class{constructor(e,t){v(this,"_config");this._config=Object.create(null),t&&this.define(CL(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){let n=!0;this._setToTarget(this._config,e,t,n)}get(e){return this._getFromSource(this._config,e)}*names(){for(let e of Object.keys(this._config))yield e}_setToTarget(e,t,n,r=!1){if(fi(t)){this._setObjectToTarget(e,t,r);return}let s=t.split(".");t=s.pop();for(let o of s)fi(e[o])||(e[o]=Object.create(null)),e=e[o];if(fi(n)){fi(e[t])||(e[t]=Object.create(null)),e=e[t],this._setObjectToTarget(e,n,r);return}r&&typeof e[t]!="undefined"||(e[t]=n)}_getFromSource(e,t){let n=t.split(".");t=n.pop();for(let r of n){if(!fi(e[r])){e=null;break}e=e[r]}return e?CL(e[t]):void 0}_setObjectToTarget(e,t,n){Object.keys(t).forEach(r=>{this._setToTarget(e,r,t[r],n)})}};function CL(i){return tl(i,oae)}function oae(i){return Xn(i)||typeof i=="function"?i:void 0}function gs(i){if(i){if(i.defaultView)return i instanceof i.defaultView.Document;if(i.ownerDocument&&i.ownerDocument.defaultView)return i instanceof i.ownerDocument.defaultView.Node}return!1}function _p(i){let e=Object.prototype.toString.apply(i);return e=="[object Window]"||e=="[object global]"}var TL=Vi(wt());function Vi(i){if(!i)return TL;class e extends i{listenTo(n,r,s,o={}){if(gs(n)||_p(n)){let l={capture:!!o.useCapture,passive:!!o.usePassive},u=this._getProxyEmitter(n,l)||new EL(n,l);this.listenTo(u,r,s,o)}else super.listenTo(n,r,s,o)}stopListening(n,r,s){if(gs(n)||_p(n)){let o=this._getAllProxyEmitters(n);for(let l of o)this.stopListening(l,r,s)}else super.stopListening(n,r,s)}_getProxyEmitter(n,r){return Yoe(this,SL(n,r))}_getAllProxyEmitters(n){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(r=>this._getProxyEmitter(n,r)).filter(r=>!!r)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Vi[i]=TL.prototype[i]});var EL=class extends wt(){constructor(e,t){super();v(this,"_domNode");v(this,"_options");v(this,"_domListeners");pL(this,SL(e,t)),this._domNode=e,this._options=t}attach(e){if(this._domListeners&&this._domListeners[e])return;let t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,n){this.attach(e),wt().prototype._addEventListener.call(this,e,t,n)}_removeEventListener(e,t){wt().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){let t=n=>{this.fire(e,n)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}};function aae(i){return i["data-ck-expando"]||(i["data-ck-expando"]=Si())}function SL(i,e){let t=aae(i);for(let n of Object.keys(e).sort())e[n]&&(t+="-"+n);return t}function dy(i){let e=[],t=i;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}function eu(i){return i instanceof HTMLTextAreaElement?i.value:i.innerHTML}function hy(i){let e=i.ownerDocument.defaultView.getComputedStyle(i);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function xp(i){if(!i.target)return null;let e=i.target.ownerDocument,t=i.clientX,n=i.clientY,r=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(t,n)?r=e.caretRangeFromPoint(t,n):i.rangeParent&&(r=e.createRange(),r.setStart(i.rangeParent,i.rangeOffset),r.collapse(!0)),r}function jt(i){return Object.prototype.toString.call(i)=="[object Text]"}function Ch(i){return Object.prototype.toString.apply(i)=="[object Range]"}function AL(i){return!i||!i.parentNode||i.offsetParent===we.document.body?null:i.offsetParent}var IL=["top","right","bottom","left","width","height"],Be=class{constructor(e){v(this,"top");v(this,"right");v(this,"bottom");v(this,"left");v(this,"width");v(this,"height");v(this,"_source");let t=Ch(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),fy(e)||t)if(t){let n=Be.getDomRangeRects(e);kp(this,Be.getBoundingRect(n))}else kp(this,e.getBoundingClientRect());else if(_p(e)){let{innerWidth:n,innerHeight:r}=e;kp(this,{top:0,right:n,bottom:r,left:0,width:n,height:r})}else kp(this,e)}clone(){return new Be(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){let t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{let n=new Be(t);return n._source=this._source,n}}getIntersectionArea(e){let t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){let e=this._source,t=this.clone();if(PL(e))return t;let n=e,r=e.parentNode||e.commonAncestorContainer,s;for(;r&&!PL(r);){let o=lae(r)==="visible";n instanceof HTMLElement&&RL(n)==="absolute"&&(s=n);let l=RL(r);if(o||s&&(l==="relative"&&o||l!=="relative")){n=r,r=r.parentNode;continue}let u=new Be(r),f=t.getIntersection(u);if(f)f.getArea()<t.getArea()&&(t=f);else return null;n=r,r=r.parentNode}return t}isEqual(e){for(let t of IL)if(this[t]!==e[t])return!1;return!0}contains(e){let t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){let{scrollX:e,scrollY:t}=we.window,n=this.clone().moveBy(e,t);if(fy(n._source)){let r=AL(n._source);r&&cae(n,r)}return n}excludeScrollbarsAndBorders(){let e=this._source,t,n,r;if(_p(e))t=e.innerWidth-e.document.documentElement.clientWidth,n=e.innerHeight-e.document.documentElement.clientHeight,r=e.getComputedStyle(e.document.documentElement).direction;else{let s=hy(e);t=e.offsetWidth-e.clientWidth-s.left-s.right,n=e.offsetHeight-e.clientHeight-s.top-s.bottom,r=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=s.left,this.top+=s.top,this.right-=s.right,this.bottom-=s.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,r==="ltr"?this.right-=t:this.left+=t,this.height-=n,this.bottom-=n,this}static getDomRangeRects(e){let t=[],n=Array.from(e.getClientRects());if(n.length)for(let r of n)t.push(new Be(r));else{let r=e.startContainer;jt(r)&&(r=r.parentNode);let s=new Be(r.getBoundingClientRect());s.right=s.left,s.width=0,t.push(s)}return t}static getBoundingRect(e){let t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0},n=0;for(let r of e)n++,t.left=Math.min(t.left,r.left),t.top=Math.min(t.top,r.top),t.right=Math.max(t.right,r.right),t.bottom=Math.max(t.bottom,r.bottom);return n==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Be(t))}};function kp(i,e){for(let t of IL)i[t]=e[t]}function PL(i){return fy(i)?i===i.ownerDocument.body:!1}function fy(i){return i!==null&&typeof i=="object"&&i.nodeType===1&&typeof i.getBoundingClientRect=="function"}function RL(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).position:"static"}function lae(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).overflow:"visible"}function cae(i,e){let t=new Be(e),n=hy(e),r=0,s=0;r-=t.left,s-=t.top,r+=e.scrollLeft,s+=e.scrollTop,r-=n.left,s-=n.top,i.moveBy(r,s)}var ii=class{constructor(e,t){v(this,"_element");v(this,"_callback");ii._observerInstance||ii._createObserver(),this._element=e,this._callback=t,ii._addElementCallback(e,t),ii._observerInstance.observe(e)}get element(){return this._element}destroy(){ii._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){ii._elementCallbacks||(ii._elementCallbacks=new Map);let n=ii._elementCallbacks.get(e);n||(n=new Set,ii._elementCallbacks.set(e,n)),n.add(t)}static _deleteElementCallback(e,t){let n=ii._getElementCallbacks(e);n&&(n.delete(t),n.size||(ii._elementCallbacks.delete(e),ii._observerInstance.unobserve(e))),ii._elementCallbacks&&!ii._elementCallbacks.size&&(ii._observerInstance=null,ii._elementCallbacks=null)}static _getElementCallbacks(e){return ii._elementCallbacks?ii._elementCallbacks.get(e):null}static _createObserver(){ii._observerInstance=new we.window.ResizeObserver(e=>{for(let t of e){let n=ii._getElementCallbacks(t.target);if(n)for(let r of n)r(t)}})}},io=ii;v(io,"_observerInstance",null),v(io,"_elementCallbacks",null);function Cp(i,e){i instanceof HTMLTextAreaElement&&(i.value=e),i.innerHTML=e}function ps(i){return e=>e+i}function tu(i){let e=0;for(;i.previousSibling;)i=i.previousSibling,e++;return e}function my(i,e,t){i.insertBefore(t,i.childNodes[e]||null)}function iu(i){return i&&i.nodeType===Node.COMMENT_NODE}function Tp(i){try{we.document.createAttribute(i)}catch(e){return!1}return!0}function Ur(i){return i?jt(i)?Ur(i.parentElement):i.getClientRects?!!i.getClientRects().length:!1:!1}function Th({element:i,target:e,positions:t,limiter:n,fitInViewport:r,viewportOffsetConfig:s}){Jn(e)&&(e=e()),Jn(n)&&(n=n());let o=AL(i),l=uae(s),u=new Be(i),f=OL(e,l),g;if(!f||!l.getIntersection(f))return null;let p={targetRect:f,elementRect:u,positionedElementAncestor:o,viewportRect:l};if(!n&&!r)g=new gy(t[0],p);else{if(n){let y=OL(n,l);y&&(p.limiterRect=y)}g=dae(t,p)}return g}function OL(i,e){let t=new Be(i).getVisible();return t?t.getIntersection(e):null}function uae(i){i=Object.assign({top:0,bottom:0,left:0,right:0},i);let e=new Be(we.window);return e.top+=i.top,e.height-=i.top,e.bottom-=i.bottom,e.height-=i.bottom,e}function dae(i,e){let{elementRect:t}=e,n=t.getArea(),r=i.map(l=>new gy(l,e)).filter(l=>!!l.name),s=0,o=null;for(let l of r){let{limiterIntersectionArea:u,viewportIntersectionArea:f}=l;if(u===n)return l;let g=f**2+u**2;g>s&&(s=g,o=l)}return o}var gy=class{constructor(e,t){v(this,"name");v(this,"config");v(this,"_positioningFunctionCoordinates");v(this,"_options");v(this,"_cachedRect");v(this,"_cachedAbsoluteRect");let n=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!n)return;let{left:r,top:s,name:o,config:l}=n;this.name=o,this.config=l,this._positioningFunctionCoordinates={left:r,top:s},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){let e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}};function py(i){let e=i.parentNode;e&&e.removeChild(i)}function by({target:i,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:n,forceScroll:r}){let s=vy(i),o=s,l=null;for(e=mae(e);o;){let u;o==s?u=BL(i):u=BL(l),fae({parent:u,getRect:()=>NL(i,o),alignToTop:n,ancestorOffset:t,forceScroll:r});let f=NL(i,o);if(hae({window:o,rect:f,viewportOffset:e,alignToTop:n,forceScroll:r}),o.parent!=o){if(l=o.frameElement,o=o.parent,!l)return}else o=null}}function hae({window:i,rect:e,alignToTop:t,forceScroll:n,viewportOffset:r}){let s=e.clone().moveBy(0,r.bottom),o=e.clone().moveBy(0,-r.top),l=new Be(i).excludeScrollbarsAndBorders(),u=[o,s],f=t&&n,g=u.every(E=>l.contains(E)),{scrollX:p,scrollY:y}=i,_=p,C=y;f?y-=l.top-e.top+r.top:g||(LL(o,l)?y-=l.top-e.top+r.top:ML(s,l)&&(t?y+=e.top-l.top-r.top:y+=e.bottom-l.bottom+r.bottom)),g||(DL(e,l)?p-=l.left-e.left+r.left:VL(e,l)&&(p+=e.right-l.right+r.right)),(p!=_||y!==C)&&i.scrollTo(p,y)}function fae({parent:i,getRect:e,alignToTop:t,forceScroll:n,ancestorOffset:r=0,limiterElement:s}){let o=vy(i),l=t&&n,u,f,g,p=s||o.document.body;for(;i!=p;)f=e(),u=new Be(i).excludeScrollbarsAndBorders(),g=u.contains(f),l?i.scrollTop-=u.top-f.top+r:g||(LL(f,u)?i.scrollTop-=u.top-f.top+r:ML(f,u)&&(t?i.scrollTop+=f.top-u.top-r:i.scrollTop+=f.bottom-u.bottom+r)),g||(DL(f,u)?i.scrollLeft-=u.left-f.left+r:VL(f,u)&&(i.scrollLeft+=f.right-u.right+r)),i=i.parentNode}function ML(i,e){return i.bottom>e.bottom}function LL(i,e){return i.top<e.top}function DL(i,e){return i.left<e.left}function VL(i,e){return i.right>e.right}function vy(i){return Ch(i)?i.startContainer.ownerDocument.defaultView:i.ownerDocument.defaultView}function BL(i){if(Ch(i)){let e=i.commonAncestorContainer;return jt(e)&&(e=e.parentNode),e}else return i.parentNode}function NL(i,e){let t=vy(i),n=new Be(i);if(t===e)return n;{let r=t;for(;r!=e;){let s=r.frameElement,o=new Be(s).excludeScrollbarsAndBorders();n.moveBy(o.left,o.top),r=r.parent}}return n}function mae(i){return typeof i=="number"?{top:i,bottom:i,left:i,right:i}:i}var gae={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21E7"},pae={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},FL={37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",9:"\u21E5",33:"Page Up",34:"Page Down"},Ge=wae(),bae=Object.fromEntries(Object.entries(Ge).map(([i,e])=>{let t;return e in FL?t=FL[e]:t=i.charAt(0).toUpperCase()+i.slice(1),[e,t]}));function no(i){let e;if(typeof i=="string"){if(e=Ge[i.toLowerCase()],!e)throw new L("keyboard-unknown-key",null,{key:i})}else e=i.keyCode+(i.altKey?Ge.alt:0)+(i.ctrlKey?Ge.ctrl:0)+(i.shiftKey?Ge.shift:0)+(i.metaKey?Ge.cmd:0);return e}function Eh(i){return typeof i=="string"&&(i=yae(i)),i.map(e=>typeof e=="string"?vae(e):e).reduce((e,t)=>t+e,0)}function Sh(i){let e=Eh(i);return Object.entries(Le.isMac||Le.isiOS?gae:pae).reduce((r,[s,o])=>((e&Ge[s])!=0&&(e&=~Ge[s],r+=o),r),"")+(e?bae[e]:"")}function jL(i){return i==Ge.arrowright||i==Ge.arrowleft||i==Ge.arrowup||i==Ge.arrowdown}function Ah(i,e){let t=e==="ltr";switch(i){case Ge.arrowleft:return t?"left":"right";case Ge.arrowright:return t?"right":"left";case Ge.arrowup:return"up";case Ge.arrowdown:return"down"}}function vae(i){if(i.endsWith("!"))return no(i.slice(0,-1));let e=no(i);return(Le.isMac||Le.isiOS)&&e==Ge.ctrl?Ge.cmd:e}function HL(i,e){let t=Ah(i,e);return t==="down"||t==="right"}function wae(){let i={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){let t=String.fromCharCode(e);i[t.toLowerCase()]=e}for(let e=48;e<=57;e++)i[e-48]=e;for(let e=112;e<=123;e++)i["f"+(e-111)]=e;return Object.assign(i,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),i}function yae(i){return i.split("+").map(e=>e.trim())}var _ae=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function wy(i){return _ae.includes(i)?"rtl":"ltr"}function lt(i){return Array.isArray(i)?i:[i]}we.window.CKEDITOR_TRANSLATIONS||(we.window.CKEDITOR_TRANSLATIONS={});function xae(i,e,t=1,n){if(typeof t!="number")throw new L("translation-service-quantity-not-a-number",null,{quantity:t});let r=n||we.window.CKEDITOR_TRANSLATIONS,s=Tae(r);s===1&&(i=Object.keys(r)[0]);let o=e.id||e.string;if(s===0||!Cae(i,o,r))return t!==1?e.plural:e.string;let l=r[i].dictionary,u=r[i].getPluralForm||(p=>p===1?0:1),f=l[o];if(typeof f=="string")return f;let g=Number(u(t));return f[g]}function kae(i){return Array.isArray(i)?i.reduce((e,t)=>Jc(e,t)):i}function Cae(i,e,t){return!!t[i]&&!!t[i].dictionary[e]}function Tae(i){return Object.keys(i).length}var yy=class{constructor({uiLanguage:e="en",contentLanguage:t,translations:n}={}){v(this,"uiLanguage");v(this,"uiLanguageDirection");v(this,"contentLanguage");v(this,"contentLanguageDirection");v(this,"t");v(this,"translations");this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=wy(this.uiLanguage),this.contentLanguageDirection=wy(this.contentLanguage),this.translations=kae(n),this.t=(r,s)=>this._t(r,s)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=lt(t),typeof e=="string"&&(e={string:e});let r=!!e.plural?t[0]:1,s=xae(this.uiLanguage,e,r,this.translations);return Eae(s,t)}};function Eae(i,e){return i.replace(/%(\d+)/g,(t,n)=>n<e.length?e[n]:t)}var Ht=class extends wt(){constructor(e={},t={}){super();v(this,"_items");v(this,"_itemMap");v(this,"_idProperty");v(this,"_bindToCollection");v(this,"_bindToExternalToInternalMap");v(this,"_bindToInternalToExternalMap");v(this,"_skippedIndexesFromExternal");let n=_n(e);if(n||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(let r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new L("collection-add-item-invalid-index",this);let n=0;for(let r of e){let s=this._getItemIdBeforeAdding(r),o=t+n;this._items.splice(o,0,r),this._itemMap.set(s,r),this.fire("add",r,o),n++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new L("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{let t=this._idProperty,n=e[t];return n&&this._itemMap.has(n)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){let[t,n]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:n}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);let e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new L("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(n=>new t(n))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(n=>n[t])}}}_setUpBindToBinding(e){let t=this._bindToCollection,n=(r,s,o)=>{let l=t._bindToCollection==this,u=t._bindToInternalToExternalMap.get(s);if(l&&u)this._bindToExternalToInternalMap.set(s,u),this._bindToInternalToExternalMap.set(u,s);else{let f=e(s);if(!f){this._skippedIndexesFromExternal.push(o);return}let g=o;for(let p of this._skippedIndexesFromExternal)o>p&&g--;for(let p of t._skippedIndexesFromExternal)g>=p&&g++;this._bindToExternalToInternalMap.set(s,f),this._bindToInternalToExternalMap.set(f,s),this.add(f,g);for(let p=0;p<t._skippedIndexesFromExternal.length;p++)g<=t._skippedIndexesFromExternal[p]&&t._skippedIndexesFromExternal[p]++}};for(let r of t)n(null,r,t.getIndex(r));this.listenTo(t,"add",n),this.listenTo(t,"remove",(r,s,o)=>{let l=this._bindToExternalToInternalMap.get(s);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((u,f)=>(o<f&&u.push(f-1),o>f&&u.push(f),u),[])})}_getItemIdBeforeAdding(e){let t=this._idProperty,n;if(t in e){if(n=e[t],typeof n!="string")throw new L("collection-add-invalid-id",this);if(this.get(n))throw new L("collection-add-item-already-exists",this)}else e[t]=n=Si();return n}_remove(e){let t,n,r,s=!1,o=this._idProperty;if(typeof e=="string"?(n=e,r=this._itemMap.get(n),s=!r,r&&(t=this._items.indexOf(r))):typeof e=="number"?(t=e,r=this._items[t],s=!r,r&&(n=r[o])):(r=e,n=r[o],t=this._items.indexOf(r),s=t==-1||!this._itemMap.get(n)),s)throw new L("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(n);let l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,t),[r,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}};function $t(i){let e=i.next();return e.done?null:e.value}var Vt=class extends Vi(gt()){constructor(){super();v(this,"_elements",new Set);v(this,"_externalViews",new Set);v(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(UL(e))this._addElement(e);else if(zL(e))this._addView(e);else{if(!e.element)throw new L("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){UL(e)?this._removeElement(e):zL(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new L("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{let t=this.externalViews.find(n=>Sae(e,n));t?this._focus(t.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(n=>n.contains(document.activeElement))||this.externalViews.find(n=>n.focusTracker.isFocused&&!n.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}};function zL(i){return"focusTracker"in i&&i.focusTracker instanceof Vt}function UL(i){return Xn(i)}function Sae(i,e){return WL(i,e)?!0:!!e.focusTracker.externalViews.find(t=>WL(i,t))}function WL(i,e){return!!e.element&&e.element.contains(document.activeElement)&&i.contains(e.element)}var Jt=class{constructor(){v(this,"_listener");this._listener=new(Vi())}listenTo(e){this._listener.listenTo(e,"keydown",(t,n)=>{this._listener.fire("_keydown:"+no(n),n)})}set(e,t,n={}){let r=Eh(e),s=n.priority;this._listener.listenTo(this._listener,"_keydown:"+r,(o,l)=>{n.filter&&!n.filter(l)||(t(l,()=>{l.preventDefault(),l.stopPropagation(),o.stop()}),o.return=!0)},{priority:s})}press(e){return!!this._listener.fire("_keydown:"+no(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}};function Aae(i){let e=new Map;for(let t in i)e.set(t,i[t]);return e}function Nn(i){return _n(i)?new Map(i):Aae(i)}var Iae=1e4;function _y(i,e,t,n){if(Math.max(e.length,i.length)>Iae)return i.slice(0,t).concat(e).concat(i.slice(t+n,i.length));{let r=Array.from(i);return r.splice(t,n,...e),r}}function nu(i,e){let t;function n(...r){n.cancel(),t=setTimeout(()=>i(...r),e)}return n.cancel=()=>{clearTimeout(t)},n}function qL(i){function e(p){return p.length>=40&&p.length<=255?"VALID":"INVALID"}if(!i)return"INVALID";let t="";try{t=atob(i)}catch(p){return"INVALID"}let n=t.split("-"),r=n[0],s=n[1];if(!s)return e(i);try{atob(s)}catch(p){try{if(atob(r),!atob(r).length)return e(i)}catch(y){return e(i)}}if(r.length<40||r.length>255)return"INVALID";let o="";try{atob(r),o=atob(s)}catch(p){return"INVALID"}if(o.length!==8)return"INVALID";let l=Number(o.substring(0,4)),u=Number(o.substring(4,6))-1,f=Number(o.substring(6,8)),g=new Date(l,u,f);return g<Koe||isNaN(Number(g))?"INVALID":"VALID"}function Pae(i){return!!i&&i.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i)}function Rae(i){return!!i&&i.length==1&&/[\ud800-\udbff]/.test(i)}function Oae(i){return!!i&&i.length==1&&/[\udc00-\udfff]/.test(i)}function Ih(i,e){return Rae(i.charAt(e-1))&&Oae(i.charAt(e))}function Ph(i,e){return Pae(i.charAt(e))}var Mae=Lae();function Ep(i,e){let t=String(i).matchAll(Mae);return Array.from(t).some(n=>n.index<e&&e<n.index+n[0].length)}function Lae(){let i=[/\p{Emoji}[\u{E0020}-\u{E007E}]+\u{E007F}/u,/\p{Emoji}\u{FE0F}?\u{20E3}/u,/\p{Emoji}\u{FE0F}/u,/(?=\p{General_Category=Other_Symbol})\p{Emoji}\p{Emoji_Modifier}*/u],e=/\p{Regional_Indicator}{2}/u.source,t="(?:"+i.map(r=>r.source).join("|")+")",n=`${e}|${t}(?:\u200D${t})*`;return new RegExp(n,"ug")}var Sp=new WeakMap,$L=!1;function ro({view:i,element:e,text:t,isDirectHost:n=!0,keepOnFocus:r=!1}){let s=i.document;Sp.has(s)||(Sp.set(s,new Map),s.registerPostFixer(l=>xy(s,l)),s.on("change:isComposing",()=>{i.change(l=>xy(s,l))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(l,u,f)=>{o(f)}),e.placeholder?o(e.placeholder):t&&o(t),t&&Vae();function o(l){Sp.get(s).set(e,{text:l,isDirectHost:n,keepOnFocus:r,hostElement:n?e:null}),i.change(u=>xy(s,u))}}function GL(i,e){return e.hasClass("ck-placeholder")?!1:(i.addClass("ck-placeholder",e),!0)}function KL(i,e){return e.hasClass("ck-placeholder")?(i.removeClass("ck-placeholder",e),!0):!1}function YL(i,e){if(!i.isAttached()||Array.from(i.getChildren()).some(o=>!o.is("uiElement")))return!1;let n=i.document,s=n.selection.anchor;return n.isComposing&&s&&s.parent===i?!1:e||!n.isFocused?!0:!!s&&s.parent!==i}function xy(i,e){let t=Sp.get(i),n=[],r=!1;for(let[s,o]of t)o.isDirectHost&&(n.push(s),ZL(e,s,o)&&(r=!0));for(let[s,o]of t){if(o.isDirectHost)continue;let l=Dae(s);!l||n.includes(l)||(o.hostElement=l,ZL(e,s,o)&&(r=!0))}return r}function ZL(i,e,t){let{text:n,isDirectHost:r,hostElement:s}=t,o=!1;return s.getAttribute("data-placeholder")!==n&&(i.setAttribute("data-placeholder",n,s),o=!0),(r||e.childCount==1)&&YL(s,t.keepOnFocus)?GL(i,s)&&(o=!0):KL(i,s)&&(o=!0),o}function Dae(i){if(i.childCount){let e=i.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function Vae(){$L||at("enableplaceholder-deprecated-text-option"),$L=!0}var sl=class{is(){throw new Error("is() method is abstract")}},ol=class extends wt(sl){constructor(e){super();v(this,"document");v(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new L("view-node-not-found-in-parent",this);return e}get nextSibling(){let e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){let e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){let e=[],t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){let t=[],n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){let n=this.getAncestors(t),r=e.getAncestors(t),s=0;for(;n[s]==r[s]&&n[s];)s++;return s===0?null:n[s-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;let t=this.getPath(),n=e.getPath(),r=Wi(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){let e=cp(this);return delete e.parent,e}};ol.prototype.is=function(i){return i==="node"||i==="view:node"};var zt=class ky extends ol{constructor(e,t){super(e);v(this,"_textData");this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof ky?this===e||this.data===e.data:!1}_clone(){return new ky(this.document,this.data)}};zt.prototype.is=function(i){return i==="$text"||i==="view:$text"||i==="text"||i==="view:text"||i==="node"||i==="view:node"};var bs=class extends sl{constructor(e,t,n){super();v(this,"textNode");v(this,"data");v(this,"offsetInText");if(this.textNode=e,t<0||t>e.data.length)throw new L("view-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.data.length)throw new L("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){let t=[],n=e.includeSelf?this.textNode:this.parent;for(;n!==null;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}};bs.prototype.is=function(i){return i==="$textProxy"||i==="view:$textProxy"||i==="textProxy"||i==="view:textProxy"};var er=class{constructor(...e){v(this,"_patterns",[]);this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(let t of e)for(let n of this._patterns){let r=JL(t,n);if(r)return{element:t,pattern:n,match:r}}return null}matchAll(...e){let t=[];for(let n of e)for(let r of this._patterns){let s=JL(n,r);s&&t.push({element:n,pattern:r,match:s})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;let e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}};function JL(i,e){if(typeof e=="function")return e(i);let t={};return e.name&&(t.name=Bae(e.name,i.name),!t.name)||e.attributes&&(t.attributes=Hae(e.attributes,i),!t.attributes)||e.classes&&(t.classes=zae(e.classes,i),!t.classes)||e.styles&&(t.styles=Uae(e.styles,i),!t.styles)?null:t}function Bae(i,e){return i instanceof RegExp?!!e.match(i):i===e}function Cy(i,e,t){let n=Nae(i),r=Array.from(e),s=[];if(n.forEach(([o,l])=>{r.forEach(u=>{Fae(o,u)&&jae(l,u,t)&&s.push(u)})}),!(!n.length||s.length<n.length))return s}function Nae(i){return Array.isArray(i)?i.map(e=>fi(e)?((e.key===void 0||e.value===void 0)&&at("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):fi(i)?Object.entries(i):[[i,!0]]}function Fae(i,e){return i===!0||i===e||i instanceof RegExp&&e.match(i)}function jae(i,e,t){if(i===!0)return!0;let n=t(e);return i===n||i instanceof RegExp&&!!String(n).match(i)}function Hae(i,e){let t=new Set(e.getAttributeKeys());return fi(i)?(i.style!==void 0&&at("matcher-pattern-deprecated-attributes-style-key",i),i.class!==void 0&&at("matcher-pattern-deprecated-attributes-class-key",i)):(t.delete("style"),t.delete("class")),Cy(i,t,n=>e.getAttribute(n))}function zae(i,e){return Cy(i,e.getClassNames(),()=>{})}function Uae(i,e){return Cy(i,e.getStyleNames(!0),t=>e.getStyle(t))}var ru=class{constructor(e){v(this,"_styles");v(this,"_styleProcessor");this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();let t=Wae(e);for(let[n,r]of t)this._styleProcessor.toNormalizedForm(n,r,this._styles)}has(e){if(this.isEmpty)return!1;let n=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);return Array.isArray(n)}set(e,t){if(it(e))for(let[n,r]of Object.entries(e))this._styleProcessor.toNormalizedForm(n,r,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){let t=Ty(e);ny(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!it(this._styles[e]))return this._styles[e];let n=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);if(Array.isArray(n))return n[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([n])=>n)}clear(){this._styles={}}getStylesEntries(){let e=[],t=Object.keys(this._styles);for(let n of t)e.push(...this._styleProcessor.getReducedForm(n,this._styles));return e}_cleanEmptyObjectsOnPath(e){let t=e.split(".");if(!(t.length>1))return;let r=t.splice(0,t.length-1).join("."),s=na(this._styles,r);if(!s)return;!Object.keys(s).length&&this.remove(r)}},Rh=class{constructor(){v(this,"_normalizers");v(this,"_extractors");v(this,"_reducers");v(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,n){if(it(t)){Ey(n,Ty(e),t);return}if(this._normalizers.has(e)){let r=this._normalizers.get(e),{path:s,value:o}=r(t);Ey(n,s,o)}else Ey(n,e,t)}getNormalized(e,t){if(!e)return Jc({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){let n=this._extractors.get(e);if(typeof n=="string")return na(t,n);let r=n(e,t);if(r)return r}return na(t,Ty(e))}getReducedForm(e,t){let n=this.getNormalized(e,t);return n===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(n):[[e,n]]}getStyleNames(e){let t=new Set;for(let n of this._consumables.keys()){let r=this.getNormalized(n,e);r&&(typeof r!="object"||Object.keys(r).length)&&t.add(n)}for(let n of Object.keys(e))t.add(n);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(let n of t)this._mapStyleNames(n,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}};function Wae(i){let e=null,t=0,n=0,r=null,s=new Map;if(i==="")return s;i.charAt(i.length-1)!=";"&&(i=i+";");for(let o=0;o<i.length;o++){let l=i.charAt(o);if(e===null)switch(l){case":":r||(r=i.substr(t,o-t),n=o+1);break;case'"':case"'":e=l;break;case";":{let u=i.substr(n,o-n);r&&s.set(r.trim(),u.trim()),r=null,t=o+1;break}}else l===e&&(e=null)}return s}function Ty(i){return i.replace("-",".")}function Ey(i,e,t){let n=t;it(t)&&(n=Jc({},na(i,e),t)),ty(i,e,n)}var yr=class XL extends ol{constructor(e,t,n,r){super(e);v(this,"name");v(this,"_unsafeAttributesToRender",[]);v(this,"_attrs");v(this,"_children");v(this,"_classes");v(this,"_styles");v(this,"_customProperties",new Map);if(this.name=t,this._attrs=qae(n),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){let s=this._attrs.get("class");QL(this._classes,s),this._attrs.delete("class")}this._styles=new ru(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){let t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof XL))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(let[t,n]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==n)return!1;for(let t of this._classes)if(!e._classes.has(t))return!1;for(let t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(let t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(let t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){let t=new er(...e),n=this.parent;for(;n&&!n.is("documentFragment");){if(t.match(n))return n;n=n.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){let e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),n=Array.from(this._attrs).map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(n==""?"":` ${n}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){let t=[];if(e)for(let r of this.getChildren())t.push(r._clone(e));let n=new this.constructor(this.document,this.name,this._attrs,t);return n._classes=new Set(this._classes),n._styles.set(this._styles.getNormalized()),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._unsafeAttributesToRender=this._unsafeAttributesToRender,n}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let n=0,r=$ae(this.document,t);for(let s of r)s.parent!==null&&s._remove(),s.parent=this,s.document=this.document,this._children.splice(e,0,s),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){let n=String(t);this._fireChange("attributes",this),e=="class"?QL(this._classes,n):e=="style"?this._styles.setTo(n):this._attrs.set(e,n)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(let t of lt(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(let t of lt(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(let t of lt(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};yr.prototype.is=function(i,e){return e?e===this.name&&(i==="element"||i==="view:element"):i==="element"||i==="view:element"||i==="node"||i==="view:node"};function qae(i){let e=Nn(i);for(let[t,n]of e)n===null?e.delete(t):typeof n!="string"&&e.set(t,String(n));return e}function QL(i,e){let t=e.split(/\s+/);i.clear(),t.forEach(n=>i.add(n))}function $ae(i,e){return typeof e=="string"?[new zt(i,e)]:(_n(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new zt(i,t):t instanceof bs?new zt(i,t.data):t))}var oa=class extends yr{constructor(e,t,n,r){super(e,t,n,r);this.getFillerOffset=e4}};oa.prototype.is=function(i,e){return e?e===this.name&&(i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function e4(){let i=[...this.getChildren()],e=i[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(let t of i)if(!t.is("uiElement"))return null;return this.childCount}var Oh=class extends gt(oa){constructor(e,t,n,r){super(e,t,n,r);this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",s=>s&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}};Oh.prototype.is=function(i,e){return e?e===this.name&&(i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};var t4=Symbol("rootName"),Ap=class extends Oh{constructor(e,t){super(e,t);this.rootName="main"}get rootName(){return this.getCustomProperty(t4)}set rootName(e){this._setCustomProperty(t4,e)}set _name(e){this.name=e}};Ap.prototype.is=function(i,e){return e?e===this.name&&(i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};var al=class{constructor(e={}){v(this,"direction");v(this,"boundaries");v(this,"singleCharacters");v(this,"shallow");v(this,"ignoreElementEnd");v(this,"_position");v(this,"_boundaryStartParent");v(this,"_boundaryEndParent");if(!e.boundaries&&!e.startPosition)throw new L("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new L("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=me._createAt(e.startPosition):this._position=me._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,n;do n=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=n)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone(),t=this.position,n=e.parent;if(n.parent===null&&e.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let r;if(n instanceof zt){if(e.isAtEnd)return this._position=me._createAfter(n),this._next();r=n.data[e.offset]}else r=n.getChild(e.offset);if(r instanceof yr){if(!this.shallow)e=new me(r,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",r,t,e,1)}if(r instanceof zt){if(this.singleCharacters)return e=new me(r,0),this._position=e,this._next();let s=r.data.length,o;return r==this._boundaryEndParent?(s=this.boundaries.end.offset,o=new bs(r,0,s),e=me._createAfter(o)):(o=new bs(r,0,r.data.length),e.offset++),this._position=e,this._formatReturnValue("text",o,t,e,s)}if(typeof r=="string"){let s;this.singleCharacters?s=1:s=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-e.offset;let o=new bs(n,e.offset,s);return e.offset+=s,this._position=e,this._formatReturnValue("text",o,t,e,s)}return e=me._createAfter(n),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,t,e)}_previous(){let e=this.position.clone(),t=this.position,n=e.parent;if(n.parent===null&&e.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let r;if(n instanceof zt){if(e.isAtStart)return this._position=me._createBefore(n),this._previous();r=n.data[e.offset-1]}else r=n.getChild(e.offset-1);if(r instanceof yr)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",r,t,e,1)):(e=new me(r,r.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,t,e));if(r instanceof zt){if(this.singleCharacters)return e=new me(r,r.data.length),this._position=e,this._previous();let s=r.data.length,o;if(r==this._boundaryStartParent){let l=this.boundaries.start.offset;o=new bs(r,l,r.data.length-l),s=o.data.length,e=me._createBefore(o)}else o=new bs(r,0,r.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",o,t,e,s)}if(typeof r=="string"){let s;if(this.singleCharacters)s=1;else{let l=n===this._boundaryStartParent?this.boundaries.start.offset:0;s=e.offset-l}e.offset-=s;let o=new bs(n,e.offset,s);return this._position=e,this._formatReturnValue("text",o,t,e,s)}return e=me._createBefore(n),this._position=e,this._formatReturnValue("elementStart",n,t,e,1)}_formatReturnValue(e,t,n,r,s){return t instanceof bs&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(r=me._createAfter(t.textNode),this._position=r):n=me._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(r=me._createBefore(t.textNode),this._position=r):n=me._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:r,length:s}}}},me=class so extends sl{constructor(e,t){super();v(this,"parent");v(this,"offset");this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){let e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Oh);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){let t=so._createAt(this),n=t.offset+e;return t.offset=n<0?0:n,t}getLastMatchingPosition(e,t={}){t.startPosition=this;let n=new al(t);return n.skip(e),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){let t=this.getAncestors(),n=e.getAncestors(),r=0;for(;t[r]==n[r]&&t[r];)r++;return r===0?null:t[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";let t=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),n.push(e.offset);let r=Wi(t,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return t[r]<n[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new al(e)}clone(){return new so(this.parent,this.offset)}static _createAt(e,t){if(e instanceof so)return new this(e.parent,e.offset);{let n=e;if(t=="end")t=n.is("$text")?n.data.length:n.childCount;else{if(t=="before")return this._createBefore(n);if(t=="after")return this._createAfter(n);if(t!==0&&!t)throw new L("view-createpositionat-offset-required",n)}return new so(n,t)}}static _createAfter(e){if(e.is("$textProxy"))return new so(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new L("view-position-after-root",e,{root:e});return new so(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new so(e.textNode,e.offsetInText);if(!e.parent)throw new L("view-position-before-root",e,{root:e});return new so(e.parent,e.index)}};me.prototype.is=function(i){return i==="position"||i==="view:position"};var Ze=class aa extends sl{constructor(e,t=null){super();v(this,"start");v(this,"end");this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new al({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Ip,{direction:"backward"}),t=this.end.getLastMatchingPosition(Ip);return e.parent.is("$text")&&e.isAtStart&&(e=me._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=me._createAfter(t.parent)),new aa(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(Ip);if(e.isAfter(this.end)||e.isEqual(this.end))return new aa(e,e);let t=this.end.getLastMatchingPosition(Ip,{direction:"backward"}),n=e.nodeAfter,r=t.nodeBefore;return n&&n.is("$text")&&(e=new me(n,0)),r&&r.is("$text")&&(t=new me(r,r.data.length)),new aa(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);let n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}getDifference(e){let t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new aa(this.start,e.start)),this.containsPosition(e.end)&&t.push(new aa(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new aa(t,n)}return null}getWalker(e={}){return e.boundaries=this,new al(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new aa(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;let t=new al(e);for(let n of t)yield n.item}*getPositions(e={}){e.boundaries=this;let t=new al(e);yield t.position;for(let n of t)yield n.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,n,r){return new this(new me(e,t),new me(n,r))}static _createFromPositionAndShift(e,t){let n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){let t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(me._createBefore(e),t)}};Ze.prototype.is=function(i){return i==="range"||i==="view:range"};function Ip(i){return!!(i.item.is("attributeElement")||i.item.is("uiElement"))}var oo=class i4 extends wt(sl){constructor(...e){super();v(this,"_ranges");v(this,"_lastRangeBackward");v(this,"_isFake");v(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;let e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;let e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(let e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(let t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(let t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){let e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){let e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(let t of this._ranges){let n=!1;for(let r of e._ranges)if(t.isEqual(r)){n=!0;break}if(!n)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;let t=kh(this.getRanges()),n=kh(e.getRanges());if(t!=n)return!1;if(t==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let s=!1;for(let o of e.getRanges())if(o=o.getTrimmed(),r.start.isEqual(o.start)&&r.end.isEqual(o.end)){s=!0;break}if(!s)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,n,r]=e;if(typeof n=="object"&&(r=n,n=void 0),t===null)this._setRanges([]),this._setFakeOptions(r);else if(t instanceof i4||t instanceof Mh)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof Ze)this._setRanges([t],r&&r.backward),this._setFakeOptions(r);else if(t instanceof me)this._setRanges([new Ze(t)]),this._setFakeOptions(r);else if(t instanceof ol){let s=!!r&&!!r.backward,o;if(n===void 0)throw new L("view-selection-setto-required-second-parameter",this);n=="in"?o=Ze._createIn(t):n=="on"?o=Ze._createOn(t):o=new Ze(me._createAt(t,n)),this._setRanges([o],s),this._setFakeOptions(r)}else if(_n(t))this._setRanges(t,r&&r.backward),this._setFakeOptions(r);else throw new L("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new L("view-selection-setfocus-no-ranges",this);let n=me._createAt(e,t);if(n.compareWith(this.focus)=="same")return;let r=this.anchor;this._ranges.pop(),n.compareWith(r)=="before"?this._addRange(new Ze(n,r),!0):this._addRange(new Ze(r,n)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(let n of e)this._addRange(n);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof Ze))throw new L("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(let t of this._ranges)if(e.isIntersecting(t))throw new L("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new Ze(e.start,e.end))}};oo.prototype.is=function(i){return i==="selection"||i==="view:selection"};var Mh=class extends wt(sl){constructor(...e){super();v(this,"_selection");this._selection=new oo,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};Mh.prototype.is=function(i){return i==="selection"||i=="documentSelection"||i=="view:selection"||i=="view:documentSelection"};var ao=class extends Qn{constructor(e,t,n){super(e,t);v(this,"startRange");v(this,"_eventPhase");v(this,"_currentTarget");this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}},Sy=Symbol("bubbling contexts");function Ay(i){class e extends i{fire(n,...r){try{let s=n instanceof Qn?n:new Qn(this,n),o=Iy(this);if(!o.size)return;if(Lh(s,"capturing",this),su(o,"$capture",s,...r))return s.return;let l=s.startRange||this.selection.getFirstRange(),u=l?l.getContainedElement():null,f=u?Boolean(n4(o,u)):!1,g=u||Gae(l);if(Lh(s,"atTarget",g),!f){if(su(o,"$text",s,...r))return s.return;Lh(s,"bubbling",g)}for(;g;){if(g.is("rootElement")){if(su(o,"$root",s,...r))return s.return}else if(g.is("element")&&su(o,g.name,s,...r))return s.return;if(su(o,g,s,...r))return s.return;g=g.parent,Lh(s,"bubbling",g)}return Lh(s,"bubbling",this),su(o,"$document",s,...r),s.return}catch(s){L.rethrowUnexpectedError(s,this)}}_addEventListener(n,r,s){let o=lt(s.context||"$document"),l=Iy(this);for(let u of o){let f=l.get(u);f||(f=new(wt()),l.set(u,f)),this.listenTo(f,n,r,s)}}_removeEventListener(n,r){let s=Iy(this);for(let o of s.values())this.stopListening(o,n,r)}}return e}{let i=Ay(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Ay[e]=i.prototype[e]})}function Lh(i,e,t){i instanceof ao&&(i._eventPhase=e,i._currentTarget=t)}function su(i,e,t,...n){let r=typeof e=="string"?i.get(e):n4(i,e);return r?(r.fire(t,...n),t.stop.called):!1}function n4(i,e){for(let[t,n]of i)if(typeof t=="function"&&t(e))return n;return null}function Iy(i){return i[Sy]||(i[Sy]=new Map),i[Sy]}function Gae(i){if(!i)return null;let e=i.start.parent,t=i.end.parent,n=e.getPath(),r=t.getPath();return n.length>r.length?e:t}var Pp=class extends Ay(gt()){constructor(e){super();v(this,"selection");v(this,"roots");v(this,"stylesProcessor");v(this,"_postFixers",new Set);this.selection=new Mh,this.roots=new Ht({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(let n of this._postFixers)if(t=n(e),t)break;while(t)}},r4=10,lo=class extends yr{constructor(e,t,n,r){super(e,t,n,r);v(this,"_priority",r4);v(this,"_id",null);v(this,"_clonesGroup",null);this.getFillerOffset=Kae}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new L("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){let t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}};v(lo,"DEFAULT_PRIORITY",r4);lo.prototype.is=function(i,e){return e?e===this.name&&(i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"):i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Kae(){if(Py(this))return null;let i=this.parent;for(;i&&i.is("attributeElement");){if(Py(i)>1)return null;i=i.parent}return!i||Py(i)>1?null:this.childCount}function Py(i){return Array.from(i.getChildren()).filter(e=>!e.is("uiElement")).length}var Dh=class extends yr{constructor(e,t,n,r){super(e,t,n,r);this.getFillerOffset=Yae}_insertChild(e,t){if(t&&(t instanceof ol||Array.from(t).length>0))throw new L("view-emptyelement-cannot-add",[this,t]);return 0}};Dh.prototype.is=function(i,e){return e?e===this.name&&(i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"):i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Yae(){return null}var ou=class extends yr{constructor(e,t,n,r){super(e,t,n,r);this.getFillerOffset=Jae}_insertChild(e,t){if(t&&(t instanceof ol||Array.from(t).length>0))throw new L("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){let t=e.createElement(this.name);for(let n of this.getAttributeKeys())t.setAttribute(n,this.getAttribute(n));return t}};ou.prototype.is=function(i,e){return e?e===this.name&&(i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"):i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Zae(i){i.document.on("arrowKey",(e,t)=>Xae(e,t,i.domConverter),{priority:"low"})}function Jae(){return null}function Xae(i,e,t){if(e.keyCode==Ge.arrowright){let n=e.domTarget.ownerDocument.defaultView.getSelection(),r=n.rangeCount==1&&n.getRangeAt(0).collapsed;if(r||e.shiftKey){let s=n.focusNode,o=n.focusOffset,l=t.domPositionToView(s,o);if(l===null)return;let u=!1,f=l.getLastMatchingPosition(g=>(g.item.is("uiElement")&&(u=!0),!!(g.item.is("uiElement")||g.item.is("attributeElement"))));if(u){let g=t.viewPositionToDom(f);r?n.collapse(g.parent,g.offset):n.extend(g.parent,g.offset)}}}}var Vh=class extends yr{constructor(e,t,n,r){super(e,t,n,r);this.getFillerOffset=Qae}_insertChild(e,t){if(t&&(t instanceof ol||Array.from(t).length>0))throw new L("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}};Vh.prototype.is=function(i,e){return e?e===this.name&&(i==="rawElement"||i==="view:rawElement"||i==="element"||i==="view:element"):i==="rawElement"||i==="view:rawElement"||i===this.name||i==="view:"+this.name||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Qae(){return null}var la=class extends wt(sl){constructor(e,t){super();v(this,"document");v(this,"_children",[]);v(this,"_customProperties",new Map);this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let n=0,r=ele(this.document,t);for(let s of r)s.parent!==null&&s._remove(),s.parent=this,this._children.splice(e,0,s),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};la.prototype.is=function(i){return i==="documentFragment"||i==="view:documentFragment"};function ele(i,e){return typeof e=="string"?[new zt(i,e)]:(_n(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new zt(i,t):t instanceof bs?new zt(i,t.data):t))}var Rp=class{constructor(e){v(this,"document");v(this,"_cloneGroups",new Map);v(this,"_slotFactory",null);this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new la(this.document,e)}createText(e){return new zt(this.document,e)}createAttributeElement(e,t,n={}){let r=new lo(this.document,e,t);return typeof n.priority=="number"&&(r._priority=n.priority),n.id&&(r._id=n.id),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createContainerElement(e,t,n={},r={}){let s=null;fi(n)?r=n:s=n;let o=new oa(this.document,e,t,s);return r.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),o}createEditableElement(e,t,n={}){let r=new Oh(this.document,e,t);return n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createEmptyElement(e,t,n={}){let r=new Dh(this.document,e,t);return n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createUIElement(e,t,n){let r=new ou(this.document,e,t);return n&&(r.render=n),r}createRawElement(e,t,n,r={}){let s=new Vh(this.document,e,t);return n&&(s.render=n),r.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),s}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){fi(e)&&n===void 0?t._setStyle(e):n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof me?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){let t=e.parent;if(!t.is("containerElement"))throw new L("view-writer-break-non-container-element",this.document);if(!t.parent)throw new L("view-writer-break-root",this.document);if(e.isAtStart)return me._createBefore(t);if(!e.isAtEnd){let n=t._clone(!1);this.insert(me._createAfter(t),n);let r=new Ze(e,me._createAt(t,"end")),s=new me(n,0);this.move(r,s)}return me._createAfter(t)}mergeAttributes(e){let t=e.offset,n=e.parent;if(n.is("$text"))return e;if(n.is("attributeElement")&&n.childCount===0){let o=n.parent,l=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new me(o,l))}let r=n.getChild(t-1),s=n.getChild(t);if(!r||!s)return e;if(r.is("$text")&&s.is("$text"))return o4(r,s);if(r.is("attributeElement")&&s.is("attributeElement")&&r.isSimilar(s)){let o=r.childCount;return r._appendChild(s.getChildren()),s._remove(),this._removeFromClonedElementsGroup(s),this.mergeAttributes(new me(r,o))}return e}mergeContainers(e){let t=e.nodeBefore,n=e.nodeAfter;if(!t||!n||!t.is("containerElement")||!n.is("containerElement"))throw new L("view-writer-merge-containers-invalid-position",this.document);let r=t.getChild(t.childCount-1),s=r instanceof zt?me._createAt(r,"end"):me._createAt(t,"end");return this.move(Ze._createIn(n),me._createAt(t,"end")),this.remove(Ze._createOn(n)),s}insert(e,t){t=_n(t)?[...t]:[t],a4(t,this.document);let n=t.reduce((o,l)=>{let u=o[o.length-1],f=!l.is("uiElement");return!u||u.breakAttributes!=f?o.push({breakAttributes:f,nodes:[l]}):u.nodes.push(l),o},[]),r=null,s=e;for(let{nodes:o,breakAttributes:l}of n){let u=this._insertNodes(s,o,l);r||(r=u.start),s=u.end}return r?new Ze(r,s):new Ze(e)}remove(e){let t=e instanceof Ze?e:Ze._createOn(e);if(Bh(t,this.document),t.isCollapsed)return new la(this.document);let{start:n,end:r}=this._breakAttributesRange(t,!0),s=n.parent,o=r.offset-n.offset,l=s._removeChildren(n.offset,o);for(let f of l)this._removeFromClonedElementsGroup(f);let u=this.mergeAttributes(n);return t.start=u,t.end=u.clone(),new la(this.document,l)}clear(e,t){Bh(e,this.document);let n=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(let r of n){let s=r.item,o;if(s.is("element")&&t.isSimilar(s))o=Ze._createOn(s);else if(!r.nextPosition.isAfter(e.start)&&s.is("$textProxy")){let l=s.getAncestors().find(u=>u.is("element")&&t.isSimilar(u));l&&(o=Ze._createIn(l))}o&&(o.end.isAfter(e.end)&&(o.end=e.end),o.start.isBefore(e.start)&&(o.start=e.start),this.remove(o))}}move(e,t){let n;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);let r=t.parent,s=r.childCount;e=this._breakAttributesRange(e,!0),n=this.remove(e),t.offset+=r.childCount-s}else n=this.remove(e);return this.insert(t,n)}wrap(e,t){if(!(t instanceof lo))throw new L("view-writer-wrap-invalid-attribute",this.document);if(Bh(e,this.document),e.isCollapsed){let n=e.start;n.parent.is("element")&&!tle(n.parent)&&(n=n.getLastMatchingPosition(s=>s.item.is("uiElement"))),n=this._wrapPosition(n,t);let r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(e.start)&&this.setSelection(n),new Ze(n)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof lo))throw new L("view-writer-unwrap-invalid-attribute",this.document);if(Bh(e,this.document),e.isCollapsed)return e;let{start:n,end:r}=this._breakAttributesRange(e,!0),s=n.parent,o=this._unwrapChildren(s,n.offset,r.offset,t),l=this.mergeAttributes(o.start);l.isEqual(o.start)||o.end.offset--;let u=this.mergeAttributes(o.end);return new Ze(l,u)}rename(e,t){let n=new oa(this.document,e,t.getAttributes());return this.insert(me._createAfter(t),n),this.move(Ze._createIn(t),me._createAt(n,0)),this.remove(Ze._createOn(t)),n}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return me._createAt(e,t)}createPositionAfter(e){return me._createAfter(e)}createPositionBefore(e){return me._createBefore(e)}createRange(e,t){return new Ze(e,t)}createRangeOn(e){return Ze._createOn(e)}createRangeIn(e){return Ze._createIn(e)}createSelection(...e){return new oo(...e)}createSlot(e="children"){if(!this._slotFactory)throw new L("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,n){let r;if(n?r=Ry(e):r=e.parent.is("$text")?e.parent.parent:e.parent,!r)throw new L("view-writer-invalid-position-container",this.document);let s;n?s=this._breakAttributes(e,!0):s=e.parent.is("$text")?Oy(e):e;let o=r._insertChild(s.offset,t);for(let g of t)this._addToClonedElementsGroup(g);let l=s.getShiftedBy(o),u=this.mergeAttributes(s);u.isEqual(s)||l.offset--;let f=this.mergeAttributes(l);return new Ze(u,f)}_wrapChildren(e,t,n,r){let s=t,o=[];for(;s<n;){let u=e.getChild(s),f=u.is("$text"),g=u.is("attributeElement");if(g&&this._wrapAttributeElement(r,u))o.push(new me(e,s));else if(f||!g||ile(r,u)){let p=r._clone();u._remove(),p._appendChild(u),e._insertChild(s,p),this._addToClonedElementsGroup(p),o.push(new me(e,s))}else this._wrapChildren(u,0,u.childCount,r);s++}let l=0;for(let u of o){if(u.offset-=l,u.offset==t)continue;this.mergeAttributes(u).isEqual(u)||(l++,n--)}return Ze._createFromParentsAndOffsets(e,t,e,n)}_unwrapChildren(e,t,n,r){let s=t,o=[];for(;s<n;){let u=e.getChild(s);if(!u.is("attributeElement")){s++;continue}if(u.isSimilar(r)){let f=u.getChildren(),g=u.childCount;u._remove(),e._insertChild(s,f),this._removeFromClonedElementsGroup(u),o.push(new me(e,s),new me(e,s+g)),s+=g,n+=g-1;continue}if(this._unwrapAttributeElement(r,u)){o.push(new me(e,s),new me(e,s+1)),s++;continue}this._unwrapChildren(u,0,u.childCount,r),s++}let l=0;for(let u of o){if(u.offset-=l,u.offset==t||u.offset==n)continue;this.mergeAttributes(u).isEqual(u)||(l++,n--)}return Ze._createFromParentsAndOffsets(e,t,e,n)}_wrapRange(e,t){let{start:n,end:r}=this._breakAttributesRange(e,!0),s=n.parent,o=this._wrapChildren(s,n.offset,r.offset,t),l=this.mergeAttributes(o.start);l.isEqual(o.start)||o.end.offset--;let u=this.mergeAttributes(o.end);return new Ze(l,u)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return s4(e.clone());e.parent.is("$text")&&(e=Oy(e));let n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,e.parent._insertChild(e.offset,n);let r=new Ze(e,e.getShiftedBy(1));this.wrap(r,t);let s=new me(n.parent,n.index);n._remove();let o=s.nodeBefore,l=s.nodeAfter;return o instanceof zt&&l instanceof zt?o4(o,l):s4(s)}_wrapAttributeElement(e,t){if(!l4(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(let n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&t.hasAttribute(n)&&t.getAttribute(n)!==e.getAttribute(n))return!1;for(let n of e.getStyleNames())if(t.hasStyle(n)&&t.getStyle(n)!==e.getStyle(n))return!1;for(let n of e.getAttributeKeys())n==="class"||n==="style"||t.hasAttribute(n)||this.setAttribute(n,e.getAttribute(n),t);for(let n of e.getStyleNames())t.hasStyle(n)||this.setStyle(n,e.getStyle(n),t);for(let n of e.getClassNames())t.hasClass(n)||this.addClass(n,t);return!0}_unwrapAttributeElement(e,t){if(!l4(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(let n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&(!t.hasAttribute(n)||t.getAttribute(n)!==e.getAttribute(n)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(let n of e.getStyleNames())if(!t.hasStyle(n)||t.getStyle(n)!==e.getStyle(n))return!1;for(let n of e.getAttributeKeys())n==="class"||n==="style"||this.removeAttribute(n,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){let n=e.start,r=e.end;if(Bh(e,this.document),e.isCollapsed){let u=this._breakAttributes(e.start,t);return new Ze(u,u)}let s=this._breakAttributes(r,t),o=s.parent.childCount,l=this._breakAttributes(n,t);return s.offset+=s.parent.childCount-o,new Ze(l,s)}_breakAttributes(e,t=!1){let n=e.offset,r=e.parent;if(e.parent.is("emptyElement"))throw new L("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new L("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new L("view-writer-cannot-break-raw-element",this.document);if(!t&&r.is("$text")&&My(r.parent)||My(r))return e.clone();if(r.is("$text"))return this._breakAttributes(Oy(e),t);let s=r.childCount;if(n==s){let o=new me(r.parent,r.index+1);return this._breakAttributes(o,t)}else if(n===0){let o=new me(r.parent,r.index);return this._breakAttributes(o,t)}else{let o=r.index+1,l=r._clone();r.parent._insertChild(o,l),this._addToClonedElementsGroup(l);let u=r.childCount-n,f=r._removeChildren(n,u);l._appendChild(f);let g=new me(r.parent,o);return this._breakAttributes(g,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(let r of e.getChildren())this._addToClonedElementsGroup(r);let t=e.id;if(!t)return;let n=this._cloneGroups.get(t);n||(n=new Set,this._cloneGroups.set(t,n)),n.add(e),e._clonesGroup=n}_removeFromClonedElementsGroup(e){if(e.is("element"))for(let r of e.getChildren())this._removeFromClonedElementsGroup(r);let t=e.id;if(!t)return;let n=this._cloneGroups.get(t);!n||n.delete(e)}};function tle(i){return Array.from(i.getChildren()).some(e=>!e.is("uiElement"))}function Ry(i){let e=i.parent;for(;!My(e);){if(!e)return;e=e.parent}return e}function ile(i,e){return i.priority<e.priority?!0:i.priority>e.priority?!1:i.getIdentity()<e.getIdentity()}function s4(i){let e=i.nodeBefore;if(e&&e.is("$text"))return new me(e,e.data.length);let t=i.nodeAfter;return t&&t.is("$text")?new me(t,0):i}function Oy(i){if(i.offset==i.parent.data.length)return new me(i.parent.parent,i.parent.index+1);if(i.offset===0)return new me(i.parent.parent,i.parent.index);let e=i.parent.data.slice(i.offset);return i.parent._data=i.parent.data.slice(0,i.offset),i.parent.parent._insertChild(i.parent.index+1,new zt(i.root.document,e)),new me(i.parent.parent,i.parent.index+1)}function o4(i,e){let t=i.data.length;return i._data+=e.data,e._remove(),new me(i,t)}var nle=[zt,lo,oa,Dh,Vh,ou];function a4(i,e){for(let t of i){if(!nle.some(n=>t instanceof n))throw new L("view-writer-insert-invalid-node-type",e);t.is("$text")||a4(t.getChildren(),e)}}function My(i){return i&&(i.is("containerElement")||i.is("documentFragment"))}function Bh(i,e){let t=Ry(i.start),n=Ry(i.end);if(!t||!n||t!==n)throw new L("view-writer-invalid-range-container",e)}function l4(i,e){return i.id===null&&e.id===null}var c4=i=>i.createTextNode("\xA0"),u4=i=>{let e=i.createElement("span");return e.dataset.ckeFiller="true",e.innerText="\xA0",e},d4=i=>{let e=i.createElement("br");return e.dataset.ckeFiller="true",e},Wr=7,Nh="\u2060".repeat(Wr);function tr(i){return typeof i=="string"?i.substr(0,Wr)===Nh:jt(i)&&i.data.substr(0,Wr)===Nh}function au(i){return i.data.length==Wr&&tr(i)}function h4(i){let e=typeof i=="string"?i:i.data;return tr(i)?e.slice(Wr):e}function rle(i){i.document.on("arrowKey",sle,{priority:"low"})}function sle(i,e){if(e.keyCode==Ge.arrowleft){let t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){let n=t.getRangeAt(0).startContainer,r=t.getRangeAt(0).startOffset;tr(n)&&r<=Wr&&t.collapse(n,0)}}}var Ly=class extends gt(){constructor(e,t){super();v(this,"domDocuments",new Set);v(this,"domConverter");v(this,"markedAttributes",new Set);v(this,"markedChildren",new Set);v(this,"markedTexts",new Set);v(this,"selection");v(this,"_inlineFiller",null);v(this,"_fakeSelectionContainer",null);this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Le.isBlink&&!Le.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new L("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Le.isAndroid)return;let e=null,t=Le.isBlink&&!Le.isAndroid?!this.isSelecting:!0;for(let n of this.markedChildren)this._updateChildrenMappings(n);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=me._createBefore(e.parent)));for(let n of this.markedAttributes)this._updateAttrs(n);for(let n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:e});for(let n of this.markedTexts)!this.markedChildren.has(n.parent)&&this.domConverter.mapViewToDom(n.parent)&&this._updateText(n,{inlineFillerPosition:e});if(t)if(e){let n=this.domConverter.viewPositionToDom(e),r=n.parent.ownerDocument;tr(n.parent)?this._inlineFiller=n.parent:this._inlineFiller=f4(r,n.parent,n.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){let t=this.domConverter.mapViewToDom(e);if(!t)return;let n=Array.from(t.childNodes),r=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),s=this._diffNodeLists(n,r),o=this._findUpdateActions(s,n,r,ale);if(o.indexOf("update")!==-1){let l={equal:0,insert:0,delete:0};for(let u of o)if(u==="update"){let f=l.equal+l.insert,g=l.equal+l.delete,p=e.getChild(f);p&&!p.is("uiElement")&&!p.is("rawElement")&&this._updateElementMappings(p,n[g]),py(r[f]),l.equal++}else l[u]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){let e=this.selection.getFirstPosition();return e.parent.is("$text")?me._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;let e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&jt(t.parent)&&tr(t.parent))}_removeInlineFiller(){let e=this._inlineFiller;if(!tr(e))throw new L("view-renderer-filler-was-lost",this);au(e)?e.remove():e.data=e.data.substr(Wr),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;let e=this.selection.getFirstPosition(),t=e.parent,n=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!ole(t))return!1;let r=e.nodeBefore,s=e.nodeAfter;return!(r instanceof zt||s instanceof zt||n===t.getFillerOffset()&&(!r||!r.is("element","br"))||Le.isAndroid&&(r||s))}_updateText(e,t){let n=this.domConverter.findCorrespondingDomText(e),s=this.domConverter.viewToDom(e).data,o=t.inlineFillerPosition;o&&o.parent==e.parent&&o.offset==e.index&&(s=Nh+s),this._updateTextNode(n,s)}_updateAttrs(e){let t=this.domConverter.mapViewToDom(e);if(!!t){for(let n of t.attributes){let r=n.name;e.hasAttribute(r)||this.domConverter.removeDomElementAttribute(t,r)}for(let n of e.getAttributeKeys())this.domConverter.setDomElementAttribute(t,n,e.getAttribute(n),e)}}_updateChildren(e,t){let n=this.domConverter.mapViewToDom(e);if(!n)return;if(Le.isAndroid){let p=null;for(let y of Array.from(n.childNodes)){if(p&&jt(p)&&jt(y)){n.normalize();break}p=y}}let r=t.inlineFillerPosition,s=n.childNodes,o=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));r&&r.parent===e&&f4(n.ownerDocument,o,r.offset);let l=this._diffNodeLists(s,o),u=this._findUpdateActions(l,s,o,lle),f=0,g=new Set;for(let p of u)p==="delete"?(g.add(s[f]),py(s[f])):(p==="equal"||p==="update")&&f++;f=0;for(let p of u)p==="insert"?(my(n,f,o[f]),f++):p==="update"?(this._updateTextNode(s[f],o[f].data),f++):p==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(o[f])),f++);for(let p of g)p.parentNode||this.domConverter.unbindDomElement(p)}_diffNodeLists(e,t){return e=dle(e,this._fakeSelectionContainer),Xc(e,t,cle.bind(null,this.domConverter))}_findUpdateActions(e,t,n,r){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let s=[],o=[],l=[],u={equal:0,insert:0,delete:0};for(let f of e)f==="insert"?l.push(n[u.equal+u.insert]):f==="delete"?o.push(t[u.equal+u.delete]):(s=s.concat(Xc(o,l,r).map(g=>g==="equal"?"update":g)),s.push("equal"),o=[],l=[]),u[f]++;return s.concat(Xc(o,l,r).map(f=>f==="equal"?"update":f))}_updateTextNode(e,t){let n=e.data;n!=t&&(Le.isAndroid&&this.isComposing&&n.replace(/\u00A0/g," ")==t.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,t))}_updateTextNodeInternal(e,t){let n=sy(e.data,t);for(let r of n)r.type==="insert"?e.insertData(r.index,r.values.join("")):e.deleteData(r.index,r.howMany)}_markDescendantTextToSync(e){if(!!e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(let t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(Le.isBlink&&!Le.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}let e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Le.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){let t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=hle(t));let n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!n.parentElement||n.parentElement!=e)&&e.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||"\xA0";let r=t.getSelection(),s=t.createRange();r.removeAllRanges(),s.selectNodeContents(n),r.addRange(s)}_updateDomSelection(e){let t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;let n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(n.parent,n.offset,r.parent,r.offset),Le.isGecko&&ule(r,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;let t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){let t=this._fakeSelectionContainer,n=e.ownerDocument.getSelection();return!t||t.parentElement!==e||n.anchorNode!==t&&!t.contains(n.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(let e of this.domDocuments){let t=e.getSelection();if(t.rangeCount){let n=e.activeElement,r=this.domConverter.mapDomToView(n);n&&r&&t.removeAllRanges()}}}_removeFakeSelection(){let e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){let e=this.selection.editableElement;e&&this.domConverter.focus(e)}}};function ole(i){if(i.getAttribute("contenteditable")=="false")return!1;let e=i.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function f4(i,e,t){let n=e instanceof Array?e:e.childNodes,r=n[t];if(jt(r))return r.data=Nh+r.data,r;{let s=i.createTextNode(Nh);return Array.isArray(e)?n.splice(t,0,s):my(e,t,s),s}}function ale(i,e){return gs(i)&&gs(e)&&!jt(i)&&!jt(e)&&!iu(i)&&!iu(e)&&i.tagName.toLowerCase()===e.tagName.toLowerCase()}function lle(i,e){return gs(i)&&gs(e)&&jt(i)&&jt(e)}function cle(i,e,t){return e===t?!0:jt(e)&&jt(t)?e.data===t.data:!!(i.isBlockFiller(e)&&i.isBlockFiller(t))}function ule(i,e){let t=i.parent,n=i.offset;if(jt(t)&&au(t)&&(n=tu(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||n!=t.childNodes.length-1)return;let r=t.childNodes[n];r&&r.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function dle(i,e){let t=Array.from(i);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function hle(i){let e=i.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="\xA0",e}var fle=d4(we.document),mle=c4(we.document),gle=u4(we.document),Op="data-ck-unsafe-attribute-",m4="data-ck-unsafe-element",lu=class{constructor(e,{blockFillerMode:t,renderingMode:n="editing"}={}){v(this,"document");v(this,"renderingMode");v(this,"blockFillerMode");v(this,"preElements");v(this,"blockElements");v(this,"inlineObjectElements");v(this,"unsafeElements");v(this,"_domDocument");v(this,"_domToViewMapping",new WeakMap);v(this,"_viewToDomMapping",new WeakMap);v(this,"_fakeSelectionMapping",new WeakMap);v(this,"_rawContentElementMatcher",new er);v(this,"_inlineObjectElementMatcher",new er);v(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=e,this.renderingMode=n,this.blockFillerMode=t||(n==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?we.document:we.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new oo(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){let t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(let n of e.children)this.unbindDomElement(n)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,n){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(e==="src"||e==="srcset")||n==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}let n=new DOMParser().parseFromString(t,"text/html"),r=n.createDocumentFragment(),s=n.body.childNodes;for(;s.length>0;)r.appendChild(s[0]);let o=n.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),l=[],u;for(;u=o.nextNode();)l.push(u);for(let f of l){for(let p of f.getAttributeNames())this.setDomElementAttribute(f,p,f.getAttribute(p));let g=f.tagName.toLowerCase();this._shouldRenameElement(g)&&(b4(g),f.replaceWith(this._createReplacementDomElement(g,f)))}for(;e.firstChild;)e.firstChild.remove();e.append(r)}viewToDom(e,t={}){if(e.is("$text")){let n=this._processDataFromViewText(e);return this._domDocument.createTextNode(n)}else{let n=e;if(this.mapViewToDom(n))if(n.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(n);else return this.mapViewToDom(n);let r;if(n.is("documentFragment"))r=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(r,n);else{if(n.is("uiElement"))return n.name==="$comment"?r=this._domDocument.createComment(n.getCustomProperty("$rawContent")):r=n.render(this._domDocument,this),t.bind&&this.bindElements(r,n),r;this._shouldRenameElement(n.name)?(b4(n.name),r=this._createReplacementDomElement(n.name)):n.hasAttribute("xmlns")?r=this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):r=this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(r,this),t.bind&&this.bindElements(r,n);for(let s of n.getAttributeKeys())this.setDomElementAttribute(r,s,n.getAttribute(s),n)}if(t.withChildren!==!1)for(let s of this.viewChildrenToDom(n,t))r instanceof HTMLTemplateElement?r.content.appendChild(s):r.appendChild(s);return r}}setDomElementAttribute(e,t,n,r){let s=this.shouldRenderAttribute(t,n,e.tagName.toLowerCase())||r&&r.shouldRenderUnsafeAttribute(t);if(s||at("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:n}),!Tp(t)){at("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:n});return}e.hasAttribute(t)&&!s?e.removeAttribute(t):e.hasAttribute(Op+t)&&s&&e.removeAttribute(Op+t),e.setAttribute(s?t:Op+t,n)}removeDomElementAttribute(e,t){t!=m4&&(e.removeAttribute(t),e.removeAttribute(Op+t))}*viewChildrenToDom(e,t={}){let n=e.getFillerOffset&&e.getFillerOffset(),r=0;for(let s of e.getChildren()){n===r&&(yield this._getBlockFiller());let o=s.is("element")&&!!s.getCustomProperty("dataPipeline:transparentRendering")&&!$t(s.getAttributes());if(o&&this.renderingMode=="data")if(s.is("rawElement")){let l=this._domDocument.createElement(s.name);s.render(l,this),yield*[...l.childNodes]}else yield*this.viewChildrenToDom(s,t);else o&&at("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:s}),yield this.viewToDom(s,t);r++}n===r&&(yield this._getBlockFiller())}viewRangeToDom(e){let t=this.viewPositionToDom(e.start),n=this.viewPositionToDom(e.end),r=this._domDocument.createRange();return r.setStart(t.parent,t.offset),r.setEnd(n.parent,n.offset),r}viewPositionToDom(e){let t=e.parent;if(t.is("$text")){let n=this.findCorrespondingDomText(t);if(!n)return null;let r=e.offset;return tr(n)&&(r+=Wr),{parent:n,offset:r}}else{let n,r,s;if(e.offset===0){if(n=this.mapViewToDom(t),!n)return null;s=n.childNodes[0]}else{let l=e.nodeBefore;if(r=l.is("$text")?this.findCorrespondingDomText(l):this.mapViewToDom(l),!r)return null;n=r.parentNode,s=r.nextSibling}if(jt(s)&&tr(s))return{parent:s,offset:Wr};let o=r?tu(r)+1:0;return{parent:n,offset:o}}}domToView(e,t={}){let n=[],r=this._domToView(e,t,n),s=r.next().value;return!s||(r.next(),this._processDomInlineNodes(null,n,t),s.is("$text")&&s.data.length==0)?null:s}*domChildrenToView(e,t={},n=[]){let r=[];e instanceof HTMLTemplateElement?r=[...e.content.childNodes]:r=[...e.childNodes];for(let s=0;s<r.length;s++){let o=r[s],l=this._domToView(o,t,n),u=l.next().value;u!==null&&(this._isBlockViewElement(u)&&this._processDomInlineNodes(e,n,t),yield u,l.next())}this._processDomInlineNodes(e,n,t)}domSelectionToView(e){if(vle(e))return new oo([]);if(e.rangeCount===1){let r=e.getRangeAt(0).startContainer;jt(r)&&(r=r.parentNode);let s=this.fakeSelectionToView(r);if(s)return s}let t=this.isDomSelectionBackward(e),n=[];for(let r=0;r<e.rangeCount;r++){let s=e.getRangeAt(r),o=this.domRangeToView(s);o&&n.push(o)}return new oo(n,{backward:t})}domRangeToView(e){let t=this.domPositionToView(e.startContainer,e.startOffset),n=this.domPositionToView(e.endContainer,e.endOffset);return t&&n?new Ze(t,n):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,tu(e));let n=this.mapDomToView(e);if(n&&(n.is("uiElement")||n.is("rawElement")))return me._createBefore(n);if(jt(e)){if(au(e))return this.domPositionToView(e.parentNode,tu(e));let r=this.findCorrespondingViewText(e),s=t;return r?(tr(e)&&(s-=Wr,s=s<0?0:s),new me(r,s)):null}else{if(t===0){let r=this.mapDomToView(e);if(r)return new me(r,0)}else{let r=e.childNodes[t-1];if(jt(r)&&au(r)||r&&this.isBlockFiller(r))return this.domPositionToView(r.parentNode,tu(r));let s=jt(r)?this.findCorrespondingViewText(r):this.mapDomToView(r);if(s&&s.parent)return new me(s.parent,s.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(au(e))return null;let t=this.getHostViewElement(e);if(t)return t;let n=e.previousSibling;if(n){if(!this.isElement(n))return null;let r=this.mapDomToView(n);if(r){let s=r.nextSibling;return s instanceof zt?s:null}}else{let r=this.mapDomToView(e.parentNode);if(r){let s=r.getChild(0);return s instanceof zt?s:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){let t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){let t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){let{scrollX:n,scrollY:r}=we.window,s=[];g4(t,o=>{let{scrollLeft:l,scrollTop:u}=o;s.push([l,u])}),t.focus(),g4(t,o=>{let[l,u]=s.shift();o.scrollLeft=l,o.scrollTop=u}),we.window.scrollTo(n,r)}}_clearDomSelection(){let e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;let t=e.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(t);n&&n.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(fle):e.tagName==="BR"&&p4(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(gle)||ble(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;let t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch(r){return!1}let n=t.collapsed;return t.detach(),n}getHostViewElement(e){let t=dy(e);for(t.pop();t.length;){let n=t.pop(),r=this._domToViewMapping.get(n);if(r&&(r.is("uiElement")||r.is("rawElement")))return r}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(let e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return c4(this._domDocument);case"markedNbsp":return u4(this._domDocument);case"br":return d4(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(jt(e)&&tr(e)&&t<Wr||this.isElement(e)&&tr(e.childNodes[t]))return!1;let n=this.mapDomToView(e);return!(n&&(n.is("uiElement")||n.is("rawElement")))}*_domToView(e,t,n){if(this.isBlockFiller(e))return null;let r=this.getHostViewElement(e);if(r)return r;if(iu(e)&&t.skipComments)return null;if(jt(e)){if(au(e))return null;{let s=e.data;if(s==="")return null;let o=new zt(this.document,s);return n.push(o),o}}else{let s=this.mapDomToView(e);if(s)return this._isInlineObjectElement(s)&&n.push(s),s;if(this.isDocumentFragment(e))s=new la(this.document),t.bind&&this.bindDocumentFragments(e,s);else{s=this._createViewElement(e,t),t.bind&&this.bindElements(e,s);let l=e.attributes;if(l)for(let u=l.length,f=0;f<u;f++)s._setAttribute(l[f].name,l[f].value);if(this._isViewElementWithRawContent(s,t))return s._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(s)||n.push(s),s;if(iu(e))return s._setCustomProperty("$rawContent",e.data),s}yield s;let o=[];if(t.withChildren!==!1)for(let l of this.domChildrenToView(e,t,o))s._appendChild(l);if(this._isInlineObjectElement(s))n.push(s),this._processDomInlineNodes(null,o,t);else for(let l of o)n.push(l)}}_processDomInlineNodes(e,t,n){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let r=!1;for(let s=0;s<t.length;s++){let o=t[s];if(!o.is("$text")){r=!1;continue}let l,u=!1;if(this._isPreFormatted(o))l=h4(o.data);else{l=o.data.replace(/[ \n\t\r]{1,}/g," "),u=/[^\S\u00A0]/.test(l.charAt(l.length-1));let f=s>0?t[s-1]:null,g=s+1<t.length?t[s+1]:null,p=!f||f.is("element")&&f.name=="br"||r,y=g?!1:!tr(o.data);n.withChildren!==!1&&(p&&(l=l.replace(/^ /,"")),y&&(l=l.replace(/ $/,""))),l=h4(l),l=l.replace(/ \u00A0/g,"  ");let _=g&&g.is("element")&&g.name!="br",C=g&&g.is("$text")&&g.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(l)||!g||_||C)&&(l=l.replace(/\u00A0$/," ")),(p||f&&f.is("element")&&f.name!="br")&&(l=l.replace(/^\u00A0/," "))}l.length==0&&o.parent?(o._remove(),t.splice(s,1),s--):(o._data=l,r=u)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){let n=this._getTouchingInlineViewNode(e,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(t="\xA0"+t.substr(1))}if(t.charAt(t.length-1)==" "){let n=this._getTouchingInlineViewNode(e,!0),r=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!n||r)&&(t=t.substr(0,t.length-1)+"\xA0")}return t.replace(/ {2}/g," \xA0")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;let t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(ple(e,this.preElements))return!0;for(let t of e.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){let n=new al({startPosition:t?me._createAfter(e):me._createBefore(e),direction:t?"forward":"backward"});for(let{item:r}of n){if(r.is("$textProxy"))return r;if(r.is("element")&&r.getCustomProperty("dataPipeline:transparentRendering"))continue;if(r.is("element","br"))return null;if(this._isInlineObjectElement(r))return r;if(r.is("containerElement"))return null}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(iu(e))return new ou(this.document,"$comment");let n=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new yr(this.document,n)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){let t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){let n=this._domDocument.createElement("span");if(n.setAttribute(m4,e),t){for(;t.firstChild;)n.appendChild(t.firstChild);for(let r of t.getAttributeNames())n.setAttribute(r,t.getAttribute(r))}return n}};function ple(i,e){return i.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function g4(i,e){let t=i;for(;t;)e(t),t=t.parentElement}function ble(i,e){return i.isEqualNode(mle)&&p4(i,e)&&i.parentNode.childNodes.length===1}function p4(i,e){let t=i.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function b4(i){i==="script"&&at("domconverter-unsafe-script-element-detected"),i==="style"&&at("domconverter-unsafe-style-element-detected")}function vle(i){if(!Le.isGecko||!i.rangeCount)return!1;let e=i.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch(t){return!0}return!1}var Fn=class extends Vi(){constructor(e){super();v(this,"view");v(this,"document");v(this,"_isEnabled",!1);this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}},co=class{constructor(e,t,n){v(this,"view");v(this,"document");v(this,"domEvent");v(this,"domTarget");this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,Nc(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}},qr=class extends Fn{constructor(){super(...arguments);v(this,"useCapture",!1);v(this,"usePassive",!1)}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(n=>{this.listenTo(e,n,(r,s)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(s.target)&&this.onDomEvent(s)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,t,n){this.isEnabled&&this.document.fire(e,new co(this.view,t,n))}},v4=class extends qr{constructor(){super(...arguments);v(this,"domEventType",["keydown","keyup"])}onDomEvent(e){let t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return no(this)}};this.fire(e.type,e,t)}},w4=class extends Fn{constructor(e){super(e);v(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=wr(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){let e=this.document;e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&n.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){let t=this.document.selection,n=new oo(t.getRanges(),{backward:t.isBackward,fake:!1});(e==Ge.arrowleft||e==Ge.arrowup)&&n.setTo(n.getFirstPosition()),(e==Ge.arrowright||e==Ge.arrowdown)&&n.setTo(n.getLastPosition());let r={oldSelection:t,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}},Dy=class extends Fn{constructor(e){super(e);v(this,"domConverter");v(this,"_config");v(this,"_domElements");v(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(let t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(let e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;let t=this.domConverter,n=new Set,r=new Set;for(let o of e){let l=t.mapDomToView(o.target);!l||l.is("uiElement")||l.is("rawElement")||o.type==="childList"&&!this._isBogusBrMutation(o)&&r.add(l)}for(let o of e){let l=t.mapDomToView(o.target);if(!(l&&(l.is("uiElement")||l.is("rawElement")))&&o.type==="characterData"){let u=t.findCorrespondingViewText(o.target);u&&!r.has(u.parent)?n.add(u):!u&&tr(o.target)&&r.add(t.mapDomToView(o.target.parentNode))}}let s=[];for(let o of n)s.push({type:"text",node:o});for(let o of r){let l=t.mapViewToDom(o),u=Array.from(o.getChildren()),f=Array.from(t.domChildrenToView(l,{withChildren:!1}));Q0(u,f,wle)||s.push({type:"children",node:o})}s.length&&this.document.fire("mutations",{mutations:s})}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function wle(i,e){if(!Array.isArray(i))return i===e?!0:i.is("$text")&&e.is("$text")?i.data===e.data:!1}var cu=class extends qr{constructor(e){super(e);v(this,"_renderTimeoutId",null);v(this,"_isFocusChanging",!1);v(this,"domEventType",["focus","blur"]);this.useCapture=!0;let t=this.document;t.on("focus",()=>this._handleFocus()),t.on("blur",(n,r)=>this._handleBlur(r)),t.on("beforeinput",()=>{t.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){let t=this.document.selection.editableElement;(t===null||t===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}},y4=class extends Fn{constructor(e){super(e);v(this,"mutationObserver");v(this,"focusObserver");v(this,"selection");v(this,"domConverter");v(this,"_documents");v(this,"_fireSelectionChangeDoneDebounced");v(this,"_clearInfiniteLoopInterval");v(this,"_documentIsSelectingInactivityTimeoutDebounced");v(this,"_loopbackCounter");this.mutationObserver=e.getObserver(Dy),this.focusObserver=e.getObserver(cu),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=wr(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=wr(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){let t=e.ownerDocument,n=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},r=()=>{!this.document.isSelecting||(this._handleSelectionChange(t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",n,{priority:"highest"}),this.listenTo(e,"keydown",r,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",r,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",r,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",()=>{this.document.isComposing&&!Le.isAndroid||(this._handleSelectionChange(t),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(t)},{priority:"lowest"}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;let t=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(t.anchorNode))return;this.mutationObserver.flush();let n=this.domConverter.domSelectionToView(t);if(n.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(n)&&this.domConverter.isDomSelectionCorrect(t))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(n))this.view.forceRender();else{let r={oldSelection:this.selection,newSelection:n,domSelection:t};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}}_clearInfiniteLoop(){this._loopbackCounter=0}},_4=class extends qr{constructor(e){super(e);v(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);let t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}};var Mp=class{constructor(e,t={}){v(this,"_files");v(this,"_native");this._files=t.cacheFiles?x4(e):null,this._native=e}get files(){return this._files||(this._files=x4(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,n){this._native.setDragImage(e,t,n)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}};function x4(i){let e=Array.from(i.files||[]),t=Array.from(i.items||[]);return e.length?e:t.filter(n=>n.kind==="file").map(n=>n.getAsFile())}var k4=class extends qr{constructor(){super(...arguments);v(this,"domEventType","beforeinput")}onDomEvent(e){let t=e.getTargetRanges(),n=this.view,r=n.document,s=null,o=null,l=[];if(e.dataTransfer&&(s=new Mp(e.dataTransfer)),e.data!==null?o=e.data:s&&(o=s.getData("text/plain")),r.selection.isFake)l=Array.from(r.selection.getRanges());else if(t.length)l=t.map(u=>{let f=n.domConverter.domPositionToView(u.startContainer,u.startOffset),g=n.domConverter.domPositionToView(u.endContainer,u.endOffset);if(f)return n.createRange(f,g);if(g)return n.createRange(g)}).filter(u=>!!u);else if(Le.isAndroid){let u=e.target.ownerDocument.defaultView.getSelection();l=Array.from(n.domConverter.domSelectionToView(u).getRanges())}if(Le.isAndroid&&e.inputType=="insertCompositionText"&&o&&o.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[n.createRange(l[0].end)]});return}if(e.inputType=="insertText"&&o&&o.includes(`
`)){let u=o.split(/\n{1,2}/g),f=l;for(let g=0;g<u.length;g++){let p=u[g];p!=""&&(this.fire(e.type,e,{data:p,dataTransfer:s,targetRanges:f,inputType:e.inputType,isComposing:e.isComposing}),f=[r.selection.getFirstRange()]),g+1<u.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:f}),f=[r.selection.getFirstRange()])}return}this.fire(e.type,e,{data:o,dataTransfer:s,targetRanges:l,inputType:e.inputType,isComposing:e.isComposing})}},C4=class extends Fn{constructor(e){super(e);this.document.on("keydown",(t,n)=>{if(this.isEnabled&&jL(n.keyCode)){let r=new ao(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(r,n),r.stop.called&&t.stop()}})}observe(){}stopObserving(){}},T4=class extends Fn{constructor(e){super(e);let t=this.document;t.on("keydown",(n,r)=>{if(!this.isEnabled||r.keyCode!=Ge.tab||r.ctrlKey)return;let s=new ao(t,"tab",t.selection.getFirstRange());t.fire(s,r),s.stop.called&&n.stop()})}observe(){}stopObserving(){}},Fh=class extends gt(){constructor(e){super();v(this,"document");v(this,"domConverter");v(this,"domRoots",new Map);v(this,"_renderer");v(this,"_initialDomRootAttributes",new WeakMap);v(this,"_observers",new Map);v(this,"_writer");v(this,"_ongoingChange",!1);v(this,"_postFixersInProgress",!1);v(this,"_renderingDisabled",!1);v(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Pp(e),this.domConverter=new lu(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Ly(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new Rp(this.document),this.addObserver(Dy),this.addObserver(cu),this.addObserver(y4),this.addObserver(v4),this.addObserver(w4),this.addObserver(_4),this.addObserver(C4),this.addObserver(k4),this.addObserver(T4),rle(this),Zae(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Le.isiOS&&this.listenTo(this.document,"blur",(t,n)=>{this.domConverter.mapDomToView(n.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(t,{mutations:n})=>{n.forEach(r=>this._renderer.markToSync(r.type,r.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,t="main"){let n=this.document.getRoot(t);n._name=e.tagName.toLowerCase();let r={};for(let{name:o,value:l}of Array.from(e.attributes))r[o]=l,o==="class"?this._writer.addClass(l.split(" "),n):n.hasAttribute(o)||this._writer.setAttribute(o,l,n);this._initialDomRootAttributes.set(e,r);let s=()=>{this._writer.setAttribute("contenteditable",(!n.isReadOnly).toString(),n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};s(),this.domRoots.set(t,e),this.domConverter.bindElements(e,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(e.ownerDocument),n.on("change:children",(o,l)=>this._renderer.markToSync("children",l)),n.on("change:attributes",(o,l)=>this._renderer.markToSync("attributes",l)),n.on("change:text",(o,l)=>this._renderer.markToSync("text",l)),n.on("change:isReadOnly",()=>this.change(s)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(let o of this._observers.values())o.observe(e,t)}detachDomRoot(e){let t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:r})=>t.removeAttribute(r));let n=this._initialDomRootAttributes.get(t);for(let r in n)t.setAttribute(r,n[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(let r of this._observers.values())r.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(let[n,r]of this.domRoots)t.observe(r,n);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(let e of this._observers.values())e.disable()}enableObservers(){for(let e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:n=20,ancestorOffset:r=20}={}){let s=this.document.selection.getFirstRange();if(!s)return;let o=en({alignToTop:e,forceScroll:t,viewportOffset:n,ancestorOffset:r});typeof n=="number"&&(n={top:n,bottom:n,left:n,right:n});let l={target:this.domConverter.viewRangeToDom(s),viewportOffset:n,ancestorOffset:r,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",l,o),by(l)}focus(){if(!this.document.isFocused){let e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new L("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;let t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){L.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(cu).flush(),this.change(()=>{})}destroy(){for(let e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return me._createAt(e,t)}createPositionAfter(e){return me._createAfter(e)}createPositionBefore(e){return me._createBefore(e)}createRange(e,t){return new Ze(e,t)}createRangeOn(e){return Ze._createOn(e)}createRangeIn(e){return Ze._createIn(e)}createSelection(...e){return new oo(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};var uo=class{is(){throw new Error("is() method is abstract")}},ll=class extends uo{constructor(e){super();v(this,"parent",null);v(this,"_attrs");v(this,"_index",null);v(this,"_startOffset",null);this._attrs=Nn(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){let e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){let e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){let e=[],t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){let t=[],n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){let n=this.getAncestors(t),r=e.getAncestors(t),s=0;for(;n[s]==r[s]&&n[s];)s++;return s===0?null:n[s-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;let t=this.getPath(),n=e.getPath(),r=Wi(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){let e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,n)=>(t[n[0]]=n[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=Nn(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};ll.prototype.is=function(i){return i==="node"||i==="model:node"};var uu=class{constructor(e){v(this,"_nodes",[]);v(this,"_offsetToNode",[]);e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(e){return this._nodes[e]||null}getNodeAtOffset(e){return this._offsetToNode[e]||null}getNodeIndex(e){return e.index}getNodeStartOffset(e){return e.startOffset}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;let t=this._nodes[e];if(!t)throw new L("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){if(e==this._offsetToNode.length)return this._nodes.length;let t=this._offsetToNode[e];if(!t)throw new L("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.getNodeIndex(t)}_insertNodes(e,t){for(let o of t)if(!(o instanceof ll))throw new L("model-nodelist-insertnodes-not-node",this);let n=Array.from(t),r=yle(n),s=this.indexToOffset(e);this._nodes=_y(this._nodes,n,e,0),this._offsetToNode=_y(this._offsetToNode,r,s,0);for(let o=e;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=s,s+=this._nodes[o].offsetSize}_removeNodes(e,t=1){if(t==0)return[];let n=this.indexToOffset(e),r=this._nodes.splice(e,t),s=r[r.length-1],o=s.startOffset+s.offsetSize-n;this._offsetToNode.splice(n,o);for(let l of r)l._index=null,l._startOffset=null;for(let l=e;l<this._nodes.length;l++)this._nodes[l]._index=l,this._nodes[l]._startOffset=n,n+=this._nodes[l].offsetSize;return r}toJSON(){return this._nodes.map(e=>e.toJSON())}};function yle(i){let e=[];for(let t of i){let n=e.length;e.length+=t.offsetSize,e.fill(t,n)}return e}var It=class extends ll{constructor(e,t){super(t);v(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){let e=super.toJSON();return e.data=this.data,e}_clone(){return new It(this.data,this.getAttributes())}static fromJSON(e){return new It(e.data,e.attributes)}};It.prototype.is=function(i){return i==="$text"||i==="model:$text"||i==="text"||i==="model:text"||i==="node"||i==="model:node"};var _r=class extends uo{constructor(e,t,n){super();v(this,"textNode");v(this,"data");v(this,"offsetInText");if(this.textNode=e,t<0||t>e.offsetSize)throw new L("model-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.offsetSize)throw new L("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){let e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){let t=[],n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}};_r.prototype.is=function(i){return i==="$textProxy"||i==="model:$textProxy"||i==="textProxy"||i==="model:textProxy"};var kt=class extends ll{constructor(e,t,n){super(t);v(this,"name");v(this,"_children",new uu);this.name=e,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(let n of e)t=t.getChildAtOffset(n);return t}findAncestor(e,t={}){let n=t.includeSelf?this:this.parent;for(;n;){if(n.name===e)return n;n=n.parent}return null}toJSON(){let e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(let t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){let t=e?Array.from(this._children).map(n=>n._clone(!0)):void 0;return new kt(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){let n=_le(t);for(let r of n)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){let n=this._children._removeNodes(e,t);for(let r of n)r.parent=null;return n}static fromJSON(e){let t;if(e.children){t=[];for(let n of e.children)n.name?t.push(kt.fromJSON(n)):t.push(It.fromJSON(n))}return new kt(e.name,e.attributes,t)}};kt.prototype.is=function(i,e){return e?e===this.name&&(i==="element"||i==="model:element"):i==="element"||i==="model:element"||i==="node"||i==="model:node"};function _le(i){return typeof i=="string"?[new It(i)]:(_n(i)||(i=[i]),Array.from(i).map(e=>typeof e=="string"?new It(e):e instanceof _r?new It(e.data,e.getAttributes()):e))}var xr=class{constructor(e){v(this,"direction");v(this,"boundaries");v(this,"singleCharacters");v(this,"shallow");v(this,"ignoreElementEnd");v(this,"_position");v(this,"_boundaryStartParent");v(this,"_boundaryEndParent");v(this,"_visitedParent");if(!e||!e.boundaries&&!e.startPosition)throw new L("model-tree-walker-no-start-position",null);let t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new L("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=Q._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,n,r,s;do r=this.position,s=this._visitedParent,{done:t,value:n}=this.next();while(!t&&e(n));t||(this._position=r,this._visitedParent=s)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let r=jh(t,n),s=r||E4(t,n,r);if(s instanceof kt){if(!this.shallow)t.path.push(0),this._visitedParent=s;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,cl("elementStart",s,e,t,1)}if(s instanceof It){let o;if(this.singleCharacters)o=1;else{let f=s.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<f&&(f=this.boundaries.end.offset),o=f-t.offset}let l=t.offset-s.startOffset,u=new _r(s,l,o);return t.offset+=o,this._position=t,cl("text",u,e,t,o)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():cl("elementEnd",n,e,t)}_previous(){let e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let r=t.parent,s=jh(t,r),o=s||S4(t,r,s);if(o instanceof kt)return t.offset--,this.shallow?(this._position=t,cl("elementStart",o,e,t,1)):(t.path.push(o.maxOffset),this._position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():cl("elementEnd",o,e,t));if(o instanceof It){let l;if(this.singleCharacters)l=1;else{let g=o.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>g&&(g=this.boundaries.start.offset),l=t.offset-g}let u=t.offset-o.startOffset,f=new _r(o,u-l,l);return t.offset-=l,this._position=t,cl("text",f,e,t,l)}return t.path.pop(),this._position=t,this._visitedParent=n.parent,cl("elementStart",n,e,t,1)}};function cl(i,e,t,n,r){return{done:!1,value:{type:i,item:e,previousPosition:t,nextPosition:n,length:r}}}var Q=class extends uo{constructor(e,t,n="toNone"){super();v(this,"root");v(this,"path");v(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new L("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new L("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)throw new L("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new L("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return jh(this,this.parent)}get nodeAfter(){let e=this.parent;return E4(this,e,jh(this,e))}get nodeBefore(){let e=this.parent;return S4(this,e,jh(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";let t=Wi(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;let n=new xr(t);return n.skip(e),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){let e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){let t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];let t=Wi(this.path,e.path),n=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,n)}getCommonAncestor(e){let t=this.getAncestors(),n=e.getAncestors(),r=0;for(;t[r]==n[r]&&t[r];)r++;return r===0?null:t[r-1]}getShiftedBy(e){let t=this.clone(),n=t.offset+e;return t.offset=n<0?0:n,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;let t=Math.min(this.path.length,e.path.length);for(let n=0;n<t;n++){let r=this.path[n]-e.path[n];if(r<-1||r>1)return!1;if(r===1)return A4(e,this,n);if(r===-1)return A4(this,e,n)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?Vy(this.path,t):Vy(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;let t=this.getParentPath(),n=e.getParentPath();return Wi(t,n)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=Q._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){let t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){let t=e.movedRange,n=t.containsPosition(this)||t.start.isEqual(this),r;return n?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=Q._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,t){let n=Q._createAt(this);if(this.root!=e.root)return n;if(Wi(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;n.offset-=t}}else if(Wi(e.getParentPath(),this.getParentPath())=="prefix"){let r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+t>this.path[r])return null;n.path[r]-=t}}return n}_getTransformedByInsertion(e,t){let n=Q._createAt(this);if(this.root!=e.root)return n;if(Wi(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(n.offset+=t);else if(Wi(e.getParentPath(),this.getParentPath())=="prefix"){let r=e.path.length-1;e.offset<=this.path[r]&&(n.path[r]+=t)}return n}_getTransformedByMove(e,t,n){if(t=t._getTransformedByDeletion(e,n),e.isEqual(t))return Q._createAt(this);let r=this._getTransformedByDeletion(e,n);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(n).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):r._getTransformedByInsertion(t,n)}_getCombined(e,t){let n=e.path.length-1,r=Q._createAt(t);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[n]-e.offset,r.path=[...r.path,...this.path.slice(n+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,n="toNone"){if(e instanceof Q)return new Q(e.root,e.path,e.stickiness);{let r=e;if(t=="end")t=r.maxOffset;else{if(t=="before")return this._createBefore(r,n);if(t=="after")return this._createAfter(r,n);if(t!==0&&!t)throw new L("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new L("model-position-parent-incorrect",[this,e]);let s=r.getPath();return s.push(t),new this(r.root,s,n)}}static _createAfter(e,t){if(!e.parent)throw new L("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new L("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){let n=new Q(t.graveyard,e.path);return n.stickiness=e.stickiness,n}if(!t.getRoot(e.root))throw new L("model-position-fromjson-no-root",t,{rootName:e.root});return new Q(t.getRoot(e.root),e.path,e.stickiness)}};Q.prototype.is=function(i){return i==="position"||i==="model:position"};function jh(i,e){let t=e.getChildAtOffset(i.offset);return t&&t.is("$text")&&t.startOffset<i.offset?t:null}function E4(i,e,t){return t!==null?null:e.getChildAtOffset(i.offset)}function S4(i,e,t){return t!==null?null:e.getChild(e.offsetToIndex(i.offset)-1)}function A4(i,e,t){return!(t+1===i.path.length||!Vy(e.path,t+1)||!xle(i,t+1))}function Vy(i,e){for(;e<i.length;){if(i[e]!==0)return!1;e++}return!0}function xle(i,e){let t=i.parent,n=i.path.length-1,r=0;for(;n>=e;){if(i.path[n]+r!==t.maxOffset)return!1;r=1,n--,t=t.parent}return!0}var q=class extends uo{constructor(e,t){super();v(this,"start");v(this,"end");this.start=Q._createAt(e),this.end=t?Q._createAt(t):Q._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new xr({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){let e=this.start.getParentPath(),t=this.end.getParentPath();return Wi(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);let n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}containsItem(e){let t=Q._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){let t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new q(this.start,e.start)),this.containsPosition(e.end)&&t.push(new q(e.end,this.end))):t.push(new q(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new q(t,n)}return null}getJoined(e,t=!1){let n=this.isIntersecting(e);if(n||(this.start.isBefore(e.start)?n=t?this.end.isTouching(e.start):this.end.isEqual(e.start):n=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!n)return null;let r=this.start,s=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(s)&&(s=e.end),new q(r,s)}getMinimalFlatRanges(){let e=[],t=this.start.getCommonPath(this.end).length,n=Q._createAt(this.start),r=n.parent;for(;n.path.length>t+1;){let s=r.maxOffset-n.offset;s!==0&&e.push(new q(n,n.getShiftedBy(s))),n.path=n.path.slice(0,-1),n.offset++,r=r.parent}for(;n.path.length<=this.end.path.length;){let s=this.end.path[n.path.length-1],o=s-n.offset;o!==0&&e.push(new q(n,n.getShiftedBy(o))),n.offset=s,n.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new xr(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;let t=new xr(e);for(let n of t)yield n.item}*getPositions(e={}){e.boundaries=this;let t=new xr(e);yield t.position;for(let n of t)yield n.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new q(this.start,this.end)]}getTransformedByOperations(e){let t=[new q(this.start,this.end)];for(let n of e)for(let r=0;r<t.length;r++){let s=t[r].getTransformedByOperation(n);t.splice(r,1,...s),r+=s.length-1}for(let n=0;n<t.length;n++){let r=t[n];for(let s=n+1;s<t.length;s++){let o=t[s];(r.containsRange(o)||o.containsRange(r)||r.isEqual(o))&&t.splice(s,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){let n=e.sourcePosition,r=e.howMany,s=e.targetPosition;return this._getTransformedByMove(n,s,r,t)}_getTransformedBySplitOperation(e){let t=this.start._getTransformedBySplitOperation(e),n=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(n=this.end.getShiftedBy(1)),t.root!=n.root&&(n=this.end.getShiftedBy(-1)),new q(t,n)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new q(this.start);let t=this.start._getTransformedByMergeOperation(e),n=this.end._getTransformedByMergeOperation(e);return t.root!=n.root&&(n=this.end.getShiftedBy(-1)),t.isAfter(n)?(e.sourcePosition.isBefore(e.targetPosition)?(t=Q._createAt(n),t.offset=0):(e.deletionPosition.isEqual(t)||(n=e.deletionPosition),t=e.targetPosition),new q(t,n)):new q(t,n)}_getTransformedByInsertion(e,t,n=!1){if(n&&this.containsPosition(e))return[new q(this.start,e),new q(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{let r=new q(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,t),r.end=r.end._getTransformedByInsertion(e,t),[r]}}_getTransformedByMove(e,t,n,r=!1){if(this.isCollapsed){let p=this.start._getTransformedByMove(e,t,n);return[new q(p)]}let s=q._createFromPositionAndShift(e,n),o=t._getTransformedByDeletion(e,n);if(this.containsPosition(t)&&!r&&(s.containsPosition(this.start)||s.containsPosition(this.end))){let p=this.start._getTransformedByMove(e,t,n),y=this.end._getTransformedByMove(e,t,n);return[new q(p,y)]}let l,u=this.getDifference(s),f=null,g=this.getIntersection(s);if(u.length==1?f=new q(u[0].start._getTransformedByDeletion(e,n),u[0].end._getTransformedByDeletion(e,n)):u.length==2&&(f=new q(this.start,this.end._getTransformedByDeletion(e,n))),f?l=f._getTransformedByInsertion(o,n,g!==null||r):l=[],g){let p=new q(g.start._getCombined(s.start,o),g.end._getCombined(s.start,o));l.length==2?l.splice(1,0,p):l.push(p)}return l}_getTransformedByDeletion(e,t){let n=this.start._getTransformedByDeletion(e,t),r=this.end._getTransformedByDeletion(e,t);return n==null&&r==null?null:(n==null&&(n=e),r==null&&(r=e),new q(n,r))}static _createFromPositionAndShift(e,t){let n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}static _createIn(e){return new this(Q._createAt(e,0),Q._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(Q._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new L("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();let t=e[0];e.sort((s,o)=>s.start.isAfter(o.start)?1:-1);let n=e.indexOf(t),r=new this(t.start,t.end);for(let s=n-1;s>=0&&e[s].end.isEqual(r.start);s--)r.start=Q._createAt(e[s].start);for(let s=n+1;s<e.length&&e[s].start.isEqual(r.end);s++)r.end=Q._createAt(e[s].end);return r}static fromJSON(e,t){return new this(Q.fromJSON(e.start,t),Q.fromJSON(e.end,t))}};q.prototype.is=function(i){return i==="range"||i==="model:range"};var Hh=class extends wt(){constructor(){super();v(this,"_modelToViewMapping",new WeakMap);v(this,"_viewToModelMapping",new WeakMap);v(this,"_viewToModelLengthCallbacks",new Map);v(this,"_markerNameToElements",new Map);v(this,"_elementToMarkerNames",new Map);v(this,"_deferredBindingRemovals",new Map);v(this,"_unboundMarkerNames",new Set);this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;let n=this._modelToViewMapping.get(t.modelPosition.parent);if(!n)throw new L("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(n,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;let n=this.findMappedViewAncestor(t.viewPosition),r=this._viewToModelMapping.get(n),s=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,n);t.modelPosition=Q._createAt(r,s)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){let n=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(let r of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(r);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(n)==e&&this._modelToViewMapping.delete(n))}unbindModelElement(e){let t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){let n=this._markerNameToElements.get(t)||new Set;n.add(e);let r=this._elementToMarkerNames.get(e)||new Set;r.add(t),this._markerNameToElements.set(t,n),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,t){let n=this._markerNameToElements.get(t);n&&(n.delete(e),n.size==0&&this._markerNameToElements.delete(t));let r=this._elementToMarkerNames.get(e);r&&(r.delete(t),r.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){let e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(let[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new q(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Ze(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){let t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){let n={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(e){let t=this._markerNameToElements.get(e);if(!t)return null;let n=new Set;for(let r of t)if(r.is("attributeElement"))for(let s of r.getElementsWithSameId())n.add(s);else n.add(r);return n}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,n){if(n!=e){let s=this._toModelOffset(e.parent,e.index,n),o=this._toModelOffset(e,t,e);return s+o}if(e.is("$text"))return t;let r=0;for(let s=0;s<t;s++)r+=this.getModelLength(e.getChild(s));return r}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(let n of e.getChildren())t+=this.getModelLength(n);return t}}findPositionIn(e,t){let n,r=0,s=0,o=0;if(e.is("$text"))return new me(e,t);for(;s<t;)n=e.getChild(o),r=this.getModelLength(n),s+=r,o++;return s==t?this._moveViewPositionToTextNode(new me(e,o)):this.findPositionIn(n,t-(s-r))}_moveViewPositionToTextNode(e){let t=e.nodeBefore,n=e.nodeAfter;return t instanceof zt?new me(t,t.data.length):n instanceof zt?new me(n,0):e}},I4=class{constructor(){v(this,"_consumable",new Map);v(this,"_textProxyRegistry",new Map)}add(e,t){t=Lp(t),e instanceof _r&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=Lp(t),e instanceof _r&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=Lp(t),e instanceof _r&&(e=this._getSymbolForTextProxy(e));let n=this._consumable.get(e);if(n===void 0)return null;let r=n.get(t);return r===void 0?null:r}revert(e,t){t=Lp(t),e instanceof _r&&(e=this._getSymbolForTextProxy(e));let n=this.test(e,t);return n===!1?(this._consumable.get(e).set(t,!0),!0):n===!0?!1:null}verifyAllConsumed(e){let t=[];for(let[n,r]of this._consumable)for(let[s,o]of r){let l=s.split(":")[0];o&&e==l&&t.push({event:s,item:n.name||n.description})}if(t.length)throw new L("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null,n=this._textProxyRegistry.get(e.startOffset);if(n){let r=n.get(e.endOffset);r&&(t=r.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){let t=e.startOffset,n=e.endOffset,r=e.parent,s=Symbol("$textProxy:"+e.data),o,l;return o=this._textProxyRegistry.get(t),o||(o=new Map,this._textProxyRegistry.set(t,o)),l=o.get(n),l||(l=new Map,o.set(n,l)),l.set(r,s),s}};function Lp(i){let e=i.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?i:e.length>1?e[0]+":"+e[1]:e[0]}var Dp=class extends wt(){constructor(e){super();v(this,"_conversionApi");v(this,"_firedEventsMap");this._conversionApi=ee({dispatcher:this},e),this._firedEventsMap=new WeakMap}convertChanges(e,t,n){let r=this._createConversionApi(n,e.getRefreshedItems());for(let o of e.getMarkersToRemove())this._convertMarkerRemove(o.name,o.range,r);let s=this._reduceChanges(e.getChanges());for(let o of s)o.type==="insert"?this._convertInsert(q._createFromPositionAndShift(o.position,o.length),r):o.type==="reinsert"?this._convertReinsert(q._createFromPositionAndShift(o.position,o.length),r):o.type==="remove"?this._convertRemove(o.position,o.length,o.name,r):this._convertAttribute(o.range,o.attributeKey,o.attributeOldValue,o.attributeNewValue,r);r.mapper.flushDeferredBindings();for(let o of r.mapper.flushUnboundMarkerNames()){let l=t.get(o).getRange();this._convertMarkerRemove(o,l,r),this._convertMarkerAdd(o,l,r)}for(let o of e.getMarkersToAdd())this._convertMarkerAdd(o.name,o.range,r);r.consumable.verifyAllConsumed("insert")}convert(e,t,n,r={}){let s=this._createConversionApi(n,void 0,r);this._convertInsert(e,s);for(let[o,l]of t)this._convertMarkerAdd(o,l,s);s.consumable.verifyAllConsumed("insert")}convertSelection(e,t,n){let r=this._createConversionApi(n);this.fire("cleanSelection",{selection:e},r);let s=e.getFirstPosition().root;if(!r.mapper.toViewElement(s))return;let o=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(r.consumable,e,o),this.fire("selection",{selection:e},r),!!e.isCollapsed){for(let l of o)if(r.consumable.test(e,"addMarker:"+l.name)){let u=l.getRange();if(!kle(e.getFirstPosition(),l,r.mapper))continue;let f={item:e,markerName:l.name,markerRange:u};this.fire(`addMarker:${l.name}`,f,r)}for(let l of e.getAttributeKeys())if(r.consumable.test(e,"attribute:"+l)){let u={item:e,range:e.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:e.getAttribute(l)};this.fire(`attribute:${l}:$text`,u,r)}}}_convertInsert(e,t,n={}){n.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(let r of Array.from(e.getWalker({shallow:!0})).map(P4))this._testAndFire("insert",r,t)}_convertRemove(e,t,n,r){this.fire(`remove:${n}`,{position:e,length:t},r)}_convertAttribute(e,t,n,r,s){this._addConsumablesForRange(s.consumable,e,`attribute:${t}`);for(let o of e){let l={item:o.item,range:q._createFromPositionAndShift(o.previousPosition,o.length),attributeKey:t,attributeOldValue:n,attributeNewValue:r};this._testAndFire(`attribute:${t}`,l,s)}}_convertReinsert(e,t){let n=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,n);for(let r of n.map(P4))this._testAndFire("insert",tt(ee({},r),{reconversion:!0}),t)}_convertMarkerAdd(e,t,n){if(t.root.rootName=="$graveyard")return;let r=`addMarker:${e}`;if(n.consumable.add(t,r),this.fire(r,{markerName:e,markerRange:t},n),!!n.consumable.consume(t,r)){this._addConsumablesForRange(n.consumable,t,r);for(let s of t.getItems()){if(!n.consumable.test(s,r))continue;let o={item:s,range:q._createOn(s),markerName:e,markerRange:t};this.fire(r,o,n)}}}_convertMarkerRemove(e,t,n){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},n)}_reduceChanges(e){let t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(let n of t){let r=n.item;if(e.test(r,"insert")===null){e.add(r,"insert");for(let s of r.getAttributeKeys())e.add(r,"attribute:"+s)}}return e}_addConsumablesForRange(e,t,n){for(let r of t.getItems())e.add(r,n);return e}_addConsumablesForSelection(e,t,n){e.add(t,"selection");for(let r of n)e.add(t,"addMarker:"+r.name);for(let r of t.getAttributeKeys())e.add(t,"attribute:"+r);return e}_testAndFire(e,t,n){let r=Cle(e,t),s=t.item.is("$textProxy")?n.consumable._getSymbolForTextProxy(t.item):t.item,o=this._firedEventsMap.get(n),l=o.get(s);if(!l)o.set(s,new Set([r]));else if(!l.has(r))l.add(r);else return;this.fire(r,t,n)}_testAndFireAddAttributes(e,t){let n={item:e,range:q._createOn(e)};for(let r of n.item.getAttributeKeys())n.attributeKey=r,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(r),this._testAndFire(`attribute:${r}`,n,t)}_createConversionApi(e,t=new Set,n={}){let r=tt(ee({},this._conversionApi),{consumable:new I4,writer:e,options:n,convertItem:s=>this._convertInsert(q._createOn(s),r),convertChildren:s=>this._convertInsert(q._createIn(s),r,{doNotAddConsumables:!0}),convertAttributes:s=>this._testAndFireAddAttributes(s,r),canReuseView:s=>!t.has(r.mapper.toModelElement(s))});return this._firedEventsMap.set(r,new Map),r}};function kle(i,e,t){let n=e.getRange(),r=Array.from(i.getAncestors());return r.shift(),r.reverse(),!r.some(o=>{if(n.containsItem(o))return!!t.toViewElement(o).getCustomProperty("addHighlight")})}function Cle(i,e){let t=e.item.is("element")?e.item.name:"$text";return`${i}:${t}`}function P4(i){let e=i.item,t=q._createFromPositionAndShift(i.previousPosition,i.length);return{item:e,range:t}}var Ii=class extends wt(uo){constructor(...e){super();v(this,"_lastRangeBackward",!1);v(this,"_attrs",new Map);v(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){let e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){let e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(let t of this._ranges){let n=!1;for(let r of e._ranges)if(t.isEqual(r)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(let e of this._ranges)yield new q(e.start,e.end)}getFirstRange(){let e=null;for(let t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new q(e.start,e.end):null}getLastRange(){let e=null;for(let t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new q(e.start,e.end):null}getFirstPosition(){let e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){let e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,n,r]=e;if(typeof n=="object"&&(r=n,n=void 0),t===null)this._setRanges([]);else if(t instanceof Ii)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof q)this._setRanges([t],!!r&&!!r.backward);else if(t instanceof Q)this._setRanges([new q(t)]);else if(t instanceof ll){let s=!!r&&!!r.backward,o;if(n=="in")o=q._createIn(t);else if(n=="on")o=q._createOn(t);else if(n!==void 0)o=new q(Q._createAt(t,n));else throw new L("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([o],s)}else if(_n(t))this._setRanges(t,r&&!!r.backward);else throw new L("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){let n=Array.from(e),r=n.some(s=>{if(!(s instanceof q))throw new L("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(o=>!o.isEqual(s))});n.length===this._ranges.length&&!r||(this._replaceAllRanges(n),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new L("model-selection-setfocus-no-ranges",[this,e]);let n=Q._createAt(e,t);if(n.compareWith(this.focus)=="same")return;let r=this.anchor;this._ranges.length&&this._popRange(),n.compareWith(r)=="before"?(this._pushRange(new q(n,r)),this._lastRangeBackward=!0):(this._pushRange(new q(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){let e=new WeakSet;for(let t of this.getRanges()){let n=O4(t.start,e);Ele(n,t)&&(yield n);for(let s of t.getWalker()){let o=s.item;s.type=="elementEnd"&&Tle(o,e,t)&&(yield o)}let r=O4(t.end,e);Sle(r,t)&&(yield r)}}containsEntireContent(e=this.anchor.root){let t=Q._createAt(e,0),n=Q._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new q(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new L("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(let t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}};Ii.prototype.is=function(i){return i==="selection"||i==="model:selection"};function R4(i,e){return e.has(i)?!1:(e.add(i),i.root.document.model.schema.isBlock(i)&&!!i.parent)}function Tle(i,e,t){return R4(i,e)&&By(i,t)}function O4(i,e){let n=i.parent.root.document.model.schema,r=i.parent.getAncestors({parentFirst:!0,includeSelf:!0}),s=!1,o=r.find(l=>s?!1:(s=n.isLimit(l),!s&&R4(l,e)));return r.forEach(l=>e.add(l)),o}function By(i,e){let t=Ale(i);return t?!e.containsRange(q._createOn(t),!0):!0}function Ele(i,e){return i?e.isCollapsed||i.isEmpty?!0:e.start.isTouching(Q._createAt(i,i.maxOffset))?!1:By(i,e):!1}function Sle(i,e){return i?e.isCollapsed||i.isEmpty?!0:e.end.isTouching(Q._createAt(i,0))?!1:By(i,e):!1}function Ale(i){let e=i.root.document.model.schema,t=i.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}var Bi=class extends wt(q){constructor(e,t){super(e,t);Ile.call(this)}detach(){this.stopListening()}toRange(){return new q(this.start,this.end)}static fromRange(e){return new Bi(e.start,e.end)}};Bi.prototype.is=function(i){return i==="liveRange"||i==="model:liveRange"||i=="range"||i==="model:range"};function Ile(){this.listenTo(this.root.document.model,"applyOperation",(i,e)=>{let t=e[0];!t.isDocumentOperation||Ple.call(this,t)},{priority:"low"})}function Ple(i){let e=this.getTransformedByOperation(i),t=q._createFromRanges(e),n=!t.isEqual(this),r=Rle(this,i),s=null;if(n){t.root.rootName=="$graveyard"&&(i.type=="remove"?s=i.sourcePosition:s=i.deletionPosition);let o=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",o,{deletionPosition:s})}else r&&this.fire("change:content",this.toRange(),{deletionPosition:s})}function Rle(i,e){switch(e.type){case"insert":return i.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return i.containsPosition(e.sourcePosition)||i.start.isEqual(e.sourcePosition)||i.containsPosition(e.targetPosition);case"split":return i.containsPosition(e.splitPosition)||i.containsPosition(e.insertionPosition)}return!1}var zh="selection:",jn=class extends wt(uo){constructor(e){super();v(this,"_selection");this._selection=new M4(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return zh+e}static _isStoreAttributeKey(e){return e.startsWith(zh)}};jn.prototype.is=function(i){return i==="selection"||i=="model:selection"||i=="documentSelection"||i=="model:documentSelection"};var M4=class extends Ii{constructor(e){super();v(this,"markers",new Ht({idProperty:"name"}));v(this,"_model");v(this,"_document");v(this,"_attributePriority",new Map);v(this,"_selectionRestorePosition",null);v(this,"_hasChangedRange",!1);v(this,"_overriddenGravityRegister",new Set);v(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,n)=>{let r=n[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,n,r,s)=>{this._updateMarker(n,s)}),this.listenTo(this._document,"change",(t,n)=>{Ole(this._model,n)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){let n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){let t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){let e=Si();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new L("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){let t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(let t of e)if(!this._document._validateSelectionRange(t))throw new L("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;let t=Bi.fromRange(e);return t.on("change:range",(n,r,s)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=s.deletionPosition;let o=this._ranges.indexOf(t);this._ranges.splice(o,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;let e=[],t=!1;for(let r of this._model.markers){let s=r.name.split(":",1)[0];if(!this._observedMarkers.has(s))continue;let o=r.getRange();for(let l of this.getRanges())o.containsRange(l,!l.isCollapsed)&&e.push(r)}let n=Array.from(this.markers);for(let r of e)this.markers.has(r)||(this.markers.add(r),t=!0);for(let r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),t=!0);t&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(e,t){let n=e.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let r=!1,s=Array.from(this.markers),o=this.markers.has(e);if(!t)o&&(this.markers.remove(e),r=!0);else{let l=!1;for(let u of this.getRanges())if(t.containsRange(u,!u.isCollapsed)){l=!0;break}l&&!o?(this.markers.add(e),r=!0):!l&&o&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateAttributes(e){let t=Nn(this._getSurroundingAttributes()),n=Nn(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(let[s,o]of this._attributePriority)o=="low"&&(this._attrs.delete(s),this._attributePriority.delete(s));this._setAttributesTo(t);let r=[];for(let[s,o]of this.getAttributes())(!n.has(s)||n.get(s)!==o)&&r.push(s);for(let[s]of n)this.hasAttribute(s)||r.push(s);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,t,n=!0){let r=n?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,r),!0)}_removeAttribute(e,t=!0){let n=t?"normal":"low";return n=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,n),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){let t=new Set;for(let[n,r]of this.getAttributes())e.get(n)!==r&&this._removeAttribute(n,!1);for(let[n,r]of e)this._setAttribute(n,r,!1)&&t.add(n);return t}*getStoredAttributes(){let e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(let t of e.getAttributeKeys())t.startsWith(zh)&&(yield[t.substr(zh.length),e.getAttribute(t)])}_getSurroundingAttributes(){let e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let n=null;if(this.isCollapsed){let r=e.textNode?e.textNode:e.nodeBefore,s=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=Uh(r,t)),n||(n=Uh(s,t)),!this.isGravityOverridden&&!n){let o=r;for(;o&&!n;)o=o.previousSibling,n=Uh(o,t)}if(!n){let o=s;for(;o&&!n;)o=o.nextSibling,n=Uh(o,t)}n||(n=this.getStoredAttributes())}else{let r=this.getFirstRange();for(let s of r){if(s.item.is("element")&&t.isObject(s.item)){n=Uh(s.item,t);break}if(s.type=="text"){n=s.item.getAttributes();break}}}return n}_fixGraveyardSelection(e){let t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}};function Uh(i,e){if(!i)return null;if(i instanceof _r||i instanceof It)return i.getAttributes();if(!e.isInline(i))return null;if(!e.isObject(i))return[];let t=[];for(let[n,r]of i.getAttributes())e.checkAttribute("$text",n)&&e.getAttributeProperties(n).copyFromObject!==!1&&t.push([n,r]);return t}function Ole(i,e){let t=i.document.differ;for(let n of t.getChanges()){if(n.type!="insert")continue;let r=n.position.parent;n.length===r.maxOffset&&i.enqueueChange(e,o=>{let l=Array.from(r.getAttributeKeys()).filter(u=>u.startsWith(zh));for(let u of l)o.removeAttribute(u,r)})}}var Ny=class{constructor(e){v(this,"_dispatchers");this._dispatchers=e}add(e){for(let t of this._dispatchers)e(t);return this}},L4=class extends Ny{elementToElement(e){return this.add(qle(e))}elementToStructure(e){return this.add($le(e))}attributeToElement(e){return this.add(Gle(e))}attributeToAttribute(e){return this.add(Kle(e))}markerToElement(e){return this.add(Yle(e))}markerToHighlight(e){return this.add(Jle(e))}markerToData(e){return this.add(Zle(e))}};function Fy(){return(i,e,t)=>{if(!t.consumable.consume(e.item,i.name))return;let n=t.writer,r=t.mapper.toViewPosition(e.range.start),s=n.createText(e.item.data);n.insert(r,s)}}function jy(){return(i,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function Mle(){return(i,e,t)=>{let n=t.mapper.toViewPosition(e.position),r=e.position.getShiftedBy(e.length),s=t.mapper.toViewPosition(r,{isPhantom:!0}),o=t.writer.createRange(n,s),l=t.writer.remove(o.getTrimmed());for(let u of t.writer.createRangeIn(l).getItems())t.mapper.unbindViewElement(u,{defer:!0})}}function D4(i,e){let t=i.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function V4(){return(i,e,t)=>{let n=e.selection;if(n.isCollapsed||!t.consumable.consume(n,"selection"))return;let r=[];for(let s of n.getRanges())r.push(t.mapper.toViewRange(s));t.writer.setSelection(r,{backward:n.isBackward})}}function B4(){return(i,e,t)=>{let n=e.selection;if(!n.isCollapsed||!t.consumable.consume(n,"selection"))return;let r=t.writer,s=n.getFirstPosition(),o=t.mapper.toViewPosition(s),l=r.breakAttributes(o);r.setSelection(l)}}function Lle(){return(i,e,t)=>{let n=t.writer,r=n.document.selection;for(let s of r.getRanges())s.isCollapsed&&s.end.parent.isAttached()&&t.writer.mergeAttributes(s.start);n.setSelection(null)}}function N4(i){return(e,t,n)=>{if(!n.consumable.test(t.item,e.name))return;let r=i(t.attributeOldValue,n,t),s=i(t.attributeNewValue,n,t);if(!r&&!s)return;n.consumable.consume(t.item,e.name);let o=n.writer,l=o.document.selection;if(t.item instanceof Ii||t.item instanceof jn)o.wrap(l.getFirstRange(),s);else{let u=n.mapper.toViewRange(t.range);t.attributeOldValue!==null&&r&&(u=o.unwrap(u,r)),t.attributeNewValue!==null&&s&&o.wrap(u,s)}}}function F4(i,e=rce){return(t,n,r)=>{if(!e(n.item,r.consumable,{preflight:!0}))return;let s=i(n.item,r,n);if(!s)return;e(n.item,r.consumable);let o=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(n.item,s),r.writer.insert(o,s),r.convertAttributes(n.item),G4(s,n.item.getChildren(),r,{reconversion:n.reconversion})}}function Dle(i,e){return(t,n,r)=>{if(!e(n.item,r.consumable,{preflight:!0}))return;let s=new Map;r.writer._registerSlotFactory(ece(n.item,s,r));let o=i(n.item,r,n);if(r.writer._clearSlotFactory(),!o)return;tce(n.item,s,r),e(n.item,r.consumable);let l=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(n.item,o),r.writer.insert(l,o),r.convertAttributes(n.item),ice(o,s,r,{reconversion:n.reconversion})}}function j4(i){return(e,t,n)=>{t.isOpening=!0;let r=i(t,n);t.isOpening=!1;let s=i(t,n);if(!r||!s)return;let o=t.markerRange;if(o.isCollapsed&&!n.consumable.consume(o,e.name))return;for(let f of o)if(!n.consumable.consume(f.item,e.name))return;let l=n.mapper,u=n.writer;u.insert(l.toViewPosition(o.start),r),n.mapper.bindElementToMarker(r,t.markerName),o.isCollapsed||(u.insert(l.toViewPosition(o.end),s),n.mapper.bindElementToMarker(s,t.markerName)),e.stop()}}function Vle(){return(i,e,t)=>{let n=t.mapper.markerNameToElements(e.markerName);if(!!n){for(let r of n)t.mapper.unbindElementFromMarkerName(r,e.markerName),t.writer.clear(t.writer.createRangeOn(r),r);t.writer.clearClonedElementsGroup(e.markerName),i.stop()}}}function Ble(i){return(e,t,n)=>{let r=i(t.markerName,n);if(!r)return;let s=t.markerRange;!n.consumable.consume(s,e.name)||(H4(s,!1,n,t,r),H4(s,!0,n,t,r),e.stop())}}function H4(i,e,t,n,r){let s=e?i.start:i.end,o=s.nodeAfter&&s.nodeAfter.is("element")?s.nodeAfter:null,l=s.nodeBefore&&s.nodeBefore.is("element")?s.nodeBefore:null;if(o||l){let f,g;e&&o||!e&&!l?(f=o,g=!0):(f=l,g=!1);let p=t.mapper.toViewElement(f);if(p){Nle(p,e,g,t,n,r);return}}let u=t.mapper.toViewPosition(s);Fle(u,e,t,n,r)}function Nle(i,e,t,n,r,s){let o=`data-${s.group}-${e?"start":"end"}-${t?"before":"after"}`,l=i.hasAttribute(o)?i.getAttribute(o).split(","):[];l.unshift(s.name),n.writer.setAttribute(o,l.join(","),i),n.mapper.bindElementToMarker(i,r.markerName)}function Fle(i,e,t,n,r){let s=`${r.group}-${e?"start":"end"}`,o=r.name?{name:r.name}:null,l=t.writer.createUIElement(s,o);t.writer.insert(i,l),t.mapper.bindElementToMarker(l,n.markerName)}function jle(i){return(e,t,n)=>{let r=i(t.markerName,n);if(!r)return;let s=n.mapper.markerNameToElements(t.markerName);if(!s)return;for(let l of s)n.mapper.unbindElementFromMarkerName(l,t.markerName),l.is("containerElement")?(o(`data-${r.group}-start-before`,l),o(`data-${r.group}-start-after`,l),o(`data-${r.group}-end-before`,l),o(`data-${r.group}-end-after`,l)):n.writer.clear(n.writer.createRangeOn(l),l);n.writer.clearClonedElementsGroup(t.markerName),e.stop();function o(l,u){if(u.hasAttribute(l)){let f=new Set(u.getAttribute(l).split(","));f.delete(r.name),f.size==0?n.writer.removeAttribute(l,u):n.writer.setAttribute(l,Array.from(f).join(","),u)}}}}function Hle(i){return(e,t,n)=>{if(!n.consumable.test(t.item,e.name))return;let r=i(t.attributeOldValue,n,t),s=i(t.attributeNewValue,n,t);if(!r&&!s)return;n.consumable.consume(t.item,e.name);let o=n.mapper.toViewElement(t.item),l=n.writer;if(!o)throw new L("conversion-attribute-to-attribute-on-text",n.dispatcher,t);if(t.attributeOldValue!==null&&r)if(r.key=="class"){let u=typeof r.value=="string"?r.value.split(/\s+/):r.value;for(let f of u)l.removeClass(f,o)}else if(r.key=="style")if(typeof r.value=="string"){let u=new ru(l.document.stylesProcessor);u.setTo(r.value);for(let[f]of u.getStylesEntries())l.removeStyle(f,o)}else{let u=Object.keys(r.value);for(let f of u)l.removeStyle(f,o)}else l.removeAttribute(r.key,o);if(t.attributeNewValue!==null&&s)if(s.key=="class"){let u=typeof s.value=="string"?s.value.split(/\s+/):s.value;for(let f of u)l.addClass(f,o)}else if(s.key=="style")if(typeof s.value=="string"){let u=new ru(l.document.stylesProcessor);u.setTo(s.value);for(let[f,g]of u.getStylesEntries())l.setStyle(f,g,o)}else{let u=Object.keys(s.value);for(let f of u)l.setStyle(f,s.value[f],o)}else l.setAttribute(s.key,s.value,o)}}function zle(i){return(e,t,n)=>{if(!t.item||!(t.item instanceof Ii||t.item instanceof jn)&&!t.item.is("$textProxy"))return;let r=Hy(i,t,n);if(!r||!n.consumable.consume(t.item,e.name))return;let s=n.writer,o=D4(s,r),l=s.document.selection;if(t.item instanceof Ii||t.item instanceof jn)s.wrap(l.getFirstRange(),o);else{let u=n.mapper.toViewRange(t.range),f=s.wrap(u,o);for(let g of f.getItems())if(g.is("attributeElement")&&g.isSimilar(o)){n.mapper.bindElementToMarker(g,t.markerName);break}}}}function Ule(i){return(e,t,n)=>{if(!t.item||!(t.item instanceof kt))return;let r=Hy(i,t,n);if(!r||!n.consumable.test(t.item,e.name))return;let s=n.mapper.toViewElement(t.item);if(s&&s.getCustomProperty("addHighlight")){n.consumable.consume(t.item,e.name);for(let l of q._createIn(t.item))n.consumable.consume(l.item,e.name);s.getCustomProperty("addHighlight")(s,r,n.writer),n.mapper.bindElementToMarker(s,t.markerName)}}}function Wle(i){return(e,t,n)=>{if(t.markerRange.isCollapsed)return;let r=Hy(i,t,n);if(!r)return;let s=D4(n.writer,r),o=n.mapper.markerNameToElements(t.markerName);if(!!o){for(let l of o)n.mapper.unbindElementFromMarkerName(l,t.markerName),l.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(l),s):l.getCustomProperty("removeHighlight")(l,r.id,n.writer);n.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function qle(i){let e=z4(i.model),t=Wh(i.view,"container");return e.attributes.length&&(e.children=!0),n=>{n.on(`insert:${e.name}`,F4(t,$4(e)),{priority:i.converterPriority||"normal"}),(e.children||e.attributes.length)&&n.on("reduceChanges",q4(e),{priority:"low"})}}function $le(i){let e=z4(i.model),t=Wh(i.view,"container");return e.children=!0,n=>{if(n._conversionApi.schema.checkChild(e.name,"$text"))throw new L("conversion-element-to-structure-disallowed-text",n,{elementName:e.name});n.on(`insert:${e.name}`,Dle(t,$4(e)),{priority:i.converterPriority||"normal"}),n.on("reduceChanges",q4(e),{priority:"low"})}}function Gle(i){i=en(i);let e=i.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(let r of e.values)i.view[r]=Wh(i.view[r],"attribute");else i.view=Wh(i.view,"attribute");let n=U4(i);return r=>{r.on(t,N4(n),{priority:i.converterPriority||"normal"})}}function Kle(i){i=en(i);let e=i.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(let r of e.values)i.view[r]=W4(i.view[r]);else i.view=W4(i.view);let n=U4(i);return r=>{r.on(t,Hle(n),{priority:i.converterPriority||"normal"})}}function Yle(i){let e=Wh(i.view,"ui");return t=>{t.on(`addMarker:${i.model}`,j4(e),{priority:i.converterPriority||"normal"}),t.on(`removeMarker:${i.model}`,Vle(),{priority:i.converterPriority||"normal"})}}function Zle(i){i=en(i);let e=i.model,t=i.view;return t||(t=n=>({group:e,name:n.substr(i.model.length+1)})),n=>{n.on(`addMarker:${e}`,Ble(t),{priority:i.converterPriority||"normal"}),n.on(`removeMarker:${e}`,jle(t),{priority:i.converterPriority||"normal"})}}function Jle(i){return e=>{e.on(`addMarker:${i.model}`,zle(i.view),{priority:i.converterPriority||"normal"}),e.on(`addMarker:${i.model}`,Ule(i.view),{priority:i.converterPriority||"normal"}),e.on(`removeMarker:${i.model}`,Wle(i.view),{priority:i.converterPriority||"normal"})}}function z4(i){return typeof i=="string"&&(i={name:i}),{name:i.name,attributes:i.attributes?lt(i.attributes):[],children:!!i.children}}function Wh(i,e){return typeof i=="function"?i:(t,n)=>Xle(i,n,e)}function Xle(i,e,t){typeof i=="string"&&(i={name:i});let n,r=e.writer,s=Object.assign({},i.attributes);if(t=="container")n=r.createContainerElement(i.name,s);else if(t=="attribute"){let o={priority:i.priority||lo.DEFAULT_PRIORITY};n=r.createAttributeElement(i.name,s,o)}else n=r.createUIElement(i.name,s);if(i.styles){let o=Object.keys(i.styles);for(let l of o)r.setStyle(l,i.styles[l],n)}if(i.classes){let o=i.classes;if(typeof o=="string")r.addClass(o,n);else for(let l of o)r.addClass(l,n)}return n}function U4(i){return i.model.values?(e,t,n)=>{let r=i.view[e];return r?r(e,t,n):null}:i.view}function W4(i){return typeof i=="string"?e=>({key:i,value:e}):typeof i=="object"?i.value?()=>i:e=>({key:i.key,value:e}):i}function Hy(i,e,t){let n=typeof i=="function"?i(e,t):i;return n?(n.priority||(n.priority=10),n.id||(n.id=e.markerName),n):null}function Qle(i){return(e,t)=>{if(!e.is("element",i.name))return!1;if(t.type=="attribute"){if(i.attributes.includes(t.attributeKey))return!0}else{if(i.children)return!0}return!1}}function q4(i){let e=Qle(i);return(t,n)=>{let r=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(let s of n.changes){let o=s.type=="attribute"?s.range.start.nodeAfter:s.position.parent;if(!o||!e(o,s)){r.push(s);continue}if(!n.reconvertedElements.has(o)){n.reconvertedElements.add(o);let l=Q._createBefore(o),u=r.length;for(let f=r.length-1;f>=0;f--){let g=r[f],y=(g.type=="attribute"?g.range.start:g.position).compareWith(l);if(y=="before"||g.type=="remove"&&y=="same")break;u=f}r.splice(u,0,{type:"remove",name:o.name,position:l,length:1},{type:"reinsert",name:o.name,position:l,length:1})}}n.changes=r}}function $4(i){return(e,t,n={})=>{let r=["insert"];for(let s of i.attributes)e.hasAttribute(s)&&r.push(`attribute:${s}`);return r.every(s=>t.test(e,s))?(n.preflight||r.forEach(s=>t.consume(e,s)),!0):!1}}function ece(i,e,t){return(n,r)=>{let s=n.createContainerElement("$slot"),o=null;if(r==="children")o=Array.from(i.getChildren());else if(typeof r=="function")o=Array.from(i.getChildren()).filter(l=>r(l));else throw new L("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:r});return e.set(s,o),s}}function tce(i,e,t){let n=Array.from(e.values()).flat(),r=new Set(n);if(r.size!=n.length)throw new L("conversion-slot-filter-overlap",t.dispatcher,{element:i});if(r.size!=i.childCount)throw new L("conversion-slot-filter-incomplete",t.dispatcher,{element:i})}function ice(i,e,t,n){t.mapper.on("modelToViewPosition",o,{priority:"highest"});let r=null,s=null;for([r,s]of e)G4(i,s,t,n),t.writer.move(t.writer.createRangeIn(r),t.writer.createPositionBefore(r)),t.writer.remove(r);t.mapper.off("modelToViewPosition",o);function o(l,u){let f=u.modelPosition.nodeAfter,g=s.indexOf(f);g<0||(u.viewPosition=u.mapper.findPositionIn(r,g))}}function G4(i,e,t,n){for(let r of e)nce(i.root,r,t,n)||t.convertItem(r)}function nce(i,e,t,n){let{writer:r,mapper:s}=t;if(!n.reconversion)return!1;let o=s.toViewElement(e);return!o||o.root==i||!t.canReuseView(o)?!1:(r.move(r.createRangeOn(o),s.toViewPosition(Q._createBefore(e))),!0)}function rce(i,e,{preflight:t}={}){return t?e.test(i,"insert"):e.consume(i,"insert")}function K4(i){let{schema:e,document:t}=i.model;for(let n of t.getRoots())if(n.isEmpty&&!e.checkChild(n,"$text")&&e.checkChild(n,"paragraph"))return i.insertElement("paragraph",n),!0;return!1}function Y4(i,e,t){let n=t.createContext(i);return!(!t.checkChild(n,"paragraph")||!t.checkChild(n.push("paragraph"),e))}function Z4(i,e){let t=e.createElement("paragraph");return e.insert(t,i),e.createPositionAt(t,0)}var J4=class extends Ny{elementToElement(e){return this.add(Q4(e))}elementToAttribute(e){return this.add(ace(e))}attributeToAttribute(e){return this.add(lce(e))}elementToMarker(e){return this.add(cce(e))}dataToMarker(e){return this.add(uce(e))}};function X4(){return(i,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){let{modelRange:n,modelCursor:r}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=n,e.modelCursor=r}}}function sce(){return(i,e,{schema:t,consumable:n,writer:r})=>{let s=e.modelCursor;if(!n.test(e.viewItem))return;if(!t.checkChild(s,"$text")){if(!Y4(s,"$text",t)||e.viewItem.data.trim().length==0)return;s=Z4(s,r)}n.consume(e.viewItem);let o=r.createText(e.viewItem.data);r.insert(o,s),e.modelRange=r.createRange(s,s.getShiftedBy(o.offsetSize)),e.modelCursor=e.modelRange.end}}function oce(i,e){return(t,n)=>{let r=n.newSelection,s=[];for(let l of r.getRanges())s.push(e.toModelRange(l));let o=i.createSelection(s,{backward:r.isBackward});o.isEqual(i.document.selection)||i.change(l=>{l.setSelection(o)})}}function Q4(i){i=en(i);let e=Uy(i),t=zy(i.view),n=t?`element:${t}`:"element";return r=>{r.on(n,e,{priority:i.converterPriority||"normal"})}}function ace(i){i=en(i),eD(i);let e=tD(i,!1),t=zy(i.view),n=t?`element:${t}`:"element";return r=>{r.on(n,e,{priority:i.converterPriority||"low"})}}function lce(i){i=en(i);let e=null;(typeof i.view=="string"||i.view.key)&&(e=fce(i)),eD(i,e);let t=tD(i,!0);return n=>{n.on("element",t,{priority:i.converterPriority||"low"})}}function cce(i){let e=pce(i.model);return Q4(tt(ee({},i),{model:e}))}function uce(i){i=en(i),i.model||(i.model=r=>r?i.view+":"+r:i.view);let e={view:i.view,model:i.model},t=Uy(iD(e,"start")),n=Uy(iD(e,"end"));return r=>{r.on(`element:${i.view}-start`,t,{priority:i.converterPriority||"normal"}),r.on(`element:${i.view}-end`,n,{priority:i.converterPriority||"normal"});let s=Ui.low,o=Ui.highest,l=Ui.get(i.converterPriority)/o;r.on("element",dce(e),{priority:s+l})}}function dce(i){return(e,t,n)=>{let r=`data-${i.view}`;if(!n.consumable.test(t.viewItem,{attributes:r+"-end-after"})&&!n.consumable.test(t.viewItem,{attributes:r+"-start-after"})&&!n.consumable.test(t.viewItem,{attributes:r+"-end-before"})&&!n.consumable.test(t.viewItem,{attributes:r+"-start-before"}))return;t.modelRange||Object.assign(t,n.convertChildren(t.viewItem,t.modelCursor)),n.consumable.consume(t.viewItem,{attributes:r+"-end-after"})&&s(t.modelRange.end,t.viewItem.getAttribute(r+"-end-after").split(",")),n.consumable.consume(t.viewItem,{attributes:r+"-start-after"})&&s(t.modelRange.end,t.viewItem.getAttribute(r+"-start-after").split(",")),n.consumable.consume(t.viewItem,{attributes:r+"-end-before"})&&s(t.modelRange.start,t.viewItem.getAttribute(r+"-end-before").split(",")),n.consumable.consume(t.viewItem,{attributes:r+"-start-before"})&&s(t.modelRange.start,t.viewItem.getAttribute(r+"-start-before").split(","));function s(o,l){for(let u of l){let f=i.model(u,n),g=n.writer.createElement("$marker",{"data-name":f});n.writer.insert(g,o),t.modelCursor.isEqual(o)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(o,1),t.modelRange=t.modelRange._getTransformedByInsertion(o,1)[0]}}}}function zy(i){return typeof i=="string"?i:typeof i=="object"&&typeof i.name=="string"?i.name:null}function Uy(i){let e=new er(i.view);return(t,n,r)=>{let s=e.match(n.viewItem);if(!s)return;let o=s.match;if(o.name=!0,!r.consumable.test(n.viewItem,o))return;let l=hce(i.model,n.viewItem,r);!l||!r.safeInsert(l,n.modelCursor)||(r.consumable.consume(n.viewItem,o),r.convertChildren(n.viewItem,l),r.updateConversionResult(l,n))}}function hce(i,e,t){return i instanceof Function?i(e,t):t.writer.createElement(i)}function fce(i){typeof i.view=="string"&&(i.view={key:i.view});let e=i.view.key,t=typeof i.view.value=="undefined"?/[\s\S]*/:i.view.value,n;return e=="class"||e=="style"?n={[e=="class"?"classes":"styles"]:t}:n={attributes:{[e]:t}},i.view.name&&(n.name=i.view.name),i.view=n,e}function eD(i,e=null){let t=e===null?!0:s=>s.getAttribute(e),n=typeof i.model!="object"?i.model:i.model.key,r=typeof i.model!="object"||typeof i.model.value=="undefined"?t:i.model.value;i.model={key:n,value:r}}function tD(i,e){let t=new er(i.view);return(n,r,s)=>{if(!r.modelRange&&e)return;let o=t.match(r.viewItem);if(!o||(mce(i.view,r.viewItem)?o.match.name=!0:delete o.match.name,!s.consumable.test(r.viewItem,o.match)))return;let l=i.model.key,u=typeof i.model.value=="function"?i.model.value(r.viewItem,s):i.model.value;if(u===null)return;r.modelRange||Object.assign(r,s.convertChildren(r.viewItem,r.modelCursor)),gce(r.modelRange,{key:l,value:u},e,s)&&(s.consumable.test(r.viewItem,{name:!0})&&(o.match.name=!0),s.consumable.consume(r.viewItem,o.match))}}function mce(i,e){let t=typeof i=="function"?i(e):i;return typeof t=="object"&&!zy(t)?!1:!t.classes&&!t.attributes&&!t.styles}function gce(i,e,t,n){let r=!1;for(let s of Array.from(i.getItems({shallow:t})))!n.schema.checkAttribute(s,e.key)||(r=!0,!s.hasAttribute(e.key)&&n.writer.setAttribute(e.key,e.value,s));return r}function pce(i){return(e,t)=>{let n=typeof i=="string"?i:i(e,t);return t.writer.createElement("$marker",{"data-name":n})}}function iD(i,e){let t=(n,r)=>{let s=n.getAttribute("name"),o=i.model(s,r);return r.writer.createElement("$marker",{"data-name":o})};return{view:`${i.view}-${e}`,model:t}}function bce(i){i.document.registerPostFixer(e=>vce(e,i))}function vce(i,e){let t=e.document.selection,n=e.schema,r=[],s=!1;for(let o of t.getRanges()){let l=nD(o,n);l&&!l.isEqual(o)?(r.push(l),s=!0):r.push(o)}return s&&i.setSelection(xce(r),{backward:t.isBackward}),!1}function nD(i,e){return i.isCollapsed?wce(i,e):yce(i,e)}function wce(i,e){let t=i.start,n=e.getNearestSelectionRange(t);if(!n){let s=t.getAncestors().reverse().find(o=>e.isObject(o));return s?q._createOn(s):null}if(!n.isCollapsed)return n;let r=n.start;return t.isEqual(r)?null:new q(r)}function yce(i,e){let{start:t,end:n}=i,r=e.checkChild(t,"$text"),s=e.checkChild(n,"$text"),o=e.getLimitElement(t),l=e.getLimitElement(n);if(o===l){if(r&&s)return null;if(_ce(t,n,e)){let p=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),_=n.nodeBefore&&e.isSelectable(n.nodeBefore)?null:e.getNearestSelectionRange(n,"backward"),C=p?p.start:t,E=_?_.end:n;return new q(C,E)}}let u=o&&!o.is("rootElement"),f=l&&!l.is("rootElement");if(u||f){let g=t.nodeAfter&&n.nodeBefore&&t.nodeAfter.parent===n.nodeBefore.parent,p=u&&(!g||!sD(t.nodeAfter,e)),y=f&&(!g||!sD(n.nodeBefore,e)),_=t,C=n;return p&&(_=Q._createBefore(rD(o,e))),y&&(C=Q._createAfter(rD(l,e))),new q(_,C)}return null}function rD(i,e){let t=i,n=t;for(;e.isLimit(n)&&n.parent;)t=n,n=n.parent;return t}function _ce(i,e,t){let n=i.nodeAfter&&!t.isLimit(i.nodeAfter)||t.checkChild(i,"$text"),r=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return n||r}function xce(i){let e=[...i],t=new Set,n=1;for(;n<e.length;){let s=e[n],o=e.slice(0,n);for(let[l,u]of o.entries())if(!t.has(l)){if(s.isEqual(u))t.add(l);else if(s.isIntersecting(u)){t.add(l),t.add(n);let f=s.getJoined(u);e.push(f)}}n++}return e.filter((s,o)=>!t.has(o))}function sD(i,e){return i&&e.isSelectable(i)}var Wy=class extends gt(){constructor(e,t){super();v(this,"model");v(this,"view");v(this,"mapper");v(this,"downcastDispatcher");this.model=e,this.view=new Fh(t),this.mapper=new Hh,this.downcastDispatcher=new Dp({mapper:this.mapper,schema:e.schema});let n=this.model.document,r=n.selection,s=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(n,"change",()=>{this.view.change(o=>{this.downcastDispatcher.convertChanges(n.differ,s,o),this.downcastDispatcher.convertSelection(r,s,o)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",oce(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",kce(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",Fy(),{priority:"lowest"}),this.downcastDispatcher.on("insert",jy(),{priority:"lowest"}),this.downcastDispatcher.on("remove",Mle(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",Lle()),this.downcastDispatcher.on("selection",V4(),{priority:"low"}),this.downcastDispatcher.on("selection",B4(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(o=>{if(o.rootName=="$graveyard")return null;let l=new Ap(this.view.document,o.name);return l.rootName=o.rootName,this.mapper.bindElements(o,l),l})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){let t=typeof e=="string"?e:e.name,n=this.model.markers.get(t);if(!n)throw new L("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(n)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}};function kce(i,e,t){return(n,r)=>{if(!(t.document.isComposing&&!Le.isAndroid))for(let s=0;s<r.targetRanges.length;s++){let o=r.targetRanges[s],l=i.toModelRange(o),u=nD(l,e);!u||u.isEqual(l)||(r.targetRanges[s]=i.toViewRange(u))}}}var du=class{constructor(){v(this,"_consumables",new Map)}add(e,t){let n;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?n=this._consumables.get(e):(n=new oD(e),this._consumables.set(e,n)),n.add(t)}test(e,t){let n=this._consumables.get(e);return n===void 0?null:e.is("$text")||e.is("documentFragment")?n:n.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){let n=this._consumables.get(e);n!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):n.revert(t))}static consumablesFromElement(e){let t={element:e,name:!0,attributes:[],classes:[],styles:[]},n=e.getAttributeKeys();for(let o of n)o=="style"||o=="class"||t.attributes.push(o);let r=e.getClassNames();for(let o of r)t.classes.push(o);let s=e.getStyleNames();for(let o of s)t.styles.push(o);return t}static createFrom(e,t){if(t||(t=new du),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,du.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(let n of e.getChildren())t=du.createFrom(n,t);return t}},Vp=["attributes","classes","styles"],oD=class{constructor(e){v(this,"element");v(this,"_canConsumeName");v(this,"_consumables");this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(let t of Vp)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(let t of Vp)if(t in e){let n=this._test(t,e[t]);if(n!==!0)return n}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(let t of Vp)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(let t of Vp)t in e&&this._revert(t,e[t])}_add(e,t){let n=lt(t),r=this._consumables[e];for(let s of n){if(e==="attributes"&&(s==="class"||s==="style"))throw new L("viewconsumable-invalid-attribute",this);if(r.set(s,!0),e==="styles")for(let o of this.element.document.stylesProcessor.getRelatedStyles(s))r.set(o,!0)}}_test(e,t){let n=lt(t),r=this._consumables[e];for(let s of n)if(e==="attributes"&&(s==="class"||s==="style")){let o=s=="class"?"classes":"styles",l=this._test(o,[...this._consumables[o].keys()]);if(l!==!0)return l}else{let o=r.get(s);if(o===void 0)return null;if(!o)return!1}return!0}_consume(e,t){let n=lt(t),r=this._consumables[e];for(let s of n)if(e==="attributes"&&(s==="class"||s==="style")){let o=s=="class"?"classes":"styles";this._consume(o,[...this._consumables[o].keys()])}else if(r.set(s,!1),e=="styles")for(let o of this.element.document.stylesProcessor.getRelatedStyles(s))r.set(o,!1)}_revert(e,t){let n=lt(t),r=this._consumables[e];for(let s of n)if(e==="attributes"&&(s==="class"||s==="style")){let o=s=="class"?"classes":"styles";this._revert(o,[...this._consumables[o].keys()])}else r.get(s)===!1&&r.set(s,!0)}},aD=class extends gt(){constructor(){super();v(this,"_sourceDefinitions",{});v(this,"_attributeProperties",Object.create(null));v(this,"_customChildChecks",new Map);v(this,"_customAttributeChecks",new Map);v(this,"_genericCheckSymbol",Symbol("$generic"));v(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new ho(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new ho(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new L("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new L("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){let t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){let t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){let t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){let t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){let t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){let t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(e,t):!1}checkAttribute(e,t){let n=this.getDefinition(e.last);if(!n)return!1;let r=this._evaluateAttributeChecks(e,t);return r!==void 0?r:n.allowAttributes.includes(t)}checkMerge(e,t){if(e instanceof Q){let n=e.nodeBefore,r=e.nodeAfter;if(!(n instanceof kt))throw new L("schema-check-merge-no-element-before",this);if(!(r instanceof kt))throw new L("schema-check-merge-no-element-after",this);return this.checkMerge(n,r)}if(this.isLimit(e)||this.isLimit(t))return!1;for(let n of t.getChildren())if(!this.checkChild(e,n))return!1;return!0}addChildCheck(e,t){let n=t!==void 0?t:this._genericCheckSymbol,r=this._customChildChecks.get(n)||[];r.push(e),this._customChildChecks.set(n,r)}addAttributeCheck(e,t){let n=t!==void 0?t:this._genericCheckSymbol,r=this._customAttributeChecks.get(n)||[];r.push(e),this._customAttributeChecks.set(n,r)}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let t;for(e instanceof Q?t=e.parent:t=(e instanceof q?[e]:Array.from(e.getRanges())).reduce((r,s)=>{let o=s.getCommonAncestor();return r?r.getCommonAncestor(o,{includeSelf:!0}):o},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){let r=[...e.getFirstPosition().getAncestors(),new It("",e.getAttributes())];return this.checkAttribute(r,t)}else{let n=e.getRanges();for(let r of n)for(let s of r)if(this.checkAttribute(s.item,t))return!0}return!1}*getValidRanges(e,t){e=Fce(e);for(let n of e)yield*this._getValidRangesForRange(n,t)}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new q(e);let n,r,s=e.getAncestors().reverse().find(o=>this.isLimit(o))||e.root;(t=="both"||t=="backward")&&(n=new xr({boundaries:q._createIn(s),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(r=new xr({boundaries:q._createIn(s),startPosition:e}));for(let o of Nce(n,r)){let l=o.walker==n?"elementEnd":"elementStart",u=o.value;if(u.type==l&&this.isObject(u.item))return q._createOn(u.item);if(this.checkChild(u.nextPosition,"$text"))return new q(u.nextPosition)}return null}findAllowedParent(e,t){let n=e.parent;for(;n;){if(this.checkChild(n,t))return n;if(this.isLimit(n))return null;n=n.parent}return null}setAllowedAttributes(e,t,n){let r=n.model;for(let[s,o]of Object.entries(t))r.schema.checkAttribute(e,s)&&n.setAttribute(s,o,e)}removeDisallowedAttributes(e,t){for(let n of e)if(n.is("$text"))lD(this,n,t);else{let s=q._createIn(n).getPositions();for(let o of s){let l=o.nodeBefore||o.parent;lD(this,l,t)}}}getAttributesWithProperty(e,t,n){let r={};for(let[s,o]of e.getAttributes()){let l=this.getAttributeProperties(s);l[t]!==void 0&&(n===void 0||n===l[t])&&(r[s]=o)}return r}createContext(e){return new ho(e)}_clearCache(){this._compiledDefinitions=null}_compile(){let e={},t=this._sourceDefinitions,n=Object.keys(t);for(let s of n)e[s]=Cce(t[s],s);let r=Object.values(e);for(let s of r)Tce(e,s),Ece(e,s),Sce(e,s),Ace(e,s);for(let s of r)Ice(e,s);for(let s of r)Pce(e,s);for(let s of r)Rce(e,s);for(let s of r)Mce(e,s);for(let s of r)Lce(e,s);this._compiledDefinitions=Oce(e)}_checkContextMatch(e,t){let n=e.last,r=this._evaluateChildChecks(e,t);if(r=r!==void 0?r:t.allowIn.includes(n.name),!r)return!1;let s=this.getDefinition(n),o=e.trimLast();return s?o.length==0?!0:this._checkContextMatch(o,s):!1}_evaluateChildChecks(e,t){let n=this._customChildChecks.get(this._genericCheckSymbol)||[],r=this._customChildChecks.get(t.name)||[];for(let s of[...n,...r]){let o=s(e,t);if(o!==void 0)return o}}_evaluateAttributeChecks(e,t){let n=this._customAttributeChecks.get(this._genericCheckSymbol)||[],r=this._customAttributeChecks.get(t)||[];for(let s of[...n,...r]){let o=s(e,t);if(o!==void 0)return o}}*_getValidRangesForRange(e,t){let n=e.start,r=e.start;for(let s of e.getItems({shallow:!0}))s.is("element")&&(yield*this._getValidRangesForRange(q._createIn(s),t)),this.checkAttribute(s,t)||(n.isEqual(r)||(yield new q(n,r)),n=Q._createAfter(s)),r=Q._createAfter(s);n.isEqual(r)||(yield new q(n,r))}findOptimalInsertionRange(e,t){let n=e.getSelectedElement();if(n&&this.isObject(n)&&!this.isInline(n))return t=="before"||t=="after"?new q(Q._createAt(n,t)):q._createOn(n);let r=$t(e.getSelectedBlocks());if(!r)return new q(e.focus);if(r.isEmpty)return new q(Q._createAt(r,0));let s=Q._createAfter(r);return e.focus.isTouching(s)?new q(s):new q(Q._createBefore(r))}},ho=class{constructor(e){v(this,"_items");if(e instanceof ho)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(Bce)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){let t=new ho([e]);return t._items=[...this._items,...t._items],t}trimLast(){let e=new ho([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}};function Cce(i,e){let t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return Dce(i,t),vs(i,t,"allowIn"),vs(i,t,"allowChildren"),vs(i,t,"disallowIn"),vs(i,t,"disallowChildren"),vs(i,t,"allowContentOf"),vs(i,t,"allowWhere"),vs(i,t,"allowAttributes"),vs(i,t,"disallowAttributes"),vs(i,t,"allowAttributesOf"),vs(i,t,"inheritTypesFrom"),Vce(i,t),t}function Tce(i,e){for(let t of e.allowIn){let n=i[t];n?n.allowChildren.add(e.name):e.allowIn.delete(t)}}function Ece(i,e){for(let t of e.allowChildren){let n=i[t];n?n.allowIn.add(e.name):e.allowChildren.delete(t)}}function Sce(i,e){for(let t of e.disallowIn){let n=i[t];n?n.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function Ace(i,e){for(let t of e.disallowChildren){let n=i[t];n?n.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function Ice(i,e){for(let t of e.disallowChildren)e.allowChildren.delete(t);for(let t of e.disallowIn)e.allowIn.delete(t);for(let t of e.disallowAttributes)e.allowAttributes.delete(t)}function Pce(i,e){for(let t of e.allowContentOf){let n=i[t];!n||(n.disallowChildren.forEach(r=>{e.allowChildren.has(r)||(e.disallowChildren.add(r),i[r].disallowIn.add(e.name))}),n.allowChildren.forEach(r=>{e.disallowChildren.has(r)||(e.allowChildren.add(r),i[r].allowIn.add(e.name))}))}}function Rce(i,e){for(let t of e.allowWhere){let n=i[t];!n||(n.disallowIn.forEach(r=>{e.allowIn.has(r)||(e.disallowIn.add(r),i[r].disallowChildren.add(e.name))}),n.allowIn.forEach(r=>{e.disallowIn.has(r)||(e.allowIn.add(r),i[r].allowChildren.add(e.name))}))}}function Oce(i){let e={};for(let t of Object.values(i))e[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(n=>!!i[n]),allowChildren:Array.from(t.allowChildren).filter(n=>!!i[n]),allowAttributes:Array.from(t.allowAttributes)};return e}function Mce(i,e){for(let t of e.allowAttributesOf){let n=i[t];if(!n)return;n.allowAttributes.forEach(r=>{e.disallowAttributes.has(r)||e.allowAttributes.add(r)})}}function Lce(i,e){for(let t of e.inheritTypesFrom){let n=i[t];if(n){let r=Object.keys(n).filter(s=>s.startsWith("is"));for(let s of r)s in e||(e[s]=n[s])}}}function Dce(i,e){for(let t of i){let n=Object.keys(t).filter(r=>r.startsWith("is"));for(let r of n)e[r]=!!t[r]}}function vs(i,e,t){for(let n of i){let r=n[t];typeof r=="string"&&(r=[r]),Array.isArray(r)&&r.forEach(s=>e[t].add(s))}}function Vce(i,e){for(let t of i){let n=t.inheritAllFrom;n&&(e.allowContentOf.add(n),e.allowWhere.add(n),e.allowAttributesOf.add(n),e.inheritTypesFrom.add(n))}}function Bce(i){return typeof i=="string"||i.is("documentFragment")?{name:typeof i=="string"?i:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:i.is("element")?i.name:"$text",*getAttributeKeys(){yield*i.getAttributeKeys()},getAttribute(e){return i.getAttribute(e)}}}function*Nce(i,e){let t=!1;for(;!t;){if(t=!0,i){let n=i.next();n.done||(t=!1,yield{walker:i,value:n.value})}if(e){let n=e.next();n.done||(t=!1,yield{walker:e,value:n.value})}}}function*Fce(i){for(let e of i)yield*e.getMinimalFlatRanges()}function lD(i,e,t){for(let n of e.getAttributeKeys())i.checkAttribute(e,n)||t.removeAttribute(n,e)}var qy=class extends wt(){constructor(e){super();v(this,"conversionApi");v(this,"_splitParts",new Map);v(this,"_cursorParents",new Map);v(this,"_modelCursor",null);v(this,"_emptyElementsToKeep",new Set);this.conversionApi=tt(ee({},e),{consumable:null,writer:null,store:null,convertItem:(t,n)=>this._convertItem(t,n),convertChildren:(t,n)=>this._convertChildren(t,n),safeInsert:(t,n)=>this._safeInsert(t,n),updateConversionResult:(t,n)=>this._updateConversionResult(t,n),splitToAllowedParent:(t,n)=>this._splitToAllowedParent(t,n),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)})}convert(e,t,n=["$root"]){this.fire("viewCleanup",e),this._modelCursor=Hce(n,t),this.conversionApi.writer=t,this.conversionApi.consumable=du.createFrom(e),this.conversionApi.store={};let{modelRange:r}=this._convertItem(e,this._modelCursor),s=t.createDocumentFragment();if(r){this._removeEmptyElements();for(let o of Array.from(this._modelCursor.parent.getChildren()))t.append(o,s);s.markers=jce(s,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,s}_convertItem(e,t){let n={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,n,this.conversionApi):e.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof q))throw new L("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(e,t){let n=t.is("position")?t:Q._createAt(t,0),r=new q(n);for(let s of Array.from(e.getChildren())){let o=this._convertItem(s,n);o.modelRange instanceof q&&(r.end=o.modelRange.end,n=o.modelCursor)}return{modelRange:r,modelCursor:n}}_safeInsert(e,t){let n=this._splitToAllowedParent(e,t);return n?(this.conversionApi.writer.insert(e,n.position),!0):!1}_updateConversionResult(e,t){let n=this._getSplitParts(e),r=this.conversionApi.writer;t.modelRange||(t.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(n[n.length-1])));let s=this._cursorParents.get(e);s?t.modelCursor=r.createPositionAt(s,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){let{schema:n,writer:r}=this.conversionApi,s=n.findAllowedParent(t,e);if(s){if(s===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(s)&&(s=null)}if(!s)return Y4(t,e,n)?{position:Z4(t,r)}:null;let o=this.conversionApi.writer.split(t,s),l=[];for(let f of o.range.getWalker())if(f.type=="elementEnd")l.push(f.item);else{let g=l.pop(),p=f.item;this._registerSplitPair(g,p)}let u=o.range.end.parent;return this._cursorParents.set(e,u),{position:o.position,cursorParent:u}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);let n=this._splitParts.get(e);this._splitParts.set(t,n),n.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(let t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}};function jce(i,e){let t=new Set,n=new Map,r=q._createIn(i).getItems();for(let s of r)s.is("element","$marker")&&t.add(s);for(let s of t){let o=s.getAttribute("data-name"),l=e.createPositionBefore(s);n.has(o)?n.get(o).end=l.clone():n.set(o,new q(l.clone())),e.remove(s)}return n}function Hce(i,e){let t;for(let n of new ho(i)){let r={};for(let o of n.getAttributeKeys())r[o]=n.getAttribute(o);let s=e.createElement(n.name,r);t&&e.insert(s,t),t=Q._createAt(s,0)}return t}var $y=class{getHtml(e){let n=we.document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(e),n.innerHTML}},Bp=class{constructor(e){v(this,"domParser");v(this,"domConverter");v(this,"htmlWriter");v(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new lu(e,{renderingMode:"data"}),this.htmlWriter=new $y}toData(e){let t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){let t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e=`<body>${e}</body>`);let t=this.domParser.parseFromString(e,"text/html"),n=t.createDocumentFragment(),r=t.body.childNodes;for(;r.length>0;)n.appendChild(r[0]);return n}},Gy=class extends wt(){constructor(e,t){super();v(this,"model");v(this,"mapper");v(this,"downcastDispatcher");v(this,"upcastDispatcher");v(this,"viewDocument");v(this,"stylesProcessor");v(this,"htmlProcessor");v(this,"processor");v(this,"_viewWriter");this.model=e,this.mapper=new Hh,this.downcastDispatcher=new Dp({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",Fy(),{priority:"lowest"}),this.downcastDispatcher.on("insert",jy(),{priority:"lowest"}),this.upcastDispatcher=new qy({schema:e.schema}),this.viewDocument=new Pp(t),this.stylesProcessor=t,this.htmlProcessor=new Bp(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Rp(this.viewDocument),this.upcastDispatcher.on("text",sce(),{priority:"lowest"}),this.upcastDispatcher.on("element",X4(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",X4(),{priority:"lowest"}),gt().prototype.decorate.call(this,"init"),gt().prototype.decorate.call(this,"set"),gt().prototype.decorate.call(this,"get"),gt().prototype.decorate.call(this,"toView"),gt().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},K4)},{priority:"lowest"})}get(e={}){let{rootName:t="main",trim:n="empty"}=e;if(!this._checkIfRootsExists([t]))throw new L("datacontroller-get-non-existent-root",this);let r=this.model.document.getRoot(t);return r.isAttached()||at("datacontroller-get-detached-root",this),n==="empty"&&!this.model.hasContent(r,{ignoreWhitespaces:!0})?"":this.stringify(r,e)}stringify(e,t={}){let n=this.toView(e,t);return this.processor.toData(n)}toView(e,t={}){let n=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();let s=q._createIn(e),o=new la(n);this.mapper.bindElements(e,o);let l=e.is("documentFragment")?e.markers:zce(e);return this.downcastDispatcher.convert(s,l,r,t),o}init(e){if(this.model.document.version)throw new L("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new L("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},n=>{for(let r of Object.keys(t)){let s=this.model.document.getRoot(r);n.insert(this.parse(t[r],s),s,0)}}),Promise.resolve()}set(e,t={}){let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new L("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},r=>{r.setSelection(null),r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(let s of Object.keys(n)){let o=this.model.document.getRoot(s);r.remove(r.createRangeIn(o)),r.insert(this.parse(n[s],o),o,0)}})}parse(e,t="$root"){let n=this.processor.toView(e);return this.toModel(n,t)}toModel(e,t="$root"){return this.model.change(n=>this.upcastDispatcher.convert(e,n,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(let t of e)if(!this.model.document.getRoot(t))return!1;return!0}};function zce(i){let e=[],t=i.root.document;if(!t)return new Map;let n=q._createIn(i);for(let r of t.model.markers){let s=r.getRange(),o=s.isCollapsed,l=s.start.isEqual(n.start)||s.end.isEqual(n.end);if(o&&l)e.push([r.name,s]);else{let u=n.getIntersection(s);u&&e.push([r.name,u])}}return e.sort(([r,s],[o,l])=>{if(s.end.compareWith(l.start)!=="after")return 1;if(s.start.compareWith(l.end)!=="before")return-1;switch(s.start.compareWith(l.start)){case"before":return 1;case"after":return-1;default:switch(s.end.compareWith(l.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(r)}}}),new Map(e)}var Ky=class{constructor(e,t){v(this,"_helpers",new Map);v(this,"_downcast");v(this,"_upcast");this._downcast=lt(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=lt(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){let n=this._downcast.includes(t);if(!this._upcast.includes(t)&&!n)throw new L("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:n})}for(e){if(!this._helpers.has(e))throw new L("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(let{model:t,view:n}of Yy(e))this.for("upcast").elementToElement({model:t,view:n,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(let{model:t,view:n}of Yy(e))this.for("upcast").elementToAttribute({view:n,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(let{model:t,view:n}of Yy(e))this.for("upcast").attributeToAttribute({view:n,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:n}){if(this._helpers.has(e))throw new L("conversion-group-exists",this);let r=n?new L4(t):new J4(t);this._helpers.set(e,r)}};function*Yy(i){if(i.model.values)for(let e of i.model.values){let t={key:i.model.key,value:e},n=i.view[e],r=i.upcastAlso?i.upcastAlso[e]:void 0;yield*cD(t,n,r)}else yield*cD(i.model,i.view,i.upcastAlso)}function*cD(i,e,t){if(yield{model:i,view:e},t)for(let n of lt(t))yield{model:i,view:n}}var uD=class{constructor(e,t={}){v(this,"namespaces");v(this,"domParser");v(this,"domConverter");v(this,"htmlWriter");v(this,"skipComments",!0);this.namespaces=t.namespaces||[],this.domParser=new DOMParser,this.domConverter=new lu(e,{renderingMode:"data"}),this.htmlWriter=new $y}toData(e){let t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){let t=this._toDom(e);return this.domConverter.domToView(t,{keepOriginalCase:!0,skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e=`<xml ${this.namespaces.map(l=>`xmlns:${l}="nsp"`).join(" ")}>${e}</xml>`;let n=this.domParser.parseFromString(e,"text/xml"),r=n.querySelector("parsererror");if(r)throw new Error("Parse error - "+r.textContent);let s=n.createDocumentFragment(),o=n.documentElement.childNodes;for(;o.length>0;)s.appendChild(o[0]);return s}};var Hn=class{constructor(e){v(this,"baseVersion");v(this,"isDocumentOperation");v(this,"batch");this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){let e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}};function Zy(i,e){let t=hD(e),n=t.reduce((o,l)=>o+l.offsetSize,0),r=i.parent;Gh(i);let s=i.index;return r._insertChild(s,t),$h(r,s+t.length),$h(r,s),new q(i,i.getShiftedBy(n))}function dD(i){if(!i.isFlat)throw new L("operation-utils-remove-range-not-flat",this);let e=i.start.parent;Gh(i.start),Gh(i.end);let t=e._removeChildren(i.start.index,i.end.index-i.start.index);return $h(e,i.start.index),t}function qh(i,e){if(!i.isFlat)throw new L("operation-utils-move-range-not-flat",this);let t=dD(i);return e=e._getTransformedByDeletion(i.start,i.end.offset-i.start.offset),Zy(e,t)}function Uce(i,e,t){Gh(i.start),Gh(i.end);for(let n of i.getItems({shallow:!0})){let r=n.is("$textProxy")?n.textNode:n;t!==null?r._setAttribute(e,t):r._removeAttribute(e),$h(r.parent,r.index)}$h(i.end.parent,i.end.index)}function hD(i){let e=[];function t(n){if(typeof n=="string")e.push(new It(n));else if(n instanceof _r)e.push(new It(n.data,n.getAttributes()));else if(n instanceof ll)e.push(n);else if(_n(n))for(let r of n)t(r)}t(i);for(let n=1;n<e.length;n++){let r=e[n],s=e[n-1];r instanceof It&&s instanceof It&&fD(r,s)&&(e.splice(n-1,2,new It(s.data+r.data,s.getAttributes())),n--)}return e}function $h(i,e){let t=i.getChild(e-1),n=i.getChild(e);if(t&&n&&t.is("$text")&&n.is("$text")&&fD(t,n)){let r=new It(t.data+n.data,t.getAttributes());i._removeChildren(e-1,2),i._insertChild(e-1,r)}}function Gh(i){let e=i.textNode,t=i.parent;if(e){let n=i.offset-e.startOffset,r=e.index;t._removeChildren(r,1);let s=new It(e.data.substr(0,n),e.getAttributes()),o=new It(e.data.substr(n),e.getAttributes());t._insertChild(r,[s,o])}}function fD(i,e){let t=i.getAttributes(),n=e.getAttributes();for(let r of t){if(r[1]!==e.getAttribute(r[0]))return!1;n.next()}return n.next().done}var yt=class extends Hn{constructor(e,t,n,r){super(r);v(this,"sourcePosition");v(this,"howMany");v(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[q._createFromPositionAndShift(this.sourcePosition,this.howMany),q._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new yt(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){let e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new yt(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){let e=this.sourcePosition.parent,t=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(n+this.howMany>e.maxOffset)throw new L("move-operation-nodes-do-not-exist",this);if(e===t&&n<r&&r<n+this.howMany)throw new L("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Wi(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){let s=this.sourcePosition.path.length-1;if(this.targetPosition.path[s]>=n&&this.targetPosition.path[s]<n+this.howMany)throw new L("move-operation-node-into-itself",this)}}_execute(){qh(q._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){let e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){let n=Q.fromJSON(e.sourcePosition,t),r=Q.fromJSON(e.targetPosition,t);return new this(n,e.howMany,r,e.baseVersion)}},Pi=class extends Hn{constructor(e,t,n){super(n);v(this,"position");v(this,"nodes");v(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new uu(hD(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){let e=new uu([...this.nodes].map(n=>n._clone(!0))),t=new Pi(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){let e=this.position.root.document.graveyard,t=new Q(e,[0]);return new yt(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){let e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new L("insert-operation-position-invalid",this)}_execute(){let e=this.nodes;this.nodes=new uu([...e].map(t=>t._clone(!0))),Zy(this.position,e)}toJSON(){let e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){let n=[];for(let s of e.nodes)s.name?n.push(kt.fromJSON(s)):n.push(It.fromJSON(s));let r=new Pi(Q.fromJSON(e.position,t),n,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}},Pt=class extends Hn{constructor(e,t,n,r,s){super(s);v(this,"splitPosition");v(this,"howMany");v(this,"insertionPosition");v(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=n,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){let e=this.insertionPosition.path.slice();return e.push(0),new Q(this.insertionPosition.root,e)}get movedRange(){let e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new q(this.splitPosition,e)}get affectedSelectable(){let e=[q._createFromPositionAndShift(this.splitPosition,0),q._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(q._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new Pt(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){let e=this.splitPosition.root.document.graveyard,t=new Q(e,[0]);return new Xt(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){let e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new L("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new L("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new L("split-operation-graveyard-position-invalid",this)}else throw new L("split-operation-split-in-root",this)}_execute(){let e=this.splitPosition.parent;if(this.graveyardPosition)qh(q._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{let n=e._clone();Zy(this.insertionPosition,n)}let t=new q(Q._createAt(e,this.splitPosition.offset),Q._createAt(e,e.maxOffset));qh(t,this.moveTargetPosition)}toJSON(){let e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){let t=e.path.slice(0,-1);return t[t.length-1]++,new Q(e.root,t,"toPrevious")}static fromJSON(e,t){let n=Q.fromJSON(e.splitPosition,t),r=Q.fromJSON(e.insertionPosition,t),s=e.graveyardPosition?Q.fromJSON(e.graveyardPosition,t):null;return new this(n,e.howMany,r,s,e.baseVersion)}},Xt=class extends Hn{constructor(e,t,n,r,s){super(s);v(this,"sourcePosition");v(this,"howMany");v(this,"targetPosition");v(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new Q(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){let e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new q(this.sourcePosition,e)}get affectedSelectable(){let e=this.sourcePosition.parent;return[q._createOn(e),q._createFromPositionAndShift(this.targetPosition,0),q._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Xt(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){let e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),n=new Q(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Pt(e,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){let e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new L("merge-operation-how-many-invalid",this)}else throw new L("merge-operation-target-position-invalid",this);else throw new L("merge-operation-source-position-invalid",this)}_execute(){let e=this.sourcePosition.parent,t=q._createIn(e);qh(t,this.targetPosition),qh(q._createOn(e),this.graveyardPosition)}toJSON(){let e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){let n=Q.fromJSON(e.sourcePosition,t),r=Q.fromJSON(e.targetPosition,t),s=Q.fromJSON(e.graveyardPosition,t);return new this(n,e.howMany,r,s,e.baseVersion)}},nn=class extends Hn{constructor(e,t,n,r,s,o){super(o);v(this,"name");v(this,"oldRange");v(this,"newRange");v(this,"affectsData");v(this,"_markers");this.name=e,this.oldRange=t?t.clone():null,this.newRange=n?n.clone():null,this.affectsData=s,this._markers=r}get type(){return"marker"}get affectedSelectable(){let e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new nn(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new nn(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){let e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new nn(e.name,e.oldRange?q.fromJSON(e.oldRange,t):null,e.newRange?q.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}},ni=class extends Hn{constructor(e,t,n,r,s){super(s);v(this,"range");v(this,"key");v(this,"oldValue");v(this,"newValue");this.range=e.clone(),this.key=t,this.oldValue=n===void 0?null:n,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new ni(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new ni(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){let e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new L("attribute-operation-range-not-flat",this);for(let e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!il(e.getAttribute(this.key),this.oldValue))throw new L("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new L("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){il(this.oldValue,this.newValue)||Uce(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new ni(q.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}},ri=class extends Hn{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new ri(this.baseVersion)}getReversed(){return new ri(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}},xn=class extends Hn{constructor(e,t,n,r){super(r);v(this,"position");v(this,"oldName");v(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=n}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new xn(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new xn(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){let e=this.position.nodeAfter;if(e instanceof kt){if(e.name!==this.oldName)throw new L("rename-operation-wrong-name",this)}else throw new L("rename-operation-wrong-position",this)}_execute(){let e=this.position.nodeAfter;e.name=this.newName}toJSON(){let e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new xn(Q.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}},ws=class extends Hn{constructor(e,t,n,r,s){super(s);v(this,"root");v(this,"key");v(this,"oldValue");v(this,"newValue");this.root=e,this.key=t,this.oldValue=n===void 0?null:n,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new ws(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new ws(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new L("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new L("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new L("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){let e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new L("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new ws(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}},$r=class extends Hn{constructor(e,t,n,r,s){super(s);v(this,"rootName");v(this,"elementName");v(this,"isAdd");v(this,"_document");if(this.rootName=e,this.elementName=t,this.isAdd=n,this._document=r,!this._document.getRoot(this.rootName)){let o=this._document.createRoot(this.elementName,this.rootName);o._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new $r(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new $r(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){let e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new $r(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}},kr={};kr[ni.className]=ni;kr[Pi.className]=Pi;kr[nn.className]=nn;kr[yt.className]=yt;kr[ri.className]=ri;kr[Hn.className]=Hn;kr[xn.className]=xn;kr[ws.className]=ws;kr[$r.className]=$r;kr[Pt.className]=Pt;kr[Xt.className]=Xt;var mD=class{static fromJSON(e,t){return kr[e.__className].fromJSON(e,t)}},Jy=new Map;function pt(i,e,t){let n=Jy.get(i);n||(n=new Map,Jy.set(i,n)),n.set(e,t)}function Wce(i,e){let t=Jy.get(i);return t&&t.has(e)?t.get(e):qce}function qce(i){return[i]}function gD(i,e,t={}){let n=Wce(i.constructor,e.constructor);try{return i=i.clone(),n(i,e,t)}catch(r){throw r}}function pD(i,e,t){i=i.slice(),e=e.slice();let n=new bD(t.document,t.useRelations,t.forceWeakRemove);n.setOriginalOperations(i),n.setOriginalOperations(e);let r=n.originalOperations;if(i.length==0||e.length==0)return{operationsA:i,operationsB:e,originalOperations:r};let s=new WeakMap;for(let u of i)s.set(u,0);let o={nextBaseVersionA:i[i.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:i.length,originalOperationsBCount:e.length},l=0;for(;l<i.length;){let u=i[l],f=s.get(u);if(f==e.length){l++;continue}let g=e[f],p=gD(u,g,n.getContext(u,g,!0)),y=gD(g,u,n.getContext(g,u,!1));n.updateRelation(u,g),n.setOriginalOperations(p,u),n.setOriginalOperations(y,g);for(let _ of p)s.set(_,f+y.length);i.splice(l,1,...p),e.splice(f,1,...y)}if(yD(i),yD(e),t.padWithNoOps){let u=i.length-o.originalOperationsACount,f=e.length-o.originalOperationsBCount;wD(i,f-u),wD(e,u-f)}return vD(i,o.nextBaseVersionB),vD(e,o.nextBaseVersionA),{operationsA:i,operationsB:e,originalOperations:r}}var bD=class{constructor(e,t,n=!1){v(this,"originalOperations");v(this,"_history");v(this,"_useRelations");v(this,"_forceWeakRemove");v(this,"_relations");this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(e,t=null){let n=t?this.originalOperations.get(t):null;for(let r of e)this.originalOperations.set(r,n||r)}updateRelation(e,t){if(e instanceof yt)t instanceof Xt?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof yt&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof Pt){if(t instanceof Xt)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof yt)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{let n=q._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){let r=n.end.offset-e.splitPosition.offset,s=e.splitPosition.offset-n.start.offset;this._setRelation(e,t,{howMany:r,offset:s})}}}else if(e instanceof Xt)t instanceof Xt?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof Pt?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof yt&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof nn){let n=e.newRange;if(!n)return;if(t instanceof Xt){let r=n.start.isEqual(t.targetPosition),s=n.start.isEqual(t.deletionPosition),o=n.end.isEqual(t.deletionPosition),l=n.end.isEqual(t.sourcePosition);(r||s||o||l)&&this._setRelation(e,t,{wasInLeftElement:r,wasStartBeforeMergedElement:s,wasEndBeforeMergedElement:o,wasInRightElement:l})}}}getContext(e,t,n){return{aIsStrong:n,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){let t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){let n=this.originalOperations.get(t),r=this._history.getUndoneOperation(n);if(!r)return null;let s=this.originalOperations.get(e),o=this._relations.get(s);return o&&o.get(r)||null}_setRelation(e,t,n){let r=this.originalOperations.get(e),s=this.originalOperations.get(t),o=this._relations.get(r);o||(o=new Map,this._relations.set(r,o)),o.set(s,n)}};function vD(i,e){for(let t of i)t.baseVersion=e++}function wD(i,e){for(let t=0;t<e;t++)i.push(new ri(0))}function yD(i){let e=new Map;for(let t=0;t<i.length;t++){let n=i[t];n instanceof nn&&(n.baseVersion!==-1?e.set(n.name,{op:n,ranges:n.newRange?[n.newRange]:[]}):(n.newRange&&e.get(n.name).ranges.push(n.newRange),i.splice(t,1),t--))}for(let{op:t,ranges:n}of e.values())n.length?t.newRange=q._createFromRanges(n):t.newRange=null}pt(ni,ni,(i,e,t)=>{if(i.key===e.key&&i.range.start.hasSameParentAs(e.range.start)){let n=i.range.getDifference(e.range).map(s=>new ni(s,i.key,i.oldValue,i.newValue,0)),r=i.range.getIntersection(e.range);return r&&t.aIsStrong&&n.push(new ni(r,e.key,e.newValue,i.newValue,0)),n.length==0?[new ri(0)]:n}else return[i]});pt(ni,Pi,(i,e)=>{if(i.range.start.hasSameParentAs(e.position)&&i.range.containsPosition(e.position)){let n=i.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(r=>new ni(r,i.key,i.oldValue,i.newValue,i.baseVersion));if(e.shouldReceiveAttributes){let r=_D(e,i.key,i.oldValue);r&&n.unshift(r)}return n}return i.range=i.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[i]});function _D(i,e,t){let r=i.nodes.getNode(0).getAttribute(e);if(r==t)return null;let s=new q(i.position,i.position.getShiftedBy(i.howMany));return new ni(s,e,r,t,0)}pt(ni,Xt,(i,e)=>{let t=[];i.range.start.hasSameParentAs(e.deletionPosition)&&(i.range.containsPosition(e.deletionPosition)||i.range.start.isEqual(e.deletionPosition))&&t.push(q._createFromPositionAndShift(e.graveyardPosition,1));let n=i.range._getTransformedByMergeOperation(e);return n.isCollapsed||t.push(n),t.map(r=>new ni(r,i.key,i.oldValue,i.newValue,i.baseVersion))});pt(ni,yt,(i,e)=>$ce(i.range,e).map(n=>new ni(n,i.key,i.oldValue,i.newValue,i.baseVersion)));function $ce(i,e){let t=q._createFromPositionAndShift(e.sourcePosition,e.howMany),n=null,r=[];t.containsRange(i,!0)?n=i:i.start.hasSameParentAs(t.start)?(r=i.getDifference(t),n=i.getIntersection(t)):r=[i];let s=[];for(let o of r){o=o._getTransformedByDeletion(e.sourcePosition,e.howMany);let l=e.getMovedRangeStart(),u=o.start.hasSameParentAs(l),f=o._getTransformedByInsertion(l,e.howMany,u);s.push(...f)}return n&&s.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),s}pt(ni,Pt,(i,e)=>{if(i.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||i.range.end.offset++,[i];if(i.range.start.hasSameParentAs(e.splitPosition)&&i.range.containsPosition(e.splitPosition)){let t=i.clone();return t.range=new q(e.moveTargetPosition.clone(),i.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),i.range.end=e.splitPosition.clone(),i.range.end.stickiness="toPrevious",[i,t]}return i.range=i.range._getTransformedBySplitOperation(e),[i]});pt(Pi,ni,(i,e)=>{let t=[i];if(i.shouldReceiveAttributes&&i.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(i.position)){let n=_D(i,e.key,e.newValue);n&&t.push(n)}return t});pt(Pi,Pi,(i,e,t)=>i.position.isEqual(e.position)&&t.aIsStrong?[i]:(i.position=i.position._getTransformedByInsertOperation(e),[i]));pt(Pi,yt,(i,e)=>(i.position=i.position._getTransformedByMoveOperation(e),[i]));pt(Pi,Pt,(i,e)=>(i.position=i.position._getTransformedBySplitOperation(e),[i]));pt(Pi,Xt,(i,e)=>(i.position=i.position._getTransformedByMergeOperation(e),[i]));pt(nn,Pi,(i,e)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByInsertOperation(e)[0]),i.newRange&&(i.newRange=i.newRange._getTransformedByInsertOperation(e)[0]),[i]));pt(nn,nn,(i,e,t)=>{if(i.name==e.name)if(t.aIsStrong)i.oldRange=e.newRange?e.newRange.clone():null;else return[new ri(0)];return[i]});pt(nn,Xt,(i,e)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByMergeOperation(e)),i.newRange&&(i.newRange=i.newRange._getTransformedByMergeOperation(e)),[i]));pt(nn,yt,(i,e)=>{let t=[i];if(i.oldRange&&(i.oldRange=q._createFromRanges(i.oldRange._getTransformedByMoveOperation(e))),i.newRange){let n=i.newRange._getTransformedByMoveOperation(e);i.newRange=n[0];for(let r=1;r<n.length;r++){let s=i.clone();s.oldRange=null,s.newRange=n[r],s.baseVersion=-1,t.push(s)}}return t});pt(nn,Pt,(i,e,t)=>{if(i.oldRange&&(i.oldRange=i.oldRange._getTransformedBySplitOperation(e)),i.newRange){if(t.abRelation){let n=i.newRange._getTransformedBySplitOperation(e);return i.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?i.newRange.start=Q._createAt(e.insertionPosition):i.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement?i.newRange.start=Q._createAt(e.moveTargetPosition):i.newRange.start=n.start,i.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?i.newRange.end=Q._createAt(e.moveTargetPosition):i.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?i.newRange.end=Q._createAt(e.insertionPosition):i.newRange.end=n.end,[i]}i.newRange=i.newRange._getTransformedBySplitOperation(e)}return[i]});pt(Xt,Pi,(i,e)=>(i.sourcePosition.hasSameParentAs(e.position)&&(i.howMany+=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByInsertOperation(e),i.targetPosition=i.targetPosition._getTransformedByInsertOperation(e),[i]));pt(Xt,Xt,(i,e,t)=>{if(i.sourcePosition.isEqual(e.sourcePosition)&&i.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){let n=e.graveyardPosition.path.slice();return n.push(0),i.sourcePosition=new Q(e.graveyardPosition.root,n),i.howMany=0,[i]}else return[new ri(0)];if(i.sourcePosition.isEqual(e.sourcePosition)&&!i.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){let n=i.targetPosition.root.rootName=="$graveyard",r=e.targetPosition.root.rootName=="$graveyard";if(r&&!n||!(n&&!r)&&t.aIsStrong){let u=e.targetPosition._getTransformedByMergeOperation(e),f=i.targetPosition._getTransformedByMergeOperation(e);return[new yt(u,i.howMany,f,0)]}else return[new ri(0)]}return i.sourcePosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMergeOperation(e),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),(!i.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(e)),[i]});pt(Xt,yt,(i,e,t)=>{let n=q._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&i.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(i.sourcePosition)?[new ri(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(i.sourcePosition)?i.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(i.sourcePosition)&&t.abRelation=="mergeSourceAffected"?i.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(i.targetPosition)?(i.targetPosition.stickiness="toNone",i.howMany-=e.howMany):e.targetPosition.isEqual(i.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(i.targetPosition.stickiness="toPrevious",i.howMany+=e.howMany):(i.sourcePosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.sourcePosition.hasSameParentAs(e.sourcePosition)&&(i.howMany-=e.howMany)),i.sourcePosition=i.sourcePosition._getTransformedByMoveOperation(e),i.targetPosition=i.targetPosition._getTransformedByMoveOperation(e),i.sourcePosition.stickiness="toPrevious",i.targetPosition.stickiness="toNext",i.graveyardPosition.isEqual(e.targetPosition)||(i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(e)),[i])});pt(Xt,Pt,(i,e,t)=>{if(e.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),i.deletionPosition.isEqual(e.graveyardPosition)&&(i.howMany=e.howMany)),i.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&i.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(e),[i];if(i.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return i.howMany=0,i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i];if(t.abRelation=="mergeSameElement"||i.sourcePosition.offset>0)return i.sourcePosition=e.moveTargetPosition.clone(),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i]}return i.sourcePosition.hasSameParentAs(e.splitPosition)&&(i.howMany=e.splitPosition.offset),i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(e),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i]});pt(yt,Pi,(i,e)=>{let n=q._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByInsertOperation(e,!1)[0];return i.sourcePosition=n.start,i.howMany=n.end.offset-n.start.offset,i.targetPosition.isEqual(e.position)||(i.targetPosition=i.targetPosition._getTransformedByInsertOperation(e)),[i]});pt(yt,yt,(i,e,t)=>{let n=q._createFromPositionAndShift(i.sourcePosition,i.howMany),r=q._createFromPositionAndShift(e.sourcePosition,e.howMany),s=t.aIsStrong,o=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?o=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(o=!1);let l;if(i.targetPosition.isEqual(e.targetPosition)&&o?l=i.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):l=i.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),xD(i,e)&&xD(e,i))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(r,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),hu([n],l);if(r.containsPosition(i.targetPosition)&&r.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),hu([n],l);let g=Wi(i.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(g=="prefix"||g=="extension")return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),hu([n],l);i.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?s=!0:i.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(s=!1);let p=[],y=n.getDifference(r);for(let C of y){C.start=C.start._getTransformedByDeletion(e.sourcePosition,e.howMany),C.end=C.end._getTransformedByDeletion(e.sourcePosition,e.howMany);let E=Wi(C.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",P=C._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,E);p.push(...P)}let _=n.getIntersection(r);return _!==null&&s&&(_.start=_.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),_.end=_.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),p.length===0?p.push(_):p.length==1?r.start.isBefore(n.start)||r.start.isEqual(n.start)?p.unshift(_):p.push(_):p.splice(1,0,_)),p.length===0?[new ri(i.baseVersion)]:hu(p,l)});pt(yt,Pt,(i,e,t)=>{let n=i.targetPosition.clone();(!i.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(n=i.targetPosition._getTransformedBySplitOperation(e));let r=q._createFromPositionAndShift(i.sourcePosition,i.howMany);if(r.end.isEqual(e.insertionPosition))return e.graveyardPosition||i.howMany++,i.targetPosition=n,[i];if(r.start.hasSameParentAs(e.splitPosition)&&r.containsPosition(e.splitPosition)){let l=new q(e.splitPosition,r.end);l=l._getTransformedBySplitOperation(e);let u=[new q(r.start,e.splitPosition),l];return hu(u,n)}i.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(n=e.moveTargetPosition),i.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(n=i.targetPosition);let o=[r._getTransformedBySplitOperation(e)];if(e.graveyardPosition){let l=r.start.isEqual(e.graveyardPosition)||r.containsPosition(e.graveyardPosition);i.howMany>1&&l&&!t.aWasUndone&&o.push(q._createFromPositionAndShift(e.insertionPosition,1))}return hu(o,n)});pt(yt,Xt,(i,e,t)=>{let n=q._createFromPositionAndShift(i.sourcePosition,i.howMany);if(e.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(e.sourcePosition)){if(i.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){let o=[],l=e.graveyardPosition.clone(),u=e.targetPosition._getTransformedByMergeOperation(e),f=i.targetPosition.getTransformedByOperation(e);i.howMany>1&&(o.push(new yt(i.sourcePosition,i.howMany-1,f,0)),l=l._getTransformedByMove(i.sourcePosition,f,i.howMany-1),u=u._getTransformedByMove(i.sourcePosition,f,i.howMany-1));let g=e.deletionPosition._getCombined(i.sourcePosition,f),p=new yt(l,1,g,0),y=p.getMovedRangeStart().path.slice();y.push(0);let _=new Q(p.targetPosition.root,y);u=u._getTransformedByMove(l,g,1);let C=new yt(u,e.howMany,_,0);return o.push(p),o.push(C),o}}else if(i.howMany==1)return t.bWasUndone?(i.sourcePosition=e.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),[i]):[new ri(0)]}let s=q._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(e);return i.sourcePosition=s.start,i.howMany=s.end.offset-s.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),[i]});pt(xn,Pi,(i,e)=>(i.position=i.position._getTransformedByInsertOperation(e),[i]));pt(xn,Xt,(i,e)=>i.position.isEqual(e.deletionPosition)?(i.position=e.graveyardPosition.clone(),i.position.stickiness="toNext",[i]):(i.position=i.position._getTransformedByMergeOperation(e),[i]));pt(xn,yt,(i,e)=>(i.position=i.position._getTransformedByMoveOperation(e),[i]));pt(xn,xn,(i,e,t)=>{if(i.position.isEqual(e.position))if(t.aIsStrong)i.oldName=e.newName;else return[new ri(0)];return[i]});pt(xn,Pt,(i,e)=>{let t=i.position.path,n=e.splitPosition.getParentPath();if(Wi(t,n)=="same"&&!e.graveyardPosition){let r=new xn(i.position.getShiftedBy(1),i.oldName,i.newName,0);return[i,r]}return i.position=i.position._getTransformedBySplitOperation(e),[i]});pt(ws,ws,(i,e,t)=>{if(i.root===e.root&&i.key===e.key){if(!t.aIsStrong||i.newValue===e.newValue)return[new ri(0)];i.oldValue=e.newValue}return[i]});pt($r,$r,(i,e)=>i.rootName===e.rootName&&i.isAdd===e.isAdd?[new ri(0)]:[i]);pt(Pt,Pi,(i,e)=>(i.splitPosition.hasSameParentAs(e.position)&&i.splitPosition.offset<e.position.offset&&(i.howMany+=e.howMany),i.splitPosition=i.splitPosition._getTransformedByInsertOperation(e),i.insertionPosition=i.insertionPosition._getTransformedByInsertOperation(e),[i]));pt(Pt,Xt,(i,e,t)=>{if(!i.graveyardPosition&&!t.bWasUndone&&i.splitPosition.hasSameParentAs(e.sourcePosition)){let n=e.graveyardPosition.path.slice();n.push(0);let r=new Q(e.graveyardPosition.root,n),s=Pt.getInsertionPosition(new Q(e.graveyardPosition.root,n)),o=new Pt(r,0,s,null,0);return i.splitPosition=i.splitPosition._getTransformedByMergeOperation(e),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),i.graveyardPosition=o.insertionPosition.clone(),i.graveyardPosition.stickiness="toNext",[o,i]}return i.splitPosition.hasSameParentAs(e.deletionPosition)&&!i.splitPosition.isAfter(e.deletionPosition)&&i.howMany--,i.splitPosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.splitPosition=i.splitPosition._getTransformedByMergeOperation(e),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(e)),[i]});pt(Pt,yt,(i,e,t)=>{let n=q._createFromPositionAndShift(e.sourcePosition,e.howMany);if(i.graveyardPosition){let s=n.start.isEqual(i.graveyardPosition)||n.containsPosition(i.graveyardPosition);if(!t.bWasUndone&&s){let o=i.splitPosition._getTransformedByMoveOperation(e),l=i.graveyardPosition._getTransformedByMoveOperation(e),u=l.path.slice();u.push(0);let f=new Q(l.root,u);return[new yt(o,i.howMany,f,0)]}i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(e)}let r=i.splitPosition.isEqual(e.targetPosition);if(r&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return i.howMany+=e.howMany,i.splitPosition=i.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),[i];if(r&&t.abRelation&&t.abRelation.howMany){let{howMany:s,offset:o}=t.abRelation;return i.howMany+=s,i.splitPosition=i.splitPosition.getShiftedBy(o),[i]}if(i.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(i.splitPosition)){let s=e.howMany-(i.splitPosition.offset-e.sourcePosition.offset);return i.howMany-=s,i.splitPosition.hasSameParentAs(e.targetPosition)&&i.splitPosition.offset<e.targetPosition.offset&&(i.howMany+=e.howMany),i.splitPosition=e.sourcePosition.clone(),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),[i]}return e.sourcePosition.isEqual(e.targetPosition)||(i.splitPosition.hasSameParentAs(e.sourcePosition)&&i.splitPosition.offset<=e.sourcePosition.offset&&(i.howMany-=e.howMany),i.splitPosition.hasSameParentAs(e.targetPosition)&&i.splitPosition.offset<e.targetPosition.offset&&(i.howMany+=e.howMany)),i.splitPosition.stickiness="toNone",i.splitPosition=i.splitPosition._getTransformedByMoveOperation(e),i.splitPosition.stickiness="toNext",i.graveyardPosition?i.insertionPosition=i.insertionPosition._getTransformedByMoveOperation(e):i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),[i]});pt(Pt,Pt,(i,e,t)=>{if(i.splitPosition.isEqual(e.splitPosition)){if(!i.graveyardPosition&&!e.graveyardPosition)return[new ri(0)];if(i.graveyardPosition&&e.graveyardPosition&&i.graveyardPosition.isEqual(e.graveyardPosition))return[new ri(0)];if(t.abRelation=="splitBefore")return i.howMany=0,i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(e),[i]}if(i.graveyardPosition&&e.graveyardPosition&&i.graveyardPosition.isEqual(e.graveyardPosition)){let n=i.splitPosition.root.rootName=="$graveyard",r=e.splitPosition.root.rootName=="$graveyard";if(r&&!n||!(n&&!r)&&t.aIsStrong){let u=[];return e.howMany&&u.push(new yt(e.moveTargetPosition,e.howMany,e.splitPosition,0)),i.howMany&&u.push(new yt(i.splitPosition,i.howMany,i.moveTargetPosition,0)),u}else return[new ri(0)]}if(i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(e)),i.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return i.howMany++,[i];if(e.splitPosition.isEqual(i.insertionPosition)&&t.baRelation=="splitBefore"){let n=e.insertionPosition.path.slice();n.push(0);let r=new Q(e.insertionPosition.root,n),s=new yt(i.insertionPosition,1,r,0);return[i,s]}return i.splitPosition.hasSameParentAs(e.splitPosition)&&i.splitPosition.offset<e.splitPosition.offset&&(i.howMany-=e.howMany),i.splitPosition=i.splitPosition._getTransformedBySplitOperation(e),i.insertionPosition=Pt.getInsertionPosition(i.splitPosition),[i]});function xD(i,e){return i.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function hu(i,e){let t=[];for(let n=0;n<i.length;n++){let r=i[n],s=new yt(r.start,r.end.offset-r.start.offset,e,0);t.push(s);for(let o=n+1;o<i.length;o++)i[o]=i[o]._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)[0];e=e._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)}return t}var qi=class extends wt(Q){constructor(e,t,n="toNone"){super(e,t,n);if(!this.root.is("rootElement"))throw new L("model-liveposition-root-not-rootelement",e);Gce.call(this)}detach(){this.stopListening()}toPosition(){return new Q(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}};qi.prototype.is=function(i){return i==="livePosition"||i==="model:livePosition"||i=="position"||i==="model:position"};function Gce(){this.listenTo(this.root.document.model,"applyOperation",(i,e)=>{let t=e[0];!t.isDocumentOperation||Kce.call(this,t)},{priority:"low"})}function Kce(i){let e=this.getTransformedByOperation(i);if(!this.isEqual(e)){let t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}var ul=class{constructor(e={}){v(this,"operations");v(this,"isUndoable");v(this,"isLocal");v(this,"isUndo");v(this,"isTyping");typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},at("batch-constructor-deprecated-string-type"));let{isUndoable:t=!0,isLocal:n=!0,isUndo:r=!1,isTyping:s=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=n,this.isUndo=r,this.isTyping=s}get type(){return at("batch-type-deprecated"),"default"}get baseVersion(){for(let e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}},Np=class{constructor(e){v(this,"_markerCollection");v(this,"_changesInElement",new Map);v(this,"_elementsSnapshots",new Map);v(this,"_elementChildrenSnapshots",new Map);v(this,"_elementState",new Map);v(this,"_changedMarkers",new Map);v(this,"_changedRoots",new Map);v(this,"_changeCount",0);v(this,"_cachedChanges",null);v(this,"_cachedChangesWithGraveyard",null);v(this,"_refreshedItems",new Set);this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){let t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(let n of t.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;let n=this._isInInsertedElement(t.sourcePosition.parent),r=this._isInInsertedElement(t.targetPosition.parent);n||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),r||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);let s=q._createFromPositionAndShift(t.sourcePosition,t.howMany);for(let o of s.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);let n=q._createFromPositionAndShift(t.position,1);for(let r of this._markerCollection.getMarkersIntersectingRange(n)){let s=r.getData();this.bufferMarkerChange(r.name,s,s)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{let n=t.splitPosition.parent;if(!this._isInInsertedElement(n)){this._markRemove(n,t.splitPosition.offset,t.howMany);let r=q._createFromPositionAndShift(t.splitPosition,t.howMany);for(let s of r.getItems({shallow:!0}))this._setElementState(s,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{let n=t.sourcePosition.parent;this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1);let r=t.graveyardPosition.parent;this._markInsert(r,t.graveyardPosition.offset,1),this._setElementState(n,"move");let s=t.targetPosition.parent;if(!this._isInInsertedElement(s)){this._markInsert(s,t.targetPosition.offset,n.maxOffset);let o=q._createFromPositionAndShift(t.sourcePosition,t.howMany);for(let l of o.getItems({shallow:!0}))this._setElementState(l,"move")}break}case"detachRoot":case"addRoot":{let n=t.affectedSelectable;if(!n._isLoaded||n.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;let n=t.root.rootName;this._bufferRootAttributeChange(n,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,n){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let r=this._changedMarkers.get(e);r?r.newMarkerData=n:(r={newMarkerData:n,oldMarkerData:t},this._changedMarkers.set(e,r)),r.oldMarkerData.range==null&&n.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){let e=[];for(let[t,n]of this._changedMarkers)n.oldMarkerData.range!=null&&e.push({name:t,range:n.oldMarkerData.range});return e}getMarkersToAdd(){let e=[];for(let[t,n]of this._changedMarkers)n.newMarkerData.range!=null&&e.push({name:t,range:n.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(let{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){let n=e.range&&!t.range,r=!e.range&&t.range,s=e.range&&t.range&&!e.range.isEqual(t.range);if(n||r||s)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(let n of this._changesInElement.keys()){let r=this._changesInElement.get(n).sort((g,p)=>g.offset===p.offset?g.type!=p.type?g.type=="remove"?-1:1:0:g.offset<p.offset?-1:1),s=this._elementChildrenSnapshots.get(n),o=CD(n.getChildren()),l=Yce(s.length,r),u=0,f=0;for(let g of l)if(g==="i"){let p=this._getDiffActionForNode(o[u].node,"insert"),y=this._elementsSnapshots.get(o[u].node),_=this._getInsertDiff(n,u,p,o[u],y);t.push(_),u++}else if(g==="r"){let p=this._getDiffActionForNode(s[f].node,"remove"),y=this._getRemoveDiff(n,u,p,s[f]);t.push(y),f++}else if(g==="a"){let p=s[f].attributes,y=o[u].attributes,_;if(o[u].name=="$text")_=new q(Q._createAt(n,u),Q._createAt(n,u+1));else{let E=n.offsetToIndex(u);_=new q(Q._createAt(n,u),Q._createAt(n.getChild(E),0))}let C=this._getAttributesDiff(_,p,y);t.push(...C),u++,f++}else u++,f++}t.sort((n,r)=>n.position.root!=r.position.root?n.position.root.rootName<r.position.root.rootName?-1:1:n.position.isEqual(r.position)?n.changeCount-r.changeCount:n.position.isBefore(r.position)?-1:1);for(let n=1,r=0;n<t.length;n++){let s=t[r],o=t[n],l=s.type=="remove"&&o.type=="remove"&&s.name=="$text"&&o.name=="$text"&&s.position.isEqual(o.position),u=s.type=="insert"&&o.type=="insert"&&s.name=="$text"&&o.name=="$text"&&s.position.parent==o.position.parent&&s.position.offset+s.length==o.position.offset,f=s.type=="attribute"&&o.type=="attribute"&&s.position.parent==o.position.parent&&s.range.isFlat&&o.range.isFlat&&s.position.offset+s.length==o.position.offset&&s.attributeKey==o.attributeKey&&s.attributeOldValue==o.attributeOldValue&&s.attributeNewValue==o.attributeNewValue;l||u||f?(s.length++,f&&(s.range.end=s.range.end.getShiftedBy(1)),t[n]=null):r=n}t=t.filter(n=>n);for(let n of t)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(Zce),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{let t=ee({},e);return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");let t=q._createOn(e);for(let n of this._markerCollection.getMarkersIntersectingRange(t)){let r=n.getData();this.bufferMarkerChange(n.name,r,r)}this._cachedChanges=null}_bufferRootLoad(e){if(!!e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(let t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(let t of this._markerCollection)if(t.getRange().root==e){let n=t.getData();this.bufferMarkerChange(t.name,tt(ee({},n),{range:null}),n)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}let n=this._changedRoots.get(e);n.state!==void 0?(delete n.state,n.attributes===void 0&&this._changedRoots.delete(e)):n.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,n,r){let s=this._changedRoots.get(e)||{name:e},o=s.attributes||{};if(o[t]){let l=o[t];r===l.oldValue?delete o[t]:l.newValue=r}else o[t]={oldValue:n,newValue:r};Object.entries(o).length===0?(delete s.attributes,s.state===void 0&&this._changedRoots.delete(e)):(s.attributes=o,this._changedRoots.set(e,s))}_markInsert(e,t,n){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let r={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r)}_markRemove(e,t,n){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let r={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,t,n)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);let n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(let r=0;r<n.length;r++)n[r].howMany<1&&(n.splice(r,1),r--)}_setElementState(e,t){if(!e.is("element"))return;let n=Np._statesPriority.indexOf(this._elementState.get(e));Np._statesPriority.indexOf(t)>n&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;let n=this._elementState.get(e);return!n||n=="move"?t:n}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;let t=CD(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(let n of t)this._elementsSnapshots.set(n.node,n)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(let n of t){let r=e.offset+e.howMany,s=n.offset+n.howMany;if(e.type=="insert"&&(n.type=="insert"&&(e.offset<=n.offset?n.offset+=e.howMany:e.offset<s&&(n.howMany+=e.nodesToHandle,e.nodesToHandle=0)),n.type=="remove"&&e.offset<n.offset&&(n.offset+=e.howMany),n.type=="attribute")){if(e.offset<=n.offset)n.offset+=e.howMany;else if(e.offset<s){let o=n.howMany;n.howMany=e.offset-n.offset,t.unshift({type:"attribute",offset:r,howMany:o-n.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(n.type=="insert"){if(r<=n.offset)n.offset-=e.howMany;else if(r<=s)if(e.offset<n.offset){let o=r-n.offset;n.offset=e.offset,n.howMany-=o,e.nodesToHandle-=o}else n.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=n.offset)e.nodesToHandle-=n.howMany,n.howMany=0;else if(e.offset<s){let o=s-e.offset;n.howMany-=o,e.nodesToHandle-=o}}if(n.type=="remove"&&(r<=n.offset?n.offset-=e.howMany:e.offset<n.offset&&(e.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(r<=n.offset)n.offset-=e.howMany;else if(e.offset<n.offset){let o=r-n.offset;n.offset=e.offset,n.howMany-=o}else if(e.offset<s)if(r<=s){let o=n.howMany;n.howMany=e.offset-n.offset;let l=o-n.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:l,count:this._changeCount++})}else n.howMany-=s-e.offset}}if(e.type=="attribute"){if(n.type=="insert")if(e.offset<n.offset&&r>n.offset){if(r>s){let o={type:"attribute",offset:s,howMany:r-s,count:this._changeCount++};this._handleChange(o,t),t.push(o)}e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=n.offset&&e.offset<s&&(r>s?(e.nodesToHandle=r-s,e.offset=s):e.nodesToHandle=0);if(n.type=="remove"&&e.offset<n.offset&&r>n.offset){let o={type:"attribute",offset:n.offset,howMany:r-n.offset,count:this._changeCount++};this._handleChange(o,t),t.push(o),e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}n.type=="attribute"&&(e.offset>=n.offset&&r<=s?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=n.offset&&r>=s&&(n.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,n,r,s){let o={type:"insert",position:Q._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,action:n};return n!="insert"&&s&&(o.before={name:s.name,attributes:new Map(s.attributes)}),o}_getRemoveDiff(e,t,n,r){return{type:"remove",action:n,position:Q._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,n){let r=[];n=new Map(n);for(let[s,o]of t){let l=n.has(s)?n.get(s):null;l!==o&&r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:s,attributeOldValue:o,attributeNewValue:l,changeCount:this._changeCount++}),n.delete(s)}for(let[s,o]of n)r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:s,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return r}_isInInsertedElement(e){let t=e.parent;if(!t)return!1;let n=this._changesInElement.get(t),r=e.startOffset;if(n){for(let s of n)if(s.type=="insert"&&r>=s.offset&&r<s.offset+s.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,n){let r=new q(Q._createAt(e,t),Q._createAt(e,t+n));for(let s of r.getItems({shallow:!0}))s.is("element")&&(this._changesInElement.delete(s),this._removeAllNestedChanges(s,0,s.maxOffset))}},Xy=Np;v(Xy,"_statesPriority",[void 0,"refresh","rename","move"]);function kD(i){return{node:i,name:i.is("$text")?"$text":i.name,attributes:new Map(i.getAttributes())}}function CD(i){let e=[];for(let t of i)if(t.is("$text"))for(let n=0;n<t.data.length;++n)e.push(kD(t));else e.push(kD(t));return e}function Yce(i,e){let t=[],n=0,r=0;for(let s of e){if(s.offset>n){for(let o=0;o<s.offset-n;o++)t.push("e");r+=s.offset-n}if(s.type=="insert"){for(let o=0;o<s.howMany;o++)t.push("i");n=s.offset+s.howMany}else if(s.type=="remove"){for(let o=0;o<s.howMany;o++)t.push("r");n=s.offset,r+=s.howMany}else{if(s.howMany>1500)for(let o=0;o<s.howMany;o++)t.push("a");else t.push(..."a".repeat(s.howMany).split(""));n=s.offset+s.howMany,r+=s.howMany}}if(r<i)for(let s=0;s<i-r-n;s++)t.push("e");return t}function Zce(i){let e="position"in i&&i.position.root.rootName=="$graveyard",t="range"in i&&i.range.root.rootName=="$graveyard";return!e&&!t}var TD=class{constructor(){v(this,"_operations",[]);v(this,"_undoPairs",new Map);v(this,"_undoneOperations",new Set);v(this,"_baseVersionToOperationIndex",new Map);v(this,"_version",0);v(this,"_gaps",new Map)}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new L("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];let n=this._operations[0];e===void 0&&(e=n.baseVersion);let r=t-1;for(let[l,u]of this._gaps)e>l&&e<u&&(e=u),r>l&&r<u&&(r=l-1);if(r<n.baseVersion||e>this.lastOperation.baseVersion)return[];let s=this._baseVersionToOperationIndex.get(e);s===void 0&&(s=0);let o=this._baseVersionToOperationIndex.get(r);return o===void 0&&(o=this._operations.length-1),this._operations.slice(s,o+1)}getOperation(e){let t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}},fu=class extends kt{constructor(e,t,n="main"){super(t);v(this,"rootName");v(this,"_document");v(this,"_isAttached",!0);v(this,"_isLoaded",!0);this._document=e,this.rootName=n}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}};fu.prototype.is=function(i,e){return e?e===this.name&&(i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"):i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"||i==="node"||i==="model:node"};var ED="$graveyard",SD=class extends wt(){constructor(e){super();v(this,"model");v(this,"history");v(this,"selection");v(this,"roots");v(this,"differ");v(this,"isReadOnly");v(this,"_postFixers");v(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=e,this.history=new TD,this.selection=new jn(this),this.roots=new Ht({idProperty:"rootName"}),this.differ=new Xy(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",ED),this.listenTo(e,"applyOperation",(t,n)=>{let r=n[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,n)=>{let r=n[0];r.isDocumentOperation&&this.history.addOperation(r)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,n,r,s,o)=>{let l=tt(ee({},n.getData()),{range:s});this.differ.bufferMarkerChange(n.name,o,l),r===null&&n.on("change",(u,f)=>{let g=n.getData();this.differ.bufferMarkerChange(n.name,tt(ee({},g),{range:f}),g)})}),this.registerPostFixer(t=>{let n=!1;for(let r of this.roots)!r.isAttached()&&!r.isEmpty&&(t.remove(t.createRangeIn(r)),n=!0);for(let r of this.model.markers)r.getRange().root.isAttached()||(t.removeMarker(r),n=!0);return n})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(ED)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new L("model-document-createroot-name-exists",this,{name:t});let n=new fu(this,e,t);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){let e=cp(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){let e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){let e=this._getDefaultRoot(),t=this.model,n=t.schema,r=t.createPositionFromPath(e,[0]);return n.getNearestSelectionRange(r)||t.createRange(r)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&AD(e.start)&&AD(e.end)}_callPostFixers(e){let t=!1;do for(let n of this._postFixers)if(this.selection.refresh(),t=n(e),t)break;while(t)}};function AD(i){let e=i.textNode;if(e){let t=e.data,n=i.offset-e.startOffset;return!Ih(t,n)&&!Ph(t,n)}return!0}var ID=class extends wt(){constructor(){super(...arguments);v(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(e){let t=e instanceof dl?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,n=!1,r=!1){let s=e instanceof dl?e.name:e;if(s.includes(","))throw new L("markercollection-incorrect-marker-name",this);let o=this._markers.get(s);if(o){let f=o.getData(),g=o.getRange(),p=!1;return g.isEqual(t)||(o._attachLiveRange(Bi.fromRange(t)),p=!0),n!=o.managedUsingOperations&&(o._managedUsingOperations=n,p=!0),typeof r=="boolean"&&r!=o.affectsData&&(o._affectsData=r,p=!0),p&&this.fire(`update:${s}`,o,g,t,f),o}let l=Bi.fromRange(t),u=new dl(s,l,n,r);return this._markers.set(s,u),this.fire(`update:${s}`,u,null,t,tt(ee({},u.getData()),{range:null})),u}_remove(e){let t=e instanceof dl?e.name:e,n=this._markers.get(t);return n?(this._markers.delete(t),this.fire(`update:${t}`,n,n.getRange(),null,n.getData()),this._destroyMarker(n),!0):!1}_refresh(e){let t=e instanceof dl?e.name:e,n=this._markers.get(t);if(!n)throw new L("markercollection-refresh-marker-not-exists",this);let r=n.getRange();this.fire(`update:${t}`,n,r,r,n.getData())}*getMarkersAtPosition(e){for(let t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(let t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(let e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(let t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}},dl=class extends wt(uo){constructor(e,t,n,r){super();v(this,"name");v(this,"_managedUsingOperations");v(this,"_affectsData");v(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=n,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new L("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new L("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new L("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new L("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new L("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}};dl.prototype.is=function(i){return i==="marker"||i==="model:marker"};var PD=class extends Hn{constructor(e,t){super(null);v(this,"sourcePosition");v(this,"howMany");this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){let e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new L("detach-operation-on-document-node",this)}_execute(){dD(q._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}},Cr=class extends uo{constructor(e){super();v(this,"markers",new Map);v(this,"_children",new uu);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(let n of e)t=t.getChildAtOffset(n);return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){let e=[];for(let t of this._children)e.push(t.toJSON());return e}static fromJSON(e){let t=[];for(let n of e)n.name?t.push(kt.fromJSON(n)):t.push(It.fromJSON(n));return new Cr(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){let n=Jce(t);for(let r of n)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){let n=this._children._removeNodes(e,t);for(let r of n)r.parent=null;return n}};Cr.prototype.is=function(i){return i==="documentFragment"||i==="model:documentFragment"};function Jce(i){return typeof i=="string"?[new It(i)]:(_n(i)||(i=[i]),Array.from(i).map(e=>typeof e=="string"?new It(e):e instanceof _r?new It(e.data,e.getAttributes()):e))}var RD=class{constructor(e,t){v(this,"model");v(this,"batch");this.model=e,this.batch=t}createText(e,t){return new It(e,t)}createElement(e,t){return new kt(e,t)}createDocumentFragment(){return new Cr}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,n=0){if(this._assertWriterUsedCorrectly(),e instanceof It&&e.data=="")return;let r=Q._createAt(t,n);if(e.parent)if(LD(e.root,r.root)){this.move(q._createOn(e),r);return}else{if(e.root.document)throw new L("model-writer-insert-forbidden-move",this);this.remove(e)}let s=r.root.document?r.root.document.version:null,o=new Pi(r,e,s);if(e instanceof It&&(o.shouldReceiveAttributes=!0),this.batch.addOperation(o),this.model.applyOperation(o),e instanceof Cr)for(let[l,u]of e.markers){let f=Q._createAt(u.root,0),p={range:new q(u.start._getCombined(f,r),u.end._getCombined(f,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(l)?this.updateMarker(l,p):this.addMarker(l,p)}}insertText(e,t,n,r){t instanceof Cr||t instanceof kt||t instanceof Q?this.insert(this.createText(e),t,n):this.insert(this.createText(e,t),n,r)}insertElement(e,t,n,r){t instanceof Cr||t instanceof kt||t instanceof Q?this.insert(this.createElement(e),t,n):this.insert(this.createElement(e,t),n,r)}append(e,t){this.insert(e,t,"end")}appendText(e,t,n){t instanceof Cr||t instanceof kt?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),n,"end")}appendElement(e,t,n){t instanceof Cr||t instanceof kt?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),n,"end")}setAttribute(e,t,n){if(this._assertWriterUsedCorrectly(),n instanceof q){let r=n.getMinimalFlatRanges();for(let s of r)OD(this,e,t,s)}else MD(this,e,t,n)}setAttributes(e,t){for(let[n,r]of Nn(e))this.setAttribute(n,r,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof q){let n=t.getMinimalFlatRanges();for(let r of n)OD(this,e,null,r)}else MD(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();let t=n=>{for(let r of n.getAttributeKeys())this.removeAttribute(r,n)};if(!(e instanceof q))t(e);else for(let n of e.getItems())t(n)}move(e,t,n){if(this._assertWriterUsedCorrectly(),!(e instanceof q))throw new L("writer-move-invalid-range",this);if(!e.isFlat)throw new L("writer-move-range-not-flat",this);let r=Q._createAt(t,n);if(r.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!LD(e.root,r.root))throw new L("writer-move-different-document",this);let s=e.root.document?e.root.document.version:null,o=new yt(e.start,e.end.offset-e.start.offset,r,s);this.batch.addOperation(o),this.model.applyOperation(o)}remove(e){this._assertWriterUsedCorrectly();let n=(e instanceof q?e:q._createOn(e)).getMinimalFlatRanges().reverse();for(let r of n)this._addOperationForAffectedMarkers("move",r),Xce(r.start,r.end.offset-r.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();let t=e.nodeBefore,n=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof kt))throw new L("writer-merge-no-element-before",this);if(!(n instanceof kt))throw new L("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,n){return this.model.createPositionFromPath(e,t,n)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){let t=e.nodeBefore,n=e.nodeAfter;this.move(q._createIn(n),Q._createAt(t,"end")),this.remove(n)}_merge(e){let t=Q._createAt(e.nodeBefore,"end"),n=Q._createAt(e.nodeAfter,0),r=e.root.document.graveyard,s=new Q(r,[0]),o=e.root.document.version,l=new Xt(n,e.nodeAfter.maxOffset,t,s,o);this.batch.addOperation(l),this.model.applyOperation(l)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof kt))throw new L("writer-rename-not-element-instance",this);let n=e.root.document?e.root.document.version:null,r=new xn(Q._createBefore(e),e.name,t,n);this.batch.addOperation(r),this.model.applyOperation(r)}split(e,t){this._assertWriterUsedCorrectly();let n=e.parent;if(!n.parent)throw new L("writer-split-element-no-parent",this);if(t||(t=n.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new L("writer-split-invalid-limit-element",this);let r,s;do{let o=n.root.document?n.root.document.version:null,l=n.maxOffset-e.offset,u=Pt.getInsertionPosition(e),f=new Pt(e,l,u,null,o);this.batch.addOperation(f),this.model.applyOperation(f),!r&&!s&&(r=n,s=e.parent.nextSibling),e=this.createPositionAfter(e.parent),n=e.parent}while(n!==t);return{position:e,range:new q(Q._createAt(r,"end"),Q._createAt(s,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new L("writer-wrap-range-not-flat",this);let n=t instanceof kt?t:new kt(t);if(n.childCount>0)throw new L("writer-wrap-element-not-empty",this);if(n.parent!==null)throw new L("writer-wrap-element-attached",this);this.insert(n,e.start);let r=new q(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(r,Q._createAt(n,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new L("writer-unwrap-element-no-parent",this);this.move(q._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new L("writer-addmarker-no-usingoperation",this);let n=t.usingOperation,r=t.range,s=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new L("writer-addmarker-marker-exists",this);if(!r)throw new L("writer-addmarker-no-range",this);return n?(Kh(this,e,null,r,s),this.model.markers.get(e)):this.model.markers._set(e,r,n,s)}updateMarker(e,t){this._assertWriterUsedCorrectly();let n=typeof e=="string"?e:e.name,r=this.model.markers.get(n);if(!r)throw new L("writer-updatemarker-marker-not-exists",this);if(!t){at("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),this.model.markers._refresh(r);return}let s=typeof t.usingOperation=="boolean",o=typeof t.affectsData=="boolean",l=o?t.affectsData:r.affectsData;if(!s&&!t.range&&!o)throw new L("writer-updatemarker-wrong-options",this);let u=r.getRange(),f=t.range?t.range:u;if(s&&t.usingOperation!==r.managedUsingOperations){t.usingOperation?Kh(this,n,null,f,l):(Kh(this,n,u,null,l),this.model.markers._set(n,f,void 0,l));return}r.managedUsingOperations?Kh(this,n,u,f,l):this.model.markers._set(n,f,void 0,l)}removeMarker(e){this._assertWriterUsedCorrectly();let t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new L("writer-removemarker-no-marker",this);let n=this.model.markers.get(t);if(!n.managedUsingOperations){this.model.markers._remove(t);return}let r=n.getRange();Kh(this,t,r,null,n.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();let n=this.model.document.getRoot(e);if(n&&n.isAttached())throw new L("writer-addroot-root-exists",this);let r=this.model.document,s=new $r(e,t,!0,r,r.version);return this.batch.addOperation(s),this.model.applyOperation(s),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();let t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new L("writer-detachroot-no-root",this);for(let s of this.model.markers)s.getRange().root===t&&this.removeMarker(s);for(let s of t.getAttributeKeys())this.removeAttribute(s,t);this.remove(this.createRangeIn(t));let n=this.model.document,r=new $r(t.rootName,t.name,!1,n,n.version);this.batch.addOperation(r),this.model.applyOperation(r)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(let[n,r]of Nn(e))this._setSelectionAttribute(n,r)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(let t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){let n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){let r=jn._getStoreAttributeKey(e);this.setAttribute(r,t,n.anchor.parent)}n._setAttribute(e,t)}_removeSelectionAttribute(e){let t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){let n=jn._getStoreAttributeKey(e);this.removeAttribute(n,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new L("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(let n of this.model.markers){if(!n.managedUsingOperations)continue;let r=n.getRange(),s=!1;if(e==="move"){let o=t;s=o.containsPosition(r.start)||o.start.isEqual(r.start)||o.containsPosition(r.end)||o.end.isEqual(r.end)}else{let o=t,l=o.nodeBefore,u=o.nodeAfter,f=r.start.parent==l&&r.start.isAtEnd,g=r.end.parent==u&&r.end.offset==0,p=r.end.nodeAfter==u,y=r.start.nodeAfter==u;s=f||g||p||y}s&&this.updateMarker(n.name,{range:r})}}};function OD(i,e,t,n){let r=i.model,s=r.document,o=n.start,l,u,f;for(let p of n.getWalker({shallow:!0}))f=p.item.getAttribute(e),l&&u!=f&&(u!=t&&g(),o=l),l=p.nextPosition,u=f;l instanceof Q&&l!=o&&u!=t&&g();function g(){let p=new q(o,l),y=p.root.document?s.version:null,_=new ni(p,e,u,t,y);i.batch.addOperation(_),r.applyOperation(_)}}function MD(i,e,t,n){let r=i.model,s=r.document,o=n.getAttribute(e),l,u;if(o!=t){if(n.root===n){let g=n.document?s.version:null;u=new ws(n,e,o,t,g)}else{l=new q(Q._createBefore(n),i.createPositionAfter(n));let g=l.root.document?s.version:null;u=new ni(l,e,o,t,g)}i.batch.addOperation(u),r.applyOperation(u)}}function Kh(i,e,t,n,r){let s=i.model,o=s.document,l=new nn(e,t,n,s.markers,!!r,o.version);i.batch.addOperation(l),s.applyOperation(l)}function Xce(i,e,t,n){let r;if(i.root.document){let s=n.document,o=new Q(s.graveyard,[0]);r=new yt(i,e,o,s.version)}else r=new PD(i,e);t.addOperation(r),n.applyOperation(r)}function LD(i,e){return i===e||i instanceof fu&&e instanceof fu}function Qce(i,e,t={}){if(e.isCollapsed)return;let n=e.getFirstRange();if(n.root.rootName=="$graveyard")return;let r=i.schema;i.change(s=>{if(!t.doNotResetEntireContent&&lue(r,e)){aue(s,e);return}let o={};if(!t.doNotAutoparagraph){let f=e.getSelectedElement();f&&Object.assign(o,r.getAttributesWithProperty(f,"copyOnReplace",!0))}let[l,u]=eue(n);l.isTouching(u)||s.remove(s.createRange(l,u)),t.leaveUnmerged||(iue(s,l,u),r.removeDisallowedAttributes(l.parent.getChildren(),s)),ND(s,e,l),!t.doNotAutoparagraph&&sue(r,l)&&BD(s,l,e,o),l.detach(),u.detach()})}function eue(i){let e=i.root.document.model,t=i.start,n=i.end;if(e.hasContent(i,{ignoreMarkers:!0})){let r=tue(n);if(r&&n.isTouching(e.createPositionAt(r,0))){let s=e.createSelection(i);e.modifySelection(s,{direction:"backward"});let o=s.getLastPosition(),l=e.createRange(o,n);e.hasContent(l,{ignoreMarkers:!0})||(n=o)}}return[qi.fromPosition(t,"toPrevious"),qi.fromPosition(n,"toNext")]}function tue(i){let e=i.parent,t=e.root.document.model.schema,n=e.getAncestors({parentFirst:!0,includeSelf:!0});for(let r of n){if(t.isLimit(r))return null;if(t.isBlock(r))return r}}function iue(i,e,t){let n=i.model;if(!Qy(i.model.schema,e,t))return;let[r,s]=rue(e,t);!r||!s||(!n.hasContent(r,{ignoreMarkers:!0})&&n.hasContent(s,{ignoreMarkers:!0})?VD(i,e,t,r.parent):DD(i,e,t,r.parent))}function DD(i,e,t,n){let r=e.parent,s=t.parent;if(!(r==n||s==n)){for(e=i.createPositionAfter(r),t=i.createPositionBefore(s),t.isEqual(e)||i.insert(s,e),i.merge(e);t.parent.isEmpty;){let o=t.parent;t=i.createPositionBefore(o),i.remove(o)}!Qy(i.model.schema,e,t)||DD(i,e,t,n)}}function VD(i,e,t,n){let r=e.parent,s=t.parent;if(!(r==n||s==n)){for(e=i.createPositionAfter(r),t=i.createPositionBefore(s),t.isEqual(e)||i.insert(r,t);e.parent.isEmpty;){let o=e.parent;e=i.createPositionBefore(o),i.remove(o)}t=i.createPositionBefore(s),nue(i,t),!!Qy(i.model.schema,e,t)&&VD(i,e,t,n)}}function nue(i,e){let t=e.nodeBefore,n=e.nodeAfter;t.name!=n.name&&i.rename(t,n.name),i.clearAttributes(t),i.setAttributes(Object.fromEntries(n.getAttributes()),t),i.merge(e)}function Qy(i,e,t){let n=e.parent,r=t.parent;return n==r||i.isLimit(n)||i.isLimit(r)?!1:oue(e,t,i)}function rue(i,e){let t=i.getAncestors(),n=e.getAncestors(),r=0;for(;t[r]&&t[r]==n[r];)r++;return[t[r],n[r]]}function sue(i,e){let t=i.checkChild(e,"$text"),n=i.checkChild(e,"paragraph");return!t&&n}function oue(i,e,t){let n=new q(i,e);for(let r of n.getWalker())if(t.isLimit(r.item))return!1;return!0}function BD(i,e,t,n={}){let r=i.createElement("paragraph");i.model.schema.setAllowedAttributes(r,n,i),i.insert(r,e),ND(i,t,i.createPositionAt(r,0))}function aue(i,e){let t=i.model.schema.getLimitElement(e);i.remove(i.createRangeIn(t)),BD(i,i.createPositionAt(t,0),e)}function lue(i,e){let t=i.getLimitElement(e);if(!e.containsEntireContent(t))return!1;let n=e.getFirstRange();return n.start.parent==n.end.parent?!1:i.checkChild(t,"paragraph")}function ND(i,e,t){e instanceof jn?i.setSelection(t):e.setTo(t)}function cue(i,e){return i.change(t=>{let n=t.createDocumentFragment(),r=e.getFirstRange();if(!r||r.isCollapsed)return n;let s=r.start.root,o=r.start.getCommonPath(r.end),l=s.getNodeByPath(o),u;r.start.parent==r.end.parent?u=r:u=t.createRange(t.createPositionAt(l,r.start.path[o.length]),t.createPositionAt(l,r.end.path[o.length]+1));let f=u.end.offset-u.start.offset;for(let g of u.getItems({shallow:!0}))g.is("$textProxy")?t.appendText(g.data,g.getAttributes(),n):t.append(t.cloneElement(g,!0),n);if(u!=r){let g=r._getTransformedByMove(u.start,t.createPositionAt(n,0),f)[0],p=t.createRange(t.createPositionAt(n,0),g.start),y=t.createRange(g.end,t.createPositionAt(n,"end"));FD(y,t),FD(p,t)}return n})}function FD(i,e){let t=[];Array.from(i.getItems({direction:"backward"})).map(n=>e.createRangeOn(n)).filter(n=>(n.start.isAfter(i.start)||n.start.isEqual(i.start))&&(n.end.isBefore(i.end)||n.end.isEqual(i.end))).forEach(n=>{t.push(n.start.parent),e.remove(n)}),t.forEach(n=>{let r=n;for(;r.parent&&r.isEmpty;){let s=e.createRangeOn(r);r=r.parent,e.remove(s)}})}function uue(i,e,t){return i.change(n=>{let r=t||i.document.selection;r.isCollapsed||i.deleteContent(r,{doNotAutoparagraph:!0});let s=new jD(i,n,r.anchor),o=[],l;if(e.is("documentFragment")){if(e.markers.size){let g=[];for(let[p,y]of e.markers){let{start:_,end:C}=y,E=_.isEqual(C);g.push({position:_,name:p,isCollapsed:E},{position:C,name:p,isCollapsed:E})}g.sort(({position:p},{position:y})=>p.isBefore(y)?1:-1);for(let{position:p,name:y,isCollapsed:_}of g){let C=null,E=null,P=p.parent===e&&p.isAtStart,M=p.parent===e&&p.isAtEnd;!P&&!M?(C=n.createElement("$marker"),n.insert(C,p)):_&&(E=P?"start":"end"),o.push({name:y,element:C,collapsed:E})}}l=e.getChildren()}else l=[e];s.handleNodes(l);let u=s.getSelectionRange();if(e.is("documentFragment")&&o.length){let g=u?Bi.fromRange(u):null,p={};for(let y=o.length-1;y>=0;y--){let{name:_,element:C,collapsed:E}=o[y],P=!p[_];if(P&&(p[_]=[]),C){let M=n.createPositionAt(C,"before");p[_].push(M),n.remove(C)}else{let M=s.getAffectedRange();if(!M){E&&p[_].push(s.position);continue}E?p[_].push(M[E]):p[_].push(P?M.start:M.end)}}for(let[y,[_,C]]of Object.entries(p))_&&C&&_.root===C.root&&_.root.document&&!n.model.markers.has(y)&&n.addMarker(y,{usingOperation:!0,affectsData:!0,range:new q(_,C)});g&&(u=g.toRange(),g.detach())}u&&(r instanceof jn?n.setSelection(u):r.setTo(u));let f=s.getAffectedRange()||i.createRange(r.anchor);return s.destroy(),f})}var jD=class{constructor(e,t,n){v(this,"model");v(this,"writer");v(this,"position");v(this,"canMergeWith");v(this,"schema");v(this,"_documentFragment");v(this,"_documentFragmentPosition");v(this,"_firstNode",null);v(this,"_lastNode",null);v(this,"_lastAutoParagraph",null);v(this,"_filterAttributesOf",[]);v(this,"_affectedStart",null);v(this,"_affectedEnd",null);v(this,"_nodeToSelect",null);this.model=e,this.writer=t,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(let t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){let t=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(e);if(n.isAfter(t)){this._lastNode=e;if(this.position.parent!=e||!this.position.isAtEnd)throw new L("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?q._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new q(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(!this._checkAndSplitToAllowedPosition(e)){this.schema.isObject(e)||this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;let e=qi.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new L("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=qi.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=qi.fromPosition(e,"toNext"))}_mergeOnLeft(){let e=this._firstNode;if(!(e instanceof kt)||!this._canMergeLeft(e))return;let t=qi._createBefore(e);t.stickiness="toNext";let n=qi.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=qi._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=qi._createAt(t.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){let e=this._lastNode;if(!(e instanceof kt)||!this._canMergeRight(e))return;let t=qi._createAfter(e);t.stickiness="toNext";if(!this.position.isEqual(t))throw new L("insertcontent-invalid-insertion-position",this);this.position=Q._createAt(t.nodeBefore,"end");let n=qi.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=qi._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=qi._createAt(t.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){let t=e.previousSibling;return t instanceof kt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){let t=e.nextSibling;return t instanceof kt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();let e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){let t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){let n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===t&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{let n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)||this.schema.checkChild(e,"paragraph")&&this.schema.checkChild("paragraph",t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}};function due(i,e,t,n={}){if(!i.schema.isObject(e))throw new L("insertobject-element-not-an-object",i,{object:e});let r=t||i.document.selection,s=r;n.findOptimalPosition&&i.schema.isBlock(e)&&(s=i.createSelection(i.schema.findOptimalInsertionRange(r,n.findOptimalPosition)));let o=$t(r.getSelectedBlocks()),l={};return o&&Object.assign(l,i.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),i.change(u=>{s.isCollapsed||i.deleteContent(s,{doNotAutoparagraph:!0});let f=e,g=s.anchor.parent;!i.schema.checkChild(g,e)&&i.schema.checkChild(g,"paragraph")&&i.schema.checkChild("paragraph",e)&&(f=u.createElement("paragraph"),u.insert(e,f)),i.schema.setAllowedAttributes(f,l,u);let p=i.insertContent(f,s);return p.isCollapsed||n.setSelection&&hue(u,e,n.setSelection,l),p})}function hue(i,e,t,n){let r=i.model;if(t=="on"){i.setSelection(e,"on");return}if(t!="after")throw new L("insertobject-invalid-place-parameter-value",r);let s=e.nextSibling;if(r.schema.isInline(e)){i.setSelection(e,"after");return}!(s&&r.schema.checkChild(s,"$text"))&&r.schema.checkChild(e.parent,"paragraph")&&(s=i.createElement("paragraph"),r.schema.setAllowedAttributes(s,n,i),r.insertContent(s,i.createPositionAfter(e))),s&&i.setSelection(s,0)}var fue=' ,.?!:;"-()';function mue(i,e,t={}){let n=i.schema,r=t.direction!="backward",s=t.unit?t.unit:"character",o=!!t.treatEmojiAsSingleUnit,l=e.focus,u=new xr({boundaries:vue(l,r),singleCharacters:!0,direction:r?"forward":"backward"}),f={walker:u,schema:n,isForward:r,unit:s,treatEmojiAsSingleUnit:o},g;for(;g=u.next();){if(g.done)return;let p=gue(f,g.value);if(p){e instanceof jn?i.change(y=>{y.setSelectionFocus(p)}):e.setFocus(p);return}}}function gue(i,e){let{isForward:t,walker:n,unit:r,schema:s,treatEmojiAsSingleUnit:o}=i,{type:l,item:u,nextPosition:f}=e;if(l=="text")return i.unit==="word"?bue(n,t):pue(n,r,o);if(l==(t?"elementStart":"elementEnd")){if(s.isSelectable(u))return Q._createAt(u,t?"after":"before");if(s.checkChild(f,"$text"))return f}else{if(s.isLimit(u)){n.skip(()=>!0);return}if(s.checkChild(f,"$text"))return f}}function pue(i,e,t){let n=i.position.textNode;if(n){let r=n.data,s=i.position.offset-n.startOffset;for(;Ih(r,s)||e=="character"&&Ph(r,s)||t&&Ep(r,s);)i.next(),s=i.position.offset-n.startOffset}return i.position}function bue(i,e){let t=i.position.textNode;for(t||(t=e?i.position.nodeAfter:i.position.nodeBefore);t&&t.is("$text");){let n=i.position.offset-t.startOffset;if(yue(t,n,e))t=e?i.position.nodeAfter:i.position.nodeBefore;else{if(wue(t.data,n,e))break;i.next()}}return i.position}function vue(i,e){let t=i.root,n=Q._createAt(t,e?"end":0);return e?new q(i,n):new q(n,i)}function wue(i,e,t){let n=e+(t?0:-1);return fue.includes(i.charAt(n))}function yue(i,e,t){return e===(t?i.offsetSize:0)}var hl=class extends gt(){constructor(){super();v(this,"markers");v(this,"document");v(this,"schema");v(this,"_pendingChanges");v(this,"_currentWriter");this.markers=new ID,this.document=new SD(this),this.schema=new aD,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),bce(this),this.document.registerPostFixer(K4),this.on("insertContent",(e,[t,n])=>{e.return=uue(this,t,n)}),this.on("insertObject",(e,[t,n,r])=>{e.return=due(this,t,n,r)}),this.on("canEditAt",e=>{let t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new ul,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){L.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new ul):e instanceof ul||(e=new ul(e)):e=new ul,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(n){L.rethrowUnexpectedError(n,this)}}applyOperation(e){e._execute()}insertContent(e,t,n,...r){let s=e_(t,n);return this.fire("insertContent",[e,s,n,...r])}insertObject(e,t,n,r,...s){let o=e_(t,n);return this.fire("insertObject",[e,o,r,r,...s])}deleteContent(e,t){Qce(this,e,t)}modifySelection(e,t){mue(this,e,t)}getSelectedContent(e){return cue(this,e)}hasContent(e,t={}){let n=e instanceof q?e:q._createIn(e);if(n.isCollapsed)return!1;let{ignoreWhitespaces:r=!1,ignoreMarkers:s=!1}=t;if(!s){for(let o of this.markers.getMarkersIntersectingRange(n))if(o.affectsData)return!0}for(let o of n.getItems())if(this.schema.isContent(o))if(o.is("$textProxy"))if(r){if(o.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){let t=e_(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,n){return new Q(e,t,n)}createPositionAt(e,t){return Q._createAt(e,t)}createPositionAfter(e){return Q._createAfter(e)}createPositionBefore(e){return Q._createBefore(e)}createRange(e,t){return new q(e,t)}createRangeIn(e){return q._createIn(e)}createRangeOn(e){return q._createOn(e)}createSelection(...e){return new Ii(...e)}createBatch(e){return new ul(e)}createOperationFromJSON(e){return mD.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){let e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){let t=this._pendingChanges[0].batch;this._currentWriter=new RD(this,t);let n=this._pendingChanges[0].callback(this._currentWriter);e.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function e_(i,e){if(!!i)return i instanceof Ii||i instanceof jn?i:i instanceof ll?e||e===0?new Ii(i,e):i.is("rootElement")?new Ii(i,"in"):new Ii(i,"on"):new Ii(i)}var t_=class extends qr{constructor(){super(...arguments);v(this,"domEventType","click")}onDomEvent(e){this.fire(e.type,e)}},fl=class extends qr{constructor(){super(...arguments);v(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(e){this.fire(e.type,e)}},mu=class{constructor(e){v(this,"document");this.document=e}createDocumentFragment(e){return new la(this.document,e)}createElement(e,t,n){return new yr(this.document,e,t,n)}createText(e){return new zt(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,n){return n._insertChild(e,t)}removeChildren(e,t,n){return n._removeChildren(e,t)}remove(e){let t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){let n=e.parent;if(n){let r=n.getChildIndex(e);return this.removeChildren(r,1,n),this.insertChild(r,t,n),!0}return!1}unwrapElement(e){let t=e.parent;if(t){let n=t.getChildIndex(e);this.remove(e),this.insertChild(n,e.getChildren(),t)}}rename(e,t){let n=new yr(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,n)?n:null}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){fi(e)&&n===void 0?t._setStyle(e):n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return me._createAt(e,t)}createPositionAfter(e){return me._createAfter(e)}createPositionBefore(e){return me._createBefore(e)}createRange(e,t){return new Ze(e,t)}createRangeOn(e){return Ze._createOn(e)}createRangeIn(e){return Ze._createIn(e)}createSelection(...e){return new oo(...e)}};var GIe=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);var gu="[",Yh="]",pu="{",Zh="}",Jh={container:oa,attribute:lo,empty:Dh,ui:ou,raw:Vh},_ue={setContentOf:(i,e)=>{i.innerHTML=e}};function i_(i,e={}){if(!(i instanceof Fh))throw new TypeError("View needs to be an instance of module:engine/view/view~View.");let t=i.document,n=!!e.withoutSelection,r=e.rootName||"main",s=t.getRoot(r),o={showType:e.showType,showPriority:e.showPriority,renderUIElements:e.renderUIElements,renderRawElements:e.renderRawElements,ignoreRoot:!0,domConverter:e.domConverter};return n?i_._stringify(s,null,o):i_._stringify(s,t.selection,o)}i_._stringify=zD;function HD(i,e,t={}){if(!(i instanceof Fh))throw new TypeError("View needs to be an instance of module:engine/view/view~View.");let n=i.document,r=t.rootName||"main",s=n.getRoot(r);i.change(o=>{let l=HD._parse(e,{rootElement:s});l.view&&l.selection&&o.setSelection(l.selection)})}HD._parse=UD;function zD(i,e=null,t={}){let n;return e instanceof me||e instanceof Ze?n=new Mh(e):n=e,new qD(i,n,t).stringify()}function UD(i,e={}){let t=new Pp(new Rh);e.order=e.order||[];let n=new WD({sameSelectionCharacters:e.sameSelectionCharacters}),r=new uD(t,{namespaces:Object.keys(Jh)});e.inlineObjectElements&&r.domConverter.inlineObjectElements.push(...e.inlineObjectElements);let s=r.toView(i);if(s=$D(s),e.rootElement){let l=e.rootElement,u=s._removeChildren(0,s.childCount);l._removeChildren(0,l.childCount),l._appendChild(u),s=l}let o=n.parse(s,e.order);if(s.is("documentFragment")&&s.childCount===1&&(s=s.getChild(0)),o.length){let l=new Mh(o,{backward:!!e.lastRangeBackward});return{view:s,selection:l}}return s.parent&&s._remove(),s}var WD=class{constructor(e){v(this,"sameSelectionCharacters");v(this,"_positions");this.sameSelectionCharacters=!!e.sameSelectionCharacters}parse(e,t){this._positions=[],this._getPositions(e);let n=this._createRanges();if(t.length){if(t.length!=n.length)throw new Error(`Parse error - there are ${n.length} ranges found, but ranges order array contains ${t.length} elements.`);n=this._sortRanges(n,t)}return n}_getPositions(e){if(e.is("documentFragment")||e.is("element")){let t=[...e.getChildren()];for(let n of t)this._getPositions(n)}if(e.is("$text")){let t=new RegExp(`[${pu}${Zh}\\${Yh}\\${gu}]`,"g"),n=e.data,r,s=0,o=[];for(;r=t.exec(n);){let f=r.index,g=r[0];o.push({bracket:g,textOffset:f-s}),s++}n=n.replace(t,""),e._data=n;let l=e.index,u=e.parent;n||e._remove();for(let f of o)if(n)if(this.sameSelectionCharacters||!this.sameSelectionCharacters&&(f.bracket==pu||f.bracket==Zh))this._positions.push({bracket:f.bracket,position:new me(e,f.textOffset)});else{if(!this.sameSelectionCharacters&&f.textOffset!==0&&f.textOffset!==n.length)throw new Error(`Parse error - range delimiter '${f.bracket}' is placed inside text node.`);let g=f.textOffset===0?l:l+1;this._positions.push({bracket:f.bracket,position:new me(u,g)})}else{if(!this.sameSelectionCharacters&&f.bracket==pu||f.bracket==Zh)throw new Error(`Parse error - text range delimiter '${f.bracket}' is placed inside empty text node. `);this._positions.push({bracket:f.bracket,position:new me(u,l)})}}}_sortRanges(e,t){let n=[],r=0;for(let s of t){if(e[s-1]===void 0)throw new Error("Parse error - provided ranges order is invalid.");n[s-1]=e[r],r++}return n}_createRanges(){let e=[],t=null;for(let n of this._positions){if(!t&&(n.bracket==Yh||n.bracket==Zh))throw new Error(`Parse error - end of range was found '${n.bracket}' but range was not started before.`);if(t&&(n.bracket==gu||n.bracket==pu))throw new Error(`Parse error - start of range was found '${n.bracket}' but one range is already started.`);n.bracket==gu||n.bracket==pu?t=new Ze(n.position,n.position):(t.end=n.position,e.push(t),t=null)}if(t!==null)throw new Error("Parse error - range was started but no end delimiter was found.");return e}},qD=class{constructor(e,t,n){v(this,"root");v(this,"selection");v(this,"ranges");v(this,"showType");v(this,"showPriority");v(this,"showAttributeElementId");v(this,"ignoreRoot");v(this,"sameSelectionCharacters");v(this,"renderUIElements");v(this,"renderRawElements");v(this,"domConverter");this.root=e,this.selection=t,this.ranges=[],t&&(this.ranges=[...t.getRanges()]),this.showType=!!n.showType,this.showPriority=!!n.showPriority,this.showAttributeElementId=!!n.showAttributeElementId,this.ignoreRoot=!!n.ignoreRoot,this.sameSelectionCharacters=!!n.sameSelectionCharacters,this.renderUIElements=!!n.renderUIElements,this.renderRawElements=!!n.renderRawElements,this.domConverter=n.domConverter||_ue}stringify(){let e="";return this._walkView(this.root,t=>{e+=t}),e}_walkView(e,t){let n=this.ignoreRoot&&this.root===e;if(e.is("element")||e.is("documentFragment")){if(e.is("element")&&!n&&t(this._stringifyElementOpen(e)),this.renderUIElements&&e.is("uiElement"))t(e.render(document,this.domConverter).innerHTML);else if(this.renderRawElements&&e.is("rawElement")){let r=document.createElement("div");e.render(r,this.domConverter),t(r.innerHTML)}else{let r=0;t(this._stringifyElementRanges(e,r));for(let s of e.getChildren())this._walkView(s,t),r++,t(this._stringifyElementRanges(e,r))}e.is("element")&&!n&&t(this._stringifyElementClose(e))}e.is("$text")&&t(this._stringifyTextRanges(e))}_stringifyElementRanges(e,t){let n="",r="",s="";for(let o of this.ranges)o.start.parent==e&&o.start.offset===t&&(o.isCollapsed?s+=gu+Yh:n+=gu),o.end.parent===e&&o.end.offset===t&&!o.isCollapsed&&(r+=Yh);return r+s+n}_stringifyTextRanges(e){let t=e.data.length,n=e.data.split(""),r,s;this.sameSelectionCharacters?(r=gu,s=Yh):(r=pu,s=Zh),n[t]="";let o=n.map(l=>({letter:l,start:"",end:"",collapsed:""}));for(let l of this.ranges){let u=l.start,f=l.end;u.parent==e&&u.offset>=0&&u.offset<=t&&(l.isCollapsed?o[f.offset].collapsed+=r+s:o[u.offset].start+=r),f.parent==e&&f.offset>=0&&f.offset<=t&&!l.isCollapsed&&(o[f.offset].end+=s)}return o.map(l=>l.end+l.collapsed+l.start+l.letter).join("")}_stringifyElementOpen(e){let t=this._stringifyElementPriority(e),n=this._stringifyElementId(e),s=[this._stringifyElementType(e),e.name].filter(u=>u!=="").join(":"),o=this._stringifyElementAttributes(e);return`<${[s,t,n,o].filter(u=>u!=="").join(" ")}>`}_stringifyElementClose(e){return`</${[this._stringifyElementType(e),e.name].filter(r=>r!=="").join(":")}>`}_stringifyElementType(e){if(this.showType){for(let t in Jh)if(e instanceof Jh[t])return t}return""}_stringifyElementPriority(e){return this.showPriority&&e.is("attributeElement")?`view-priority="${e.priority}"`:""}_stringifyElementId(e){return this.showAttributeElementId&&e.is("attributeElement")&&e.id?`view-id="${e.id}"`:""}_stringifyElementAttributes(e){let t=[],n=[...e.getAttributeKeys()].sort();for(let r of n){let s;r==="class"?s=[...e.getClassNames()].sort().join(" "):r==="style"?s=[...e.getStyleNames()].sort().map(o=>`${o}:${e.getStyle(o).replace(/"/g,"&quot;")}`).join(";"):s=e.getAttribute(r),t.push(`${r}="${s}"`)}return t.join(" ")}};function $D(i){if(i.is("element")||i.is("documentFragment")){let e=i.is("documentFragment")?new la(i.document):xue(i.document,i);for(let t of[...i.getChildren()]){if(e.is("emptyElement"))throw new Error("Parse error - cannot parse inside EmptyElement.");if(e.is("uiElement"))throw new Error("Parse error - cannot parse inside UIElement.");if(e.is("rawElement"))throw new Error("Parse error - cannot parse inside RawElement.");e._appendChild($D(t))}return e}return i}function xue(i,e){let t=kue(e),n=Jh[t.type],r=n?new n(i,t.name):new yr(i,t.name);r.is("attributeElement")&&(t.priority!==null&&(r._priority=t.priority),t.id!==null&&(r._id=t.id));for(let s of e.getAttributeKeys())r._setAttribute(s,e.getAttribute(s));return r}function kue(i){let e=i.name.split(":"),t=Tue(i.getAttribute("view-priority")),n=i.hasAttribute("view-id")?i.getAttribute("view-id"):null;if(i._removeAttribute("view-priority"),i._removeAttribute("view-id"),e.length==1)return{name:e[0],type:t!==null?"attribute":null,priority:t,id:n};let r=Cue(e[0]);if(r)return{name:e[1],type:r,priority:t,id:n};throw new Error(`Parse error - cannot parse element's name: ${i.name}.`)}function Cue(i){return i in Jh?i:null}function Tue(i){let e=parseInt(i,10);return isNaN(e)?null:e}function GD(i,e={}){if(!(i instanceof hl))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");let t=e.rootName||"main",n=i.document.getRoot(t);return GD._stringify(n,e.withoutSelection?null:i.document.selection,e.convertMarkers?i.markers:null)}GD._stringify=Eue;function KD(i,e,t={}){if(!(i instanceof hl))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");let n,r=null,s=i.document.getRoot(t.rootName||"main"),o=KD._parse(e,i.schema,{lastRangeBackward:t.lastRangeBackward,selectionAttributes:t.selectionAttributes,context:[s.name],inlineObjectElements:t.inlineObjectElements});"model"in o?(n=o.model,r=o.selection):n=o,t.batchType!==void 0?i.enqueueChange(t.batchType,l):i.change(l);function l(u){if(u.remove(u.createRangeIn(s)),u.insert(n,s),u.setSelection(null),u.removeSelectionAttribute(i.document.selection.getAttributeKeys()),r){let f=[];for(let g of r.getRanges()){let p=new Q(s,g.start.path),y=new Q(s,g.end.path);f.push(new q(p,y))}u.setSelection(f,{backward:r.isBackward}),t.selectionAttributes&&u.setSelectionAttribute(r.getAttributes())}}}KD._parse=Sue;function Eue(i,e=null,t=null){let n=new hl,r=new Hh,s=null,o;if(i instanceof fu||i instanceof Cr)o=n.createRangeIn(i);else if(i.parent)o=new q(n.createPositionBefore(i),n.createPositionAfter(i));else{let E=new Cr(i);o=n.createRangeIn(E)}e instanceof Ii||e instanceof jn?s=e:e instanceof q?s=new Ii(e):e instanceof Q&&(s=new Ii(e));let l=new Rh,u=new Fh(l),f=u.document,g=new Ap(f,"div");g.rootName="main",f.roots.add(g);let p=new Dp({mapper:r,schema:n.schema});r.bindElements(i.root,g),p.on("insert:$text",Fy()),p.on("insert",jy(),{priority:"lowest"}),p.on("attribute",(E,P,M)=>{(P.item instanceof Ii||P.item instanceof jn||P.item.is("$textProxy"))&&N4((N,{writer:W})=>W.createAttributeElement("model-text-with-attributes",{[P.attributeKey]:JD(N)}))(E,P,M)}),p.on("insert",F4(E=>{let P=n_(E.getAttributes(),JD);return new oa(f,E.name,P)})),p.on("selection",V4()),p.on("selection",B4()),p.on("addMarker",j4((E,{writer:P})=>{let M=E.markerName+":"+(E.isOpening?"start":"end");return P.createUIElement(M)}));let y=new Map;if(t)for(let E of Array.from(t).sort((P,M)=>P.name<M.name?1:-1))y.set(E.name,E.getRange());let _=u._writer;p.convert(o,y,_),s&&p.convertSelection(s,t||n.markers,_);let C=zD(g,f.selection,{sameSelectionCharacters:!0});return C=C.substr(5,C.length-11),u.destroy(),C.replace(new RegExp("model-text-with-attributes","g"),"$text")}function Sue(i,e,t={}){let n=new Hh;i=i.replace(new RegExp("\\$text","g"),"model-text-with-attributes");let r=UD(i,{sameSelectionCharacters:!0,lastRangeBackward:!!t.lastRangeBackward,inlineObjectElements:t.inlineObjectElements}),s,o=null,l=null;"view"in r&&"selection"in r?(s=r.view,o=r.selection):s=r;let u=new hl,f=new qy({schema:e});f.on("documentFragment",Aue(n)),f.on("element:model-text-with-attributes",YD()),f.on("element",Iue(n)),f.on("text",YD());let g=u.change(p=>f.convert(s.root,p,t.context||"$root"));if(n.bindElements(g,s.root),g.childCount==1&&(g=g.getChild(0)),o){let p=[];for(let y of o.getRanges())p.push(n.toModelRange(y));l=new Ii(p,{backward:o.isBackward});for(let[y,_]of Nn(t.selectionAttributes||[]))l.setAttribute(y,_)}return l?{model:g,selection:l}:g}function Aue(i){return(e,t,n)=>{let r=n.convertChildren(t.viewItem,t.modelCursor);i.bindElements(t.modelCursor.parent,t.viewItem),t=Object.assign(t,r),e.stop()}}function Iue(i){return(e,t,n)=>{let r=t.viewItem.name;if(!n.schema.checkChild(t.modelCursor,r))throw new Error(`Element '${r}' was not allowed in given position.`);let s=n_(t.viewItem.getAttributes(),ZD),o=n.writer.createElement(t.viewItem.name,s);n.writer.insert(o,t.modelCursor),i.bindElements(o,t.viewItem),n.convertChildren(t.viewItem,o),t.modelRange=q._createOn(o),t.modelCursor=t.modelRange.end,e.stop()}}function YD(){return(i,e,t)=>{if(!t.schema.checkChild(e.modelCursor,"$text"))throw new Error("Text was not allowed in given position.");let n;if(e.viewItem.is("element")){let r=n_(e.viewItem.getAttributes(),ZD),s=e.viewItem.getChild(0);n=t.writer.createText(s.data,r)}else n=t.writer.createText(e.viewItem.data);t.writer.insert(n,e.modelCursor),e.modelRange=q._createFromPositionAndShift(e.modelCursor,n.offsetSize),e.modelCursor=e.modelRange.end,i.stop()}}function ZD(i){try{return JSON.parse(i)}catch(e){return i}}function JD(i){return fi(i)?JSON.stringify(i):i}function*n_(i,e){for(let[t,n]of i)yield[t,e(n)]}var r_=class{constructor(e){v(this,"crashes",[]);v(this,"state","initializing");v(this,"_crashNumberLimit");v(this,"_now",Date.now);v(this,"_minimumNonErrorTimePeriod");v(this,"_boundErrorHandler");v(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{let n="error"in t?t.error:t.reason;n instanceof Error&&this._handleError(n,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(n=>n!==t)}_fire(e,...t){let n=this._listeners[e]||[];for(let r of n)r.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});let n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;let e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}};function s_(i,e=new Set){let t=[i],n=new Set,r=0;for(;t.length>r;){let s=t[r++];if(!(n.has(s)||!Pue(s)||e.has(s)))if(n.add(s),Symbol.iterator in s)try{for(let o of s)t.push(o)}catch(o){}else for(let o in s)o!=="defaultValue"&&t.push(s[o])}return n}function Pue(i){let e=Object.prototype.toString.call(i),t=typeof i;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||i===void 0||i===null||i._watchdogExcluded||i instanceof EventTarget||i instanceof Event)}function XD(i,e,t=new Set){if(i===e&&Rue(i))return!0;let n=s_(i,t),r=s_(e,t);for(let s of n)if(r.has(s))return!0;return!1}function Rue(i){return typeof i=="object"&&i!==null}var Fp=class extends r_{constructor(e,t={}){super(t);v(this,"_editor",null);v(this,"_lifecyclePromise",null);v(this,"_throttledSave");v(this,"_data");v(this,"_lastDocumentVersion");v(this,"_elementOrData");v(this,"_initUsingData",!0);v(this,"_editables",{});v(this,"_config");v(this,"_excludedProps");this._throttledSave=sa(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(n,r)=>e.create(n,r)),this._destructor=n=>n.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{let e={},t=[],n=this._config.rootsAttributes||{},r={};for(let[o,l]of Object.entries(this._data.roots))l.isLoaded?(e[o]="",r[o]=n[o]||{}):t.push(o);let s=tt(ee({},this._config),{extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:r,_watchdogInitialData:this._data});return delete s.initialData,s.extraPlugins.push(QD),this._initUsingData?this.create(e,s,s.context):Xn(this._elementOrData)?this.create(this._elementOrData,s,s.context):this.create(this._editables,s,s.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,n){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=n,this._creator(e,this._config))).then(r=>{this._editor=r,r.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=r.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();let e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){let e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){let e=this._editor,t=e.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:n}=e,r=n.has("CommentsRepository")&&n.get("CommentsRepository"),s=n.has("TrackChanges")&&n.get("TrackChanges"),o={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(l=>{o.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(let l of e.model.markers)!l._affectsData||(o.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return r&&(o.commentThreads=JSON.stringify(r.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),s&&(o.suggestions=JSON.stringify(s.getSuggestions({toJSON:!0,skipNotAttached:!0}))),o}_getEditables(){let e={};for(let t of this.editor.model.document.getRootNames()){let n=this.editor.ui.getEditableElement(t);n&&(e[t]=n)}return e}_isErrorComingFromThisItem(e){return XD(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return tl(e,(t,n)=>{if(Xn(t)||n==="context")return t})}},QD=class{constructor(e){v(this,"editor");v(this,"_data");this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:1e3-1})}_createNode(e,t){if("name"in t){let n=e.createElement(t.name,t.attributes);if(t.children)for(let r of t.children)n._appendChild(this._createNode(e,r));return n}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){let t=this.editor;Object.entries(this._data.roots).forEach(([n,{content:r,attributes:s}])=>{let o=JSON.parse(r),l=JSON.parse(s),u=t.model.document.getRoot(n);for(let[f,g]of l)e.setAttribute(f,g,u);for(let f of o){let g=this._createNode(e,f);e.insert(g,u,"end")}}),Object.entries(this._data.markers).forEach(([n,r])=>{let{document:s}=t.model,_=r,{rangeJSON:{start:o,end:l}}=_,u=Do(_,["rangeJSON"]),f=s.getRoot(o.root),g=e.createPositionFromPath(f,o.path,o.stickiness),p=e.createPositionFromPath(f,l.path,l.stickiness),y=e.createRange(g,p);e.addMarker(n,ee({range:y},u))})}_restoreCollaborationData(){let e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(n=>{let r=this.editor.config.get("collaboration.channelId"),s=this.editor.plugins.get("CommentsRepository");s.hasCommentThread(n.threadId)&&s.getCommentThread(n.threadId).remove(),s.addCommentThread(ee({channelId:r},n))}),t.forEach(n=>{let r=this.editor.plugins.get("TrackChangesEditing");if(r.hasSuggestion(n.id)){let s=r.getSuggestion(n.id);s.attributes=n.attributes}else r.addSuggestionData(n)})}};var Xh=Symbol("MainQueueId"),o_=class extends r_{constructor(e,t={}){super(t);v(this,"_watchdogs",new Map);v(this,"_watchdogConfig");v(this,"_context",null);v(this,"_contextProps",new Set);v(this,"_actionQueues",new e6);v(this,"_contextConfig");v(this,"_item");this._watchdogConfig=t,this._creator=n=>e.create(n),this._destructor=n=>n.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Xh,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){let t=t6(e);return Promise.all(t.map(n=>this._actionQueues.enqueue(n.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(n.id))throw new Error(`Item with the given id is already added: '${n.id}'.`);if(n.type==="editor")return r=new Fp(null,this._watchdogConfig),r.setCreator(n.creator),r._setExcludedProperties(this._contextProps),n.destructor&&r.setDestructor(n.destructor),this._watchdogs.set(n.id,r),r.on("error",(s,{error:o,causesRestart:l})=>{this._fire("itemError",{itemId:n.id,error:o}),!!l&&this._actionQueues.enqueue(n.id,()=>new Promise(u=>{let f=()=>{r.off("restart",f),this._fire("itemRestart",{itemId:n.id}),u()};r.on("restart",f)}))}),r.create(n.sourceElementOrData,n.config,this._context);throw new Error(`Not supported item type: '${n.type}'.`)})))}remove(e){let t=t6(e);return Promise.all(t.map(n=>this._actionQueues.enqueue(n,()=>{let r=this._getWatchdog(n);return this._watchdogs.delete(n),r.destroy()})))}destroy(){return this._actionQueues.enqueue(Xh,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Xh,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=s_(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();let e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){let t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(let t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return XD(this._context,e.context)}},e6=class{constructor(){v(this,"_onEmptyCallbacks",[]);v(this,"_queues",new Map);v(this,"_activeActions",0)}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){let n=e===Xh;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());let s=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(Xh),this._queues.get(e)])).then(t),o=s.catch(()=>{});return this._queues.set(e,o),s.finally(()=>{this._activeActions--,this._queues.get(e)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(l=>l())})}};function t6(i){return Array.isArray(i)?i:[i]}var ne=class extends gt(){constructor(e){super();v(this,"editor");v(this,"_disableStack",new Set);this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",i6,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",i6),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}};function i6(i){i.return=!1,i.stop()}var We=class extends gt(){constructor(e){super();v(this,"editor");v(this,"_isEnabledBasedOnSelection");v(this,"_affectsData");v(this,"_disableStack");this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;let n=e.model.document.selection,s=!(n.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(n);(e.isReadOnly||this._isEnabledBasedOnSelection&&!s)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",n6,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",n6),this.refresh())}execute(...e){}destroy(){this.stopListening()}};function n6(i){i.return=!1,i.stop()}var a_=class extends wt(){constructor(e,t=[],n=[]){super();v(this,"_context");v(this,"_plugins",new Map);v(this,"_availablePlugins");v(this,"_contextPlugins");this._context=e,this._availablePlugins=new Map;for(let r of t)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(let[r,s]of n)this._contextPlugins.set(r,s),this._contextPlugins.set(s,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(let e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){let t=this._plugins.get(e);if(!t){let n=e;throw typeof e=="function"&&(n=e.pluginName||e.name),new L("plugincollection-plugin-not-loaded",this._context,{plugin:n})}return t}has(e){return this._plugins.has(e)}init(e,t=[],n=[]){let r=this,s=this._context;_(e),E(e);let o=e.filter(U=>!p(U,t)),l=[...C(o)];Z(l,n);let u=N(l);return W(u,"init").then(()=>W(u,"afterInit")).then(()=>u);function f(U){return typeof U=="function"}function g(U){return f(U)&&!!U.isContextPlugin}function p(U,ie){return ie.some(X=>X===U||y(U)===X||y(X)===U)}function y(U){return f(U)?U.pluginName||U.name:U}function _(U,ie=new Set){U.forEach(X=>{!f(X)||ie.has(X)||(ie.add(X),X.pluginName&&!r._availablePlugins.has(X.pluginName)&&r._availablePlugins.set(X.pluginName,X),X.requires&&_(X.requires,ie))})}function C(U,ie=new Set){return U.map(X=>f(X)?X:r._availablePlugins.get(X)).reduce((X,F)=>ie.has(F)?X:(ie.add(F),F.requires&&(E(F.requires,F),C(F.requires,ie).forEach(te=>X.add(te))),X.add(F)),new Set)}function E(U,ie=null){U.map(X=>f(X)?X:r._availablePlugins.get(X)||X).forEach(X=>{P(X,ie),M(X,ie),O(X,ie)})}function P(U,ie){if(!f(U))throw ie?new L("plugincollection-soft-required",s,{missingPlugin:U,requiredBy:y(ie)}):new L("plugincollection-plugin-not-found",s,{plugin:U})}function M(U,ie){if(!!g(ie)&&!g(U))throw new L("plugincollection-context-required",s,{plugin:y(U),requiredBy:y(ie)})}function O(U,ie){if(!!ie&&!!p(U,t))throw new L("plugincollection-required",s,{plugin:y(U),requiredBy:y(ie)})}function N(U){return U.map(ie=>{let X=r._contextPlugins.get(ie);return X=X||new ie(s),r._add(ie,X),X})}function W(U,ie){return U.reduce((X,F)=>!F[ie]||r._contextPlugins.has(F)?X:X.then(F[ie].bind(F)),Promise.resolve())}function Z(U,ie){for(let X of ie){if(typeof X!="function")throw new L("plugincollection-replace-plugin-invalid-type",null,{pluginItem:X});let F=X.pluginName;if(!F)throw new L("plugincollection-replace-plugin-missing-name",null,{pluginItem:X});if(X.requires&&X.requires.length)throw new L("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:F});let te=r._availablePlugins.get(F);if(!te)throw new L("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:F});let ye=U.indexOf(te);if(ye===-1){if(r._contextPlugins.has(te))return;throw new L("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:F})}if(te.requires&&te.requires.length)throw new L("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:F});U.splice(ye,1,X),r._availablePlugins.set(F,X)}}}destroy(){let e=[];for(let[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);let n=e.pluginName;if(!!n){if(this._plugins.has(n))throw new L("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:e});this._plugins.set(n,t)}}},Qh=class{constructor(e){v(this,"config");v(this,"plugins");v(this,"locale");v(this,"t");v(this,"editors");v(this,"_contextOwner",null);let o=e||{},{translations:t}=o,n=Do(o,["translations"]);this.config=new yp(n,this.constructor.defaultConfig);let r=this.constructor.builtinPlugins;this.config.define("plugins",r),this.plugins=new a_(this,r);let s=this.config.get("language")||{};this.locale=new yy({uiLanguage:typeof s=="string"?s:s.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Ht}initPlugins(){let e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(let n of e.concat(t)){if(typeof n!="function")throw new L("context-initplugins-constructor-only",null,{Plugin:n});if(n.isContextPlugin!==!0)throw new L("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new L("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){let e={};for(let t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{let n=new this(e);t(n.initPlugins().then(()=>n))})}};v(Qh,"defaultConfig"),v(Qh,"builtinPlugins");var jp=class extends gt(){constructor(e){super();v(this,"context");this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}},r6=class{constructor(){v(this,"_commands");this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){let n=this.get(e);if(!n)throw new L("commandcollection-command-not-found",this,{commandName:e});return n.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(let e of this.commands())e.destroy()}},s6=class extends Jt{constructor(e){super();v(this,"editor");this.editor=e}set(e,t,n={}){if(typeof t=="string"){let r=t;t=(s,o)=>{this.editor.execute(r),o()}}super.set(e,t,n)}},l_="contentEditing",o6="common",a6=class{constructor(e){v(this,"keystrokeInfos",new Map);v(this,"_editor");this._editor=e;let t=e.config.get("menuBar.isVisible"),n=e.locale.t;this.addKeystrokeInfoCategory({id:l_,label:n("Content editing keystrokes"),description:n("These keyboard shortcuts allow for quick access to content editing features.")});let r=[{label:n("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:n("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:n("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:n("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:n("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:n("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&r.push({label:n("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:n("User interface and content navigation keystrokes"),description:n("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:r}]})}addKeystrokeInfoCategory({id:e,label:t,description:n,groups:r}){this.keystrokeInfos.set(e,{id:e,label:t,description:n,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:o6}),r&&r.forEach(s=>{this.addKeystrokeInfoGroup(ee({categoryId:e},s))})}addKeystrokeInfoGroup({categoryId:e=l_,id:t,label:n,keystrokes:r}){let s=this.keystrokeInfos.get(e);if(!s)throw new L("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});s.groups.set(t,{id:t,label:n,keystrokes:r||[]})}addKeystrokeInfos({categoryId:e=l_,groupId:t=o6,keystrokes:n}){if(!this.keystrokeInfos.has(e))throw new L("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:n});let r=this.keystrokeInfos.get(e);if(!r.groups.has(t))throw new L("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:n});r.groups.get(t).keystrokes.push(...n)}},Tr=class extends gt(){constructor(e={}){super();v(this,"accessibility");v(this,"commands");v(this,"config");v(this,"conversion");v(this,"data");v(this,"editing");v(this,"locale");v(this,"model");v(this,"plugins");v(this,"keystrokes");v(this,"t");v(this,"_context");v(this,"_readOnlyLocks");if("sanitizeHtml"in e)throw new L("editor-config-sanitizehtml-not-supported");let t=this.constructor,g=t.defaultConfig||{},{translations:n}=g,r=Do(g,["translations"]),p=e,{translations:s=n}=p,o=Do(p,["translations"]),l=e.language||r.language;this._context=e.context||new Qh({language:l,translations:s}),this._context._addEditor(this,!e.context);let u=Array.from(t.builtinPlugins||[]);this.config=new yp(o,r),this.config.define("plugins",u),this.config.define(this._context._getEditorConfig()),this.plugins=new a_(this,u,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new r6,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new hl,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});let f=new Rh;this.data=new Gy(this.model,f),this.editing=new Wy(this.model,f),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Ky([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new s6(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new a6(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new L("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new L("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new L("editor-read-only-lock-id-invalid",null,{lockId:e});!this._readOnlyLocks.has(e)||(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){let e=this.config,t=e.get("plugins"),n=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],s=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(r),n,s)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(n){L.rethrowUnexpectedError(n,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}};v(Tr,"defaultConfig"),v(Tr,"builtinPlugins"),v(Tr,"Context",Qh),v(Tr,"EditorWatchdog",Fp),v(Tr,"ContextWatchdog",o_);function Hp(i){if(!Jn(i.updateSourceElement))throw new L("attachtoform-missing-elementapi-interface",i);let e=i.sourceElement;if(Oue(e)&&e.form){let t,n=e.form,r=()=>i.updateSourceElement();Jn(n.submit)&&(t=n.submit,n.submit=()=>{r(),t.apply(n)}),n.addEventListener("submit",r),i.on("destroy",()=>{n.removeEventListener("submit",r),t&&(n.submit=t)})}}function Oue(i){return!!i&&i.tagName.toLowerCase()==="textarea"}function ml(i){class e extends i{constructor(){super(...arguments);v(this,"sourceElement")}updateSourceElement(n){if(!this.sourceElement)throw new L("editor-missing-sourceelement",this);let r=this.config.get("updateSourceElementOnDestroy"),s=this.sourceElement instanceof HTMLTextAreaElement;if(!r&&!s){Cp(this.sourceElement,"");return}let o=typeof n=="string"?n:this.data.get();Cp(this.sourceElement,o)}}return e}ml.updateSourceElement=ml(Object).prototype.updateSourceElement;var gl=class extends jp{constructor(){super(...arguments);v(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new Ht({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new L("pendingactions-add-invalid-message",this);let t=new(gt());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}},Mue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',Lue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Due='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Vue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',Bue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',Nue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',Fue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',jue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',Hue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',zue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',Uue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',Wue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',que='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',$ue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',Gue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',Kue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',Yue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',Zue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',Jue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',Xue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Que='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',ede='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',tde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',ide='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',nde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',rde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',sde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',ode='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',ade='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',lde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',cde='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',ude='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',dde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',hde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',fde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',mde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',gde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',pde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',bde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',vde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',wde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',yde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',_de='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',xde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',kde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',Cde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',Tde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Ede='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',Sde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Ade='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Ide='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',Pde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',Rde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',Ode='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',Mde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',Lde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',Dde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',Vde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',Bde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',Nde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',Fde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',jde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',Hde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',$e={bold:wde,cancel:Mue,caption:Lue,check:Due,cog:Vue,colorPalette:Bue,eraser:Nue,history:Fue,image:que,imageUpload:$ue,imageAssetManager:Gue,imageUrl:Kue,lowVision:jue,textAlternative:Hue,loupe:zue,previousArrow:Uue,nextArrow:Wue,importExport:kde,paragraph:yde,plus:_de,text:xde,alignBottom:Yue,alignMiddle:Zue,alignTop:Jue,alignLeft:Xue,alignCenter:Que,alignRight:ede,alignJustify:tde,objectLeft:ade,objectCenter:nde,objectRight:lde,objectFullWidth:sde,objectInline:ode,objectBlockLeft:ide,objectBlockRight:rde,objectSizeCustom:ude,objectSizeFull:cde,objectSizeLarge:dde,objectSizeSmall:hde,objectSizeMedium:fde,pencil:mde,pilcrow:gde,quote:pde,threeVerticalDots:bde,dragIndicator:vde,redo:Cde,undo:Tde,bulletedList:Ede,numberedList:Sde,todoList:Ade,codeBlock:Ide,browseFiles:Pde,heading1:Rde,heading2:Ode,heading3:Mde,heading4:Lde,heading5:Dde,heading6:Vde,horizontalLine:Bde,html:Nde,indent:Fde,outdent:jde,table:Hde};var zde=Vo(u_());var wPe=Vo(m6());var rn=class extends Ht{constructor(e=[]){super(e,{idProperty:"viewUid"});v(this,"_parentElement");this.on("add",(t,n,r)=>{this._renderViewIntoCollectionParent(n,r)}),this.on("remove",(t,n)=>{n.element&&this._parentElement&&n.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(let t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!Xde(e))throw new L("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(let n of this)for(let r of e)n.delegate(r).to(t);this.on("add",(n,r)=>{for(let s of e)r.delegate(s).to(t)}),this.on("remove",(n,r)=>{for(let s of e)r.stopDelegating(s,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}};function Xde(i){return i.every(e=>typeof e=="string")}var Qde="http://www.w3.org/1999/xhtml",zn=class extends wt(){constructor(e){super();v(this,"ns");v(this,"tag");v(this,"text");v(this,"attributes");v(this,"children");v(this,"eventListeners");v(this,"_isRendered");v(this,"_revertData");Object.assign(this,v6(b6(e))),this._isRendered=!1,this._revertData=null}render(){let e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=C6(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new L("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(let n of t.children)Wp(n)?yield n:m_(n)&&(yield*e(n))}yield*e(this)}static bind(e,t){return{to(n,r){return new g6({eventNameOrFunction:n,attribute:n,observable:e,emitter:t,callback:r})},if(n,r,s){return new f_({observable:e,emitter:t,attribute:n,valueIfTrue:r,callback:s})}}}static extend(e,t){if(e._isRendered)throw new L("template-extend-render",[this,e]);x6(e,v6(b6(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new L("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||Qde,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Up(this.text)?this._bindToObservable({schema:this.text,updater:the(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;let t=e.node,n=e.revertData;for(let r in this.attributes){let s=t.getAttribute(r),o=this.attributes[r];n&&(n.attributes[r]=s);let l=k6(o)?o[0].ns:null;if(Up(o)){let u=k6(o)?o[0].value:o;n&&T6(r)&&u.unshift(s),this._bindToObservable({schema:u,updater:ihe(t,r,l),data:e})}else if(r=="style"&&typeof o[0]!="string")this._renderStyleAttribute(o[0],e);else{n&&s&&T6(r)&&o.unshift(s);let u=o.map(f=>f&&(f.value||f)).reduce((f,g)=>f.concat(g),[]).reduce(y6,"");wu(u)||t.setAttributeNS(l,r,u)}}}_renderStyleAttribute(e,t){let n=t.node;for(let r in e){let s=e[r];Up(s)?this._bindToObservable({schema:[s],updater:nhe(n,r),data:t}):n.style[r]=s}}_renderElementChildren(e){let t=e.node,n=e.intoFragment?document.createDocumentFragment():t,r=e.isApplying,s=0;for(let o of this.children)if(g_(o)){if(!r){o.setParent(t);for(let l of o)n.appendChild(l.element)}}else if(Wp(o))r||(o.isRendered||o.render(),n.appendChild(o.element));else if(gs(o))n.appendChild(o);else if(r){let l=e.revertData,u=C6();l.children.push(u),o._renderNode({intoFragment:!1,node:n.childNodes[s++],isApplying:!0,revertData:u})}else n.appendChild(o.render());e.intoFragment&&t.appendChild(n)}_setUpListeners(e){if(!!this.eventListeners)for(let t in this.eventListeners){let n=this.eventListeners[t].map(r=>{let[s,o]=t.split("@");return r.activateDomEventListener(s,o,e)});e.revertData&&e.revertData.bindings.push(n)}}_bindToObservable({schema:e,updater:t,data:n}){let r=n.revertData;p6(e,t,n);let s=e.filter(o=>!wu(o)).filter(o=>o.observable).map(o=>o.activateAttributeListener(e,t,n));r&&r.bindings.push(s)}_revertTemplateFromNode(e,t){for(let r of t.bindings)for(let s of r)s();if(t.text){e.textContent=t.text;return}let n=e;for(let r in t.attributes){let s=t.attributes[r];s===null?n.removeAttribute(r):n.setAttribute(r,s)}for(let r=0;r<t.children.length;++r)this._revertTemplateFromNode(n.childNodes[r],t.children[r])}},vu=class{constructor(e){v(this,"attribute");v(this,"observable");v(this,"emitter");v(this,"callback");this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){let t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,n){let r=()=>p6(e,t,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,r),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,r)}}},g6=class extends vu{constructor(e){super(e);v(this,"eventNameOrFunction");this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,n){let r=(s,o)=>{(!t||o.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(o):this.observable.fire(this.eventNameOrFunction,o))};return this.emitter.listenTo(n.node,e,r),()=>{this.emitter.stopListening(n.node,e,r)}}},f_=class extends vu{constructor(e){super(e);v(this,"valueIfTrue");this.valueIfTrue=e.valueIfTrue}getValue(e){let t=super.getValue(e);return wu(t)?!1:this.valueIfTrue||!0}};function Up(i){return i?(i.value&&(i=i.value),Array.isArray(i)?i.some(Up):i instanceof vu):!1}function ehe(i,e){return i.map(t=>t instanceof vu?t.getValue(e):t)}function p6(i,e,{node:t}){let n=ehe(i,t),r;i.length==1&&i[0]instanceof f_?r=n[0]:r=n.reduce(y6,""),wu(r)?e.remove():e.set(r)}function the(i){return{set(e){i.textContent=e},remove(){i.textContent=""}}}function ihe(i,e,t){return{set(n){i.setAttributeNS(t,e,n)},remove(){i.removeAttributeNS(t,e)}}}function nhe(i,e){return{set(t){i.style[e]=t},remove(){i.style[e]=null}}}function b6(i){return tl(i,t=>{if(t&&(t instanceof vu||m_(t)||Wp(t)||g_(t)))return t})}function v6(i){if(typeof i=="string"?i=ohe(i):i.text&&ahe(i),i.on&&(i.eventListeners=she(i.on),delete i.on),!i.text){i.attributes&&rhe(i.attributes);let e=[];if(i.children)if(g_(i.children))e.push(i.children);else for(let t of i.children)m_(t)||Wp(t)||gs(t)?e.push(t):e.push(new zn(t));i.children=e}return i}function rhe(i){for(let e in i)i[e].value&&(i[e].value=lt(i[e].value)),w6(i,e)}function she(i){for(let e in i)w6(i,e);return i}function ohe(i){return{text:[i]}}function ahe(i){i.text=lt(i.text)}function w6(i,e){i[e]=lt(i[e])}function y6(i,e){return wu(e)?i:wu(i)?e:`${i} ${e}`}function _6(i,e){for(let t in e)i[t]?i[t].push(...e[t]):i[t]=e[t]}function x6(i,e){if(e.attributes&&(i.attributes||(i.attributes={}),_6(i.attributes,e.attributes)),e.eventListeners&&(i.eventListeners||(i.eventListeners={}),_6(i.eventListeners,e.eventListeners)),e.text&&i.text.push(...e.text),e.children&&e.children.length){if(i.children.length!=e.children.length)throw new L("ui-template-extend-children-mismatch",i);let t=0;for(let n of e.children)x6(i.children[t++],n)}}function wu(i){return!i&&i!==0}function Wp(i){return i instanceof Ce}function m_(i){return i instanceof zn}function g_(i){return i instanceof rn}function k6(i){return it(i[0])&&i[0].ns}function C6(){return{children:[],bindings:[],attributes:{}}}function T6(i){return i=="class"||i=="style"}var Ce=class extends Vi(gt()){constructor(e){super();v(this,"element");v(this,"isRendered");v(this,"locale");v(this,"t");v(this,"template");v(this,"_viewCollections");v(this,"_unboundChildren");v(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Ht,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,n)=>{n.locale=e,n.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=zn.bind(this,this)}createCollection(e){let t=new rn(e);return this._viewCollections.add(t),t}registerChild(e){_n(e)||(e=[e]);for(let t of e)this._unboundChildren.add(t)}deregisterChild(e){_n(e)||(e=[e]);for(let t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new zn(e)}extendTemplate(e){zn.extend(this.template,e)}render(){if(this.isRendered)throw new L("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}};function pl({emitter:i,activator:e,callback:t,contextElements:n,listenerOptions:r}){i.listenTo(document,"mousedown",(s,o)=>{if(!e())return;let l=typeof o.composedPath=="function"?o.composedPath():[],u=typeof n=="function"?n():n;for(let f of u)if(f.contains(o.target)||l.includes(f))return;t()},r)}function tf(i){class e extends i{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...n){super(...n);this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}function yu({view:i}){i.listenTo(i.element,"submit",(e,t)=>{t.preventDefault(),i.fire("submit")},{useCapture:!0})}var I_=class extends Ce{constructor(){super();let e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){let t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),n=t.getAttribute("viewBox");n&&(this.viewBox=n);for(let{name:r,value:s}of Array.from(t.attributes))I_.presentationalAttributeNames.includes(r)&&this.element.setAttribute(r,s);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}},ir=I_;v(ir,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);var p_=class extends Ce{constructor(){super();this.set({style:void 0,text:void 0,id:void 0});let e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}},Ne=class extends Ce{constructor(e,t=new p_){super(e);v(this,"children");v(this,"labelView");v(this,"iconView");v(this,"keystrokeView");v(this,"_focusDelayed",null);let n=this.bindTemplate,r=Si();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${r}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new ir,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));let s={tag:"button",attributes:{class:["ck","ck-button",n.to("class"),n.if("isEnabled","ck-disabled",o=>!o),n.if("isVisible","ck-hidden",o=>!o),n.to("isOn",o=>o?"ck-on":"ck-off"),n.if("withText","ck-button_with-text"),n.if("withKeystroke","ck-button_with-keystroke")],role:n.to("role"),type:n.to("type",o=>o||"button"),tabindex:n.to("tabindex"),"aria-checked":n.to("_ariaChecked"),"aria-pressed":n.to("_ariaPressed"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy"),"aria-disabled":n.if("isEnabled",!0,o=>!o),"data-cke-tooltip-text":n.to("_tooltipString"),"data-cke-tooltip-position":n.to("tooltipPosition")},children:this.children,on:{click:n.to(o=>{this.isEnabled?this.fire("execute"):o.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(o,l,u)=>!l||E6(u)?!1:String(!!o)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(o,l,u)=>!l||!E6(u)?!1:String(!!o)),Le.isSafari&&(this._focusDelayed||(this._focusDelayed=nu(()=>this.focus(),0)),s.on.mousedown=n.to(()=>{this._focusDelayed()}),s.on.mouseup=n.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(s)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){let e=new Ce;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>Sh(t))}]}),e}_getTooltipString(e,t,n){return e?typeof e=="string"?e:(n&&(n=Sh(n)),e instanceof Function?e(t,n):`${t}${n?` (${n})`:""}`):""}};function E6(i){switch(i){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}var qp=class extends Ce{constructor(e,t={}){super(e);v(this,"children");v(this,"iconView");let n=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",n.to("class")]},children:this.children}),t.icon&&(this.iconView=new ir,this.iconView.content=t.icon,this.children.add(this.iconView));let r=new Ce(e);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:n.to("label")}]}),this.children.add(r)}},$i=class extends wt(){constructor(e){super();v(this,"focusables");v(this,"focusTracker");v(this,"keystrokeHandler");v(this,"actions");if(this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(let t in e.actions){let n=e.actions[t];typeof n=="string"&&(n=[n]);for(let r of n)e.keystrokeHandler.set(r,(s,o)=>{this[t](),o()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(b_)||null}get last(){return this.focusables.filter(b_).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,n)=>{let r=t.element===this.focusTracker.focusedElement;return r&&(e=n),r}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){let e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){let e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){let t=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",n=>{let r=t();this.focusNext(),r!==t()&&n.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",n=>{let r=t();this.focusPrevious(),r!==t()&&n.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){let t=this.focusables.length;if(!t)return null;let n=this.current;if(n===null)return this[e===1?"first":"last"];let r=this.focusables.get(n),s=(n+t+e)%t;do{let o=this.focusables.get(s);if(b_(o)){r=o;break}s=(s+t+e)%t}while(s!==n);return r}};function b_(i){return nf(i)&&Ur(i.element)}function nf(i){return"focus"in i&&typeof i.focus=="function"}function lhe(i){return nf(i)&&"focusCycler"in i&&i.focusCycler instanceof $i}function che(i){class e extends i{constructor(...n){super(...n);v(this,"_onDragBound",this._onDrag.bind(this));v(this,"_onDragEndBound",this._onDragEnd.bind(this));v(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(we.document,"mouseup",this._onDragEndBound),this.listenTo(we.document,"touchend",this._onDragEndBound),this.listenTo(we.document,"mousemove",this._onDragBound),this.listenTo(we.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(we.document,"mouseup",this._onDragEndBound),this.stopListening(we.document,"touchend",this._onDragEndBound),this.stopListening(we.document,"mousemove",this._onDragBound),this.stopListening(we.document,"touchmove",this._onDragBound)}_onDragStart(n,r){if(!this._isHandleElementPressed(r))return;this._attachDragListeners();let s=0,o=0;r instanceof MouseEvent?(s=r.clientX,o=r.clientY):(s=r.touches[0].clientX,o=r.touches[0].clientY),this._lastDraggingCoordinates={x:s,y:o},this.isDragging=!0}_onDrag(n,r){if(!this.isDragging){this._detachDragListeners();return}let s=0,o=0;r instanceof MouseEvent?(s=r.clientX,o=r.clientY):(s=r.touches[0].clientX,o=r.touches[0].clientY),r.preventDefault(),this.fire("drag",{deltaX:Math.round(s-this._lastDraggingCoordinates.x),deltaY:Math.round(o-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:s,y:o}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(n){return this.dragHandleElement?this.dragHandleElement===n.target||n.target instanceof HTMLElement&&this.dragHandleElement.contains(n.target):!1}}return e}var S6=class extends Ce{constructor(e){super(e);v(this,"children");v(this,"keystrokes");v(this,"focusCycler");v(this,"_focusTracker");v(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new Jt,this._focusTracker=new Vt,this._focusables=new rn,this.focusCycler=new $i({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(let t of e){let n=new Ne(this.locale),r;n.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(n);for(r in t)r!="onExecute"&&r!="onCreate"&&n.set(r,t[r]);this.children.add(n)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}},A6=class extends Ce{constructor(e){super(e);v(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}},nr={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},I6=ps("px"),P_=class extends che(Ce){constructor(e,{getCurrentDomRoot:t,getViewportOffset:n}){super(e);v(this,"parts");v(this,"headerView");v(this,"closeButtonView");v(this,"actionsView");v(this,"contentView");v(this,"keystrokes");v(this,"focusTracker");v(this,"wasMoved",!1);v(this,"_getCurrentDomRoot");v(this,"_getViewportOffset");v(this,"_focusables");v(this,"_focusCycler");let r=this.bindTemplate,s=e.t;this.set("className",""),this.set("ariaLabel",s("Editor dialog")),this.set("isModal",!1),this.set("position",nr.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=t,this._getViewportOffset=n,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Jt,this.focusTracker=new Vt,this._focusables=new rn,this._focusCycler=new $i({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",r.if("isModal","ck-dialog-overlay__transparent",o=>!o),r.if("_isVisible","ck-hidden",o=>!o)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",r.if("isModal","ck-dialog_modal"),r.to("className")],role:"dialog","aria-label":r.to("ariaLabel"),style:{top:r.to("_top",o=>I6(o)),left:r.to("_left",o=>I6(o)),visibility:r.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,t)=>{this.fire("close",{source:"escKeyPress"}),t()}),this.on("drag",(e,{deltaX:t,deltaY:n})=>{this.wasMoved=!0,this.moveBy(t,n)}),this.listenTo(we.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(we.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,t,n)=>{n&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:t,hasCloseButton:n=!0,content:r,actionButtons:s}){t&&(this.headerView=new qp(this.locale,{icon:e}),n&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=t,this.ariaLabel=t,this.parts.add(this.headerView,0)),r&&(r instanceof Ce&&(r=[r]),this.contentView=new A6(this.locale),this.contentView.children.addMany(r),this.parts.add(this.contentView)),s&&(this.actionsView=new S6(this.locale),this.actionsView.setButtons(s),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,t){let n=this._getViewportRect(),r=this._getDialogRect();e+r.width>n.right&&(e=n.right-r.width),e<n.left&&(e=n.left),t<n.top&&(t=n.top),this._moveTo(e,t)}_moveTo(e,t){this._left=e,this._top=t}moveBy(e,t){this.moveTo(this._left+e,this._top+t)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;let e=this._getViewportRect(),t=this.position,n;this._getCurrentDomRoot()?n=this._getVisibleDomRootRect(e):t=nr.SCREEN_CENTER;let r=P_.defaultOffset,s=this._getDialogRect();switch(t){case nr.EDITOR_TOP_SIDE:{if(n){let o=this.locale.contentLanguageDirection==="ltr"?n.right-s.width-r:n.left+r;this.moveTo(o,n.top+r)}else this._moveOffScreen();break}case nr.EDITOR_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-s.width/2),Math.round(n.top+n.height/2-s.height/2)):this._moveOffScreen();break}case nr.SCREEN_CENTER:{this.moveTo(Math.round((e.width-s.width)/2),Math.round((e.height-s.height)/2));break}case nr.EDITOR_TOP_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-s.width/2),n.top+r):this._moveOffScreen();break}case nr.EDITOR_BOTTOM_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-s.width/2),n.bottom-s.height-r):this._moveOffScreen();break}case nr.EDITOR_ABOVE_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-s.width/2),n.top-s.height-r):this._moveOffScreen();break}case nr.EDITOR_BELOW_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-s.width/2),n.bottom+r):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let t=new Be(this._getCurrentDomRoot()).getVisible();if(t){if(t=e.getIntersection(t),!t)return null}else return null;return t}_getDialogRect(){return new Be(this.element.firstElementChild)}_getViewportRect(){let e=new Be(we.window);if(this.isModal)return e;let t=ee({top:0,bottom:0,left:0,right:0},this._getViewportOffset());return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e.left+=t.left,e.right-=t.right,e.width-=t.left+t.right,e}_updateFocusCyclableItems(){let e=[];if(this.contentView)for(let t of this.contentView.children)nf(t)&&e.push(t);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element),lhe(t)&&this._focusCycler.chain(t.focusCycler)})}_createCloseButton(){let e=new Ne(this.locale),t=this.locale.t;return e.set({label:t("Close"),tooltip:!0,icon:$e.cancel}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}},_u=P_;v(_u,"defaultOffset",15);var go=class extends ne{constructor(e){super(e);v(this,"view");v(this,"_onHide");let t=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:t("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,t)=>{this._show(t)}),this.on("show",(e,t)=>{t.onShow&&t.onShow(this)},{priority:"low"}),this.on("hide",()=>{go._visibleDialogPlugin&&go._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){let e=this.editor;e.keystrokes.set("Ctrl+F6",(t,n)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),n())})}_initMultiRootIntegration(){let e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;let t=e.document.differ.getChangedRoots();for(let n of t)n.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:t,title:n,hasCloseButton:r=!0,content:s,actionButtons:o,className:l,isModal:u,position:f,onHide:g}){let p=this.editor;this.view=new _u(p.locale,{getCurrentDomRoot:()=>p.editing.view.getDomRoot(p.model.document.selection.anchor.root.rootName),getViewportOffset:()=>p.ui.viewportOffset});let y=this.view;y.on("close",()=>{this.hide()}),p.ui.view.body.add(y),p.keystrokes.listenTo(y.element),f||(f=u?nr.SCREEN_CENTER:nr.EDITOR_CENTER),u&&this._lockBodyScroll(),y.set({position:f,_isVisible:!0,className:l,isModal:u}),y.setupParts({icon:t,title:n,hasCloseButton:r,content:s,actionButtons:o}),this.id=e,g&&(this._onHide=g),this.isOpen=!0,go._visibleDialogPlugin=this}hide(){go._visibleDialogPlugin&&go._visibleDialogPlugin.fire(`hide:${go._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;let e=this.editor,t=this.view;t.isModal&&this._unlockBodyScroll(),t.contentView&&t.contentView.reset(),e.ui.view.body.remove(t),e.ui.focusTracker.remove(t.element),e.keystrokes.stopListening(t.element),t.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,go._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}},bl=go;v(bl,"_visibleDialogPlugin");var ca=class extends Ne{constructor(e,t=new p_){super(e,t);v(this,"_checkIconHolderView",new P6);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});let n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",n.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(r,s)=>r||s)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,t,n)=>{let{children:r,_checkIconHolderView:s}=this;n?r.add(s,0):r.remove(s)})}},P6=class extends Ce{constructor(){super();v(this,"children");v(this,"_checkIconView",this._createCheckIconView());let e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",t=>t?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,t,n)=>{let{children:r,_checkIconView:s}=this;n&&!r.has(s)?r.add(s):!n&&r.has(s)&&r.remove(s)})}_createCheckIconView(){let e=new ir;return e.content=$e.check,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}},st=class extends ca{constructor(e){super(e);this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}},vl=class extends Ce{constructor(e){super(e);v(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Si()}`;let t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}},R6=class extends Ce{constructor(e,t){super(e);let n=e.t,r=new vl;r.text=n("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":r.id,role:"document",tabindex:-1},children:[Ai(document,"p",{},n("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),r]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{let n=[Ai(document,"h3",{},t.label),...Array.from(t.groups.values()).map(r=>this._createGroup(r)).flat()];return t.description&&n.splice(1,0,Ai(document,"p",{},t.description)),Ai(document,"section",{},n)})}_createGroup(e){let t=e.keystrokes.sort((r,s)=>r.label.localeCompare(s.label)).map(r=>this._createGroupRow(r)).flat(),n=[Ai(document,"dl",{},t)];return e.label&&n.unshift(Ai(document,"h4",{},e.label)),n}_createGroupRow(e){let t=this.locale.t,n=Ai(document,"dt"),r=Ai(document,"dd"),s=dhe(e.keystroke),o=[];for(let l of s)o.push(l.map(uhe).join(""));return n.innerHTML=e.label,r.innerHTML=o.join(", ")+(e.mayRequireFn&&Le.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[n,r]}};function uhe(i){return Sh(i).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function dhe(i){return typeof i=="string"?[[i]]:typeof i[0]=="string"?[i]:i}var O6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>',v_=class extends ne{constructor(){super(...arguments);v(this,"contentView",null)}static get requires(){return[bl]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{let n=this._createButton(Ne);return n.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),n}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{let n=this._createButton(st);return n.label=t("Accessibility"),n}),e.keystrokes.set("Alt+0",(n,r)=>{this._toggleDialog(),r()}),this._setupRootLabels()}_createButton(e){let t=this.editor,n=t.plugins.get("Dialog"),r=t.locale,s=new e(r);return s.set({keystroke:"Alt+0",icon:O6,isToggleable:!0}),s.on("execute",()=>this._toggleDialog()),s.bind("isOn").to(n,"id",o=>o==="accessibilityHelp"),s}_setupRootLabels(){let e=this.editor,t=e.editing.view,n=e.t;e.ui.on("ready",()=>{t.change(s=>{for(let o of t.document.roots)r(s,o)}),e.on("addRoot",(s,o)=>{let l=e.editing.view.document.getRoot(o.rootName);t.change(u=>r(u,l))},{priority:"low"})});function r(s,o){let u=[o.getAttribute("aria-label"),n("Press %0 for help.",[Sh("Alt+0")])].filter(f=>f).join(". ");s.setAttribute("aria-label",u,o)}}_toggleDialog(){let e=this.editor,t=e.plugins.get("Dialog"),n=e.locale.t;this.contentView||(this.contentView=new R6(e.locale,e.accessibility.keystrokeInfos)),t.id==="accessibilityHelp"?t.hide():t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:n("Accessibility help"),icon:O6,hasCloseButton:!0,content:this.contentView})}},M6=class extends rn{constructor(e,t=[]){super(t);v(this,"locale");v(this,"_bodyCollectionContainer");this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new zn({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=Ai(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();let e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}},ua=class extends Ne{constructor(e){super(e);v(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){let e=new Ce;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}};var L6=class extends hhe(ca){};function hhe(i){class e extends i{constructor(...n){super(...n);v(this,"buttonView");v(this,"_fileInputView");this.buttonView=this,this._fileInputView=new D6(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return e}var D6=class extends Ce{constructor(e){super(e);this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);let t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}},$p='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';var ys=class extends Ce{constructor(e,t){super(e);v(this,"fieldView");v(this,"labelView");v(this,"statusView");v(this,"fieldWrapperChildren");let n=`ck-labeled-field-view-${Si()}`,r=`ck-labeled-field-view-status-${Si()}`;this.fieldView=t(this,n,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(o,l)=>o||l);let s=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",s.to("class"),s.if("isEnabled","ck-disabled",o=>!o),s.if("isEmpty","ck-labeled-field-view_empty"),s.if("isFocused","ck-labeled-field-view_focused"),s.if("placeholder","ck-labeled-field-view_placeholder"),s.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){let t=new vl(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){let t=new Ce(this.locale),n=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",r=>!r)],id:e,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}},V6=class extends Ce{constructor(e){super(e);v(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Vt,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);let t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...n)=>{this.fire("input",...n),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,n)=>{this._setDomElementValue(n),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=fhe(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}};function fhe(i){return!i.value}var B6=class extends V6{constructor(e){super(e);this.set("inputMode","text");let t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}},w_=class extends B6{constructor(e){super(e);this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}};var N6=class extends Ce{constructor(e){super(e);v(this,"children");let t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",n=>`ck-dropdown__panel_${n}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(){if(this.children.length){let e=this.children.first;typeof e.focus=="function"?e.focus():at("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){let e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}},eb=class extends Ce{constructor(e,t,n){super(e);v(this,"buttonView");v(this,"panelView");v(this,"focusTracker");v(this,"keystrokes");v(this,"listView");v(this,"toolbarView");v(this,"menuView");let r=this.bindTemplate;this.buttonView=t,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Jt,this.focusTracker=new Vt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",s=>!s)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[t,n]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,n,r)=>{if(!!r)if(this.panelPosition==="auto"){let s=eb._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=s?s.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);let e=(t,n)=>{this.isOpen&&(this.isOpen=!1,n())};this.keystrokes.set("arrowdown",(t,n)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,n())}),this.keystrokes.set("arrowright",(t,n)=>{this.isOpen&&n()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){let{south:e,north:t,southEast:n,southWest:r,northEast:s,northWest:o,southMiddleEast:l,southMiddleWest:u,northMiddleEast:f,northMiddleWest:g}=eb.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[n,r,l,u,e,s,o,f,g,t]:[r,n,u,l,e,o,s,g,f,t]}},rf=eb;v(rf,"defaultPanelPositions",{south:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,t)=>({top:e.bottom,left:e.left-t.width+e.width,name:"sw"}),southMiddleEast:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"}),southMiddleWest:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)*3/4,name:"smw"}),north:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"}),northEast:(e,t)=>({top:e.top-t.height,left:e.left,name:"ne"}),northWest:(e,t)=>({top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"}),northMiddleEast:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"}),northMiddleWest:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)*3/4,name:"nmw"})}),v(rf,"_getOptimalPosition",Th);var y_=class extends Ne{constructor(e){super(e);v(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){let e=new ir;return e.content=$p,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}};var F6=class extends ca{constructor(e){super(e);v(this,"arrowView");let t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-dropdown-menu-list__nested-menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){let e=new ir;return e.content=$p,e.extendTemplate({attributes:{class:"ck-dropdown-menu-list__nested-menu__button__arrow"}}),e}},_s=class extends Ce{constructor(e){super(e);v(this,"children");let t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",n=>!n)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}},xu=class extends Ce{constructor(e){super(e);this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}},sf=class extends Ce{constructor(e,t=new vl){super(e);v(this,"labelView");v(this,"items");v(this,"children");let n=this.bindTemplate,r=new ku(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,r]),r.set({role:"group",ariaLabelledBy:t.id}),r.focusTracker.destroy(),r.keystrokes.destroy(),this.items=r.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",n.if("isVisible","ck-hidden",s=>!s)]},children:this.children})}focus(){if(this.items){let e=this.items.find(t=>!(t instanceof xu));e&&e.focus()}}},ku=class extends Ce{constructor(e){super(e);v(this,"focusables");v(this,"items");v(this,"focusTracker");v(this,"keystrokes");v(this,"_focusCycler");v(this,"_listItemGroupToChangeListeners",new WeakMap);let t=this.bindTemplate;this.focusables=new rn,this.items=this.createCollection(),this.focusTracker=new Vt,this.keystrokes=new Jt,this._focusCycler=new $i({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(let e of this.items)e instanceof sf?this._registerFocusableItemsGroup(e):e instanceof _s&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(let n of t.removed)n instanceof sf?this._deregisterFocusableItemsGroup(n):n instanceof _s&&this._deregisterFocusableListItem(n);for(let n of Array.from(t.added).reverse())n instanceof sf?this._registerFocusableItemsGroup(n,t.index):this._registerFocusableListItem(n,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,n)=>{for(let r of n.removed)this._deregisterFocusableListItem(r);for(let r of Array.from(n.added).reverse())this._registerFocusableListItem(r,this.items.getIndex(e)+n.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((r,s)=>{let o=typeof t!="undefined"?t+s:void 0;this._registerFocusableListItem(r,o)});let n=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,n),e.items.on("change",n)}_deregisterFocusableItemsGroup(e){for(let t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}},j6=class extends ku{constructor(e){super(e);let t=this.bindTemplate;this.role="menu",this.set("isVisible",!0),this.extendTemplate({attributes:{class:["ck-dropdown-menu-list",t.if("isVisible","ck-hidden",n=>!n)]}})}};var Gp=5,mhe={eastSouth:i=>({top:i.top,left:i.right-Gp,name:"es"}),eastNorth:(i,e)=>({top:i.top-e.height+i.height,left:i.right-Gp,name:"en"}),westSouth:(i,e)=>({top:i.top,left:i.left-e.width+Gp,name:"ws"}),westNorth:(i,e)=>({top:i.top-e.height+i.height,left:i.left-e.width+Gp,name:"wn"})};var Cu={openOnArrowRightKey(i){let e=i.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";i.keystrokes.set(e,(t,n)=>{i.focusTracker.focusedElement!==i.buttonView.element||!i.isEnabled||(i.isOpen||(i.isOpen=!0),i.panelView.focus(),n())})},openOnButtonClick(i){i.buttonView.on("execute",()=>{i.isEnabled&&(i.isOpen=!0)})},openAndFocusOnEnterKeyPress(i){i.keystrokes.set("enter",(e,t)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen=!0,i.panelView.focus(),t())})},closeOnArrowLeftKey(i){let e=i.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";i.keystrokes.set(e,(t,n)=>{i.isOpen&&(i.focus(),i.isOpen=!1,n())})},closeOnEscKey(i){i.keystrokes.set("esc",(e,t)=>{i.isOpen&&(i.focus(),i.isOpen=!1,t())})},closeOnParentClose(i,e){e.on("change:isOpen",(t,n,r)=>{!r&&t.source===e&&(i.isOpen=!1)})}},H6=ps("px"),ghe={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},fa=class extends Ce{constructor(e){super(e);v(this,"content");v(this,"_pinWhenIsVisibleCallback");v(this,"_resizeObserver");let t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",n=>`ck-balloon-panel_${n}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",H6),left:t.to("left",H6)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){let t=Kp(e.target);if(t&&!Ur(t))return!1;this.show();let n=fa.defaultPositions,r=Object.assign({},{element:this.element,positions:[n.southArrowNorth,n.southArrowNorthMiddleWest,n.southArrowNorthMiddleEast,n.southArrowNorthWest,n.southArrowNorthEast,n.northArrowSouth,n.northArrowSouthMiddleWest,n.northArrowSouthMiddleEast,n.northArrowSouthWest,n.northArrowSouthEast,n.viewportStickyNorth],limiter:we.document.body,fitInViewport:!0},e),s=fa._getOptimalPosition(r)||ghe,o=parseInt(s.left),l=parseInt(s.top),u=s.name,f=s.config||{},{withArrow:g=!0}=f;return this.top=l,this.left=o,this.position=u,this.withArrow=g,!0}pin(e){this.unpin(),!!this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let t=Kp(e.target),n=e.limiter?Kp(e.limiter):we.document.body;if(this.listenTo(we.document,"scroll",(r,s)=>{let o=s.target,l=t&&o.contains(t),u=n&&o.contains(n);(l||u||!t||!n)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(we.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(t&&jt(t)&&(t=t.parentElement),t)){let r=()=>{Ur(t)||this.unpin()};this._resizeObserver=new io(t,r)}return!0}_stopPinning(){this.stopListening(we.document,"scroll"),this.stopListening(we.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){let{sideOffset:t=fa.arrowSideOffset,heightOffset:n=fa.arrowHeightOffset,stickyVerticalOffset:r=fa.stickyVerticalOffset,config:s}=e;return{northWestArrowSouthWest:(u,f)=>ee({top:o(u,f),left:u.left-t,name:"arrow_sw"},s&&{config:s}),northWestArrowSouthMiddleWest:(u,f)=>ee({top:o(u,f),left:u.left-f.width*.25-t,name:"arrow_smw"},s&&{config:s}),northWestArrowSouth:(u,f)=>ee({top:o(u,f),left:u.left-f.width/2,name:"arrow_s"},s&&{config:s}),northWestArrowSouthMiddleEast:(u,f)=>ee({top:o(u,f),left:u.left-f.width*.75+t,name:"arrow_sme"},s&&{config:s}),northWestArrowSouthEast:(u,f)=>ee({top:o(u,f),left:u.left-f.width+t,name:"arrow_se"},s&&{config:s}),northArrowSouthWest:(u,f)=>ee({top:o(u,f),left:u.left+u.width/2-t,name:"arrow_sw"},s&&{config:s}),northArrowSouthMiddleWest:(u,f)=>ee({top:o(u,f),left:u.left+u.width/2-f.width*.25-t,name:"arrow_smw"},s&&{config:s}),northArrowSouth:(u,f)=>ee({top:o(u,f),left:u.left+u.width/2-f.width/2,name:"arrow_s"},s&&{config:s}),northArrowSouthMiddleEast:(u,f)=>ee({top:o(u,f),left:u.left+u.width/2-f.width*.75+t,name:"arrow_sme"},s&&{config:s}),northArrowSouthEast:(u,f)=>ee({top:o(u,f),left:u.left+u.width/2-f.width+t,name:"arrow_se"},s&&{config:s}),northEastArrowSouthWest:(u,f)=>ee({top:o(u,f),left:u.right-t,name:"arrow_sw"},s&&{config:s}),northEastArrowSouthMiddleWest:(u,f)=>ee({top:o(u,f),left:u.right-f.width*.25-t,name:"arrow_smw"},s&&{config:s}),northEastArrowSouth:(u,f)=>ee({top:o(u,f),left:u.right-f.width/2,name:"arrow_s"},s&&{config:s}),northEastArrowSouthMiddleEast:(u,f)=>ee({top:o(u,f),left:u.right-f.width*.75+t,name:"arrow_sme"},s&&{config:s}),northEastArrowSouthEast:(u,f)=>ee({top:o(u,f),left:u.right-f.width+t,name:"arrow_se"},s&&{config:s}),southWestArrowNorthWest:u=>ee({top:l(u),left:u.left-t,name:"arrow_nw"},s&&{config:s}),southWestArrowNorthMiddleWest:(u,f)=>ee({top:l(u),left:u.left-f.width*.25-t,name:"arrow_nmw"},s&&{config:s}),southWestArrowNorth:(u,f)=>ee({top:l(u),left:u.left-f.width/2,name:"arrow_n"},s&&{config:s}),southWestArrowNorthMiddleEast:(u,f)=>ee({top:l(u),left:u.left-f.width*.75+t,name:"arrow_nme"},s&&{config:s}),southWestArrowNorthEast:(u,f)=>ee({top:l(u),left:u.left-f.width+t,name:"arrow_ne"},s&&{config:s}),southArrowNorthWest:u=>ee({top:l(u),left:u.left+u.width/2-t,name:"arrow_nw"},s&&{config:s}),southArrowNorthMiddleWest:(u,f)=>ee({top:l(u),left:u.left+u.width/2-f.width*.25-t,name:"arrow_nmw"},s&&{config:s}),southArrowNorth:(u,f)=>ee({top:l(u),left:u.left+u.width/2-f.width/2,name:"arrow_n"},s&&{config:s}),southArrowNorthMiddleEast:(u,f)=>ee({top:l(u),left:u.left+u.width/2-f.width*.75+t,name:"arrow_nme"},s&&{config:s}),southArrowNorthEast:(u,f)=>ee({top:l(u),left:u.left+u.width/2-f.width+t,name:"arrow_ne"},s&&{config:s}),southEastArrowNorthWest:u=>ee({top:l(u),left:u.right-t,name:"arrow_nw"},s&&{config:s}),southEastArrowNorthMiddleWest:(u,f)=>ee({top:l(u),left:u.right-f.width*.25-t,name:"arrow_nmw"},s&&{config:s}),southEastArrowNorth:(u,f)=>ee({top:l(u),left:u.right-f.width/2,name:"arrow_n"},s&&{config:s}),southEastArrowNorthMiddleEast:(u,f)=>ee({top:l(u),left:u.right-f.width*.75+t,name:"arrow_nme"},s&&{config:s}),southEastArrowNorthEast:(u,f)=>ee({top:l(u),left:u.right-f.width+t,name:"arrow_ne"},s&&{config:s}),westArrowEast:(u,f)=>ee({top:u.top+u.height/2-f.height/2,left:u.left-f.width-n,name:"arrow_e"},s&&{config:s}),eastArrowWest:(u,f)=>ee({top:u.top+u.height/2-f.height/2,left:u.right+n,name:"arrow_w"},s&&{config:s}),viewportStickyNorth:(u,f,g,p)=>{let y=p||g;return!u.getIntersection(y)||y.height-u.height>r?null:{top:y.top+r,left:u.left+u.width/2-f.width/2,name:"arrowless",config:ee({withArrow:!1},s)}}};function o(u,f){return u.top-f.height-n}function l(u){return u.bottom+n}}},kn=fa;v(kn,"arrowSideOffset",25),v(kn,"arrowHeightOffset",10),v(kn,"stickyVerticalOffset",20),v(kn,"_getOptimalPosition",Th),v(kn,"defaultPositions",fa.generatePositions());function Kp(i){return Xn(i)?i:Ch(i)?i.commonAncestorContainer:typeof i=="function"?Kp(i()):null}var z6=class extends kn{constructor(e){super(e);let t=this.bindTemplate;this.set({isVisible:!1,position:"se",class:null,top:0,left:0}),this.extendTemplate({tag:"div",attributes:{class:["ck-reset","ck-dropdown-menu__nested-menu__panel"],tabindex:"-1"},on:{selectstart:t.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(e=1){let{content:t}=this;t.length&&(e===1?t.first.focus():t.last.focus())}},R_=class extends Ce{constructor(e,t,n,r,s){super(e);v(this,"id");v(this,"buttonView");v(this,"panelView");v(this,"listView");v(this,"focusTracker");v(this,"keystrokes");v(this,"_bodyCollection");this._bodyCollection=t,this.id=n,this.set({isOpen:!1,isEnabled:!0,panelPosition:"w",class:void 0,parentMenuView:null}),this.keystrokes=new Jt,this.focusTracker=new Vt,this.buttonView=new F6(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.buttonView.label=r,this.panelView=new z6(e),this.panelView.isVisible=!0,this.listView=new j6(e),this.listView.bind("ariaLabel").to(this.buttonView,"label"),this.panelView.content.add(this.listView);let o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown-menu-list__nested-menu",o.to("class"),o.if("isEnabled","ck-disabled",l=>!l)],role:"presentation"},children:[this.buttonView]}),this.parentMenuView=s,this.parentMenuView&&this._handleParentMenuView(),this._attachBehaviors()}get _panelPositions(){let{westSouth:e,eastSouth:t,westNorth:n,eastNorth:r}=mhe;return this.locale.uiLanguageDirection==="ltr"?[t,r,e,n]:[e,n,t,r]}render(){super.render(),this.panelView.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.focusTracker.add(this.listView),this.keystrokes.listenTo(this.element),this._mountPanelOnOpen()}destroy(){this._removePanelFromBody(),this.panelView.destroy(),super.destroy()}focus(){this.buttonView.focus()}_handleParentMenuView(){this.delegate(...R_.DELEGATED_EVENTS).to(this.parentMenuView),Cu.closeOnParentClose(this,this.parentMenuView)}_attachBehaviors(){Cu.openOnButtonClick(this),Cu.openAndFocusOnEnterKeyPress(this),Cu.openOnArrowRightKey(this),Cu.closeOnEscKey(this),Cu.closeOnArrowLeftKey(this)}_mountPanelOnOpen(){let{panelView:e}=this;this.on("change:isOpen",(t,n,r)=>{if(t.source===this){if(!r&&this._bodyCollection.has(e)){this._removePanelFromBody();return}r&&!this._bodyCollection.has(e)&&this._addPanelToBody()}})}_removePanelFromBody(){let{panelView:e,keystrokes:t}=this;this._bodyCollection.has(e)&&(this._bodyCollection.remove(e),t.stopListening(e.element))}_addPanelToBody(){let{panelView:e,buttonView:t,keystrokes:n}=this;this._bodyCollection.has(e)||(this._bodyCollection.add(e),n.listenTo(e.element),e.pin({positions:this._panelPositions,limiter:we.document.body,element:e.element,target:t.element,fitInViewport:!0}))}},U6=R_;v(U6,"DELEGATED_EVENTS",["mouseenter","execute","change:isOpen"]);var Yp=class extends Ce{constructor(e){super(e);this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}},W6=class extends Ce{constructor(e){super(e);this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}};function phe(i){return i.bindTemplate.to(e=>{e.target===i.element&&e.preventDefault()})}function Zp(i){if(Array.isArray(i))return{items:i,removeItems:[]};let e={items:[],removeItems:[]};return i?ee(ee({},e),i):e}var bhe=(()=>({alignLeft:$e.alignLeft,bold:$e.bold,importExport:$e.importExport,paragraph:$e.paragraph,plus:$e.plus,text:$e.text,threeVerticalDots:$e.threeVerticalDots,pilcrow:$e.pilcrow,dragIndicator:$e.dragIndicator}))(),fo=class extends Ce{constructor(e,t){super(e);v(this,"options");v(this,"items");v(this,"focusTracker");v(this,"keystrokes");v(this,"itemsView");v(this,"children");v(this,"focusables");v(this,"_focusCycler");v(this,"_behavior");let n=this.bindTemplate,r=this.t;this.options=t||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Vt,this.keystrokes=new Jt,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new q6(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();let s=e.uiLanguageDirection==="rtl";this._focusCycler=new $i({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[s?"arrowright":"arrowleft","arrowup"],focusNext:[s?"arrowleft":"arrowright","arrowdown"]}});let o=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&o.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:o,role:"toolbar","aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:phe(this)}}),this._behavior=this.options.shouldGroupWhenFull?new G6(this):new $6(this)}render(){super.render(),this.focusTracker.add(this.element);for(let e of this.items)this.focusTracker.add(e);this.items.on("add",(e,t)=>{this.focusTracker.add(t)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,n){this.items.addMany(this._buildItemsFromConfig(e,t,n))}_buildItemsFromConfig(e,t,n){let r=Zp(e),s=n||r.removeItems;return this._cleanItemsConfiguration(r.items,t,s).map(l=>it(l)?this._createNestedToolbarDropdown(l,t,s):l==="|"?new Yp:l==="-"?new W6:t.create(l)).filter(l=>!!l)}_cleanItemsConfiguration(e,t,n){let r=e.filter((s,o,l)=>s==="|"?!0:n.indexOf(s)!==-1?!1:s==="-"?this.options.shouldGroupWhenFull?(at("toolbarview-line-break-ignored-when-grouping-items",l),!1):!0:!it(s)&&!t.has(s)?(at("toolbarview-item-unavailable",{item:s}),!1):!0);return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(e){let t=o=>o!=="-"&&o!=="|",n=e.length,r=e.findIndex(t);if(r===-1)return[];let s=n-e.slice().reverse().findIndex(t);return e.slice(r,s).filter((o,l,u)=>t(o)?!0:!(l>0&&u[l-1]===o))}_createNestedToolbarDropdown(e,t,n){let{label:r,icon:s,items:o,tooltip:l=!0,withText:u=!1}=e;if(o=this._cleanItemsConfiguration(o,t,n),!o.length)return null;let f=this.locale,g=Cn(f);return r||at("toolbarview-nested-toolbar-dropdown-missing-label",e),g.class="ck-toolbar__nested-toolbar-dropdown",g.buttonView.set({label:r,tooltip:l,withText:!!u}),s!==!1?g.buttonView.icon=bhe[s]||s||$e.threeVerticalDots:g.buttonView.withText=!0,of(g,()=>g.toolbarView._buildItemsFromConfig(o,t,n)),g}},q6=class extends Ce{constructor(e){super(e);v(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}},$6=class{constructor(e){let t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(n=>n),e.focusables.bindTo(e.items).using(n=>nf(n)?n:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}},G6=class{constructor(e){v(this,"view");v(this,"viewChildren");v(this,"viewFocusables");v(this,"viewItemsView");v(this,"viewFocusTracker");v(this,"viewLocale");v(this,"ungroupedItems");v(this,"groupedItems");v(this,"groupedItemsDropdown");v(this,"resizeObserver",null);v(this,"cachedPadding",null);v(this,"shouldUpdateGroupingOnNextResize",!1);v(this,"viewElement");this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,n)=>{let r=n.index,s=Array.from(n.added);for(let o of n.removed)r>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=r;o<r+s.length;o++){let l=s[o-r];o>this.ungroupedItems.length?this.groupedItems.add(l,o-this.ungroupedItems.length):this.ungroupedItems.add(l,o)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Ur(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}let e=this.groupedItems.length,t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;let e=this.viewElement,t=this.viewLocale.uiLanguageDirection,n=new Be(e.lastChild),r=new Be(e);if(!this.cachedPadding){let s=we.window.getComputedStyle(e),o=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(s[o])}return t==="ltr"?n.right>r.right-this.cachedPadding:n.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new io(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Yp),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){let e=this.viewLocale,t=e.t,n=Cn(e);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",of(n,this.groupedItems),n.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:$e.threeVerticalDots}),n}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{nf(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}},wl=class extends Ce{constructor(e,t){super(e);v(this,"children");v(this,"actionView");v(this,"arrowView");v(this,"keystrokes");v(this,"focusTracker");let n=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new Jt,this.focusTracker=new Vt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",n.to("class"),n.if("isVisible","ck-hidden",r=>!r),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){let t=e||new Ne;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){let e=new Ne,t=e.bindTemplate;return e.icon=$p,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",n=>String(n))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}};function Cn(i,e=y_){let t=typeof e=="function"?new e(i):e,n=new N6(i),r=new rf(i,t,n);return t.bind("isEnabled").to(r),t instanceof wl?t.arrowView.bind("isOn").to(r,"isOpen"):t.bind("isOn").to(r,"isOpen"),vhe(r),r}function of(i,e,t={}){i.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),i.isOpen?K6(i,e,t):i.once("change:isOpen",()=>K6(i,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&Jp(i,()=>i.toolbarView.items.find(n=>n.isOn))}function K6(i,e,t){let n=i.locale,r=n.t,s=i.toolbarView=new fo(n),o=typeof e=="function"?e():e;s.ariaLabel=t.ariaLabel||r("Dropdown toolbar"),t.maxWidth&&(s.maxWidth=t.maxWidth),t.class&&(s.class=t.class),t.isCompact&&(s.isCompact=t.isCompact),t.isVertical&&(s.isVertical=!0),o instanceof rn?s.items.bindTo(o).using(l=>l):s.items.addMany(o),i.panelView.children.add(s),i.focusTracker.add(s),s.items.delegate("execute").to(i)}function mo(i,e,t={}){i.isOpen?Y6(i,e,t):i.once("change:isOpen",()=>Y6(i,e,t),{priority:"highest"}),Jp(i,()=>i.listView.items.find(n=>n instanceof _s?n.children.first.isOn:!1))}function Y6(i,e,t){let n=i.locale,r=i.listView=new ku(n),s=typeof e=="function"?e():e;r.ariaLabel=t.ariaLabel,r.role=t.role,J6(i,r.items,s,n),i.panelView.children.add(r),r.items.delegate("execute").to(i)}function Jp(i,e){i.on("change:isOpen",()=>{if(!i.isOpen)return;let t=e();!t||(typeof t.focus=="function"?t.focus():at("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:Ui.low-10})}function vhe(i){whe(i),yhe(i),_he(i),xhe(i),khe(i),Che(i)}function whe(i){pl({emitter:i,activator:()=>i.isRendered&&i.isOpen,callback:()=>{i.isOpen=!1},contextElements:()=>[i.element,...Z6(i.focusTracker).filter(e=>!i.element.contains(e))]})}function Z6(i){return[...i.elements,...i.externalViews.flatMap(e=>Z6(e.focusTracker))]}function yhe(i){i.on("execute",e=>{e.source instanceof ua||(i.isOpen=!1)})}function _he(i){i.focusTracker.on("change:isFocused",(e,t,n)=>{n||!i.isOpen||(i.isOpen=!1)})}function xhe(i){i.keystrokes.set("arrowdown",(e,t)=>{i.isOpen&&(i.panelView.focus(),t())}),i.keystrokes.set("arrowup",(e,t)=>{i.isOpen&&(i.panelView.focusLast(),t())})}function khe(i){i.on("change:isOpen",(e,t,n)=>{if(n)return;i.focusTracker.elements.some(s=>s.contains(we.document.activeElement))&&i.buttonView.focus()})}function Che(i){i.on("change:isOpen",(e,t,n)=>{!n||i.panelView.focus()},{priority:"low"})}function J6(i,e,t,n){e.on("change",()=>{let r=[...e].reduce((o,l)=>(l instanceof _s&&l.children.first instanceof ca&&o.push(l.children.first),o),[]),s=r.some(o=>o.isToggleable);r.forEach(o=>{o.hasCheckSpace=s})}),e.bindTo(t).using(r=>{if(r.type==="separator")return new xu(n);if(r.type==="group"){let s=new sf(n);return s.set({label:r.label}),J6(i,s.items,r.items,n),s.items.delegate("execute").to(i),s}else if(r.type==="button"||r.type==="switchbutton"){let s=r.model.role==="menuitemcheckbox"||r.model.role==="menuitemradio",o=new _s(n),l;return r.type==="button"?(l=new ca(n),l.set({isToggleable:s})):l=new ua(n),l.bind(...Object.keys(r.model)).to(r.model),l.delegate("execute").to(o),o.children.add(l),o}return null})}var yl=(i,e,t)=>{let n=new w_(i.locale);return n.set({id:e,ariaDescribedById:t}),n.bind("isReadOnly").to(i,"isEnabled",r=>!r),n.bind("hasError").to(i,"errorText",r=>!!r),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n};var X6=class{constructor(e){v(this,"editor");v(this,"_components",new Map);this.editor=e}*names(){for(let e of this._components.values())yield e.originalName}add(e,t){this._components.set(__(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new L("componentfactory-item-missing",this,{name:e});return this._components.get(__(e)).callback(this.editor.locale)}has(e){return this._components.has(__(e))}};function __(i){return String(i).toLowerCase()}var Q6="ck-tooltip",Tn=class extends Vi(){constructor(e){super();v(this,"tooltipTextView");v(this,"balloonPanelView");v(this,"_currentElementWithTooltip",null);v(this,"_currentTooltipPosition",null);v(this,"_mutationObserver",null);v(this,"_pinTooltipDebounced");v(this,"_unpinTooltipDebounced");v(this,"_watchdogExcluded");if(Tn._editors.add(e),Tn._instance)return Tn._instance;Tn._instance=this,this.tooltipTextView=new Ce(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new kn(e.locale),this.balloonPanelView.class=Q6,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=The(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=wr(this._pinTooltip,600),this._unpinTooltipDebounced=wr(this._unpinTooltip,400),this.listenTo(we.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(we.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(we.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(we.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(we.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(we.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){let t=e.ui.view&&e.ui.view.body;Tn._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),Tn._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Tn._instance=null)}static getPositioningFunctions(e){let t=Tn.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){let n=x_(t);if(!n){e.name==="focus"&&this._unpinTooltip();return}n!==this._currentElementWithTooltip&&(this._unpinTooltip(),e.name==="focus"&&!n.matches(":hover")?this._pinTooltip(n,k_(n)):this._pinTooltipDebounced(n,k_(n)))}_onLeaveOrBlur(e,{target:t,relatedTarget:n}){if(e.name==="mouseleave"){if(!Xn(t))return;let r=this.balloonPanelView.element,s=r&&(r===n||r.contains(n)),o=!s&&t===r;if(s){this._unpinTooltipDebounced.cancel();return}if(!o&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;let l=x_(t),u=x_(n);(o||l&&l!==u)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){!this._currentElementWithTooltip||t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip()}_pinTooltip(e,{text:t,position:n,cssClass:r}){this._unpinTooltip();let s=$t(Tn._editors.values()).ui.view.body;s.has(this.balloonPanelView)||s.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.class=[Q6,r].filter(o=>o).join(" "),this.balloonPanelView.pin({target:e,positions:Tn.getPositioningFunctions(n)}),this._mutationObserver.attach(e);for(let o of Tn._editors)this.listenTo(o.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=n}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(let e of Tn._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;let e=k_(this._currentElementWithTooltip);if(!Ur(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Tn.getPositioningFunctions(e.position)})}},af=Tn;v(af,"defaultBalloonPositions",kn.generatePositions({heightOffset:5,sideOffset:13})),v(af,"_editors",new Set),v(af,"_instance",null);function x_(i){return Xn(i)?i.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function k_(i){return{text:i.dataset.ckeTooltipText,position:i.dataset.ckeTooltipPosition||"s",cssClass:i.dataset.ckeTooltipClass||""}}function The(i){let e=new MutationObserver(()=>{i()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}var Ehe=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,She=53,Ahe=10,Ihe=50,Phe=350,Rhe="Powered by",e7=class extends Vi(){constructor(e){super();v(this,"editor");v(this,"_balloonView");v(this,"_showBalloonThrottled");v(this,"_lastFocusedEditableElement");this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=sa(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){let e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){let e=this.editor,t=!!e.config.get("ui.poweredBy.forceVisible");!t&&qL(e.config.get("licenseKey"))==="VALID"||!e.ui.view||(e.ui.focusTracker.on("change:isFocused",(n,r,s)=>{this._updateLastFocusedEditableElement(),s?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(n,r,s)=>{this._updateLastFocusedEditableElement(),s&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){let e=this.editor,t=this._balloonView=new kn,n=n7(e),r=new t7(e.locale,n.label);t.content.add(r),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),this._balloonView=t}_showBalloon(){if(!this._lastFocusedEditableElement)return;let e=Ohe(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){let e=this.editor,t=e.ui.focusTracker.isFocused,n=e.ui.focusTracker.focusedElement;if(!t||!n){this._lastFocusedEditableElement=null;return}let r=Array.from(e.ui.getEditableElementsNames()).map(s=>e.ui.getEditableElement(s));r.includes(n)?this._lastFocusedEditableElement=n:this._lastFocusedEditableElement=r[0]}},t7=class extends Ce{constructor(e,t){super(e);let n=new ir,r=this.bindTemplate;n.set({content:Ehe,isColorInherited:!1}),n.extendTemplate({attributes:{style:{width:She+"px",height:Ahe+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],n],on:{dragstart:r.to(s=>s.preventDefault())}}]})}};function Ohe(i,e){let t=n7(i),n=t.side==="right"?Mhe(e,t):Lhe(e,t);return{target:e,positions:[n]}}function Mhe(i,e){return i7(i,e,(t,n)=>t.left+t.width-n.width-e.horizontalOffset)}function Lhe(i,e){return i7(i,e,t=>t.left+e.horizontalOffset)}function i7(i,e,t){return(n,r)=>{let s=new Be(i);if(s.width<Phe||s.height<Ihe)return null;let o;e.position==="inside"?o=s.bottom-r.height:o=s.bottom-r.height/2,o-=e.verticalOffset;let l=t(s,r),f=n.clone().moveTo(l,o).getIntersection(r.clone().moveTo(l,o)).getVisible();return!f||f.getArea()<r.getArea()?null:{top:o,left:l,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function n7(i){let e=i.config.get("ui.poweredBy"),t=e&&e.position||"border";return ee({position:t,label:Rhe,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:i.locale.contentLanguageDirection==="ltr"?"right":"left"},e)}var r7={POLITE:"polite",ASSERTIVE:"assertive"},s7=class{constructor(e){v(this,"editor");v(this,"view");this.editor=e,e.once("ready",()=>{for(let t of Object.values(r7))this.announce("",t)})}announce(e,t=r7.POLITE){let n=this.editor;if(!n.ui.view)return;this.view||(this.view=new o7(n.locale),n.ui.view.body.add(this.view));let{politeness:r,isUnsafeHTML:s}=typeof t=="string"?{politeness:t}:t,o=this.view.regionViews.find(l=>l.politeness===r);o||(o=new a7(n,r),this.view.regionViews.add(o)),o.announce({announcement:e,isUnsafeHTML:s})}},o7=class extends Ce{constructor(e){super(e);v(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}},a7=class extends Ce{constructor(e,t){super(e.locale);v(this,"politeness");v(this,"_domConverter");v(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":t,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=t,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:t}){if(!e.trim().length)return;let n=document.createElement("li");t?this._domConverter.setContentOf(n,e):n.innerText=e,this._listElement.appendChild(n)}get _listElement(){return this.element.querySelector("ul")}},Er=class extends _s{constructor(e,t){super(e);let n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:n.to("mouseenter")}}),this.delegate("mouseenter").to(t)}},Xp=5,Tu={toggleMenusAndFocusItemsOnHover(i){i.on("menu:mouseenter",e=>{if(!(!i.isFocusBorderEnabled&&!i.isOpen)){if(i.isOpen)for(let t of i.menus){let n=e.path[0],r=n instanceof Er&&n.children.first===t;t.isOpen=(e.path.includes(t)||r)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(i){let e=i.locale.uiLanguageDirection==="rtl";i.on("menu:arrowright",n=>{t(n.source,e?-1:1)}),i.on("menu:arrowleft",n=>{t(n.source,e?1:-1)});function t(n,r){let s=i.children.getIndex(n),o=n.isOpen,l=i.children.length,u=i.children.get((s+l+r)%l);n.isOpen=!1,o&&(u.isOpen=!0),u.buttonView.focus()}},closeMenusWhenTheBarCloses(i){i.on("change:isOpen",()=>{i.isOpen||i.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(i){i.on("menu:change:isOpen",(e,t,n)=>{n&&i.menus.filter(r=>e.source.parentMenuView===r.parentMenuView&&e.source!==r&&r.isOpen).forEach(r=>{r.isOpen=!1})})},closeOnClickOutside(i){pl({emitter:i,activator:()=>i.isOpen,callback:()=>i.close(),contextElements:()=>i.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(i){let e=!1;i.on("change:isOpen",(t,n,r)=>{r||(e||(i.isFocusBorderEnabled=!1),e=!1)}),i.listenTo(i.element,"keydown",()=>{e=!0},{useCapture:!0}),i.listenTo(i.element,"keyup",()=>{e=!1},{useCapture:!0}),i.listenTo(i.element,"focus",()=>{e&&(i.isFocusBorderEnabled=!0)},{useCapture:!0})}},da={openAndFocusPanelOnArrowDownKey(i){i.keystrokes.set("arrowdown",(e,t)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen||(i.isOpen=!0),i.panelView.focus(),t())})},openOnArrowRightKey(i){let e=i.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";i.keystrokes.set(e,(t,n)=>{i.focusTracker.focusedElement!==i.buttonView.element||!i.isEnabled||(i.isOpen||(i.isOpen=!0),i.panelView.focus(),n())})},openOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!0})},toggleOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!i.isOpen})},openAndFocusOnEnterKeyPress(i){i.keystrokes.set("enter",(e,t)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen=!0,i.panelView.focus(),t())})},closeOnArrowLeftKey(i){let e=i.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";i.keystrokes.set(e,(t,n)=>{i.isOpen&&(i.isOpen=!1,i.focus(),n())})},closeOnEscKey(i){i.keystrokes.set("esc",(e,t)=>{i.isOpen&&(i.isOpen=!1,i.focus(),t())})},closeOnParentClose(i){i.parentMenuView.on("change:isOpen",(e,t,n)=>{!n&&e.source===i.parentMenuView&&(i.isOpen=!1)})}},Dhe={southEast:i=>({top:i.bottom,left:i.left,name:"se"}),southWest:(i,e)=>({top:i.bottom,left:i.left-e.width+i.width,name:"sw"}),northEast:(i,e)=>({top:i.top-e.height,left:i.left,name:"ne"}),northWest:(i,e)=>({top:i.top-e.height,left:i.left-e.width+i.width,name:"nw"}),eastSouth:i=>({top:i.top,left:i.right-Xp,name:"es"}),eastNorth:(i,e)=>({top:i.top-e.height,left:i.right-Xp,name:"en"}),westSouth:(i,e)=>({top:i.top,left:i.left-e.width+Xp,name:"ws"}),westNorth:(i,e)=>({top:i.top-e.height,left:i.left-e.width+Xp,name:"wn"})},Vhe=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment","menuBar:insertMergeField"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function Bhe(i){let e;return!("items"in i)||!i.items?e=ee({items:en(Vhe),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0},i):e=ee({items:i.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1},i),e}function Nhe({normalizedConfig:i,locale:e,componentFactory:t,extraItems:n}){let r=en(i);return l7(i,r,n),Fhe(i,r),l7(i,r,r.addItems),jhe(i,r,t),u7(i,r),Hhe(r,e),r}function Fhe(i,e){let t=e.removeItems,n=[];e.items=e.items.filter(({menuId:r})=>t.includes(r)?(n.push(r),!1):!0),Eu(e.items,r=>{r.groups=r.groups.filter(({groupId:s})=>t.includes(s)?(n.push(s),!1):!0);for(let s of r.groups)s.items=s.items.filter(o=>{let l=d7(o);return t.includes(l)?(n.push(l),!1):!0})});for(let r of t)n.includes(r)||at("menu-bar-item-could-not-be-removed",{menuBarConfig:i,itemName:r})}function l7(i,e,t){let n=[];if(t.length!=0){for(let r of t){let s=Whe(r.position),o=qhe(r.position);if(zhe(r))if(!o)s==="start"?(e.items.unshift(r.menu),n.push(r)):s==="end"&&(e.items.push(r.menu),n.push(r));else{let l=e.items.findIndex(u=>u.menuId===o);l!=-1?s==="before"?(e.items.splice(l,0,r.menu),n.push(r)):s==="after"&&(e.items.splice(l+1,0,r.menu),n.push(r)):c7(e,r.menu,o,s)&&n.push(r)}else Uhe(r)?Eu(e.items,l=>{if(l.menuId===o)s==="start"?(l.groups.unshift(r.group),n.push(r)):s==="end"&&(l.groups.push(r.group),n.push(r));else{let u=l.groups.findIndex(f=>f.groupId===o);u!==-1&&(s==="before"?(l.groups.splice(u,0,r.group),n.push(r)):s==="after"&&(l.groups.splice(u+1,0,r.group),n.push(r)))}}):c7(e,r.item,o,s)&&n.push(r)}for(let r of t)n.includes(r)||at("menu-bar-item-could-not-be-added",{menuBarConfig:i,addedItemConfig:r})}}function c7(i,e,t,n){let r=!1;return Eu(i.items,s=>{for(let{groupId:o,items:l}of s.groups){if(r)return;if(o===t)n==="start"?(l.unshift(e),r=!0):n==="end"&&(l.push(e),r=!0);else{let u=l.findIndex(f=>d7(f)===t);u!==-1&&(n==="before"?(l.splice(u,0,e),r=!0):n==="after"&&(l.splice(u+1,0,e),r=!0))}}}),r}function jhe(i,e,t){Eu(e.items,n=>{for(let r of n.groups)r.items=r.items.filter(s=>{let o=typeof s=="string"&&!t.has(s);return o&&!e.isUsingDefaultConfig&&at("menu-bar-item-unavailable",{menuBarConfig:i,parentMenuConfig:en(n),componentName:s}),!o})})}function u7(i,e){let t=e.isUsingDefaultConfig,n=!1;if(e.items=e.items.filter(r=>r.groups.length?!0:(C_(i,r,t),!1)),!e.items.length){C_(i,i,t);return}Eu(e.items,r=>{r.groups=r.groups.filter(s=>s.items.length?!0:(n=!0,!1));for(let s of r.groups)s.items=s.items.filter(o=>h7(o)&&!o.groups.length?(C_(i,o,t),n=!0,!1):!0)}),n&&u7(i,e)}function C_(i,e,t){t||at("menu-bar-menu-empty",{menuBarConfig:i,emptyMenuConfig:e})}function Hhe(i,e){let t=e.t,n={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};Eu(i.items,r=>{r.label in n&&(r.label=n[r.label])})}function Eu(i,e){if(Array.isArray(i))for(let n of i)t(n);function t(n){e(n);for(let r of n.groups)for(let s of r.items)h7(s)&&t(s)}}function zhe(i){return typeof i=="object"&&"menu"in i}function Uhe(i){return typeof i=="object"&&"group"in i}function Whe(i){return i.startsWith("start")?"start":i.startsWith("end")?"end":i.startsWith("after")?"after":"before"}function qhe(i){let e=i.match(/^[^:]+:(.+)/);return e?e[1]:null}function d7(i){return typeof i=="string"?i:i.menuId}function h7(i){return typeof i=="object"&&"menuId"in i}var _l=class extends gt(){constructor(e){super();v(this,"editor");v(this,"componentFactory");v(this,"focusTracker");v(this,"tooltipManager");v(this,"poweredBy");v(this,"ariaLiveAnnouncer");v(this,"isReady",!1);v(this,"_editableElementsMap",new Map);v(this,"_focusableToolbarDefinitions",[]);v(this,"_extraMenuBarElements",[]);v(this,"_lastFocusedForeignElement",null);let t=e.editing.view;this.editor=e,this.componentFactory=new X6(e),this.focusTracker=new Vt,this.tooltipManager=new af(e),this.poweredBy=new e7(e),this.ariaLiveAnnouncer=new s7(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(let e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);let n=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?n():this.once("ready",n)}removeEditableElement(e){let t=this._editableElementsMap.get(e);!t||(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(e){let t=e.element;this.focusTracker.add(t),this.editor.keystrokes.listenTo(t);let n=Bhe(this.editor.config.get("menuBar")||{});e.fillFromConfig(n,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(r,s)=>{!t.contains(this.editor.ui.focusTracker.focusedElement)||(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),s())}),this.editor.keystrokes.set("Alt+F9",(r,s)=>{t.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),s())})}_readViewportOffsetFromConfig(){let e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;let n=e.config.get("toolbar.viewportTopOffset");return n?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:n}):{top:0}}_initFocusTracking(){let e=this.editor,t;e.keystrokes.set("Alt+F10",(n,r)=>{this._saveLastFocusedForeignElement();let s=this._getCurrentFocusedToolbarDefinition();(!s||!t)&&(t=this._getFocusableCandidateToolbarDefinitions());for(let o=0;o<t.length;o++){let l=t.shift();if(t.push(l),l!==s&&this._focusFocusableCandidateToolbar(l)){s&&s.options.afterBlur&&s.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(n,r)=>{let s=this._getCurrentFocusedToolbarDefinition();!s||(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),s.options.afterBlur&&s.options.afterBlur(),r())})}_saveLastFocusedForeignElement(){let e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){let e=[];for(let t of this._focusableToolbarDefinitions){let{toolbarView:n,options:r}=t;(Ur(n.element)||r.beforeFocus)&&e.push(t)}return e.sort((t,n)=>f7(t)-f7(n)),e}_getCurrentFocusedToolbarDefinition(){for(let e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){let{toolbarView:t,options:{beforeFocus:n}}=e;return n&&n(),Ur(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){let n=ee({top:0,bottom:0,left:0,right:0},this.viewportOffset);t.viewportOffset.top+=n.top,t.viewportOffset.bottom+=n.bottom,t.viewportOffset.left+=n.left,t.viewportOffset.right+=n.right}_bindBodyCollectionWithFocusTracker(){let e=this.view.body;for(let t of e)this.focusTracker.add(t.element);e.on("add",(t,n)=>{this.focusTracker.add(n.element)}),e.on("remove",(t,n)=>{this.focusTracker.remove(n.element)})}};function f7(i){let{toolbarView:e,options:t}=i,n=10;return Ur(e.element)&&n--,t.isContextual&&n--,n}var Su=class extends Ce{constructor(e){super(e);v(this,"body");v(this,"menuBarView");this.body=new M6(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}},T_=class extends Su{constructor(e){super(e);v(this,"top");v(this,"main");v(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){let e=this.t,t=new vl;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}},m7=class extends Ce{constructor(e,t,n){super(e);v(this,"name",null);v(this,"_editingView");v(this,"_editableElement");v(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){let e=this._editingView;e.isRenderingInProgress?n(this):t(this);function t(r){e.change(s=>{let o=e.document.getRoot(r.name);s.addClass(r.isFocused?"ck-focused":"ck-blurred",o),s.removeClass(r.isFocused?"ck-blurred":"ck-focused",o)})}function n(r){e.once("change:isRenderingInProgress",(s,o,l)=>{l?n(r):t(r)})}}},xl=class extends m7{constructor(e,t,n,r={}){super(e,t,n);v(this,"_options");this._options=r,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();let e=this._editingView;e.change(t=>{let n=e.document.getRoot(this.name);t.setAttribute("aria-label",this.getEditableAriaLabel(),n)})}getEditableAriaLabel(){let e=this.locale.t,t=this._options.label,n=this._editableElement,r=this.name;if(typeof t=="string")return t;if(typeof t=="object")return t[r];if(typeof t=="function")return t(this);if(n){let s=n.getAttribute("aria-label");if(s)return s}return e("Rich Text Editor. Editing area: %0",r)}};var xs=class extends gt(){constructor(e,t){super();t&&Nc(this,t),e&&this.set(e)}},Qp=ps("px"),ha=class extends ne{constructor(e){super(e);v(this,"positionLimiter");v(this,"visibleStack");v(this,"_viewToStack",new Map);v(this,"_idToStack",new Map);v(this,"_view",null);v(this,"_rotatorView",null);v(this,"_fakePanelsView",null);this.positionLimiter=()=>{let t=this.editor.editing.view,r=t.document.selection.editableElement;return r?t.domConverter.mapViewToDom(r.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new L("contextualballoon-add-view-exist",[this,e]);let t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}let n=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),n.set(e.view,e),this._viewToStack.set(e.view,n),n===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new L("contextualballoon-remove-view-not-exist",[this,e]);let t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}showStack(e){this.visibleStack=e;let t=this._idToStack.get(e);if(!t)throw new L("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new kn(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(n=>n[1]===e)[0]}_showNextStack(){let e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){let e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){let e=new g7(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(n,r)=>!r&&n>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(n,r)=>{if(r<2)return"";let s=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[s,r])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){let e=new p7(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,n)=>!n&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:n=!0,singleViewMode:r=!1}){this.view.class=t,this.view.withArrow=n,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}},g7=class extends Ce{constructor(e){super(e);v(this,"focusTracker");v(this,"buttonPrevView");v(this,"buttonNextView");v(this,"content");let t=e.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Vt,this.buttonPrevView=this._createButtonView(t("Previous"),$e.previousArrow),this.buttonNextView=this._createButtonView(t("Next"),$e.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){let n=new Ne(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n}},p7=class extends Ce{constructor(e,t){super(e);v(this,"content");v(this,"_balloonPanelView");let n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:n.to("top",Qp),left:n.to("left",Qp),width:n.to("width",Qp),height:n.to("height",Qp)}},children:this.content}),this.on("change:numberOfPanels",(r,s,o,l)=>{o>l?this._addPanels(o-l):this._removePanels(l-o),this.updatePosition()})}_addPanels(e){for(;e--;){let t=new Ce;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){let t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){let{top:e,left:t}=this._balloonPanelView,{width:n,height:r}=new Be(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:n,height:r})}}},Au=ps("px"),E_=class extends Ce{constructor(e){super(e);v(this,"content");v(this,"contentPanelElement");v(this,"_contentPanelPlaceholder");let t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new zn({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",n=>n?"block":"none"),height:t.to("isSticky",n=>n?Au(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new zn({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",n=>n?Au(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",n=>n&&Au(n)),bottom:t.to("_stickyBottomOffset",n=>n&&Au(n)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(we.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}let e=new Be(this.limiterElement),t=e.getVisible();if(t){let n=new Be(we.window);n.top+=this.viewportTopOffset,n.height-=this.viewportTopOffset,t=t.getIntersection(n)}if(t&&e.top<t.top){let n=t.top;if(n+this._contentPanelRect.height+this.limiterBottomOffset>t.bottom){let r=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;e.bottom-r>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(r):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(n):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Au(-we.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Au(-we.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Be(this.contentPanelElement)}},b7=class extends ys{constructor(e,t){let n=e.t,r=Object.assign({},{showResetButton:!0,showIcon:!0,creator:yl},t);super(e,r.creator);v(this,"iconView");v(this,"resetButtonView");v(this,"_viewConfig");this.label=t.label,this._viewConfig=r,this._viewConfig.showIcon&&(this.iconView=new ir,this.iconView.content=$e.loupe,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new Ne(e),this.resetButtonView.set({label:n("Clear"),icon:$e.cancel,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",s=>!s),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}},v7=class extends Ce{constructor(){super();let e=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",e.if("isVisible","ck-hidden",t=>!t)],tabindex:-1},children:[{tag:"span",children:[{text:[e.to("primaryText")]}]},{tag:"span",children:[{text:[e.to("secondaryText")]}]}]})}focus(){this.element.focus()}},w7=class extends Ce{constructor(e){super(e);v(this,"focusTracker");v(this,"children");v(this,"_focusCycler");this.children=this.createCollection(),this.focusTracker=new Vt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new $i({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(let e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}},y7=class extends Ce{constructor(e,t){super(e);v(this,"focusTracker");v(this,"keystrokes");v(this,"resultsView");v(this,"filteredView");v(this,"infoView");v(this,"queryView");v(this,"focusCycler");v(this,"_config");this._config=t,this.filteredView=t.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new Vt,this.keystrokes=new Jt,this.resultsView=new w7(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),t.infoView&&t.infoView.instance?this.infoView=t.infoView.instance:(this.infoView=new v7,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new $i({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(n,{resultsCount:r,totalItemsCount:s})=>{this.resultsCount=r,this.totalItemsCount=s}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",t.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);let e=t=>t.stopPropagation();for(let t of this.focusableChildren)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search(""),this.filteredView.element.scrollTo(0,0)}search(e){let t=e?new RegExp(vp(e),"ig"):null,n=this.filteredView.filter(t);this.fire("search",ee({query:e},n))}_createSearchTextQueryView(){let e=new b7(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){let e=this.locale.t,t=this.infoView;this.on("search",(r,s)=>{if(s.resultsCount)t.set({isVisible:!1});else{let o=this._config.infoView&&this._config.infoView.text,l,u;s.totalItemsCount?o&&o.notFound?(l=o.notFound.primary,u=o.notFound.secondary):(l=e("No results found"),u=""):o&&o.noSearchableItems?(l=o.noSearchableItems.primary,u=o.noSearchableItems.secondary):(l=e("No searchable items"),u=""),t.set({primaryText:n(l,s),secondaryText:n(u,s),isVisible:!0})}});function n(r,{query:s,resultsCount:o,totalItemsCount:l}){return typeof r=="function"?r(s,o,l):r}}},tb=class extends y7{constructor(e,t){super(e,t);v(this,"_config");this._config=t;let n=ps("px");this.extendTemplate({attributes:{class:["ck-autocomplete"]}});let r=this.resultsView.bindTemplate;this.resultsView.set("isVisible",!1),this.resultsView.set("_position","s"),this.resultsView.set("_width",0),this.resultsView.extendTemplate({attributes:{class:[r.if("isVisible","ck-hidden",s=>!s),r.to("_position",s=>`ck-search__results_${s}`)],style:{width:r.to("_width",n)}}}),this.focusTracker.on("change:isFocused",(s,o,l)=>{this._updateResultsVisibility(),l?this.resultsView.element.scrollTop=0:t.resetOnBlur&&this.queryView.reset()}),this.on("search",()=>{this._updateResultsVisibility(),this._updateResultsViewWidthAndPosition()}),this.keystrokes.set("esc",(s,o)=>{!this.resultsView.isVisible||(this.queryView.focus(),this.resultsView.isVisible=!1,o())}),this.listenTo(we.document,"scroll",()=>{this._updateResultsViewWidthAndPosition()}),this.on("change:isEnabled",()=>{this._updateResultsVisibility()}),this.filteredView.on("execute",(s,{value:o})=>{this.focus(),this.reset(),this.queryView.fieldView.value=this.queryView.fieldView.element.value=o,this.resultsView.isVisible=!1}),this.resultsView.on("change:isVisible",()=>{this._updateResultsViewWidthAndPosition()})}_updateResultsViewWidthAndPosition(){if(!this.resultsView.isVisible)return;this.resultsView._width=new Be(this.queryView.fieldView.element).width;let e=tb._getOptimalPosition({element:this.resultsView.element,target:this.queryView.element,fitInViewport:!0,positions:tb.defaultResultsPositions});this.resultsView._position=e?e.name:"s"}_updateResultsVisibility(){let e=typeof this._config.queryMinChars=="undefined"?0:this._config.queryMinChars,t=this.queryView.fieldView.element.value.length;this.resultsView.isVisible=this.focusTracker.isFocused&&this.isEnabled&&t>=e}},S_=tb;v(S_,"defaultResultsPositions",[e=>({top:e.bottom,left:e.left,name:"s"}),(e,t)=>({top:e.top-t.height,left:e.left,name:"n"})]),v(S_,"_getOptimalPosition",Th);var _7=class extends ca{constructor(e){super(e);v(this,"arrowView");let t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){let e=new ir;return e.content=$p,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}},x7=class extends Ce{constructor(e){super(e);v(this,"children");let t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",n=>`ck-menu-bar__menu__panel_position_${n}`),t.if("isVisible","ck-hidden",n=>!n)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}},O_=class extends Ce{constructor(e){super(e);v(this,"buttonView");v(this,"panelView");v(this,"focusTracker");v(this,"keystrokes");let t=this.bindTemplate;this.buttonView=new _7(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new x7(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Jt,this.focusTracker=new Vt,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",t.to("class"),t.if("isEnabled","ck-disabled",n=>!n),t.if("parentMenuView","ck-menu-bar__menu_top-level",n=>!n)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),da.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(da.openOnButtonClick(this),da.openOnArrowRightKey(this),da.closeOnArrowLeftKey(this),da.openAndFocusOnEnterKeyPress(this),da.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),da.openAndFocusPanelOnArrowDownKey(this),da.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,t)=>{this.fire("arrowright"),t()}),this.keystrokes.set("arrowleft",(e,t)=>{this.fire("arrowleft"),t()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,t,n)=>{if(!n)return;let r=O_._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){let{southEast:e,southWest:t,northEast:n,northWest:r,westSouth:s,eastSouth:o,westNorth:l,eastNorth:u}=Dhe;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[o,u,s,l]:[e,t,n,r]:this.parentMenuView?[s,l,o,u]:[t,e,r,n]}},sn=O_;v(sn,"_getOptimalPosition",Th);var Sr=class extends ku{constructor(e){super(e);this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){let e=Array.from(this.items).some(t=>{let n=k7(t);return n&&n.isToggleable});this.items.forEach(t=>{let n=k7(t);n&&(n.hasCheckSpace=e)})}};function k7(i){return i instanceof _s?i.children.map(e=>$he(e)?e.buttonView:e).find(e=>e instanceof ca):null}function $he(i){return typeof i=="object"&&"buttonView"in i&&i.buttonView instanceof Ne}var A_=class extends L6{constructor(e){super(e);this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}},C7=["mouseenter","arrowleft","arrowright","change:isOpen"],kl=class extends Ce{constructor(e){super(e);v(this,"children");v(this,"menus",[]);let t=e.t,n=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",n.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t,n=[]){let r=this.locale,o=Nhe({normalizedConfig:e,locale:r,componentFactory:t,extraItems:n}).items.map(l=>this._createMenu({componentFactory:t,menuDefinition:l}));this.children.addMany(o)}render(){super.render(),Tu.toggleMenusAndFocusItemsOnHover(this),Tu.closeMenusWhenTheBarCloses(this),Tu.closeMenuWhenAnotherOnTheSameLevelOpens(this),Tu.focusCycleMenusOnArrows(this),Tu.closeOnClickOutside(this),Tu.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(let e of this.children)e.isOpen=!1}registerMenu(e,t=null){t?(e.delegate(...C7).to(t),e.parentMenuView=t):e.delegate(...C7).to(this,n=>"menu:"+n),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:n}){let r=this.locale,s=new sn(r);return this.registerMenu(s,n),s.buttonView.set({label:t.label}),s.once("change:isOpen",()=>{let o=new Sr(r);o.ariaLabel=t.label,s.panelView.children.add(o),o.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:s,componentFactory:e}))}),s}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:n}){let r=this.locale,s=[];for(let o of e.groups){for(let l of o.items){let u=new Er(r,t);if(it(l))u.children.add(this._createMenu({componentFactory:n,menuDefinition:l,parentMenuView:t}));else{let f=this._createMenuItemContentFromFactory({componentName:l,componentFactory:n,parentMenuView:t});if(!f)continue;u.children.add(f)}s.push(u)}o!==e.groups[e.groups.length-1]&&s.push(new xu(r))}return s}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:n}){let r=n.create(e);return r instanceof sn||r instanceof st||r instanceof A_?(this._registerMenuTree(r,t),r.on("execute",()=>{this.close()}),r):(at("menu-bar-component-unsupported",{componentName:e,componentView:r}),null)}_registerMenuTree(e,t){if(!(e instanceof sn)){e.delegate("mouseenter").to(t);return}this.registerMenu(e,t);let n=e.panelView.children.filter(s=>s instanceof Sr)[0];if(!n){e.delegate("mouseenter").to(t);return}let r=n.items.filter(s=>s instanceof _s);for(let s of r)this._registerMenuTree(s.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,n,r)=>{clearTimeout(e),r?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(s=>s.isOpen)},0)})}};var M_=class{constructor(e,t=20){v(this,"model");v(this,"limit");v(this,"_isLocked");v(this,"_size");v(this,"_batch",null);v(this,"_changeCallback");v(this,"_selectionChangeCallback");this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(n,r)=>{r.isLocal&&r.isUndoable&&r!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}},T7=class extends We{constructor(e,t){super(e);v(this,"_buffer");this._buffer=new M_(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){let t=this.editor.model,n=t.document,r=e.text||"",s=r.length,o=n.selection;if(e.selection?o=e.selection:e.range&&(o=t.createSelection(e.range)),!t.canEditAt(o))return;let l=e.resultRange;t.enqueueChange(this._buffer.batch,u=>{this._buffer.lock();let f=Array.from(n.selection.getAttributes());t.deleteContent(o),r&&t.insertContent(u.createText(r,f),o),l?u.setSelection(l):o.is("documentSelection")||u.setSelection(o),this._buffer.unlock(),this._buffer.input(s)})}},E7=["insertText","insertReplacementText"],Ghe=[...E7,"insertCompositionText"],S7=class extends Fn{constructor(e){super(e);v(this,"focusObserver");this.focusObserver=e.getObserver(cu);let t=Le.isAndroid?Ghe:E7,n=e.document;n.on("beforeinput",(r,s)=>{if(!this.isEnabled)return;let{data:o,targetRanges:l,inputType:u,domEvent:f}=s;if(!t.includes(u))return;this.focusObserver.flush();let g=new Qn(n,"insertText");n.fire(g,new co(e,f,{text:o,selection:e.createSelection(l)})),g.stop.called&&r.stop()}),Le.isAndroid||n.on("compositionend",(r,{data:s,domEvent:o})=>{!this.isEnabled||!s||n.fire("insertText",new co(e,o,{text:s}))},{priority:"lowest"})}observe(){}stopObserving(){}},ib=class extends ne{constructor(){super(...arguments);v(this,"_compositionQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model,n=e.editing.view,r=e.editing.mapper,s=t.document.selection;this._compositionQueue=new A7(e),n.addObserver(S7);let o=new T7(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",o),e.commands.add("input",o),this.listenTo(n.document,"insertText",(l,u)=>{n.document.isComposing||u.preventDefault(),Le.isAndroid&&n.document.isComposing&&this._compositionQueue.flush("next beforeinput");let{text:f,selection:g}=u,p;g?p=Array.from(g.getRanges()).map(C=>r.toModelRange(C)):p=Array.from(s.getRanges());let y=f;if(Le.isAndroid){let C=Array.from(p[0].getItems()).reduce((E,P)=>E+(P.is("$textProxy")?P.data:""),"");if(C&&(C.length<=y.length?y.startsWith(C)&&(y=y.substring(C.length),p[0].start=p[0].start.getShiftedBy(C.length)):C.startsWith(y)&&(p[0].start=p[0].start.getShiftedBy(y.length),y="")),y.length==0&&p[0].isCollapsed)return}let _={text:y,selection:t.createSelection(p)};Le.isAndroid&&n.document.isComposing?this._compositionQueue.push(_):(e.execute("insertText",_),n.scrollToTheSelection())}),Le.isAndroid?this.listenTo(n.document,"keydown",(l,u)=>{s.isCollapsed||u.keyCode!=229||!n.document.isComposing||I7(t,o)}):this.listenTo(n.document,"compositionstart",()=>{s.isCollapsed||I7(t,o)}),Le.isAndroid?(this.listenTo(n.document,"mutations",(l,{mutations:u})=>{if(!!n.document.isComposing)for(let{node:f}of u){let g=Yhe(f,r),p=r.toModelElement(g);if(this._compositionQueue.isComposedElement(p)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(n.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(n.document,"compositionend",()=>{let l=[];for(let u of this._compositionQueue.flushComposedElements()){let f=r.toViewElement(u);!f||l.push({type:"children",node:f})}l.length&&n.document.fire("mutations",{mutations:l})},{priority:"lowest"})):this.listenTo(n.document,"compositionend",()=>{n.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}},A7=class{constructor(e){v(this,"editor");v(this,"flushDebounced",wr(()=>this.flush("timeout"),50));v(this,"_queue",[]);v(this,"_compositionElements",new Set);this.editor=e}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(e){let t={text:e.text};if(e.selection){t.selectionRanges=[];for(let n of e.selection.getRanges())t.selectionRanges.push(Bi.fromRange(n)),this._compositionElements.add(n.start.parent)}this._queue.push(t),this.flushDebounced()}shift(){let e=this._queue.shift(),t={text:e.text};if(e.selectionRanges){let n=e.selectionRanges.map(r=>Khe(r)).filter(r=>!!r);n.length&&(t.selection=this.editor.model.createSelection(n))}return t}flush(e){let t=this.editor,n=t.model,r=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;let o=t.commands.get("insertText").buffer;n.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){let l=this.shift();t.execute("insertText",l)}o.unlock()}),r.scrollToTheSelection()}isComposedElement(e){return this._compositionElements.has(e)}flushComposedElements(){let e=Array.from(this._compositionElements);return this._compositionElements.clear(),e}};function I7(i,e){if(!e.isEnabled)return;let t=e.buffer;t.lock(),i.enqueueChange(t.batch,()=>{i.deleteContent(i.document.selection)}),t.unlock()}function Khe(i){let e=i.toRange();return i.detach(),e.root.rootName=="$graveyard"?null:e}function Yhe(i,e){let t=i.is("$text")?i.parent:i;for(;!e.toModelElement(t);)t=t.parent;return t}var L_=class extends We{constructor(e,t){super(e);v(this,"direction");v(this,"_buffer");this.direction=t,this._buffer=new M_(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){let t=this.editor.model,n=t.document;t.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();let s=r.createSelection(e.selection||n.selection);if(!t.canEditAt(s))return;let o=e.sequence||1,l=s.isCollapsed;if(s.isCollapsed&&t.modifySelection(s,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(o)){this._replaceEntireContentWithParagraph(r);return}if(this._shouldReplaceFirstBlockWithParagraph(s,o)){this.editor.execute("paragraph",{selection:s});return}if(s.isCollapsed)return;let u=0;s.getFirstRange().getMinimalFlatRanges().forEach(f=>{u+=kh(f.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(s,{doNotResetEntireContent:l,direction:this.direction}),this._buffer.input(u),r.setSelection(s),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;let t=this.editor.model,r=t.document.selection,s=t.schema.getLimitElement(r);if(!(r.isCollapsed&&r.containsEntireContent(s))||!t.schema.checkChild(s,"paragraph"))return!1;let l=s.getChild(0);return!(l&&l.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){let t=this.editor.model,r=t.document.selection,s=t.schema.getLimitElement(r),o=e.createElement("paragraph");e.remove(e.createRangeIn(s)),e.insert(o,s),e.setSelection(o,0)}_shouldReplaceFirstBlockWithParagraph(e,t){let n=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;let r=e.getFirstPosition(),s=n.schema.getLimitElement(r),o=s.getChild(0);return!(r.parent!=o||!e.containsEntireContent(o)||!n.schema.checkChild(s,"paragraph")||o.name=="paragraph")}},Zhe="character",P7="word",Jhe="codePoint",ma="selection",Iu="backward",lf="forward",R7={deleteContent:{unit:ma,direction:Iu},deleteContentBackward:{unit:Jhe,direction:Iu},deleteWordBackward:{unit:P7,direction:Iu},deleteHardLineBackward:{unit:ma,direction:Iu},deleteSoftLineBackward:{unit:ma,direction:Iu},deleteContentForward:{unit:Zhe,direction:lf},deleteWordForward:{unit:P7,direction:lf},deleteHardLineForward:{unit:ma,direction:lf},deleteSoftLineForward:{unit:ma,direction:lf}},O7=class extends Fn{constructor(e){super(e);let t=e.document,n=0;t.on("keydown",()=>{n++}),t.on("keyup",()=>{n=0}),t.on("beforeinput",(r,s)=>{if(!this.isEnabled)return;let{targetRanges:o,domEvent:l,inputType:u}=s,f=R7[u];if(!f)return;let g={direction:f.direction,unit:f.unit,sequence:n};g.unit==ma&&(g.selectionToRemove=e.createSelection(o[0])),u==="deleteContentBackward"&&(Le.isAndroid&&(g.sequence=1),Qhe(o)&&(g.unit=ma,g.selectionToRemove=e.createSelection(o)));let p=new ao(t,"delete",o[0]);t.fire(p,new co(e,l,g)),p.stop.called&&r.stop()}),Le.isBlink&&Xhe(this)}observe(){}stopObserving(){}};function Xhe(i){let e=i.view,t=e.document,n=null,r=!1;t.on("keydown",(l,{keyCode:u})=>{n=u,r=!1}),t.on("keyup",(l,{keyCode:u,domEvent:f})=>{let g=t.selection,p=i.isEnabled&&u==n&&s(u)&&!g.isCollapsed&&!r;if(n=null,p){let y=g.getFirstRange(),_=new ao(t,"delete",y),C={unit:ma,direction:o(u),selectionToRemove:g};t.fire(_,new co(e,f,C))}}),t.on("beforeinput",(l,{inputType:u})=>{let f=R7[u];s(n)&&f&&f.direction==o(n)&&(r=!0)},{priority:"high"}),t.on("beforeinput",(l,{inputType:u,data:f})=>{n==Ge.delete&&u=="insertText"&&f=="\x7F"&&l.stop()},{priority:"high"});function s(l){return l==Ge.backspace||l==Ge.delete}function o(l){return l==Ge.backspace?Iu:lf}}function Qhe(i){if(i.length!=1||i[0].isCollapsed)return!1;let e=i[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0}),t=0;for(let{nextPosition:n,item:r}of e){if(n.parent.is("$text")){let s=n.parent.data,o=n.offset;if(Ih(s,o)||Ph(s,o)||Ep(s,o))continue;t++}else(r.is("containerElement")||r.is("emptyElement"))&&t++;if(t>1)return!0}return!1}var rr=class extends ne{constructor(){super(...arguments);v(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.editing.view,n=t.document,r=e.model.document;t.addObserver(O7),this._undoOnBackspace=!1;let s=new L_(e,"forward");e.commands.add("deleteForward",s),e.commands.add("forwardDelete",s),e.commands.add("delete",new L_(e,"backward")),this.listenTo(n,"delete",(o,l)=>{n.isComposing||l.preventDefault();let{direction:u,sequence:f,selectionToRemove:g,unit:p}=l,y=u==="forward"?"deleteForward":"delete",_={sequence:f};if(p=="selection"){let C=Array.from(g.getRanges()).map(E=>e.editing.mapper.toModelRange(E));_.selection=e.model.createSelection(C)}else _.unit=p;e.execute(y,_),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",(o,l)=>{this._undoOnBackspace&&l.direction=="backward"&&l.sequence==1&&l.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),l.preventDefault(),o.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}},nb=class extends ne{static get requires(){return[ib,rr]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}};function D_(i,e){let t=i.start;return{text:Array.from(i.getWalker({ignoreElementEnd:!1})).reduce((r,{item:s})=>s.is("$text")||s.is("$textProxy")?r+s.data:(t=e.createPositionAfter(s),""),""),range:e.createRange(t,i.end)}}var rb=class extends gt(){constructor(e,t){super();v(this,"model");v(this,"testCallback");v(this,"_hasMatch");this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){let t=this.model.document;this.listenTo(t.selection,"change:range",(n,{directChange:r})=>{if(!!r){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(n,r)=>{r.isUndo||!r.isLocal||this._evaluateTextBeforeSelection("data",{batch:r})})}_evaluateTextBeforeSelection(e,t={}){let n=this.model,s=n.document.selection,o=n.createRange(n.createPositionAt(s.focus.parent,0),s.focus),{text:l,range:u}=D_(o,n),f=this.testCallback(l);if(!f&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!f,f){let g=Object.assign(t,{text:l,range:u});typeof f=="object"&&Object.assign(g,f),this.fire(`matched:${e}`,g)}}},cf=class extends ne{constructor(e){super(e);v(this,"attributes");v(this,"_overrideUid");v(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model,n=e.editing.view,r=e.locale,s=t.document.selection;this.listenTo(n.document,"arrowKey",(o,l)=>{if(!s.isCollapsed||l.shiftKey||l.altKey||l.ctrlKey)return;let u=l.keyCode==Ge.arrowright,f=l.keyCode==Ge.arrowleft;if(!u&&!f)return;let g=r.contentLanguageDirection,p=!1;g==="ltr"&&u||g==="rtl"&&f?p=this._handleForwardMovement(l):p=this._handleBackwardMovement(l),p===!0&&o.stop()},{context:"$text",priority:"highest"}),this.listenTo(s,"change:range",(o,l)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}!this._isGravityOverridden||!l.directChange&&Ar(s.getFirstPosition(),this.attributes)||this._restoreGravity()}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){let t=this.attributes,n=this.editor.model,r=n.document.selection,s=r.getFirstPosition();return this._isGravityOverridden||s.isAtStart&&po(r,t)?!1:Ar(s,t)?(df(e),po(r,t)&&Ar(s,t,!0)?uf(n,t):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){let t=this.attributes,n=this.editor.model,r=n.document.selection,s=r.getFirstPosition();return this._isGravityOverridden?(df(e),this._restoreGravity(),Ar(s,t,!0)?uf(n,t):sb(n,t,s),!0):s.isAtStart?po(r,t)?(df(e),sb(n,t,s),!0):!1:!po(r,t)&&Ar(s,t,!0)?(df(e),sb(n,t,s),!0):M7(s,t)?s.isAtEnd&&!po(r,t)&&Ar(s,t)?(df(e),sb(n,t,s),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){let e=this.editor,t=e.model,n=t.document.selection,r=e.editing.view.document;e.editing.view.addObserver(fl);let s=!1;this.listenTo(r,"mousedown",()=>{s=!0}),this.listenTo(r,"selectionChange",()=>{let o=this.attributes;if(!s||(s=!1,!n.isCollapsed)||!po(n,o))return;let l=n.getFirstPosition();!Ar(l,o)||(l.isAtStart||Ar(l,o,!0)?uf(t,o):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){let t=this.editor.model,n=t.document.selection,r=this.attributes;this.listenTo(t,"insertContent",()=>{let s=n.getFirstPosition();po(n,r)&&Ar(s,r)&&uf(t,r)},{priority:"low"})}_handleDeleteContentAfterNode(){let e=this.editor,t=e.model,n=t.document.selection,r=e.editing.view,s=!1,o=!1;this.listenTo(r.document,"delete",(l,u)=>{s=u.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{if(!s)return;let l=n.getFirstPosition();o=po(n,this.attributes)&&!M7(l,this.attributes)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{!s||(s=!1,!o&&e.model.enqueueChange(()=>{let l=n.getFirstPosition();po(n,this.attributes)&&Ar(l,this.attributes)&&(l.isAtStart||Ar(l,this.attributes,!0)?uf(t,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}};function po(i,e){for(let t of e)if(i.hasAttribute(t))return!0;return!1}function sb(i,e,t){let n=t.nodeBefore;i.change(r=>{if(n){let s=[],o=i.schema.isObject(n)&&i.schema.isInline(n);for(let[l,u]of n.getAttributes())i.schema.checkAttribute("$text",l)&&(!o||i.schema.getAttributeProperties(l).copyFromObject!==!1)&&s.push([l,u]);r.setSelectionAttribute(s)}else r.removeSelectionAttribute(e)})}function uf(i,e){i.change(t=>{t.removeSelectionAttribute(e)})}function df(i){i.preventDefault()}function M7(i,e){let t=i.getShiftedBy(-1);return Ar(t,e)}function Ar(i,e,t=!1){let{nodeBefore:n,nodeAfter:r}=i;for(let s of e){let o=n?n.getAttribute(s):void 0,l=r?r.getAttribute(s):void 0;if(!(t&&(o===void 0||l===void 0))&&l!==o)return!0}return!1}var PPe={copyright:{from:"(c)",to:"\xA9"},registeredTrademark:{from:"(r)",to:"\xAE"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"\xBD",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"\u2153",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"\u2154",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"\xBC",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"\xBE",null]},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:Pu('"'),to:[null,"\u201C",null,"\u201D"]},quotesSecondary:{from:Pu("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:Pu("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:Pu('"'),to:[null,"\u201C",null,"\u201D"]},quotesPrimaryPl:{from:Pu('"'),to:[null,"\u201E",null,"\u201D"]},quotesSecondaryPl:{from:Pu("'"),to:[null,"\u201A",null,"\u2019"]}};function Pu(i){return new RegExp(`(^|\\s)(${i})([^${i}]*)(${i})$`)}function Ru(i,e,t,n){return n.createRange(V_(i,e,t,!0,n),V_(i,e,t,!1,n))}function V_(i,e,t,n,r){let s=i.textNode||(n?i.nodeBefore:i.nodeAfter),o=null;for(;s&&s.getAttribute(e)==t;)o=s,s=n?s.previousSibling:s.nextSibling;return o?r.createPositionAt(o,n?"before":"after"):i}function B_(i,e,t,n){let r=i.editing.view,s=new Set;r.document.registerPostFixer(o=>{let l=i.model.document.selection,u=!1;if(l.hasAttribute(e)){let f=Ru(l.getFirstPosition(),e,l.getAttribute(e),i.model),g=i.editing.mapper.toViewRange(f);for(let p of g.getItems())p.is("element",t)&&!p.hasClass(n)&&(o.addClass(n,p),s.add(p),u=!0)}return u}),i.conversion.for("editingDowncast").add(o=>{o.on("insert",l,{priority:"highest"}),o.on("remove",l,{priority:"highest"}),o.on("attribute",l,{priority:"highest"}),o.on("selection",l,{priority:"highest"});function l(){r.change(u=>{for(let f of s.values())u.removeClass(n,f),s.delete(f)})}})}var N_=class extends We{constructor(e,t){super(e);v(this,"attributeKey");this.attributeKey=t}refresh(){let e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){let t=this.editor.model,r=t.document.selection,s=e.forceValue===void 0?!this.value:e.forceValue;t.change(o=>{if(r.isCollapsed)s?o.setSelectionAttribute(this.attributeKey,!0):o.removeSelectionAttribute(this.attributeKey);else{let l=t.schema.getValidRanges(r.getRanges(),this.attributeKey);for(let u of l)s?o.setAttribute(this.attributeKey,s,u):o.removeAttribute(this.attributeKey,u)}})}_getValueFromFirstAllowedNode(){let e=this.editor.model,t=e.schema,n=e.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(let r of n.getRanges())for(let s of r.getItems())if(t.checkAttribute(s,this.attributeKey))return s.hasAttribute(this.attributeKey);return!1}},Ou="bold",L7=class extends ne{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Ou}),e.model.schema.setAttributeProperties(Ou,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Ou,view:"strong",upcastAlso:["b",n=>{let r=n.getStyle("font-weight");return r&&(r=="bold"||Number(r)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(Ou,new N_(e,Ou)),e.keystrokes.set("CTRL+B",Ou),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}};function D7({editor:i,commandName:e,plugin:t,icon:n,label:r,keystroke:s}){return o=>{let l=i.commands.get(e),u=new o(i.locale);return u.set({label:r,icon:n,keystroke:s,isToggleable:!0}),u.bind("isEnabled").to(l,"isEnabled"),u.bind("isOn").to(l,"value"),u instanceof st?u.set({role:"menuitemcheckbox"}):u.set({tooltip:!0}),t.listenTo(u,"execute",()=>{i.execute(e),i.editing.view.focus()}),u}}var F_="bold",V7=class extends ne{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t,n=D7({editor:e,commandName:F_,plugin:this,icon:$e.bold,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(F_,()=>n(Ne)),e.ui.componentFactory.add("menuBar:"+F_,()=>n(st))}},j_=class extends ne{static get requires(){return[L7,V7]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}};var Mu="italic",B7=class extends ne{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Mu}),e.model.schema.setAttributeProperties(Mu,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Mu,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(Mu,new N_(e,Mu)),e.keystrokes.set("CTRL+I",Mu),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}},efe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',H_="italic",N7=class extends ne{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t,n=D7({editor:e,commandName:H_,plugin:this,icon:efe,keystroke:"CTRL+I",label:t("Italic")});e.ui.componentFactory.add(H_,()=>n(Ne)),e.ui.componentFactory.add("menuBar:"+H_,()=>n(st))}},z_=class extends ne{static get requires(){return[B7,N7]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}};function*F7(i,e){for(let t of e)t&&i.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}var j7=class extends We{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){let t=this.editor.model,n=t.document.selection,r=t.schema,s=n.isCollapsed,o=n.getFirstRange(),l=o.start.parent,u=o.end.parent;if(r.isLimit(l)||r.isLimit(u))return!s&&l==u&&t.deleteContent(n),!1;if(s){let f=F7(e.model.schema,n.getAttributes());return H7(e,o.start),e.setSelectionAttribute(f),!0}else{let f=!(o.start.isAtStart&&o.end.isAtEnd),g=l==u;if(t.deleteContent(n,{leaveUnmerged:f}),f){if(g)return H7(e,n.focus),!0;e.setSelection(u,0)}}return!1}};function H7(i,e){i.split(e),i.setSelection(e.parent.nextSibling,0)}var tfe={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}},U_=class extends Fn{constructor(e){super(e);let t=this.document,n=!1;t.on("keydown",(r,s)=>{n=s.shiftKey}),t.on("beforeinput",(r,s)=>{if(!this.isEnabled)return;let o=s.inputType;Le.isSafari&&n&&o=="insertParagraph"&&(o="insertLineBreak");let l=s.domEvent,u=tfe[o];if(!u)return;let f=new ao(t,"enter",s.targetRanges[0]);t.fire(f,new co(e,l,{isSoft:u.isSoft})),f.stop.called&&r.stop()})}observe(){}stopObserving(){}},ks=class extends ne{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.editing.view,n=t.document,r=this.editor.t;t.addObserver(U_),e.commands.add("enter",new j7(e)),this.listenTo(n,"enter",(s,o)=>{n.isComposing||o.preventDefault(),!o.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}},z7=class extends We{execute(){let e=this.editor.model,t=e.document;e.change(n=>{nfe(e,n,t.selection),this.fire("afterExecute",{writer:n})})}refresh(){let e=this.editor.model,t=e.document;this.isEnabled=ife(e.schema,t.selection)}};function ife(i,e){if(e.rangeCount>1)return!1;let t=e.anchor;if(!t||!i.checkChild(t,"softBreak"))return!1;let n=e.getFirstRange(),r=n.start.parent,s=n.end.parent;return!((W_(r,i)||W_(s,i))&&r!==s)}function nfe(i,e,t){let n=t.isCollapsed,r=t.getFirstRange(),s=r.start.parent,o=r.end.parent,l=s==o;if(n){let u=F7(i.schema,t.getAttributes());U7(i,e,r.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(u)}else{let u=!(r.start.isAtStart&&r.end.isAtEnd);i.deleteContent(t,{leaveUnmerged:u}),l?U7(i,e,t.focus):u&&e.setSelection(o,0)}}function U7(i,e,t){let n=e.createElement("softBreak");i.insertContent(n,t),e.setSelection(n,"after")}function W_(i,e){return i.is("rootElement")?!1:e.isLimit(i)||W_(i.parent,e)}var ob=class extends ne{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model.schema,n=e.conversion,r=e.editing.view,s=r.document,o=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(l,{writer:u})=>u.createEmptyElement("br")}),r.addObserver(U_),e.commands.add("shiftEnter",new z7(e)),this.listenTo(s,"enter",(l,u)=>{s.isComposing||u.preventDefault(),!!u.isSoft&&(e.execute("shiftEnter"),r.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}};var q7=class extends wt(){constructor(){super(...arguments);v(this,"_stack",[])}add(e,t){let n=this._stack,r=n[0];this._insertDescriptor(e);let s=n[0];r!==s&&!q_(r,s)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:s,writer:t})}remove(e,t){let n=this._stack,r=n[0];this._removeDescriptor(e);let s=n[0];r!==s&&!q_(r,s)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:s,writer:t})}_insertDescriptor(e){let t=this._stack,n=t.findIndex(s=>s.id===e.id);if(q_(e,t[n]))return;n>-1&&t.splice(n,1);let r=0;for(;t[r]&&rfe(t[r],e);)r++;t.splice(r,0,e)}_removeDescriptor(e){let t=this._stack,n=t.findIndex(r=>r.id===e);n>-1&&t.splice(n,1)}};function q_(i,e){return i&&e&&i.priority==e.priority&&ab(i.classes)==ab(e.classes)}function rfe(i,e){return i.priority>e.priority?!0:i.priority<e.priority?!1:ab(i.classes)>ab(e.classes)}function ab(i){return Array.isArray(i)?i.sort().join(","):i}var sfe='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',ofe="ck-widget",$7="ck-widget_selected";function Gt(i){return i.is("element")?!!i.getCustomProperty("widget"):!1}function bo(i,e,t={}){if(!i.is("containerElement"))throw new L("widget-to-widget-wrong-element-type",null,{element:i});return e.setAttribute("contenteditable","false",i),e.addClass(ofe,i),e.setCustomProperty("widget",!0,i),i.getFillerOffset=hfe,e.setCustomProperty("widgetLabel",[],i),t.label&&ufe(i,t.label),t.hasSelectionHandle&&ffe(i,e),cfe(i,e),i}function afe(i,e,t){if(e.classes&&t.addClass(lt(e.classes),i),e.attributes)for(let n in e.attributes)t.setAttribute(n,e.attributes[n],i)}function lfe(i,e,t){if(e.classes&&t.removeClass(lt(e.classes),i),e.attributes)for(let n in e.attributes)t.removeAttribute(n,i)}function cfe(i,e,t=afe,n=lfe){let r=new q7;r.on("change:top",(l,u)=>{u.oldDescriptor&&n(i,u.oldDescriptor,u.writer),u.newDescriptor&&t(i,u.newDescriptor,u.writer)});let s=(l,u,f)=>r.add(u,f),o=(l,u,f)=>r.remove(u,f);e.setCustomProperty("addHighlight",s,i),e.setCustomProperty("removeHighlight",o,i)}function ufe(i,e){i.getCustomProperty("widgetLabel").push(e)}function dfe(i){return i.getCustomProperty("widgetLabel").reduce((t,n)=>typeof n=="function"?t?t+". "+n():n():t?t+". "+n:n,"")}function hfe(){return null}function ffe(i,e){let t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(n){let r=this.toDomElement(n),s=new ir;return s.set("content",sfe),s.render(),r.appendChild(s.element),r});e.insert(e.createPositionAt(i,0),t),e.addClass(["ck-widget_with-selection-handle"],i)}var vo="widget-type-around";function Cl(i,e,t){return!!i&&Gt(i)&&!t.isInline(e)}function mfe(i){return i.closest(".ck-widget__type-around__button")}function gfe(i){return i.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function pfe(i,e){let t=i.closest(".ck-widget");return e.mapDomToView(t)}function Tl(i){return i.getAttribute(vo)}var bfe='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',G7=["before","after"],vfe=new DOMParser().parseFromString(bfe,"image/svg+xml").firstChild,K7="ck-widget__type-around_disabled",Y7=class extends ne{constructor(){super(...arguments);v(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[ks,rr]}init(){let e=this.editor,t=e.editing.view;this.on("change:isEnabled",(n,r,s)=>{t.change(o=>{for(let l of t.document.roots)s?o.removeClass(K7,l):o.addClass(K7,l)}),s||e.model.change(o=>{o.removeSelectionAttribute(vo)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){let n=this.editor,r=n.editing.view,s=n.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);n.execute("insertParagraph",{position:n.model.createPositionAt(e,t),attributes:s}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,t,n,r){this.listenTo(e,t,(...s)=>{this.isEnabled&&n(...s)},r)}_insertParagraphAccordingToFakeCaretPosition(){let n=this.editor.model.document.selection,r=Tl(n);if(!r)return!1;let s=n.getSelectedElement();return this._insertParagraph(s,r),!0}_enableTypeAroundUIInjection(){let e=this.editor,t=e.model.schema,n=e.locale.t,r={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(s,o,l)=>{let u=l.mapper.toViewElement(o.item);!u||Cl(u,o.item,t)&&(wfe(l.writer,r,u),u.getCustomProperty("widgetLabel").push(()=>this.isEnabled?n("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){let e=this.editor,t=e.model,n=t.document.selection,r=t.schema,s=e.editing.view;this._listenToIfEnabled(s.document,"arrowKey",(l,u)=>{this._handleArrowKeyPress(l,u)},{context:[Gt,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",(l,u)=>{!u.directChange||e.model.change(f=>{f.removeSelectionAttribute(vo)})}),this._listenToIfEnabled(t.document,"change:data",()=>{let l=n.getSelectedElement();if(l){let u=e.editing.mapper.toViewElement(l);if(Cl(u,l,r))return}e.model.change(u=>{u.removeSelectionAttribute(vo)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(l,u,f)=>{let g=f.writer;if(this._currentFakeCaretModelElement){let C=f.mapper.toViewElement(this._currentFakeCaretModelElement);C&&(g.removeClass(G7.map(o),C),this._currentFakeCaretModelElement=null)}let p=u.selection.getSelectedElement();if(!p)return;let y=f.mapper.toViewElement(p);if(!Cl(y,p,r))return;let _=Tl(u.selection);!_||(g.addClass(o(_),y),this._currentFakeCaretModelElement=p)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(l,u,f)=>{f||e.model.change(g=>{g.removeSelectionAttribute(vo)})});function o(l){return`ck-widget_type-around_show-fake-caret_${l}`}}_handleArrowKeyPress(e,t){let n=this.editor,r=n.model,s=r.document.selection,o=r.schema,l=n.editing.view,u=t.keyCode,f=HL(u,n.locale.contentLanguageDirection),g=l.document.selection.getSelectedElement(),p=n.editing.mapper.toModelElement(g),y;Cl(g,p,o)?y=this._handleArrowKeyPressOnSelectedWidget(f):s.isCollapsed?y=this._handleArrowKeyPressWhenSelectionNextToAWidget(f):t.shiftKey||(y=this._handleArrowKeyPressWhenNonCollapsedSelection(f)),y&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){let n=this.editor.model,r=n.document.selection,s=Tl(r);return n.change(o=>{if(s){if(!(s===(e?"after":"before")))return o.removeSelectionAttribute(vo),!0}else return o.setSelectionAttribute(vo,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){let t=this.editor,n=t.model,r=n.schema,s=t.plugins.get("Widget"),o=s._getObjectElementNextToSelection(e),l=t.editing.mapper.toViewElement(o);return Cl(l,o,r)?(n.change(u=>{s._setSelectionOverElement(o),u.setSelectionAttribute(vo,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){let t=this.editor,n=t.model,r=n.schema,s=t.editing.mapper,o=n.document.selection,l=e?o.getLastPosition().nodeBefore:o.getFirstPosition().nodeAfter,u=s.toViewElement(l);return Cl(u,l,r)?(n.change(f=>{f.setSelection(l,"on"),f.setSelectionAttribute(vo,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){let e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(n,r)=>{let s=mfe(r.domTarget);if(!s)return;let o=gfe(s),l=pfe(s,t.domConverter),u=e.editing.mapper.toModelElement(l);this._insertParagraph(u,o),r.preventDefault(),n.stop()})}_enableInsertingParagraphsOnEnterKeypress(){let e=this.editor,t=e.model.document.selection,n=e.editing.view;this._listenToIfEnabled(n.document,"enter",(r,s)=>{if(r.eventPhase!="atTarget")return;let o=t.getSelectedElement(),l=e.editing.mapper.toViewElement(o),u=e.model.schema,f;this._insertParagraphAccordingToFakeCaretPosition()?f=!0:Cl(l,o,u)&&(this._insertParagraph(o,s.isSoft?"before":"after"),f=!0),f&&(s.preventDefault(),r.stop())},{context:Gt})}_enableInsertingParagraphsOnTypingKeystroke(){let t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(n,r)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(r.selection=t.selection)},{priority:"high"}),Le.isAndroid?this._listenToIfEnabled(t,"keydown",(n,r)=>{r.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){let e=this.editor,t=e.editing.view,n=e.model,r=n.schema;this._listenToIfEnabled(t.document,"delete",(s,o)=>{if(s.eventPhase!="atTarget")return;let l=Tl(n.document.selection);if(!l)return;let u=o.direction,f=n.document.selection.getSelectedElement(),g=l==="before",p=u=="forward";if(g===p)e.execute("delete",{selection:n.createSelection(f,"on")});else{let _=r.getNearestSelectionRange(n.createPositionAt(f,l),u);if(_)if(!_.isCollapsed)n.change(C=>{C.setSelection(_),e.execute(p?"deleteForward":"delete")});else{let C=n.createSelection(_.start);if(n.modifySelection(C,{direction:u}),!C.focus.isEqual(_.start))n.change(E=>{E.setSelection(_),e.execute(p?"deleteForward":"delete")});else{let E=xfe(r,_.start.parent);n.deleteContent(n.createSelection(E,"on"),{doNotAutoparagraph:!0})}}}o.preventDefault(),s.stop()},{context:Gt})}_enableInsertContentIntegration(){let e=this.editor,t=this.editor.model,n=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(r,[s,o])=>{if(o&&!o.is("documentSelection"))return;let l=Tl(n);if(!!l)return r.stop(),t.change(u=>{let f=n.getSelectedElement(),g=t.createPositionAt(f,l),p=u.createSelection(g),y=t.insertContent(s,p);return u.setSelection(p),y})},{priority:"high"})}_enableInsertObjectIntegration(){let e=this.editor,n=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(r,s)=>{let[,o,l={}]=s;if(o&&!o.is("documentSelection"))return;let u=Tl(n);!u||(l.findOptimalPosition=u,s[3]=l)},{priority:"high"})}_enableDeleteContentIntegration(){let e=this.editor,n=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(r,[s])=>{if(s&&!s.is("documentSelection"))return;Tl(n)&&r.stop()},{priority:"high"})}};function wfe(i,e,t){let n=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(r){let s=this.toDomElement(r);return yfe(s,e),_fe(s),s});i.insert(i.createPositionAt(t,"end"),n)}function yfe(i,e){for(let t of G7){let n=new zn({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[i.ownerDocument.importNode(vfe,!0)]});i.appendChild(n.render())}}function _fe(i){let e=new zn({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});i.appendChild(e.render())}function xfe(i,e){let t=e;for(let n of e.getAncestors({parentFirst:!0})){if(n.childCount>1||i.isLimit(n))break;t=n}return t}function kfe(i){let e=i.model;return(t,n)=>{let r=n.keyCode==Ge.arrowup,s=n.keyCode==Ge.arrowdown,o=n.shiftKey,l=e.document.selection;if(!r&&!s)return;let u=s;if(o&&Efe(l,u))return;let f=Cfe(i,l,u);if(!!f){if(f.isCollapsed){if(l.isCollapsed)return;if(o)return}(f.isCollapsed||Tfe(i,f,u))&&(e.change(g=>{let p=u?f.end:f.start;if(o){let y=e.createSelection(l.anchor);y.setFocus(p),g.setSelection(y)}else g.setSelection(p)}),t.stop(),n.preventDefault(),n.stopPropagation())}}}function Cfe(i,e,t){let n=i.model;if(t){let r=e.isCollapsed?e.focus:e.getLastPosition(),s=Z7(n,r,"forward");if(!s)return null;let o=n.createRange(r,s),l=J7(n.schema,o,"backward");return l?n.createRange(r,l):null}else{let r=e.isCollapsed?e.focus:e.getFirstPosition(),s=Z7(n,r,"backward");if(!s)return null;let o=n.createRange(s,r),l=J7(n.schema,o,"forward");return l?n.createRange(l,r):null}}function Z7(i,e,t){let n=i.schema,r=i.createRangeIn(e.root),s=t=="forward"?"elementStart":"elementEnd";for(let{previousPosition:o,item:l,type:u}of r.getWalker({startPosition:e,direction:t})){if(n.isLimit(l)&&!n.isInline(l))return o;if(u==s&&n.isBlock(l))return null}return null}function J7(i,e,t){let n=t=="backward"?e.end:e.start;if(i.checkChild(n,"$text"))return n;for(let{nextPosition:r}of e.getWalker({direction:t}))if(i.checkChild(r,"$text"))return r;return null}function Tfe(i,e,t){let n=i.model,r=i.view.domConverter;if(t){let f=n.createSelection(e.start);n.modifySelection(f),!f.focus.isAtEnd&&!e.start.isEqual(f.focus)&&(e=n.createRange(f.focus,e.end))}let s=i.mapper.toViewRange(e),o=r.viewRangeToDom(s),l=Be.getDomRangeRects(o),u;for(let f of l){if(u===void 0){u=Math.round(f.bottom);continue}if(Math.round(f.top)>=u)return!1;u=Math.max(u,Math.round(f.bottom))}return!0}function Efe(i,e){return!i.isCollapsed&&i.isBackward==e}var Gr=class extends ne{constructor(){super(...arguments);v(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[Y7,rr]}init(){let e=this.editor,t=e.editing.view,n=t.document,r=e.t;this.editor.editing.downcastDispatcher.on("selection",(s,o,l)=>{let u=l.writer,f=o.selection;if(f.isCollapsed)return;let g=f.getSelectedElement();if(!g)return;let p=e.editing.mapper.toViewElement(g);!Gt(p)||!l.consumable.consume(f,"selection")||u.setSelection(u.createRangeOn(p),{fake:!0,label:dfe(p)})}),this.editor.editing.downcastDispatcher.on("selection",(s,o,l)=>{this._clearPreviouslySelectedWidgets(l.writer);let u=l.writer,f=u.document.selection,g=null;for(let p of f.getRanges())for(let y of p){let _=y.item;Gt(_)&&!Ife(_,g)&&(u.addClass($7,_),this._previouslySelected.add(_),g=_)}},{priority:"low"}),t.addObserver(fl),this.listenTo(n,"mousedown",(...s)=>this._onMousedown(...s)),this.listenTo(n,"arrowKey",(...s)=>{this._handleSelectionChangeOnArrowKeyPress(...s)},{context:[Gt,"$text"]}),this.listenTo(n,"arrowKey",(...s)=>{this._preventDefaultOnArrowKeyPress(...s)},{context:"$root"}),this.listenTo(n,"arrowKey",kfe(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",(s,o)=>{this._handleDelete(o.direction=="forward")&&(o.preventDefault(),s.stop())},{context:"$root"}),this.listenTo(n,"tab",(s,o)=>{s.eventPhase=="atTarget"&&(o.shiftKey||this._selectFirstNestedEditable()&&(o.preventDefault(),s.stop()))},{context:Gt,priority:"low"}),this.listenTo(n,"tab",(s,o)=>{!o.shiftKey||this._selectAncestorWidget()&&(o.preventDefault(),s.stop())},{priority:"low"}),this.listenTo(n,"keydown",(s,o)=>{o.keystroke==Ge.esc&&this._selectAncestorWidget()&&(o.preventDefault(),s.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:r("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:r("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:r("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:r("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:r("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){let n=this.editor,r=n.editing.view,s=r.document,o=t.target;if(!o)return;if(t.domEvent.detail>=3){this._selectBlockContent(o)&&t.preventDefault();return}if(!Gt(o)){let u=Sfe(o);if(!u)return;if(Gt(u))o=u;else{let f=Afe(r,t);if(f&&Gt(f))o=f;else return}}Le.isAndroid&&t.preventDefault(),s.isFocused||r.focus();let l=n.editing.mapper.toModelElement(o);this._setSelectionOverElement(l)}_selectBlockContent(e){let t=this.editor,n=t.model,r=t.editing.mapper,s=n.schema,o=r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),l=Pfe(r.toModelElement(o),n.schema);return l?(n.change(u=>{let f=s.isLimit(l)?null:Rfe(u.createPositionAfter(l),s),g=u.createPositionAt(l,0),p=f?u.createPositionAt(f,0):u.createPositionAt(l,"end");u.setSelection(u.createRange(g,p))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){let n=t.keyCode,r=this.editor.model,s=r.schema,o=r.document.selection,l=o.getSelectedElement(),u=Ah(n,this.editor.locale.contentLanguageDirection),f=u=="down"||u=="right",g=u=="up"||u=="down";if(l&&s.isObject(l)){let y=f?o.getLastPosition():o.getFirstPosition(),_=s.getNearestSelectionRange(y,f?"forward":"backward");_&&(r.change(C=>{C.setSelection(_)}),t.preventDefault(),e.stop());return}if(!o.isCollapsed&&!t.shiftKey){let y=o.getFirstPosition(),_=o.getLastPosition(),C=y.nodeAfter,E=_.nodeBefore;(C&&s.isObject(C)||E&&s.isObject(E))&&(r.change(P=>{P.setSelection(f?_:y)}),t.preventDefault(),e.stop());return}if(!o.isCollapsed)return;let p=this._getObjectElementNextToSelection(f);if(p&&s.isObject(p)){if(s.isInline(p)&&g)return;this._setSelectionOverElement(p),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){let n=this.editor.model,r=n.schema,s=n.document.selection.getSelectedElement();s&&r.isObject(s)&&(t.preventDefault(),e.stop())}_handleDelete(e){let n=this.editor.model.document.selection;if(!this.editor.model.canEditAt(n)||!n.isCollapsed)return;let r=this._getObjectElementNextToSelection(e);if(r)return this.editor.model.change(s=>{let o=n.anchor.parent;for(;o.isEmpty;){let l=o;o=l.parent,s.remove(l)}this._setSelectionOverElement(r)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){let t=this.editor.model,n=t.schema,r=t.document.selection,s=t.createSelection(r);if(t.modifySelection(s,{direction:e?"forward":"backward"}),s.isEqual(r))return null;let o=e?s.focus.nodeBefore:s.focus.nodeAfter;return!!o&&n.isObject(o)?o:null}_clearPreviouslySelectedWidgets(e){for(let t of this._previouslySelected)e.removeClass($7,t);this._previouslySelected.clear()}_selectFirstNestedEditable(){let e=this.editor,n=this.editor.editing.view.document;for(let r of n.selection.getFirstRange().getItems())if(r.is("editableElement")){let s=e.editing.mapper.toModelElement(r);if(!s)continue;let o=e.model.createPositionAt(s,0),l=e.model.schema.getNearestSelectionRange(o,"forward");return e.model.change(u=>{u.setSelection(l)}),!0}return!1}_selectAncestorWidget(){let e=this.editor,t=e.editing.mapper,r=e.editing.view.document.selection.getFirstPosition().parent,o=(r.is("$text")?r.parent:r).findAncestor(Gt);if(!o)return!1;let l=t.toModelElement(o);return l?(e.model.change(u=>{u.setSelection(l,"on")}),!0):!1}};function Sfe(i){let e=i;for(;e;){if(e.is("editableElement")||Gt(e))return e;e=e.parent}return null}function Afe(i,e){let t=xp(e.domEvent),n=null;if(t?n=i.domConverter.domRangeToView(t):n=i.createRange(i.createPositionAt(e.target,0)),!n)return null;let r=n.start;if(!r.parent)return null;let s=r.parent;return r.parent.is("editableElement")&&(r.isAtEnd&&r.nodeBefore?s=r.nodeBefore:r.isAtStart&&r.nodeAfter&&(s=r.nodeAfter)),s.is("$text")?s.parent:s}function Ife(i,e){return e?Array.from(i.getAncestors()).includes(e):!1}function Pfe(i,e){for(let t of i.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function Rfe(i,e){let t=new xr({startPosition:i});for(let{item:n}of t){if(e.isLimit(n)||!n.is("element"))return null;if(e.checkChild(n,"$text"))return n}return null}var Lu=class extends qr{constructor(e){super(e);v(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);let t=this.document;this.listenTo(t,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",n("dragging"),{priority:"low"});function n(r){return(s,o)=>{o.preventDefault();let l=o.dropRange?[o.dropRange]:null,u=new Qn(t,r);t.fire(u,{dataTransfer:o.dataTransfer,method:s.name,targetRanges:l,target:o.target,domEvent:o.domEvent}),u.stop.called&&o.stopPropagation()}}}onDomEvent(e){let t="clipboardData"in e?e.clipboardData:e.dataTransfer,n=e.type=="drop"||e.type=="paste",r={dataTransfer:new Mp(t,{cacheFiles:n})};if(e.type=="drop"||e.type=="dragover"){let s=xp(e);r.dropRange=s&&this.view.domConverter.domRangeToView(s)}this.fire(e.type,e,r)}};function Ofe(i){return i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(i.includes("</p><p>")||i.includes("<br>"))&&(i=`<p>${i}</p>`),i}function Mfe(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}var X7=["figcaption","li"],Q7=["ol","ul"];function eV(i){if(i.is("$text")||i.is("$textProxy"))return i.data;if(i.is("element","img")&&i.hasAttribute("alt"))return i.getAttribute("alt");if(i.is("element","br"))return`
`;let e="",t=null;for(let n of i.getChildren())e+=Lfe(n,t)+eV(n),t=n;return e}function Lfe(i,e){return e?i.is("element","li")&&!i.isEmpty&&i.getChild(0).is("containerElement")||Q7.includes(i.name)&&Q7.includes(e.name)?`

`:!i.is("containerElement")&&!e.is("containerElement")?"":X7.includes(i.name)||X7.includes(e.name)?`
`:i.is("element")&&i.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}var lb=class extends ne{constructor(){super(...arguments);v(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,n=r=>r.model.getSelectedContent(r.model.document.selection)){return this.editor.model.change(r=>{let s=r.model.document.selection;r.setSelection(t);let o=this._insertFakeMarkersIntoSelection(r,r.model.document.selection,e),l=n(r),u=this._removeFakeMarkersInsideElement(r,l);for(let[f,g]of Object.entries(o)){u[f]||(u[f]=r.createRangeIn(l));for(let p of g)r.remove(p)}l.markers.clear();for(let[f,g]of Object.entries(u))l.markers.set(f,g);return r.setSelection(s),l})}_pasteMarkersIntoTransformedElement(e,t){let n=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(r=>{let s=this._insertFakeMarkersElements(r,n),o=t(r),l=this._removeFakeMarkersInsideElement(r,o);for(let u of Object.values(s).flat())r.remove(u);for(let[u,f]of Object.entries(l))r.model.markers.has(u)||r.addMarker(u,{usingOperation:!0,affectsData:!0,range:f});return o})}_pasteFragmentWithMarkers(e){let t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(let n of t)e.markers.set(n.name,n.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,n={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){let r=this._markersToCopy.get(e);this._markersToCopy.set(e,n),t(),r?this._markersToCopy.set(e,r):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){let n=this._getMarkerClipboardConfig(e);if(!n)return!1;if(!t)return!0;let{allowedActions:r}=n;return r==="all"||r.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){let[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,n){let r=this._getCopyableMarkersFromSelection(e,t,n);return this._insertFakeMarkersElements(e,r)}_getCopyableMarkersFromSelection(e,t,n){let r=Array.from(t.getRanges()),s=new Set(r.flatMap(l=>Array.from(e.model.markers.getMarkersIntersectingRange(l)))),o=l=>{if(!this._isMarkerCopyable(l.name,n))return!1;let{copyPartiallySelected:f}=this._getMarkerClipboardConfig(l.name);if(!f){let g=l.getRange();return r.some(p=>p.containsRange(g,!0))}return!0};return Array.from(s).filter(o).map(l=>({name:n==="dragstart"?this._getUniqueMarkerName(l.name):l.name,range:l.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){let{model:n}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([s,o])=>{if(!this._hasMarkerConfiguration(s))return[{name:s,range:o}];if(this._isMarkerCopyable(s,t)){let l=this._getMarkerClipboardConfig(s),u=n.markers.has(s)&&n.markers.get(s).getRange().root.rootName==="$graveyard";return(l.duplicateOnPaste||u)&&(s=this._getUniqueMarkerName(s)),[{name:s,range:o}]}return[]})}_insertFakeMarkersElements(e,t){let n={},r=t.flatMap(s=>{let{start:o,end:l}=s.range;return[{position:o,marker:s,type:"start"},{position:l,marker:s,type:"end"}]}).sort(({position:s},{position:o})=>s.isBefore(o)?1:-1);for(let{position:s,marker:o,type:l}of r){let u=e.createElement("$marker",{"data-name":o.name,"data-type":l});n[o.name]||(n[o.name]=[]),n[o.name].push(u),e.insert(u,s)}return n}_removeFakeMarkersInsideElement(e,t){let r=this._getAllFakeMarkersFromElement(e,t).reduce((s,o)=>{let l=o.markerElement&&e.createPositionBefore(o.markerElement),u=s[o.name],f=!1;return u&&u.start&&u.end&&(this._getMarkerClipboardConfig(o.name).duplicateOnPaste?s[this._getUniqueMarkerName(o.name)]=s[o.name]:f=!0,u=null),f||(s[o.name]=tt(ee({},u),{[o.type]:l})),o.markerElement&&e.remove(o.markerElement),s},{});return ey(r,s=>new q(s.start||e.createPositionFromPath(t,[0]),s.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){let n=Array.from(e.createRangeIn(t)).flatMap(({item:o})=>{if(!o.is("element","$marker"))return[];let l=o.getAttribute("data-name"),u=o.getAttribute("data-type");return[{markerElement:o,name:l,type:u}]}),r=[],s=[];for(let o of n)o.type==="end"&&(n.some(u=>u.name===o.name&&u.type==="start")||r.push({markerElement:null,name:o.name,type:"start"})),o.type==="start"&&(n.some(u=>u.name===o.name&&u.type==="end")||s.unshift({markerElement:null,name:o.name,type:"end"}));return[...r,...n,...s]}_getUniqueMarkerName(e){let t=e.split(":"),n=Si().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${n}`:`${t.join(":")}:${n}`}},En=class extends ne{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[lb]}init(){this.editor.editing.view.addObserver(Lu),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,n){let r=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:n==="cut"},()=>{let s=r._copySelectedFragmentWithMarkers(n,t);this.fire("outputTransformation",{dataTransfer:e,content:s,method:n})})}_setupPasteDrop(){let e=this.editor,t=e.model,n=e.editing.view,r=n.document,s=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(r,"clipboardInput",(o,l)=>{l.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(r,"clipboardInput",(o,l)=>{let u=l.dataTransfer,f;if(l.content)f=l.content;else{let p="";u.getData("text/html")?p=Mfe(u.getData("text/html")):u.getData("text/plain")&&(p=Ofe(u.getData("text/plain"))),f=this.editor.data.htmlProcessor.toView(p)}let g=new Qn(this,"inputTransformation");this.fire(g,{content:f,dataTransfer:u,targetRanges:l.targetRanges,method:l.method}),g.stop.called&&o.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,l)=>{if(l.content.isEmpty)return;let f=this.editor.data.toModel(l.content,"$clipboardHolder");f.childCount!=0&&(o.stop(),t.change(()=>{this.fire("contentInsertion",{content:f,method:l.method,dataTransfer:l.dataTransfer,targetRanges:l.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,l)=>{l.resultRange=s._pasteFragmentWithMarkers(l.content)},{priority:"low"})}_setupCopyCut(){let e=this.editor,t=e.model.document,r=e.editing.view.document,s=(o,l)=>{let u=l.dataTransfer;l.preventDefault(),this._fireOutputTransformationEvent(u,t.selection,o.name)};this.listenTo(r,"copy",s,{priority:"low"}),this.listenTo(r,"cut",(o,l)=>{e.model.canEditAt(e.model.document.selection)?s(o,l):l.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,l)=>{let u=e.data.toView(l.content);r.fire("clipboardOutput",{dataTransfer:l.dataTransfer,content:u,method:l.method})},{priority:"low"}),this.listenTo(r,"clipboardOutput",(o,l)=>{l.content.isEmpty||(l.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(l.content)),l.dataTransfer.setData("text/plain",eV(l.content))),l.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}},$_=ps("px"),tV=class extends Ce{constructor(){super();let e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>$_(t)),top:e.to("top",t=>$_(t)),width:e.to("width",t=>$_(t))}}})}},hf=class extends ne{constructor(){super(...arguments);v(this,"removeDropMarkerDelayed",nu(()=>this.removeDropMarker(),40));v(this,"_updateDropMarkerThrottled",sa(e=>this._updateDropMarker(e),40));v(this,"_reconvertMarkerThrottled",sa(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));v(this,"_dropTargetLineView",new tV);v(this,"_domEmitter",new(Vi()));v(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(let{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,n,r,s,o){this.removeDropMarkerDelayed.cancel();let l=iV(this.editor,e,t,n,r,s,o);if(!!l){if(o&&o.containsRange(l))return this.removeDropMarker();this._updateDropMarkerThrottled(l)}}getFinalDropRange(e,t,n,r,s,o){let l=iV(this.editor,e,t,n,r,s,o);return this.removeDropMarker(),l}removeDropMarker(){let e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){let e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:n})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(n);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){let t=this.editor,n=t.model.markers;t.model.change(r=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(e)||r.updateMarker("drop-target",{range:e}):r.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){let n=this.toDomElement(t);return n.append("\u2060",t.createElement("span"),"\u2060"),n})}_updateDropTargetLine(e){let t=this.editor.editing,n=e.start.nodeBefore,r=e.start.nodeAfter,s=e.start.parent,o=n?t.mapper.toViewElement(n):null,l=o?t.view.domConverter.mapViewToDom(o):null,u=r?t.mapper.toViewElement(r):null,f=u?t.view.domConverter.mapViewToDom(u):null,g=t.mapper.toViewElement(s);if(!g)return;let p=t.view.domConverter.mapViewToDom(g),y=this._getScrollableRect(g),{scrollX:_,scrollY:C}=we.window,E=l?new Be(l):null,P=f?new Be(f):null,M=new Be(p).excludeScrollbarsAndBorders(),O=E?E.bottom:M.top,N=P?P.top:M.bottom,W=we.window.getComputedStyle(p),Z=O<=N?(O+N)/2:N;if(y.top<Z&&Z<y.bottom){let U=M.left+parseFloat(W.paddingLeft),ie=M.right-parseFloat(W.paddingRight),X=Math.max(U+_,y.left),F=Math.min(ie+_,y.right);this._dropTargetLineView.set({isVisible:!0,left:X,top:Z+C,width:F-X})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){let t=e.root.rootName,n;if(this._scrollables.has(t))n=this._scrollables.get(t).domElement;else{let r=this.editor.editing.view.domConverter.mapViewToDom(e);n=Vfe(r),this._domEmitter.listenTo(n,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});let s=new io(n,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:n,resizeObserver:s})}return new Be(n).excludeScrollbarsAndBorders()}};function iV(i,e,t,n,r,s,o){let l=i.model,u=i.editing.mapper,g=rV(i,e);for(;g;){if(!s){if(l.schema.checkChild(g,"$text")){if(t){let p=t[0].start,y=u.toModelPosition(p);if(!o||Array.from(o.getItems()).every(C=>l.schema.checkChild(y,C))){if(l.schema.checkChild(y,"$text"))return l.createRange(y);if(p)return cb(i,rV(i,p.parent),n,r)}}}else if(l.schema.isInline(g))return cb(i,g,n,r)}if(l.schema.isBlock(g))return cb(i,g,n,r);if(l.schema.checkChild(g,"$block")){let p=Array.from(g.getChildren()).filter(C=>C.is("element")&&!Dfe(i,C)),y=0,_=p.length;if(_==0)return l.createRange(l.createPositionAt(g,"end"));for(;y<_-1;){let C=Math.floor((y+_)/2);nV(i,p[C],n,r)=="before"?_=C:y=C}return cb(i,p[y],n,r)}g=g.parent}return null}function Dfe(i,e){let t=i.editing.mapper,n=i.editing.view.domConverter,r=t.toViewElement(e);if(!r)return!0;let s=n.mapViewToDom(r);return we.window.getComputedStyle(s).float!="none"}function cb(i,e,t,n){let r=i.model;return r.createRange(r.createPositionAt(e,nV(i,e,t,n)))}function nV(i,e,t,n){let r=i.editing.mapper,s=i.editing.view.domConverter,o=r.toViewElement(e),l=s.mapViewToDom(o),u=new Be(l);return i.model.schema.isInline(e)?t<(u.left+u.right)/2?"before":"after":n<(u.top+u.bottom)/2?"before":"after"}function rV(i,e){let t=i.editing.mapper,n=i.editing.view,r=t.toModelElement(e);if(r)return r;let s=n.createPositionBefore(e),o=t.findMappedViewAncestor(s);return t.toModelElement(o)}function Vfe(i){let e=i;do{e=e.parentElement;let t=we.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}var sV=class extends ne{constructor(){super(...arguments);v(this,"_isBlockDragging",!1);v(this,"_domEmitter",new(Vi()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,n,r)=>{r?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Le.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){let n=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(n,"dragstart",(r,s)=>this._handleBlockDragStart(s)),this._domEmitter.listenTo(we.document,"dragover",(r,s)=>this._handleBlockDragging(s)),this._domEmitter.listenTo(we.document,"drop",(r,s)=>this._handleBlockDragging(s)),this._domEmitter.listenTo(we.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&n.setAttribute("draggable","true"),this.on("change:isEnabled",(r,s,o)=>{n.setAttribute("draggable",o?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;let t=this.editor.model,n=t.document.selection,r=this.editor.editing.view,s=Array.from(n.getSelectedBlocks()),o=t.createRange(t.createPositionBefore(s[0]),t.createPositionAfter(s[s.length-1]));t.change(l=>l.setSelection(o)),this._isBlockDragging=!0,r.focus(),r.getObserver(Lu).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;let t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),n=e.clientY,r=document.elementFromPoint(t,n),s=this.editor.editing.view;!r||!r.closest(".ck-editor__editable")||s.getObserver(Lu).onDomEvent(tt(ee({},e),{type:e.type,dataTransfer:e.dataTransfer,target:r,clientX:t,clientY:n,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()}))}_handleBlockDragEnd(){this._isBlockDragging=!1}},oV=class extends ne{constructor(){super(...arguments);v(this,"_draggedRange");v(this,"_draggingUid");v(this,"_draggableElement");v(this,"_clearDraggableAttributesDelayed",nu(()=>this._clearDraggableAttributes(),40));v(this,"_blockMode",!1);v(this,"_domEmitter",new(Vi()));v(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[En,Gr,hf,sV]}init(){let e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(Lu),t.addObserver(fl),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(n,r,s)=>{s?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(n,r,s)=>{s||this._finalizeDragging(!1)}),Le.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){let e=this.editor,t=e.model,n=e.editing.view,r=n.document,s=e.plugins.get(hf);this.listenTo(r,"dragstart",(o,l)=>{if(l.target&&l.target.is("editableElement")){l.preventDefault();return}if(this._prepareDraggedRange(l.target),!this._draggedRange){l.preventDefault();return}this._draggingUid=Si(),l.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",l.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);let u=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer,u,"dragstart");let{dataTransfer:g,domTarget:p,domEvent:y}=l,{clientX:_}=y;this._updatePreview({dataTransfer:g,domTarget:p,clientX:_}),l.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(r,"dragend",(o,l)=>{this._finalizeDragging(!l.dataTransfer.isCanceled&&l.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(we.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(r,"dragenter",()=>{!this.isEnabled||n.focus()}),this.listenTo(r,"dragleave",()=>{s.removeDropMarkerDelayed()}),this.listenTo(r,"dragging",(o,l)=>{if(!this.isEnabled){l.dataTransfer.dropEffect="none";return}let{clientX:u,clientY:f}=l.domEvent;s.updateDropMarker(l.target,l.targetRanges,u,f,this._blockMode,this._draggedRange),this._draggedRange||(l.dataTransfer.dropEffect="copy"),Le.isGecko||(l.dataTransfer.effectAllowed=="copy"?l.dataTransfer.dropEffect="copy":["all","copyMove"].includes(l.dataTransfer.effectAllowed)&&(l.dataTransfer.dropEffect="move")),o.stop()},{priority:"low"})}_setupClipboardInputIntegration(){let e=this.editor,n=e.editing.view.document,r=e.plugins.get(hf);this.listenTo(n,"clipboardInput",(s,o)=>{if(o.method!="drop")return;let{clientX:l,clientY:u}=o.domEvent,f=r.getFinalDropRange(o.target,o.targetRanges,l,u,this._blockMode,this._draggedRange);if(!f){this._finalizeDragging(!1),s.stop();return}if(this._draggedRange&&this._draggingUid!=o.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),aV(o.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(f,!0)){this._finalizeDragging(!1),s.stop();return}o.targetRanges=[e.editing.mapper.toViewRange(f)]},{priority:"high"})}_setupContentInsertionIntegration(){let e=this.editor.plugins.get(En);e.on("contentInsertion",(t,n)=>{if(!this.isEnabled||n.method!=="drop")return;let r=n.targetRanges.map(s=>this.editor.editing.mapper.toModelRange(s));this.editor.model.change(s=>s.setSelection(r))},{priority:"high"}),e.on("contentInsertion",(t,n)=>{if(!this.isEnabled||n.method!=="drop")return;let r=aV(n.dataTransfer)=="move",s=!n.resultRange||!n.resultRange.isCollapsed;this._finalizeDragging(s&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){let e=this.editor,t=e.editing.view,n=t.document;this.listenTo(n,"mousedown",(r,s)=>{if(Le.isAndroid||!s)return;this._clearDraggableAttributesDelayed.cancel();let o=lV(s.target);if(Le.isBlink&&!e.isReadOnly&&!o&&!n.selection.isCollapsed){let l=n.selection.getSelectedElement();(!l||!Gt(l))&&(o=n.selection.editableElement)}o&&(t.change(l=>{l.setAttribute("draggable","true",o)}),this._draggableElement=e.editing.mapper.toModelElement(o))}),this.listenTo(n,"mouseup",()=>{Le.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){let e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){let t=this.editor,n=t.model;t.plugins.get(hf).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),!!this._draggedRange&&(e&&this.isEnabled&&n.change(s=>{let o=n.createSelection(this._draggedRange);n.deleteContent(o,{doNotAutoparagraph:!0});let l=o.getFirstPosition().parent;l.isEmpty&&!n.schema.checkChild(l,"$text")&&n.schema.checkChild(l,"paragraph")&&s.insertElement("paragraph",l,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){let t=this.editor,n=t.model,r=n.document.selection,s=e?lV(e):null;if(s){let f=t.editing.mapper.toModelElement(s);this._draggedRange=Bi.fromRange(n.createRangeOn(f)),this._blockMode=n.schema.isBlock(f),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(r.isCollapsed&&!r.getFirstPosition().parent.isEmpty)return;let o=Array.from(r.getSelectedBlocks()),l=r.getFirstRange();if(o.length==0){this._draggedRange=Bi.fromRange(l);return}let u=cV(n,o);if(o.length>1)this._draggedRange=Bi.fromRange(u),this._blockMode=!0;else if(o.length==1){let f=l.start.isTouching(u.start)&&l.end.isTouching(u.end);this._draggedRange=Bi.fromRange(f?u:l),this._blockMode=f}n.change(f=>f.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:n}){let r=this.editor.editing.view,s=r.document.selection.editableElement,o=r.domConverter.mapViewToDom(s),l=we.window.getComputedStyle(o);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=Ai(we.document,"div",{style:"position: fixed; left: -999999px;"}),we.document.body.appendChild(this._previewContainer));let u=new Be(o);if(o.contains(t))return;let f=parseFloat(l.paddingLeft),g=Ai(we.document,"div");g.className="ck ck-content",g.style.width=l.width,g.style.paddingLeft=`${u.left-n+f}px`,Le.isiOS&&(g.style.backgroundColor="white"),r.domConverter.setContentOf(g,e.getData("text/html")),e.setDragImage(g,0,0),this._previewContainer.appendChild(g)}};function aV(i){return Le.isGecko?i.dropEffect:["all","copyMove"].includes(i.effectAllowed)?"move":"copy"}function lV(i){if(i.is("editableElement"))return null;if(i.hasClass("ck-widget__selection-handle"))return i.findAncestor(Gt);if(Gt(i))return i;let e=i.findAncestor(t=>Gt(t)||t.is("editableElement"));return Gt(e)?e:null}function cV(i,e){let t=e[0],n=e[e.length-1],r=t.getCommonAncestor(n),s=i.createPositionBefore(t),o=i.createPositionAfter(n);if(r&&r.is("element")&&!i.schema.isLimit(r)){let l=i.createRangeOn(r),u=s.isTouching(l.start),f=o.isTouching(l.end);if(u&&f)return cV(i,[r])}return i.createRange(s,o)}var uV=class extends ne{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[En]}init(){let e=this.editor,t=e.model,n=e.editing.view,r=t.document.selection;n.addObserver(Lu),e.plugins.get(En).on("contentInsertion",(s,o)=>{!Bfe(o.content,t)||t.change(l=>{let u=Array.from(r.getAttributes()).filter(([g])=>t.schema.getAttributeProperties(g).isFormatting);r.isCollapsed||t.deleteContent(r,{doNotAutoparagraph:!0}),u.push(...r.getAttributes());let f=l.createRangeIn(o.content);for(let g of f.getItems())for(let p of u)t.schema.checkAttribute(g,p[0])&&l.setAttribute(p[0],p[1],g)})})}};function Bfe(i,e){let t=e.createRangeIn(i);if(i.childCount==1){let n=i.getChild(0);n.is("element")&&e.schema.isBlock(n)&&!e.schema.isObject(n)&&!e.schema.isLimit(n)&&(t=e.createRangeIn(n))}for(let n of t.getItems())if(!e.schema.isInline(n)||Array.from(n.getAttributeKeys()).find(s=>e.schema.getAttributeProperties(s).isFormatting))return!1;return!0}var ff=class extends ne{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[lb,En,oV,uV]}init(){let e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}};var dV=class extends _l{constructor(e,t){super(e);v(this,"view");v(this,"_toolbarConfig");v(this,"_elementReplacer");this.view=t,this._toolbarConfig=Zp(e.config.get("toolbar")),this._elementReplacer=new xh,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){let t=this.editor,n=this.view,r=t.editing.view,s=n.editable,o=r.document.getRoot();s.name=o.rootName,n.render();let l=s.element;this.setEditableElement(s.name,l),n.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(l),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),n.menuBarView&&this._initMenuBar(n.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();let e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.getDomRoot(e.editable.name)&&t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){let e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){let e=this.editor,t=e.editing.view,n=t.document.getRoot(),r=e.sourceElement,s,o=e.config.get("placeholder");o&&(s=typeof o=="string"?o:o[this.view.editable.name]),!s&&r&&r.tagName.toLowerCase()==="textarea"&&(s=r.getAttribute("placeholder")),s&&(n.placeholder=s),ro({view:t,element:n,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;let{stickyPanel:e}=this.view,t=this.editor.plugins.get("ContextualBalloon");t.on("getPositionOptions",r=>{let s=r.return;if(!s||!e.isSticky||!e.element)return;let o=new Be(e.element).height,l=typeof s.target=="function"?s.target():s.target,u=typeof s.limiter=="function"?s.limiter():s.limiter;if(l&&u&&new Be(l).height>=new Be(u).height-o)return;let f=ee({},s.viewportOffsetConfig),g=(f.top||0)+o;r.return=tt(ee({},s),{viewportOffsetConfig:tt(ee({},f),{top:g})})},{priority:"low"});let n=()=>{t.visibleView&&t.updatePosition()};this.listenTo(e,"change:isSticky",n),this.listenTo(this.editor.ui,"change:viewportOffset",n)}_handleScrollToTheSelectionWithStickyPanel(e,t,n){let r=this.view.stickyPanel;if(r.isSticky){let s=new Be(r.element).height;t.viewportOffset.top+=s}else{let s=()=>{this.editor.editing.view.scrollToTheSelection(n)};this.listenTo(r,"change:isSticky",s),setTimeout(()=>{this.stopListening(r,"change:isSticky",s)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;let e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{let n=t.view;n.on("moveTo",(r,s)=>{if(!e.isSticky||n.wasMoved)return;let o=new Be(e.contentPanelElement);s[1]<o.bottom+_u.defaultOffset&&(s[1]=o.bottom+_u.defaultOffset)},{priority:"high"})},{priority:"low"})}},hV=class extends T_{constructor(e,t,n={}){super(e);v(this,"stickyPanel");v(this,"toolbar");v(this,"editable");this.stickyPanel=new E_(e),this.toolbar=new fo(e,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),n.useMenuBar&&(this.menuBarView=new kl(e)),this.editable=new xl(e,t,void 0,{label:n.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}},K_=class extends ml(Tr){constructor(e,t={}){if(!ub(e)&&t.initialData!==void 0)throw new L("editor-create-initial-data",null);super(t);v(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",Nfe(e)),ub(e)&&(this.sourceElement=e),this.model.document.createRoot();let n=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=this.config.get("menuBar"),s=new hV(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n,useMenuBar:r.isVisible,label:this.config.get("label")});this.ui=new dV(this,s),Hp(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(n=>{let r=new this(e,t);n(r.initPlugins().then(()=>r.ui.init(ub(e)?e:null)).then(()=>r.data.init(r.config.get("initialData"))).then(()=>r.fire("ready")).then(()=>r))})}};function Nfe(i){return ub(i)?eu(i):i}function ub(i){return Xn(i)}var fV=class extends We{constructor(e){super(e);this.affectsData=!1}execute(){let e=this.editor.model,t=e.document.selection,n=e.schema.getLimitElement(t);if(t.containsEntireContent(n)||!mV(e.schema,n))do if(n=n.parent,!n)return;while(!mV(e.schema,n));e.change(r=>{r.setSelection(n,"in")})}};function mV(i,e){return i.isLimit(e)&&(i.checkChild(e,"$text")||i.checkChild(e,"paragraph"))}var Ffe=Eh("Ctrl+A"),gV=class extends ne{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t,r=e.editing.view.document;e.commands.add("selectAll",new fV(e)),this.listenTo(r,"keydown",(s,o)=>{no(o)===Ffe&&(e.execute("selectAll"),o.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}},jfe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',pV=class extends ne{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;e.ui.componentFactory.add("selectAll",()=>{let t=this._createButton(Ne);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(st))}_createButton(e){let t=this.editor,n=t.locale,r=t.commands.get("selectAll"),s=new e(t.locale),o=n.t;return s.set({label:o("Select all"),icon:jfe,keystroke:"Ctrl+A"}),s.bind("isEnabled").to(r,"isEnabled"),this.listenTo(s,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),s}},Y_=class extends ne{static get requires(){return[gV,pV]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}};var Z_=class extends We{constructor(e){super(e);v(this,"_stack",[]);v(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,n)=>{n[1]=ee({},n[1]);let r=n[1];r.batchType||(r.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,n)=>{n[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){let t=this.editor.model.document.selection,n={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,n){let r=this.editor.model,s=r.document,o=[],l=e.map(f=>f.getTransformedByOperations(n)),u=l.flat();for(let f of l){let g=f.filter(p=>p.root!=s.graveyard).filter(p=>!zfe(p,u));!g.length||(Hfe(g),o.push(g[0]))}o.length&&r.change(f=>{f.setSelection(o,{backward:t})})}_undo(e,t){let n=this.editor.model,r=n.document;this._createdBatches.add(t);let s=e.operations.slice().filter(o=>o.isDocumentOperation);s.reverse();for(let o of s){let l=o.baseVersion+1,u=Array.from(r.history.getOperations(l)),g=pD([o.getReversed()],u,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let p of g){let y=p.affectedSelectable;y&&!n.canEditAt(y)&&(p=new ri(p.baseVersion)),t.addOperation(p),n.applyOperation(p),r.history.setOperationAsUndone(o,p)}}}};function Hfe(i){i.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<i.length;e++){let n=i[e-1].getJoined(i[e],!0);n&&(e--,i.splice(e,2,n))}}function zfe(i,e){return e.some(t=>t!==i&&t.containsRange(i,!0))}var bV=class extends Z_{execute(e=null){let t=e?this._stack.findIndex(s=>s.batch==e):this._stack.length-1,n=this._stack.splice(t,1)[0],r=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(r,()=>{this._undo(n.batch,r);let s=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,s)}),this.fire("revert",n.batch,r),this.refresh()}},vV=class extends Z_{execute(){let e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{let r=e.batch.operations[e.batch.operations.length-1].baseVersion+1,s=this.editor.model.document.history.getOperations(r);this._restoreSelection(e.selection.ranges,e.selection.isBackward,s),this._undo(e.batch,t)}),this.refresh()}},wV=class extends ne{constructor(){super(...arguments);v(this,"_undoCommand");v(this,"_redoCommand");v(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t;this._undoCommand=new bV(e),this._redoCommand=new vV(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(n,r)=>{let s=r[0];if(!s.isDocumentOperation)return;let o=s.batch,l=this._redoCommand.createdBatches.has(o),u=this._undoCommand.createdBatches.has(o);this._batchRegistry.has(o)||(this._batchRegistry.add(o),!!o.isUndoable&&(l?this._undoCommand.addBatch(o):u||(this._undoCommand.addBatch(o),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(n,r,s)=>{this._redoCommand.addBatch(s)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}},yV=class extends ne{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale,n=e.t,r=t.uiLanguageDirection=="ltr"?$e.undo:$e.redo,s=t.uiLanguageDirection=="ltr"?$e.redo:$e.undo;this._addButtonsToFactory("undo",n("Undo"),"CTRL+Z",r),this._addButtonsToFactory("redo",n("Redo"),"CTRL+Y",s)}_addButtonsToFactory(e,t,n,r){let s=this.editor;s.ui.componentFactory.add(e,()=>{let o=this._createButton(Ne,e,t,n,r);return o.set({tooltip:!0}),o}),s.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(st,e,t,n,r))}_createButton(e,t,n,r,s){let o=this.editor,l=o.locale,u=o.commands.get(t),f=new e(l);return f.set({label:n,icon:s,keystroke:r}),f.bind("isEnabled").to(u,"isEnabled"),this.listenTo(f,"execute",()=>{o.execute(t),o.editing.view.focus()}),f}},El=class extends ne{static get requires(){return[wV,yV]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}};var J_=class extends ne{static get requires(){return[v_,ff,ks,Y_,ob,nb,El]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}};var xV=class extends We{constructor(e){super(e);this._isEnabledBasedOnSelection=!1}refresh(){let e=this.editor.model,t=e.document,n=$t(t.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&kV(n,e.schema)}execute(e={}){let t=this.editor.model,n=t.document,r=e.selection||n.selection;!t.canEditAt(r)||t.change(s=>{let o=r.getSelectedBlocks();for(let l of o)!l.is("element","paragraph")&&kV(l,t.schema)&&s.rename(l,"paragraph")})}};function kV(i,e){return e.checkChild(i.parent,"paragraph")&&!e.isObject(i)}var CV=class extends We{constructor(e){super(e);this._isEnabledBasedOnSelection=!1}execute(e){let t=this.editor.model,n=e.attributes,r=e.position;!t.canEditAt(r)||t.change(s=>{if(r=this._findPositionToInsertParagraph(r,s),!r)return;let o=s.createElement("paragraph");n&&t.schema.setAllowedAttributes(o,n,s),t.insertContent(o,r),s.setSelection(o,"in")})}_findPositionToInsertParagraph(e,t){let n=this.editor.model;if(n.schema.checkChild(e,"paragraph"))return e;let r=n.schema.findAllowedParent(e,"paragraph");if(!r)return null;let s=e.parent,o=n.schema.checkChild(s,"$text");return s.isEmpty||o&&e.isAtEnd?n.createPositionAfter(s):!s.isEmpty&&o&&e.isAtStart?n.createPositionBefore(s):t.split(e,r).position}},X_=class extends ne{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model;e.commands.add("paragraph",new xV(e)),e.commands.add("insertParagraph",new CV(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(n,{writer:r})=>!X_.paragraphLikeElements.has(n.name)||n.isEmpty?null:r.createElement("paragraph"),view:/.+/,converterPriority:"low"})}},Du=X_;v(Du,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));var TV=class extends We{constructor(e,t){super(e);v(this,"modelElements");this.modelElements=t}refresh(){let e=$t(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>EV(e,t,this.editor.model.schema))}execute(e){let t=this.editor.model,n=t.document,r=e.value;t.change(s=>{let o=Array.from(n.selection.getSelectedBlocks()).filter(l=>EV(l,r,t.schema));for(let l of o)l.is("element",r)||s.rename(l,r)})}};function EV(i,e,t){return t.checkChild(i.parent,e)&&!t.isObject(i)}var SV="paragraph",AV=class extends ne{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e);e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Du]}init(){let e=this.editor,t=e.config.get("heading.options"),n=[];for(let r of t)r.model!=="paragraph"&&(e.model.schema.register(r.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(r),n.push(r.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new TV(e,n))}afterInit(){let e=this.editor,t=e.commands.get("enter"),n=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(r,s)=>{let o=e.model.document.selection.getFirstPosition().parent;n.some(u=>o.is("element",u.model))&&!o.is("element",SV)&&o.childCount===0&&s.writer.rename(o,SV)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Ui.low+1})}};function Yfe(i){let e=i.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return i.config.get("heading.options").map(n=>{let r=t[n.title];return r&&r!=n.title&&(n.title=r),n})}var IV=class extends ne{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t,n=Yfe(e),r=t("Choose heading"),s=t("Heading");e.ui.componentFactory.add("heading",o=>{let l={},u=new Ht,f=e.commands.get("heading"),g=e.commands.get("paragraph"),p=[f];for(let _ of n){let C={type:"button",model:new xs({label:_.title,class:_.class,role:"menuitemradio",withText:!0})};_.model==="paragraph"?(C.model.bind("isOn").to(g,"value"),C.model.set("commandName","paragraph"),p.push(g)):(C.model.bind("isOn").to(f,"value",E=>E===_.model),C.model.set({commandName:"heading",commandValue:_.model})),u.add(C),l[_.model]=_.title}let y=Cn(o);return mo(y,u,{ariaLabel:s,role:"menu"}),y.buttonView.set({ariaLabel:s,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:s}),y.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),y.bind("isEnabled").toMany(p,"isEnabled",(..._)=>_.some(C=>C)),y.buttonView.bind("label").to(f,"value",g,"value",(_,C)=>{let E=C?"paragraph":_;return typeof E=="boolean"||!l[E]?r:l[E]}),y.buttonView.bind("ariaLabel").to(f,"value",g,"value",(_,C)=>{let E=C?"paragraph":_;return typeof E=="boolean"||!l[E]?s:`${l[E]}, ${s}`}),this.listenTo(y,"execute",_=>{let{commandName:C,commandValue:E}=_.source;e.execute(C,E?{value:E}:void 0),e.editing.view.focus()}),y}),e.ui.componentFactory.add("menuBar:heading",o=>{let l=new sn(o),u=e.commands.get("heading"),f=e.commands.get("paragraph"),g=[u],p=new Sr(o);l.set({class:"ck-heading-dropdown"}),p.set({ariaLabel:t("Heading"),role:"menu"}),l.buttonView.set({label:t("Heading")}),l.panelView.children.add(p);for(let y of n){let _=new Er(o,l),C=new st(o);_.children.add(C),p.items.add(_),C.set({isToggleable:!0,label:y.title,role:"menuitemradio",class:y.class}),C.delegate("execute").to(l),C.on("execute",()=>{let E=y.model==="paragraph"?"paragraph":"heading";e.execute(E,{value:y.model}),e.editing.view.focus()}),y.model==="paragraph"?(C.bind("isOn").to(f,"value"),g.push(f)):C.bind("isOn").to(u,"value",E=>E===y.model)}return l.bind("isEnabled").toMany(g,"isEnabled",(...y)=>y.some(_=>_)),l})}},Q_=class extends ne{static get requires(){return[AV,IV]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}};var KOe=new Set(["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"]);function Sl(i,e,t,n){e&&Zfe(i,e,n),t&&Cs(i,t,n)}function Cs(i,e,t){if(e.attributes)for(let[n,r]of Object.entries(e.attributes))i.setAttribute(n,r,t);e.styles&&i.setStyle(e.styles,t),e.classes&&i.addClass(e.classes,t)}function Zfe(i,e,t){if(e.attributes)for(let[n]of Object.entries(e.attributes))i.removeAttribute(n,t);if(e.styles)for(let n of Object.keys(e.styles))i.removeStyle(n,t);e.classes&&i.removeClass(e.classes,t)}function Jfe(i,e){let t=en(i),n="attributes";for(n in e)n=="classes"?t[n]=Array.from(new Set([...i[n]||[],...e[n]])):t[n]=ee(ee({},i[n]),e[n]);return t}function Vu(i,e,t,n,r){let s=e.getAttribute(t),o={};for(let l of["attributes","styles","classes"]){if(l!=n){s&&s[l]&&(o[l]=s[l]);continue}if(n=="classes"){let f=new Set(s&&s.classes||[]);r(f),f.size&&(o[l]=Array.from(f));continue}let u=new Map(Object.entries(s&&s[l]||{}));r(u),u.size&&(o[l]=Object.fromEntries(u))}Object.keys(o).length?e.is("documentSelection")?i.setSelectionAttribute(t,o):i.setAttribute(t,o,e):s&&(e.is("documentSelection")?i.removeSelectionAttribute(t):i.removeAttribute(t,e))}function Xfe(i){return iy(i).replace(/ /g,"")}function Ir(i){return`html${Xfe(i)}Attributes`}function ex({model:i}){return(e,t)=>t.writer.createElement(i,{htmlContent:e.getCustomProperty("$rawContent")})}function Qfe(i,{view:e,isInline:t}){let n=i.t;return(r,{writer:s})=>{let o=n("HTML object"),l=hb(e,r,s),u=r.getAttribute(Ir(e));s.addClass("html-object-embed__content",l),u&&Cs(s,u,l);let f=s.createContainerElement(t?"span":"div",{class:"html-object-embed","data-html-object-embed-label":o},l);return bo(f,s,{label:o})}}function hb(i,e,t){return t.createRawElement(i,null,(n,r)=>{r.setContentOf(n,e.getAttribute("htmlContent"))})}function eme({view:i,model:e,allowEmpty:t},n){return s=>{s.on(`element:${i}`,(o,l,u)=>{let f=n.processViewAttributes(l.viewItem,u);if(!(!f&&!u.consumable.test(l.viewItem,{name:!0}))){if(f=f||{},u.consumable.consume(l.viewItem,{name:!0}),l.modelRange||(l=Object.assign(l,u.convertChildren(l.viewItem,l.modelCursor))),t&&l.modelRange.isCollapsed&&Object.keys(f).length){let g=u.writer.createElement("htmlEmptyElement");if(!u.safeInsert(g,l.modelCursor))return;let p=u.getSplitParts(g);l.modelRange=u.writer.createRange(l.modelRange.start,u.writer.createPositionAfter(p[p.length-1])),u.updateConversionResult(g,l),r(g,f,u);return}for(let g of l.modelRange.getItems())r(g,f,u)}},{priority:"low"})};function r(s,o,l){if(l.schema.checkAttribute(s,e)){let u=s.getAttribute(e),f=Jfe(o,u||{});l.writer.setAttribute(e,f,s)}}}function PV({model:i,view:e},t){return(n,{writer:r,consumable:s})=>{if(!n.hasAttribute(i))return null;let o=r.createContainerElement(e),l=n.getAttribute(i);return s.consume(n,`attribute:${i}`),Cs(r,l,o),o.getFillerOffset=()=>null,t?bo(o,r):o}}function tme({priority:i,view:e}){return(t,n)=>{if(!t)return;let{writer:r}=n,s=r.createAttributeElement(e,null,{priority:i});return Cs(r,t,s),s}}function mf({view:i},e){return t=>{t.on(`element:${i}`,(n,r,s)=>{if(!r.modelRange||r.modelRange.isCollapsed)return;let o=e.processViewAttributes(r.viewItem,s);!o||s.writer.setAttribute(Ir(r.viewItem.name),o,r.modelRange)},{priority:"low"})}}function gf({view:i,model:e}){return t=>{t.on(`attribute:${Ir(i)}:${e}`,(n,r,s)=>{if(!s.consumable.consume(r.item,n.name))return;let{attributeOldValue:o,attributeNewValue:l}=r,u=s.writer,f=s.mapper.toViewElement(r.item);Sl(u,o,l,f)})}}var RV={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]},Al=class extends ne{constructor(){super(...arguments);v(this,"_definitions",[])}static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(let e of RV.block)this.registerBlockElement(e);for(let e of RV.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push(tt(ee({},e),{isBlock:!0}))}registerInlineElement(e){this._definitions.push(tt(ee({},e),{isInline:!0}))}extendBlockElement(e){this._extendDefinition(tt(ee({},e),{isBlock:!0}))}extendInlineElement(e){this._extendDefinition(tt(ee({},e),{isInline:!0}))}getDefinitionsForView(e,t=!1){let n=new Set;for(let r of this._getMatchingViewDefinitions(e)){if(t)for(let s of this._getReferences(r.model))n.add(s);n.add(r)}return n}getDefinitionsForModel(e){return this._definitions.filter(t=>t.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(t=>t.view&&ime(e,t.view))}*_getReferences(e){let t=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],n=this._definitions.filter(r=>r.model==e);for(let{modelSchema:r}of n)if(!!r)for(let s of t)for(let o of lt(r[s]||[])){let l=this._definitions.filter(u=>u.model==o);for(let u of l)o!==e&&(yield*this._getReferences(u.model),yield u)}}_extendDefinition(e){let t=Array.from(this._definitions.entries()).filter(([,n])=>n.model==e.model);if(t.length==0){this._definitions.push(e);return}for(let[n,r]of t)this._definitions[n]=X0({},r,e,(s,o)=>Array.isArray(s)?s.concat(o):void 0)}};function ime(i,e){return typeof i=="string"?i===e:i instanceof RegExp?i.test(e):!1}var si=class extends ne{constructor(e){super(e);v(this,"_dataSchema");v(this,"_allowedAttributes");v(this,"_disallowedAttributes");v(this,"_allowedElements");v(this,"_disallowedElements");v(this,"_dataInitialized");v(this,"_coupledAttributes");this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new er,this._disallowedAttributes=new er,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[Al,Gr]}loadAllowedConfig(e){for(let t of e){let n=t.name||/[\s\S]+/,r=MV(t);this.allowElement(n),r.forEach(s=>this.allowAttributes(s))}}loadDisallowedConfig(e){for(let t of e){let n=t.name||/[\s\S]+/,r=MV(t);r.length==0?this.disallowElement(n):r.forEach(s=>this.disallowAttributes(s))}}loadAllowedEmptyElementsConfig(e){for(let t of e)this.allowEmptyElement(t)}allowElement(e){for(let t of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(t),this._coupledAttributes=null}disallowElement(e){for(let t of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(t.view)}allowEmptyElement(e){for(let t of this._dataSchema.getDefinitionsForView(e,!0))t.isInline&&this._dataSchema.extendInlineElement(tt(ee({},t),{allowEmpty:!0}))}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,t){let{consumable:n}=t;return OV(e,this._disallowedAttributes,n),nme(e,OV(e,this._allowedAttributes,n))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(let t of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))t.isBlock&&this._addAllowedElement(t);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:Ui.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(let e of this._allowedElements)this._fireRegisterEvent(e)},{priority:Ui.highest+1})}_registerElementHandlers(){this.on("register",(e,t)=>{let n=this.editor.model.schema;if(t.isObject&&!n.isRegistered(t.model))this._registerObjectElement(t);else if(t.isBlock)this._registerBlockElement(t);else if(t.isInline)this._registerInlineElement(t);else throw new L("data-filter-invalid-definition",null,t);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){let e=this.editor.model,t=e.document.selection;e.document.registerPostFixer(n=>{let r=e.document.differ.getChanges(),s=!1,o=this._getCoupledAttributesMap();for(let l of r){if(l.type!="attribute"||l.attributeNewValue!==null)continue;let u=o.get(l.attributeKey);if(!!u)for(let{item:f}of l.range.getWalker())for(let g of u)f.hasAttribute(g)&&(n.removeAttribute(g,f),s=!0)}return s}),this.listenTo(t,"change:attribute",(n,{attributeKeys:r})=>{let s=new Set,o=this._getCoupledAttributesMap();for(let l of r){if(t.hasAttribute(l))continue;let u=o.get(l);if(!!u)for(let f of u)t.hasAttribute(f)&&s.add(f)}s.size!=0&&e.change(l=>{for(let u of s)l.removeSelectionAttribute(u)})})}_registerAssociatedHtmlAttributesPostFixer(){let e=this.editor.model;e.document.registerPostFixer(t=>{let n=e.document.differ.getChanges(),r=!1;for(let s of n)if(!(s.type!=="insert"||s.name==="$text"))for(let o of s.attributes.keys())!o.startsWith("html")||!o.endsWith("Attributes")||e.schema.checkAttribute(s.name,o)||(t.removeAttribute(o,s.position.nodeAfter),r=!0);return r})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(let e of this._allowedElements)if(e.coupledAttribute&&e.model){let t=this._coupledAttributes.get(e.coupledAttribute);t?t.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){let t=this.editor,n=t.model.schema,r=t.conversion,{view:s,model:o}=e;n.register(o,e.modelSchema);!s||(n.extend(e.model,{allowAttributes:[Ir(s),"htmlContent"]}),t.data.registerRawContentMatcher({name:s}),r.for("upcast").elementToElement({view:s,model:ex(e),converterPriority:Ui.low+2}),r.for("upcast").add(mf(e,this)),r.for("editingDowncast").elementToStructure({model:{name:o,attributes:[Ir(s)]},view:Qfe(t,e)}),r.for("dataDowncast").elementToElement({model:o,view:(l,{writer:u})=>hb(s,l,u)}),r.for("dataDowncast").add(gf(e)))}_registerBlockElement(e){let t=this.editor,n=t.model.schema,r=t.conversion,{view:s,model:o}=e;if(!n.isRegistered(e.model)){if(n.register(e.model,e.modelSchema),!s)return;r.for("upcast").elementToElement({model:o,view:s,converterPriority:Ui.low+2}),r.for("downcast").elementToElement({model:o,view:s})}!s||(n.extend(e.model,{allowAttributes:Ir(s)}),r.for("upcast").add(mf(e,this)),r.for("downcast").add(gf(e)))}_registerInlineElement(e){let t=this.editor,n=t.model.schema,r=t.conversion,s=e.model;e.appliesToBlock||(n.extend("$text",{allowAttributes:s}),e.attributeProperties&&n.setAttributeProperties(s,e.attributeProperties),r.for("upcast").add(eme(e,this)),r.for("downcast").attributeToElement({model:s,view:tme(e)}),!!e.allowEmpty&&(n.setAttributeProperties(s,{copyFromObject:!1}),n.isRegistered("htmlEmptyElement")||n.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(o=>o.name==e.view&&o.isEmpty&&Array.from(o.getAttributeKeys()).length?{name:!0}:null),r.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:PV(e,!0)}),r.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:PV(e)})))}};function OV(i,e,t){let n=e.matchAll(i)||[],r=i.document.stylesProcessor;return n.reduce((s,{match:o})=>{for(let l of o.styles||[]){let u=r.getRelatedStyles(l).filter(f=>f.split("-").length>l.split("-").length).sort((f,g)=>g.split("-").length-f.split("-").length);for(let f of u)t.consume(i,{styles:[f]})&&s.styles.push(f);t.consume(i,{styles:[l]})&&s.styles.push(l)}for(let l of o.classes||[])t.consume(i,{classes:[l]})&&s.classes.push(l);for(let l of o.attributes||[])t.consume(i,{attributes:[l]})&&s.attributes.push(l);return s},{attributes:[],classes:[],styles:[]})}function nme(i,{attributes:e,classes:t,styles:n}){return!e.length&&!t.length&&!n.length?null:ee(ee(ee({},e.length&&{attributes:rme(i,e)}),n.length&&{styles:sme(i,n)}),t.length&&{classes:t})}function rme(i,e){let t={};for(let n of e){let r=i.getAttribute(n);r!==void 0&&Tp(n)&&(t[n]=r)}return t}function sme(i,e){let t=new ru(i.document.stylesProcessor);for(let n of e){let r=i.getStyle(n);r!==void 0&&t.set(n,r)}return Object.fromEntries(t.getStylesEntries())}function tx(i,e){let{name:t}=i,n=i[e];return fi(n)?Object.entries(n).map(([r,s])=>({name:t,[e]:{[r]:s}})):Array.isArray(n)?n.map(r=>({name:t,[e]:[r]})):[i]}function MV(i){let{name:e,attributes:t,classes:n,styles:r}=i,s=[];return t&&s.push(...tx({name:e,attributes:t},"attributes")),n&&s.push(...tx({name:e,classes:n},"classes")),r&&s.push(...tx({name:e,styles:r},"styles")),s}var LV=class extends ne{static get requires(){return[si]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;let e=this.editor.plugins.get(si);e.on("register:pre",(t,n)=>{if(n.model!=="codeBlock")return;let r=this.editor,s=r.model.schema,o=r.conversion;s.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),o.for("upcast").add(ome(e)),o.for("downcast").add(ame()),t.stop()})}};function ome(i){return e=>{e.on("element:code",(t,n,r)=>{let s=n.viewItem,o=s.parent;if(!o||!o.is("element","pre"))return;l(o,"htmlPreAttributes"),l(s,"htmlContentAttributes");function l(u,f){let g=i.processViewAttributes(u,r);g&&r.writer.setAttribute(f,g,n.modelRange)}},{priority:"low"})}}function ame(){return i=>{i.on("attribute:htmlPreAttributes:codeBlock",(e,t,n)=>{if(!n.consumable.consume(t.item,e.name))return;let{attributeOldValue:r,attributeNewValue:s}=t,l=n.mapper.toViewElement(t.item).parent;Sl(n.writer,r,s,l)}),i.on("attribute:htmlContentAttributes:codeBlock",(e,t,n)=>{if(!n.consumable.consume(t.item,e.name))return;let{attributeOldValue:r,attributeNewValue:s}=t,o=n.mapper.toViewElement(t.item);Sl(n.writer,r,s,o)})}}var DV=class extends ne{static get requires(){return[si]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(si).on("register",(t,n)=>{let r=n,s=this.editor,o=s.model.schema,l=s.conversion;if(!r.paragraphLikeModel||o.isRegistered(r.model)||o.isRegistered(r.paragraphLikeModel))return;let u={model:r.paragraphLikeModel,view:r.view};o.register(r.model,r.modelSchema),o.register(u.model,{inheritAllFrom:"$block"}),l.for("upcast").elementToElement({view:r.view,model:(f,{writer:g})=>this._hasBlockContent(f)?g.createElement(r.model):g.createElement(u.model),converterPriority:Ui.low+.5}),l.for("downcast").elementToElement({view:r.view,model:r.model}),this._addAttributeConversion(r),l.for("downcast").elementToElement({view:u.view,model:u.model}),this._addAttributeConversion(u),t.stop()})}_hasBlockContent(e){let t=this.editor.editing.view,n=t.domConverter.blockElements;for(let r of t.createRangeIn(e).getItems())if(r.is("element")&&n.includes(r.name))return!0;return!1}_addAttributeConversion(e){let t=this.editor,n=t.conversion,r=t.plugins.get(si);t.model.schema.extend(e.model,{allowAttributes:Ir(e.view)}),n.for("upcast").add(mf(e,r)),n.for("downcast").add(gf(e))}},VV=class extends ne{static get requires(){return[Al,ks]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("HeadingEditing"))return;let t=e.config.get("heading.options");this.registerHeadingElements(e,t)}registerHeadingElements(e,t){let n=e.plugins.get(Al),r=[];for(let s of t)"model"in s&&"view"in s&&(n.registerBlockElement({view:s.view,model:s.model}),r.push(s.model));n.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:r}}),n.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:r}})}};function fb(i,e,t){let n=i.createRangeOn(e);for(let{item:r}of n.getWalker())if(r.is("element",t))return r}var BV=class extends ne{static get requires(){return[si]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;let t=e.model.schema,n=e.conversion,r=e.plugins.get(si);r.on("register:figure",()=>{n.for("upcast").add(ume(r))}),r.on("register:img",(s,o)=>{o.model!=="imageBlock"&&o.model!=="imageInline"||(t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),n.for("upcast").add(lme(r)),n.for("downcast").add(dme()),e.plugins.has("LinkImage")&&n.for("upcast").add(cme(r,e)),s.stop())})}};function lme(i){return e=>{e.on("element:img",(t,n,r)=>{if(!n.modelRange)return;let s=n.viewItem,o=i.processViewAttributes(s,r);o&&r.writer.setAttribute("htmlImgAttributes",o,n.modelRange)},{priority:"low"})}}function cme(i,e){let t=e.plugins.get("ImageUtils");return n=>{n.on("element:a",(r,s,o)=>{let l=s.viewItem;if(!t.findViewImgElement(l))return;let f=s.modelCursor.parent;if(!f.is("element","imageBlock"))return;let g=i.processViewAttributes(l,o);g&&o.writer.setAttribute("htmlLinkAttributes",g,f)},{priority:"low"})}}function ume(i){return e=>{e.on("element:figure",(t,n,r)=>{let s=n.viewItem;if(!n.modelRange||!s.hasClass("image"))return;let o=i.processViewAttributes(s,r);o&&r.writer.setAttribute("htmlFigureAttributes",o,n.modelRange)},{priority:"low"})}}function dme(){return i=>{e("htmlImgAttributes"),t("img","htmlImgAttributes"),t("figure","htmlFigureAttributes"),t("a","htmlLinkAttributes");function e(n){i.on(`attribute:${n}:imageInline`,(r,s,o)=>{if(!o.consumable.consume(s.item,r.name))return;let{attributeOldValue:l,attributeNewValue:u}=s,f=o.mapper.toViewElement(s.item);Sl(o.writer,l,u,f)},{priority:"low"})}function t(n,r){i.on(`attribute:${r}:imageBlock`,(s,o,l)=>{if(!l.consumable.test(o.item,s.name))return;let{attributeOldValue:u,attributeNewValue:f}=o,g=l.mapper.toViewElement(o.item),p=fb(l.writer,g,n);p&&(Sl(l.writer,u,f,p),l.consumable.consume(o.item,s.name))},{priority:"low"}),n==="a"&&i.on("attribute:linkHref:imageBlock",(s,o,l)=>{if(!l.consumable.consume(o.item,"attribute:htmlLinkAttributes:imageBlock"))return;let u=l.mapper.toViewElement(o.item),f=fb(l.writer,u,"a");Cs(l.writer,o.item.getAttribute("htmlLinkAttributes"),f)},{priority:"low"})}}}var NV=class extends ne{static get requires(){return[si]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;let t=e.model.schema,n=e.conversion,r=this.editor.plugins.get(si),s=this.editor.plugins.get(Al),o=e.config.get("mediaEmbed.elementName");s.registerBlockElement({model:"media",view:o}),r.on("register:figure",()=>{n.for("upcast").add(fme(r))}),r.on(`register:${o}`,(l,u)=>{u.model==="media"&&(t.extend("media",{allowAttributes:[Ir(o),"htmlFigureAttributes"]}),n.for("upcast").add(hme(r,o)),n.for("dataDowncast").add(mme(o)),l.stop())})}};function hme(i,e){let t=(n,r,s)=>{let o=r.viewItem;l(o,Ir(e));function l(u,f){let g=i.processViewAttributes(u,s);g&&s.writer.setAttribute(f,g,r.modelRange)}};return n=>{n.on(`element:${e}`,t,{priority:"low"})}}function fme(i){return e=>{e.on("element:figure",(t,n,r)=>{let s=n.viewItem;if(!n.modelRange||!s.hasClass("media"))return;let o=i.processViewAttributes(s,r);o&&r.writer.setAttribute("htmlFigureAttributes",o,n.modelRange)},{priority:"low"})}}function mme(i){return e=>{t(i,Ir(i)),t("figure","htmlFigureAttributes");function t(n,r){e.on(`attribute:${r}:media`,(s,o,l)=>{if(!l.consumable.consume(o.item,s.name))return;let{attributeOldValue:u,attributeNewValue:f}=o,g=l.mapper.toViewElement(o.item),p=fb(l.writer,g,n);Sl(l.writer,u,f,p)})}}}var FV=class extends ne{static get requires(){return[si]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.plugins.get(si);e.on("register:script",(t,n)=>{let r=this.editor,s=r.model.schema,o=r.conversion;s.register("htmlScript",n.modelSchema),s.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"script"}),o.for("upcast").elementToElement({view:"script",model:ex(n)}),o.for("upcast").add(mf(n,e)),o.for("downcast").elementToElement({model:"htmlScript",view:(l,{writer:u})=>hb("script",l,u)}),o.for("downcast").add(gf(n)),t.stop()})}},jV=class extends ne{static get requires(){return[si]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("TableEditing"))return;let t=e.model.schema,n=e.conversion,r=e.plugins.get(si),s=e.plugins.get("TableUtils");r.on("register:figure",()=>{n.for("upcast").add(bme(r))}),r.on("register:table",(o,l)=>{l.model==="table"&&(t.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),n.for("upcast").add(pme(r)),n.for("downcast").add(vme()),e.model.document.registerPostFixer(gme(e.model,s)),o.stop())})}};function gme(i,e){return t=>{let n=i.document.differ.getChanges(),r=!1;for(let s of n){if(s.type!="attribute"||s.attributeKey!="headingRows")continue;let o=s.range.start.nodeAfter,l=o.getAttribute("htmlTheadAttributes"),u=o.getAttribute("htmlTbodyAttributes");l&&!s.attributeNewValue?(t.removeAttribute("htmlTheadAttributes",o),r=!0):u&&s.attributeNewValue==e.getRows(o)&&(t.removeAttribute("htmlTbodyAttributes",o),r=!0)}return r}}function pme(i){return e=>{e.on("element:table",(t,n,r)=>{if(!n.modelRange)return;let s=n.viewItem;o(s,"htmlTableAttributes");for(let l of s.getChildren())l.is("element","thead")&&o(l,"htmlTheadAttributes"),l.is("element","tbody")&&o(l,"htmlTbodyAttributes");function o(l,u){let f=i.processViewAttributes(l,r);f&&r.writer.setAttribute(u,f,n.modelRange)}},{priority:"low"})}}function bme(i){return e=>{e.on("element:figure",(t,n,r)=>{let s=n.viewItem;if(!n.modelRange||!s.hasClass("table"))return;let o=i.processViewAttributes(s,r);o&&r.writer.setAttribute("htmlFigureAttributes",o,n.modelRange)},{priority:"low"})}}function vme(){return i=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(t,n){i.on(`attribute:${n}:table`,(r,s,o)=>{if(!o.consumable.test(s.item,r.name))return;let l=o.mapper.toViewElement(s.item),u=fb(o.writer,l,t);!u||(o.consumable.consume(s.item,r.name),Sl(o.writer,s.attributeOldValue,s.attributeNewValue,u))})}}}var HV=class extends ne{static get requires(){return[si]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.plugins.get(si);e.on("register:style",(t,n)=>{let r=this.editor,s=r.model.schema,o=r.conversion;s.register("htmlStyle",n.modelSchema),s.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"style"}),o.for("upcast").elementToElement({view:"style",model:ex(n)}),o.for("upcast").add(mf(n,e)),o.for("downcast").elementToElement({model:"htmlStyle",view:(l,{writer:u})=>hb("style",l,u)}),o.for("downcast").add(gf(n)),t.stop()})}},zV=class extends ne{static get requires(){return[si]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("ListEditing"))return;let t=e.model.schema,n=e.conversion,r=e.plugins.get(si),s=e.plugins.get("ListEditing"),o=e.plugins.get("ListUtils"),l=["ul","ol","li"];s.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:Cs}),s.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:Cs}),s.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:Cs}),r.on("register",(u,f)=>{if(!l.includes(f.view)||(u.stop(),t.checkAttribute("$block","htmlLiAttributes")))return;let g=l.map(p=>Ir(p));t.extend("$listItem",{allowAttributes:g}),n.for("upcast").add(p=>{p.on("element:ul",ix("htmlUlAttributes",r),{priority:"low"}),p.on("element:ol",ix("htmlOlAttributes",r),{priority:"low"}),p.on("element:li",ix("htmlLiAttributes",r),{priority:"low"})})}),s.on("postFixer",(u,{listNodes:f,writer:g})=>{for(let{node:p,previousNodeInList:y}of f)if(!!y){if(y.getAttribute("listType")==p.getAttribute("listType")){let _=UV(y.getAttribute("listType")),C=y.getAttribute(_);!il(p.getAttribute(_),C)&&g.model.schema.checkAttribute(p,_)&&(g.setAttribute(_,C,p),u.return=!0)}if(y.getAttribute("listItemId")==p.getAttribute("listItemId")){let _=y.getAttribute("htmlLiAttributes");!il(p.getAttribute("htmlLiAttributes"),_)&&g.model.schema.checkAttribute(p,"htmlLiAttributes")&&(g.setAttribute("htmlLiAttributes",_,p),u.return=!0)}}}),s.on("postFixer",(u,{listNodes:f,writer:g})=>{for(let{node:p}of f){let y=p.getAttribute("listType");!o.isNumberedListType(y)&&p.getAttribute("htmlOlAttributes")&&(g.removeAttribute("htmlOlAttributes",p),u.return=!0),o.isNumberedListType(y)&&p.getAttribute("htmlUlAttributes")&&(g.removeAttribute("htmlUlAttributes",p),u.return=!0)}})}afterInit(){let e=this.editor;if(!e.commands.get("indentList"))return;let t=e.commands.get("indentList");this.listenTo(t,"afterExecute",(n,r)=>{e.model.change(s=>{for(let o of r){let l=UV(o.getAttribute("listType"));!e.model.schema.checkAttribute(o,l)||s.setAttribute(l,{},o)}})})}};function ix(i,e){return(t,n,r)=>{let s=n.viewItem;n.modelRange||Object.assign(n,r.convertChildren(n.viewItem,n.modelCursor));let o=e.processViewAttributes(s,r);for(let l of n.modelRange.getItems({shallow:!0}))!l.hasAttribute("listItemId")||l.hasAttribute("htmlUlAttributes")||l.hasAttribute("htmlOlAttributes")||r.writer.model.schema.checkAttribute(l,i)&&r.writer.setAttribute(i,o||{},l)}}function UV(i){return i==="numbered"||i=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}var WV=class extends ne{static get requires(){return[si,Al]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.plugins.get(si),t=this.editor.plugins.get(Al);e.on("register:$customElement",(n,r)=>{n.stop();let s=this.editor,o=s.model.schema,l=s.conversion,u=s.editing.view.domConverter.unsafeElements,f=s.data.htmlProcessor.domConverter.preElements;o.register(r.model,r.modelSchema),o.extend(r.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),s.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),l.for("upcast").elementToElement({view:/.*/,model:(g,p)=>{if(g.name=="$comment"||!wme(g.name)||t.getDefinitionsForView(g.name).size)return null;u.includes(g.name)||u.push(g.name),f.includes(g.name)||f.push(g.name);let y=p.writer.createElement(r.model,{htmlElementName:g.name}),_=e.processViewAttributes(g,p);_&&p.writer.setAttribute("htmlCustomElementAttributes",_,y);let C;if(g.is("element","template")&&g.getCustomProperty("$rawContent"))C=g.getCustomProperty("$rawContent");else{let P=new mu(g.document).createDocumentFragment(g),M=s.data.htmlProcessor.domConverter.viewToDom(P),O=M.firstChild;for(;O.firstChild;)M.appendChild(O.firstChild);O.remove(),C=s.data.htmlProcessor.htmlWriter.getHtml(M)}p.writer.setAttribute("htmlContent",C,y);for(let{item:E}of s.editing.view.createRangeIn(g))p.consumable.consume(E,{name:!0});return y},converterPriority:"low"}),l.for("editingDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(g,{writer:p})=>{let y=g.getAttribute("htmlElementName"),_=p.createRawElement(y);return g.hasAttribute("htmlCustomElementAttributes")&&Cs(p,g.getAttribute("htmlCustomElementAttributes"),_),_}}),l.for("dataDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(g,{writer:p})=>{let y=g.getAttribute("htmlElementName"),_=g.getAttribute("htmlContent"),C=p.createRawElement(y,null,(E,P)=>{P.setContentOf(E,_)});return g.hasAttribute("htmlCustomElementAttributes")&&Cs(p,g.getAttribute("htmlCustomElementAttributes"),C),C}})})}};function wme(i){try{document.createElement(i)}catch(e){return!1}return!0}var nx=class extends ne{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[si,LV,DV,VV,BV,NV,FV,jV,HV,zV,WV]}init(){let e=this.editor,t=e.plugins.get(si);t.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){let t=this.editor.plugins.get("DataSchema"),n=Array.from(t.getDefinitionsForView(e,!1)),r=n.find(s=>s.isInline&&!n[0].isObject);return r?r.model:Ir(e)}addModelHtmlClass(e,t,n){let r=this.editor.model,s=this.getGhsAttributeNameForElement(e);r.change(o=>{for(let l of Bu(r,n,s))Vu(o,l,s,"classes",u=>{for(let f of lt(t))u.add(f)})})}removeModelHtmlClass(e,t,n){let r=this.editor.model,s=this.getGhsAttributeNameForElement(e);r.change(o=>{for(let l of Bu(r,n,s))Vu(o,l,s,"classes",u=>{for(let f of lt(t))u.delete(f)})})}setModelHtmlAttributes(e,t,n){let r=this.editor.model,s=this.getGhsAttributeNameForElement(e);r.change(o=>{for(let l of Bu(r,n,s))Vu(o,l,s,"attributes",u=>{for(let[f,g]of Object.entries(t))u.set(f,g)})})}removeModelHtmlAttributes(e,t,n){let r=this.editor.model,s=this.getGhsAttributeNameForElement(e);r.change(o=>{for(let l of Bu(r,n,s))Vu(o,l,s,"attributes",u=>{for(let f of lt(t))u.delete(f)})})}setModelHtmlStyles(e,t,n){let r=this.editor.model,s=this.getGhsAttributeNameForElement(e);r.change(o=>{for(let l of Bu(r,n,s))Vu(o,l,s,"styles",u=>{for(let[f,g]of Object.entries(t))u.set(f,g)})})}removeModelHtmlStyles(e,t,n){let r=this.editor.model,s=this.getGhsAttributeNameForElement(e);r.change(o=>{for(let l of Bu(r,n,s))Vu(o,l,s,"styles",u=>{for(let f of lt(t))u.delete(f)})})}};function*Bu(i,e,t){if(!!e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)i.schema.checkAttributeInSelection(e,t)&&(yield e);else for(let n of yme(i,e,t))yield*n.getItems({shallow:!0})}function yme(i,e,t){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?i.schema.checkAttribute(e,t)?[i.createRangeOn(e)]:[]:i.schema.getValidRanges(i.createSelection(e).getRanges(),t)}var S3e=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));var $V=class{constructor(){v(this,"_definitions",new Set)}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,n,r)=>{if(!r.consumable.test(n.item,"attribute:linkHref")||!(n.item.is("selection")||r.schema.isInline(n.item)))return;let s=r.writer,o=s.document.selection;for(let l of this._definitions){let u=s.createAttributeElement("a",l.attributes,{priority:5});l.classes&&s.addClass(l.classes,u);for(let f in l.styles)s.setStyle(f,l.styles[f],u);s.setCustomProperty("link",!0,u),l.callback(n.attributeNewValue)?n.item.is("selection")?s.wrap(o.getFirstRange(),u):s.wrap(r.mapper.toViewRange(n.range),u):s.unwrap(r.mapper.toViewRange(n.range),u)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,n,{writer:r,mapper:s})=>{let o=s.toViewElement(n.item),l=Array.from(o.getChildren()).find(u=>u.is("element","a"));if(!!l)for(let u of this._definitions){let f=Nn(u.attributes);if(u.callback(n.attributeNewValue)){for(let[g,p]of f)g==="class"?r.addClass(p,l):r.setAttribute(g,p,l);u.classes&&r.addClass(u.classes,l);for(let g in u.styles)r.setStyle(g,u.styles[g],l)}else{for(let[g,p]of f)g==="class"?r.removeClass(p,l):r.removeAttribute(g,l);u.classes&&r.removeClass(u.classes,l);for(let g in u.styles)r.removeStyle(g,l)}}})}}},kme=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Cme="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",Tme=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Eme=/^((\w+:(\/{2,})?)|(\W))/i,Sme=["https?","ftps?","mailto"],mb="Ctrl+K";function Ame(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function GV(i,{writer:e}){let t=e.createAttributeElement("a",{href:i},{priority:5});return e.setCustomProperty("link",!0,t),t}function KV(i,e=Sme){let t=String(i),n=e.join("|"),r=new RegExp(`${Cme.replace("<protocols>",n)}`,"i");return Ime(t,r)?t:"#"}function Ime(i,e){return!!i.replace(kme,"").match(e)}function Pme(i,e){let t={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return e.forEach(n=>("label"in n&&t[n.label]&&(n.label=t[n.label]),n)),e}function Rme(i){let e=[];if(i)for(let[t,n]of Object.entries(i)){let r=Object.assign({},n,{id:`link${gh(t)}`});e.push(r)}return e}function rx(i,e){return i?e.checkAttribute(i.name,"linkHref"):!1}function Ome(i){return Tme.test(i)}function sx(i,e){let t=Ome(i)?"mailto:":e,n=!!t&&!YV(i);return i&&n?t+i:i}function YV(i){return Eme.test(i)}function ZV(i){window.open(i,"_blank","noopener")}var JV=class extends We{constructor(){super(...arguments);v(this,"manualDecorators",new Ht);v(this,"automaticDecorators",new $V)}restoreManualDecoratorStates(){for(let e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){let e=this.editor.model,t=e.document.selection,n=t.getSelectedElement()||$t(t.getSelectedBlocks());rx(n,e.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(n,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(let r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(e,t={}){let n=this.editor.model,r=n.document.selection,s=[],o=[];for(let l in t)t[l]?s.push(l):o.push(l);n.change(l=>{if(r.isCollapsed){let u=r.getFirstPosition();if(r.hasAttribute("linkHref")){let f=XV(r),g=Ru(u,"linkHref",r.getAttribute("linkHref"),n);r.getAttribute("linkHref")===f&&(g=this._updateLinkContent(n,l,g,e)),l.setAttribute("linkHref",e,g),s.forEach(p=>{l.setAttribute(p,!0,g)}),o.forEach(p=>{l.removeAttribute(p,g)}),l.setSelection(l.createPositionAfter(g.end.nodeBefore))}else if(e!==""){let f=Nn(r.getAttributes());f.set("linkHref",e),s.forEach(p=>{f.set(p,!0)});let{end:g}=n.insertContent(l.createText(e,f),u);l.setSelection(g)}["linkHref",...s,...o].forEach(f=>{l.removeSelectionAttribute(f)})}else{let u=n.schema.getValidRanges(r.getRanges(),"linkHref"),f=[];for(let p of r.getSelectedBlocks())n.schema.checkAttribute(p,"linkHref")&&f.push(l.createRangeOn(p));let g=f.slice();for(let p of u)this._isRangeToUpdate(p,f)&&g.push(p);for(let p of g){let y=p;if(g.length===1){let _=XV(r);r.getAttribute("linkHref")===_&&(y=this._updateLinkContent(n,l,p,e),l.setSelection(l.createSelection(y)))}l.setAttribute("linkHref",e,y),s.forEach(_=>{l.setAttribute(_,!0,y)}),o.forEach(_=>{l.removeAttribute(_,y)})}}})}_getDecoratorStateFromModel(e){let t=this.editor.model,n=t.document.selection,r=n.getSelectedElement();return rx(r,t.schema)?r.getAttribute(e):n.getAttribute(e)}_isRangeToUpdate(e,t){for(let n of t)if(n.containsRange(e))return!1;return!0}_updateLinkContent(e,t,n,r){let s=t.createText(r,{linkHref:r});return e.insertContent(s,n)}};function XV(i){if(i.isCollapsed){let e=i.getFirstPosition();return e.textNode&&e.textNode.data}else{let e=Array.from(i.getFirstRange().getItems());if(e.length>1)return null;let t=e[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}var QV=class extends We{refresh(){let e=this.editor.model,t=e.document.selection,n=t.getSelectedElement();rx(n,e.schema)?this.isEnabled=e.schema.checkAttribute(n,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){let e=this.editor,t=this.editor.model,n=t.document.selection,r=e.commands.get("link");t.change(s=>{let o=n.isCollapsed?[Ru(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),t)]:t.schema.getValidRanges(n.getRanges(),"linkHref");for(let l of o)if(s.removeAttribute("linkHref",l),r)for(let u of r.manualDecorators)s.removeAttribute(u.id,l)})}},eB=class extends gt(){constructor({id:e,label:t,attributes:n,classes:r,styles:s,defaultValue:o}){super();v(this,"id");v(this,"defaultValue");v(this,"label");v(this,"attributes");v(this,"classes");v(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=o,this.label=t,this.attributes=n,this.classes=r,this.styles=s}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}},Mme="ck-link_selected",tB="automatic",Lme="manual",Dme=/^(https?:)?\/\//,ox=class extends ne{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[cf,ib,En]}constructor(e){super(e);e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){let e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:GV}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(s,o)=>GV(KV(s,t),o)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:s=>s.getAttribute("href")}}),e.commands.add("link",new JV(e)),e.commands.add("unlink",new QV(e));let n=Pme(e.t,Rme(e.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(s=>s.mode===tB)),this._enableManualDecorators(n.filter(s=>s.mode===Lme)),e.plugins.get(cf).registerAttribute("linkHref"),B_(e,"linkHref","a",Mme),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){let t=this.editor,r=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&r.add({id:"linkIsExternal",mode:tB,callback:s=>!!s&&Dme.test(s),attributes:{target:"_blank",rel:"noopener noreferrer"}}),r.add(e),r.length&&t.conversion.for("downcast").add(r.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;let t=this.editor,r=t.commands.get("link").manualDecorators;e.forEach(s=>{t.model.schema.extend("$text",{allowAttributes:s.id});let o=new eB(s);r.add(o),t.conversion.for("downcast").attributeToElement({model:o.id,view:(l,{writer:u,schema:f},{item:g})=>{if(!!(g.is("selection")||f.isInline(g))&&l){let p=u.createAttributeElement("a",o.attributes,{priority:5});o.classes&&u.addClass(o.classes,p);for(let y in o.styles)u.setStyle(y,o.styles[y],p);return u.setCustomProperty("link",!0,p),p}}}),t.conversion.for("upcast").elementToAttribute({view:ee({name:"a"},o._createPattern()),model:{key:o.id}})})}_enableLinkOpen(){let e=this.editor,n=e.editing.view.document;this.listenTo(n,"click",(r,s)=>{if(!(Le.isMac?s.domEvent.metaKey:s.domEvent.ctrlKey))return;let l=s.domTarget;if(l.tagName.toLowerCase()!="a"&&(l=l.closest("a")),!l)return;let u=l.getAttribute("href");!u||(r.stop(),s.preventDefault(),ZV(u))},{context:"$capture"}),this.listenTo(n,"keydown",(r,s)=>{let l=e.commands.get("link").value;!(!!l&&s.keyCode===Ge.enter&&s.altKey)||(r.stop(),ZV(l))})}_enableSelectionAttributesFixer(){let t=this.editor.model,n=t.document.selection;this.listenTo(n,"change:attribute",(r,{attributeKeys:s})=>{!s.includes("linkHref")||n.hasAttribute("linkHref")||t.change(o=>{Vme(o,Bme(t.schema))})})}_enableClipboardIntegration(){let e=this.editor,t=e.model,n=this.editor.config.get("link.defaultProtocol");!n||this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(r,s)=>{t.change(o=>{let l=o.createRangeIn(s.content);for(let u of l.getItems())if(u.hasAttribute("linkHref")){let f=sx(u.getAttribute("linkHref"),n);o.setAttribute("linkHref",f,u)}})})}};function Vme(i,e){i.removeSelectionAttribute("linkHref");for(let t of e)i.removeSelectionAttribute(t)}function Bme(i){return i.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}var iB=class extends Ce{constructor(e,t,n){super(e);v(this,"focusTracker",new Vt);v(this,"keystrokes",new Jt);v(this,"urlInputView");v(this,"saveButtonView");v(this,"cancelButtonView");v(this,"_manualDecoratorSwitches");v(this,"children");v(this,"_validators");v(this,"_focusables",new rn);v(this,"_focusCycler");let r=e.t;this._validators=n,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(r("Save"),$e.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),$e.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new $i({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});let s=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&s.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:s,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),yu({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(let e of this._validators){let t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){let e=this.locale.t,t=new ys(this.locale,yl);return t.fieldView.inputMode="url",t.label=e("Link URL"),t}_createButton(e,t,n,r){let s=new Ne(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.extendTemplate({attributes:{class:n}}),r&&s.delegate("execute").to(this,r),s}_createManualDecoratorSwitches(e){let t=this.createCollection();for(let n of e.manualDecorators){let r=new ua(this.locale);r.set({name:n.id,label:n.label,withText:!0}),r.bind("isOn").toMany([n,e],"value",(s,o)=>o===void 0&&s===void 0?!!n.defaultValue:!!s),r.on("execute",()=>{n.set("value",!r.isOn)}),t.add(r)}return t}_createFormChildren(e){let t=this.createCollection();if(t.add(this.urlInputView),e.length){let n=new Ce;n.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(r=>({tag:"li",children:[r],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(n)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}get url(){let{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}},Nme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',nB=class extends Ce{constructor(e,t={}){super(e);v(this,"focusTracker",new Vt);v(this,"keystrokes",new Jt);v(this,"previewButtonView");v(this,"unlinkButtonView");v(this,"editButtonView");v(this,"_focusables",new rn);v(this,"_focusCycler");v(this,"_linkConfig");let n=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(n("Unlink"),Nme,"unlink"),this.editButtonView=this._createButton(n("Edit link"),$e.pencil,"edit"),this.set("href",void 0),this._linkConfig=t,this._focusCycler=new $i({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,n){let r=new Ne(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.delegate("execute").to(this,n),r}_createPreviewButton(){let e=new Ne(this.locale),t=this.bindTemplate,n=this.t;return e.set({withText:!0,tooltip:n("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",r=>r&&KV(r,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",r=>r||n("This link has no URL")),e.bind("isEnabled").to(this,"href",r=>!!r),e.template.tag="a",e.template.eventListeners={},e}},Fme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',Ts="link-ui",rB=class extends ne{constructor(){super(...arguments);v(this,"actionsView",null);v(this,"formView",null);v(this,"_balloon")}static get requires(){return[ha]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.editing.view.addObserver(t_),this._balloon=e.plugins.get(ha),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Ts,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Ts,view:(n,{writer:r})=>{if(!n.markerRange.isCollapsed)return null;let s=r.createUIElement("span");return r.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],s),s}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:mb},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){let e=this.editor,t=new nB(e.locale,e.config.get("link")),n=e.commands.get("link"),r=e.commands.get("unlink");return t.bind("href").to(n,"value"),t.editButtonView.bind("isEnabled").to(n),t.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(s,o)=>{this._hideUI(),o()}),t.keystrokes.set(mb,(s,o)=>{this._addFormView(),o()}),t}_createFormView(){let e=this.editor,t=e.commands.get("link"),n=e.config.get("link.defaultProtocol"),r=new(tf(iB))(e.locale,t,jme(e));return r.urlInputView.fieldView.bind("value").to(t,"value"),r.urlInputView.bind("isEnabled").to(t,"isEnabled"),r.saveButtonView.bind("isEnabled").to(t,"isEnabled"),this.listenTo(r,"submit",()=>{if(r.isValid()){let{value:s}=r.urlInputView.fieldView.element,o=sx(s,n);e.execute("link",o,r.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(r.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(s,o)=>{this._closeFormView(),o()}),r}_createToolbarLinkButton(){let e=this.editor;e.ui.componentFactory.add("link",()=>{let t=this._createButton(Ne);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:link",()=>{let t=this._createButton(st);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){let t=this.editor,n=t.locale,r=t.commands.get("link"),s=new e(t.locale),o=n.t;return s.set({label:o("Link"),icon:Fme,keystroke:mb,isToggleable:!0}),s.bind("isEnabled").to(r,"isEnabled"),s.bind("isOn").to(r,"value",l=>!!l),this.listenTo(s,"execute",()=>this._showUI(!0)),s}_enableBalloonActivators(){let e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(mb,(n,r)=>{r(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),pl({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;let t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){let e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;let e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){let e=this.editor,t=e.editing.view.document,n=this._getSelectedLinkElement(),r=o(),s=()=>{let l=this._getSelectedLinkElement(),u=o();n&&!l||!n&&u!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=l,r=u};function o(){return t.selection.focus.getAncestors().reverse().find(l=>l.is("element"))}this.listenTo(e.ui,"update",s),this.listenTo(this._balloon,"change:visibleView",s)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){let e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){let e=this.editor.editing.view,t=this.editor.model,n=e.document,r;if(t.markers.has(Ts)){let s=Array.from(this.editor.editing.mapper.markerNameToElements(Ts)),o=e.createRange(e.createPositionBefore(s[0]),e.createPositionAfter(s[s.length-1]));r=e.domConverter.viewRangeToDom(o)}else r=()=>{let s=this._getSelectedLinkElement();return s?e.domConverter.mapViewToDom(s):e.domConverter.viewRangeToDom(n.selection.getFirstRange())};return{target:r}}_getSelectedLinkElement(){let e=this.editor.editing.view,t=e.document.selection,n=t.getSelectedElement();if(t.isCollapsed||n&&Gt(n))return ax(t.getFirstPosition());{let r=t.getFirstRange().getTrimmed(),s=ax(r.start),o=ax(r.end);return!s||s!=o?null:e.createRangeIn(s).getTrimmed().isEqual(r)?s:null}}_showFakeVisualSelection(){let e=this.editor.model;e.change(t=>{let n=e.document.selection.getFirstRange();if(e.markers.has(Ts))t.updateMarker(Ts,{range:n});else if(n.start.isAtEnd){let r=n.start.getLastMatchingPosition(({item:s})=>!e.schema.isContent(s),{boundaries:n});t.addMarker(Ts,{usingOperation:!1,affectsData:!1,range:t.createRange(r,n.end)})}else t.addMarker(Ts,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){let e=this.editor.model;e.markers.has(Ts)&&e.change(t=>{t.removeMarker(Ts)})}};function ax(i){return i.getAncestors().find(e=>Ame(e))||null}function jme(i){let e=i.t,t=i.config.get("link.allowCreatingEmptyLinks");return[n=>{if(!t&&!n.url.length)return e("Link URL must not be empty.")}]}var Hme=4,sB=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),zme=2,oB=class extends ne{static get requires(){return[rr,ox]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){let t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?Ru(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){let r=this.editor.model,s=r.document.selection,o=s.getFirstPosition(),l=s.getLastPosition(),u=t.getJoined(this._expandLinkRange(r,o)||t);u&&(u=u.getJoined(this._expandLinkRange(r,l)||t)),u&&(u.start.isBefore(o)||u.end.isAfter(l))&&e.setSelection(u)}_enablePasteLinking(){let e=this.editor,t=e.model,n=t.document.selection,r=e.plugins.get("ClipboardPipeline"),s=e.commands.get("link");r.on("inputTransformation",(o,l)=>{if(!this.isEnabled||!s.isEnabled||n.isCollapsed||l.method!=="paste"||n.rangeCount>1)return;let u=n.getFirstRange(),f=l.dataTransfer.getData("text/plain");if(!f)return;let g=f.match(sB);g&&g[2]===f&&(t.change(p=>{this._selectEntireLinks(p,u),s.execute(f)}),o.stop())},{priority:"high"})}_enableTypingHandling(){let e=this.editor,t=new rb(e.model,n=>{if(!Ume(n))return;let r=aB(n.substr(0,n.length-1));if(r)return{url:r}});t.on("matched:data",(n,r)=>{let{batch:s,range:o,url:l}=r;if(!s.isTyping)return;let u=o.end.getShiftedBy(-1),f=u.getShiftedBy(-l.length),g=e.model.createRange(f,u);this._applyAutoLink(l,g)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){let e=this.editor,t=e.model,n=e.commands.get("enter");!n||n.on("execute",()=>{let r=t.document.selection.getFirstPosition();if(!r.parent.previousSibling)return;let s=t.createRangeIn(r.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(s)})}_enableShiftEnterHandling(){let e=this.editor,t=e.model,n=e.commands.get("shiftEnter");!n||n.on("execute",()=>{let r=t.document.selection.getFirstPosition(),s=t.createRange(t.createPositionAt(r.parent,0),r.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(s)})}_checkAndApplyAutoLinkOnRange(e){let t=this.editor.model,{text:n,range:r}=D_(e,t),s=aB(n);if(s){let o=t.createRange(r.end.getShiftedBy(-s.length),r.end);this._applyAutoLink(s,o)}}_applyAutoLink(e,t){let n=this.editor.model,r=this.editor.config.get("link.defaultProtocol"),s=sx(e,r);!this.isEnabled||!Wme(t,n)||!YV(s)||qme(t)||this._persistAutoLink(s,t)}_persistAutoLink(e,t){let n=this.editor.model,r=this.editor.plugins.get("Delete");n.enqueueChange(s=>{s.setAttribute("linkHref",e,t),n.enqueueChange(()=>{r.requestUndoOnBackspace()})})}};function Ume(i){return i.length>Hme&&i[i.length-1]===" "&&i[i.length-2]!==" "}function aB(i){let e=sB.exec(i);return e?e[zme]:null}function Wme(i,e){return e.schema.checkAttributeInSelection(e.createSelection(i),"linkHref")}function qme(i){let e=i.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}var lx=class extends ne{static get requires(){return[ox,rB,oB]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}};var sr=class{constructor(e,t){v(this,"_startElement");v(this,"_referenceIndent");v(this,"_isForward");v(this,"_includeSelf");v(this,"_sameAttributes");v(this,"_sameIndent");v(this,"_lowerIndent");v(this,"_higherIndent");this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=lt(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){let r=new this(e,t)[Symbol.iterator]();return $t(r)}*[Symbol.iterator](){let e=[];for(let{node:t}of pf(this._getStartNode(),this._isForward?"forward":"backward")){let n=t.getAttribute("listIndent");if(n<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=n}else if(n>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(r=>t.getAttribute(r)!==this._startElement.getAttribute(r)))break}e.length&&(yield*e,e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}};function*pf(i,e="forward"){let t=e=="forward",n=[],r=null;for(;Ri(i);){let s=null;if(r){let o=i.getAttribute("listIndent"),l=r.getAttribute("listIndent");o>l?n[l]=r:o<l?(s=n[o],n.length=o):s=r}yield{node:i,previous:r,previousNodeInList:s},r=i,i=t?i.nextSibling:i.previousSibling}}var lB=class{constructor(e){v(this,"_listHead");this._listHead=e}[Symbol.iterator](){return pf(this._listHead,"forward")}},Il=class{static next(){return Si()}};function Ri(i){return!!i&&i.is("element")&&i.hasAttribute("listItemId")}function ux(i,e={}){return[...ga(i,tt(ee({},e),{direction:"backward"})),...ga(i,tt(ee({},e),{direction:"forward"}))]}function ga(i,e={}){let t=e.direction=="forward",n=Array.from(new sr(i,tt(ee({},e),{includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"})));return t?n:n.reverse()}function $me(i){return Array.from(new sr(i,{direction:"forward",higherIndent:!0}))}function cB(i,e){let t=new sr(i,ee({sameIndent:!0,sameAttributes:"listType"},e)),n=new sr(i,ee({sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward"},e));return[...Array.from(t).reverse(),...n]}function Pl(i){return!sr.first(i,{sameIndent:!0,sameAttributes:"listItemId"})}function uB(i){return!sr.first(i,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function bf(i,e={}){i=lt(i);let t=e.withNested!==!1,n=new Set;for(let r of i)for(let s of ux(r,{higherIndent:t}))n.add(s);return Rl(n)}function Gme(i){i=lt(i);let e=new Set;for(let t of i)for(let n of cB(t))e.add(n);return Rl(e)}function dx(i,e){let t=ga(i,{direction:"forward"}),n=Il.next();for(let r of t)e.setAttribute("listItemId",n,r);return t}function hx(i,e,t){let n={};for(let[s,o]of e.getAttributes())s.startsWith("list")&&(n[s]=o);let r=ga(i,{direction:"forward"});for(let s of r)t.setAttributes(n,s);return r}function fx(i,e,{expand:t,indentBy:n=1}={}){i=lt(i);let r=t?bf(i):i;for(let s of r){let o=s.getAttribute("listIndent")+n;o<0?gb(s,e):e.setAttribute("listIndent",o,s)}return r}function Kme(i,e){i=lt(i);let t=bf(i),n=new Set,r=Math.min(...t.map(o=>o.getAttribute("listIndent"))),s=new Map;for(let o of t)s.set(o,sr.first(o,{lowerIndent:!0}));for(let o of t){if(n.has(o))continue;n.add(o);let l=o.getAttribute("listIndent")-1;if(l<0){gb(o,e);continue}if(o.getAttribute("listIndent")==r){let u=Jme(o,s.get(o),e);for(let f of u)n.add(f);if(u.length)continue}e.setAttribute("listIndent",l,o)}return Rl(n)}function gb(i,e){i=lt(i);for(let t of i)t.is("element","listItem")&&e.rename(t,"paragraph");for(let t of i)for(let n of t.getAttributeKeys())n.startsWith("list")&&e.removeAttribute(n,t);return i}function vf(i){if(!i.length)return!1;let e=i[0].getAttribute("listItemId");return e?!i.some(t=>t.getAttribute("listItemId")!=e):!1}function Yme(i,e){let t=[],n=Number.POSITIVE_INFINITY;for(let{node:r}of pf(i.nextSibling,"forward")){let s=r.getAttribute("listIndent");if(s==0)break;s<n&&(n=s);let o=s-n;e.setAttribute("listIndent",o,r),t.push(r)}return t}function Rl(i){return Array.from(i).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function wf(i){let e=i.document.selection.getSelectedElement();return e&&i.schema.isObject(e)&&i.schema.isBlock(e)?e:null}function mx(i,e){return e.checkChild(i.parent,"listItem")&&e.checkChild(i,"$text")&&!e.isObject(i)}function Zme(i){return i=="numbered"||i=="customNumbered"}function Jme(i,e,t){return ga(e,{direction:"forward"}).pop().index>i.index?hx(i,e,t):[]}var gx=class extends We{constructor(e,t){super(e);v(this,"_direction");this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){let e=this.editor.model,t=dB(e.document.selection);e.change(n=>{let r=[];vf(t)&&!Pl(t[0])?(this._direction=="forward"&&r.push(...fx(t,n)),r.push(...dx(t[0],n))):this._direction=="forward"?r.push(...fx(t,n,{expand:!0})):r.push(...Kme(t,n));for(let s of r){if(!s.hasAttribute("listType"))continue;let o=sr.first(s,{sameIndent:!0});o&&n.setAttribute("listType",o.getAttribute("listType"),s)}this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Rl(new Set(e)))}_checkEnabled(){let e=dB(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||vf(e)&&!Pl(e[0]))return!0;e=bf(e),t=e[0];let n=sr.first(t,{sameIndent:!0});return n?n.getAttribute("listType")==t.getAttribute("listType"):!1}};function dB(i){let e=Array.from(i.getSelectedBlocks()),t=e.findIndex(n=>!Ri(n));return t!=-1&&(e.length=t),e}var yf=class extends We{constructor(e,t,n={}){super(e);v(this,"type");v(this,"_listWalkerOptions");this.type=t,this._listWalkerOptions=n.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){let t=this.editor.model,n=t.document,r=wf(t),s=Array.from(n.selection.getSelectedBlocks()).filter(l=>t.schema.checkAttribute(l,"listType")||mx(l,t.schema)),o=e.forceValue!==void 0?!e.forceValue:this.value;t.change(l=>{if(o){let u=s[s.length-1],f=ga(u,{direction:"forward"}),g=[];f.length>1&&g.push(...dx(f[1],l)),g.push(...gb(s,l)),g.push(...Yme(u,l)),this._fireAfterExecute(g)}else if((r||n.selection.isCollapsed)&&Ri(s[0])){let u=cB(r||s[0],this._listWalkerOptions);for(let f of u)l.setAttributes(tt(ee({},e.additionalAttributes),{listType:this.type}),f);this._fireAfterExecute(u)}else{let u=[];for(let f of s)if(!f.hasAttribute("listType"))!f.is("element","listItem")&&mx(f,t.schema)&&l.rename(f,"listItem"),l.setAttributes(tt(ee({},e.additionalAttributes),{listIndent:0,listItemId:Il.next(),listType:this.type}),f),u.push(f);else for(let g of bf(f,{withNested:!1}))g.getAttribute("listType")!=this.type&&(l.setAttributes(tt(ee({},e.additionalAttributes),{listType:this.type}),g),u.push(g));this._fireAfterExecute(u)}})}_fireAfterExecute(e){this.fire("afterExecute",Rl(new Set(e)))}_getValue(){let e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(let n of t)if(n.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){let e=this.editor.model,t=e.schema,n=e.document.selection,r=Array.from(n.getSelectedBlocks());if(!r.length)return!1;if(this.value)return!0;for(let s of r)if(t.checkAttribute(s,"listType")||mx(s,t))return!0;return!1}},px=class extends We{constructor(e,t){super(e);v(this,"_direction");this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){let t=this.editor.model,n=t.document.selection,r=[];t.change(s=>{let{firstElement:o,lastElement:l}=this._getMergeSubjectElements(n,e),u=o.getAttribute("listIndent")||0,f=l.getAttribute("listIndent"),g=l.getAttribute("listItemId");if(u!=f){let p=$me(l);r.push(...fx([l,...p],s,{indentBy:u-f,expand:u<f}))}if(e){let p=n;n.isCollapsed&&(p=s.createSelection(s.createRange(s.createPositionAt(o,"end"),s.createPositionAt(l,0)))),t.deleteContent(p,{doNotResetEntireContent:n.isCollapsed});let y=p.getLastPosition().parent,_=y.nextSibling;r.push(y),_&&_!==l&&_.getAttribute("listItemId")==g&&r.push(...hx(_,y,s))}else r.push(...hx(l,o,s));this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Rl(new Set(e)))}_checkEnabled(){let e=this.editor.model,t=e.document.selection,n=wf(e);if(t.isCollapsed||n){let r=n||t.getFirstPosition().parent;if(!Ri(r))return!1;let s=this._direction=="backward"?r.previousSibling:r.nextSibling;if(!s||vf([r,s]))return!1}else{let r=t.getLastPosition(),s=t.getFirstPosition();if(r.parent===s.parent||!Ri(r.parent))return!1}return!0}_getMergeSubjectElements(e,t){let n=this.editor.model,r=wf(n),s,o;if(e.isCollapsed||r){let l=r||e.getFirstPosition().parent,u=Pl(l);this._direction=="backward"?(o=l,u&&!t?s=sr.first(l,{sameIndent:!0,lowerIndent:!0}):s=l.previousSibling):(s=l,o=l.nextSibling)}else s=e.getFirstPosition().parent,o=e.getLastPosition().parent;return{firstElement:s,lastElement:o}}},bx=class extends We{constructor(e,t){super(e);v(this,"_direction");this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{let n=dx(this._getStartBlock(),t);this._fireAfterExecute(n)})}_fireAfterExecute(e){this.fire("afterExecute",Rl(new Set(e)))}_checkEnabled(){let e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&Ri(t)&&!Pl(t)}_getStartBlock(){let t=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?t:t.nextSibling}},hB=class extends ne{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(e){return Gme(e)}isFirstBlockOfListItem(e){return Pl(e)}isListItemBlock(e){return Ri(e)}expandListBlocksToCompleteItems(e,t={}){return bf(e,t)}isNumberedListType(e){return Zme(e)}};function Xme(i){return i.is("element","ol")||i.is("element","ul")}function vx(i){return i.is("element","li")}function Qme(i){let e=0,t=i.parent;for(;t;){if(vx(t))e++;else{let n=t.previousSibling;n&&vx(n)&&e++}t=t.parent}return e}function ege(i,e,t,n=mB(t,e)){return i.createAttributeElement(fB(t),null,{priority:2*e/100-100,id:n})}function tge(i,e,t){return i.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function fB(i){return i=="numbered"||i=="customNumbered"?"ol":"ul"}function mB(i,e){return`list-${i}-${e}`}function Kr(i,e){let t=i.nodeBefore;if(Ri(t)){let n=t;for(let{node:r}of pf(n,"backward"))if(n=r,e.has(n))return;e.set(t,n)}else{let n=i.nodeAfter;Ri(n)&&e.set(n,n)}}function ige(i,e){let t=0,n=-1,r=null,s=!1;for(let{node:o}of i){let l=o.getAttribute("listIndent");if(l>t){let u;r===null?(r=l-t,u=t):(r>l&&(r=l),u=l-r),u>n+1&&(u=n+1),e.setAttribute("listIndent",u,o),s=!0,n=u}else r=null,t=l+1,n=l}return s}function nge(i,e,t){let n=new Set,r=!1;for(let{node:s}of i){if(n.has(s))continue;let o=s.getAttribute("listType"),l=s.getAttribute("listItemId");if(e.has(l)&&(l=Il.next()),e.add(l),s.is("element","listItem")){s.getAttribute("listItemId")!=l&&(t.setAttribute("listItemId",l,s),r=!0);continue}for(let u of ga(s,{direction:"forward"}))n.add(u),u.getAttribute("listType")!=o&&(l=Il.next(),o=u.getAttribute("listType")),u.getAttribute("listItemId")!=l&&(t.setAttribute("listItemId",l,u),r=!0)}return r}function rge(){return(i,e,t)=>{let{writer:n,schema:r}=t;if(!e.modelRange)return;let s=Array.from(e.modelRange.getItems({shallow:!0})).filter(p=>r.checkAttribute(p,"listItemId"));if(!s.length)return;let o=Il.next(),l=Qme(e.viewItem),u=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted",f=s[0].getAttribute("listType");f&&(u=f);let g={listItemId:o,listIndent:l,listType:u};for(let p of s)p.hasAttribute("listItemId")||n.setAttributes(g,p);s.length>1&&s[1].getAttribute("listItemId")!=g.listItemId&&t.keepEmptyElement(s[0])}}function sge(i,e,t,n){return()=>{let l=i.document.differ.getChanges(),u=[],f=new Map,g=new Set;for(let p of l)if(p.type=="insert"&&p.name!="$text")Kr(p.position,f),p.attributes.has("listItemId")?g.add(p.position.nodeAfter):Kr(p.position.getShiftedBy(p.length),f);else if(p.type=="remove"&&p.attributes.has("listItemId"))Kr(p.position,f);else if(p.type=="attribute"){let y=p.range.start.nodeAfter;t.includes(p.attributeKey)?(Kr(p.range.start,f),p.attributeNewValue===null?(Kr(p.range.start.getShiftedBy(1),f),s(y)&&u.push(y)):g.add(y)):Ri(y)&&s(y)&&u.push(y)}for(let p of f.values())u.push(...r(p,g));for(let p of new Set(u))e.reconvertItem(p)};function r(l,u){let f=[],g=new Set,p=[];for(let{node:y,previous:_}of pf(l,"forward")){if(g.has(y))continue;let C=y.getAttribute("listIndent");_&&C<_.getAttribute("listIndent")&&(p.length=C+1),p[C]=Object.fromEntries(Array.from(y.getAttributes()).filter(([P])=>t.includes(P)));let E=ga(y,{direction:"forward"});for(let P of E)g.add(P),(s(P,E)||o(P,p,u))&&f.push(P)}return f}function s(l,u){let f=e.mapper.toViewElement(l);if(!f)return!1;if(n.fire("checkElement",{modelElement:l,viewElement:f}))return!0;if(!l.is("element","paragraph")&&!l.is("element","listItem"))return!1;let p=vB(l,t,u);return p&&f.is("element","p")?!0:!!(!p&&f.is("element","span"))}function o(l,u,f){if(f.has(l))return!1;let g=e.mapper.toViewElement(l),p=u.length-1;for(let y=g.parent;!y.is("editableElement");y=y.parent){let _=vx(y),C=Xme(y);if(!C&&!_)continue;let E=`checkAttributes:${_?"item":"list"}`;if(n.fire(E,{viewElement:y,modelAttributes:u[p]}))break;if(C&&(p--,p<0))return!1}return!0}}function gB(i,e,t,{dataPipeline:n}={}){let r=hge(i);return(s,o,l)=>{let{writer:u,mapper:f,consumable:g}=l,p=o.item;if(!i.includes(o.attributeKey)||!r(p,g))return;let y=age(p,f,t);bB(y,u,f),uge(y,u);let _=cge(p,y,e,u,{dataPipeline:n});dge(p,_,e,u)}}function oge(i){return(e,t,n)=>{let{writer:r,mapper:s}=n,o=e.name.split(":")[1];if(!i.checkAttribute(o,"listItemId"))return;let l=s.toViewPosition(t.position),u=t.position.getShiftedBy(t.length),f=s.toViewPosition(u,{isPhantom:!0}),p=r.createRange(l,f).getTrimmed().end.nodeBefore;!p||bB(p,r,s)}}function pB(i,{dataPipeline:e}={}){return(t,{writer:n})=>{if(!vB(t,i))return null;if(!e)return n.createContainerElement("span",{class:"ck-list-bogus-paragraph"});let r=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,r),r}}function age(i,e,t){let n=t.createRangeOn(i);return e.toViewRange(n).getTrimmed().end.nodeBefore}function lge(i,e){return(t,n)=>{if(n.modelPosition.offset>0)return;let r=n.modelPosition.parent;if(!Ri(r)||!i.some(f=>f.scope=="itemMarker"&&f.canInjectMarkerIntoElement&&f.canInjectMarkerIntoElement(r)))return;let s=n.mapper.toViewElement(r),o=e.createRangeIn(s),l=o.getWalker(),u=o.start;for(let{item:f}of l){if(f.is("element")&&n.mapper.toModelElement(f)||f.is("$textProxy"))break;f.is("element")&&f.getCustomProperty("listItemMarker")&&(u=e.createPositionAfter(f),l.skip(({previousPosition:g})=>!g.isEqual(u)))}n.viewPosition=u}}function bB(i,e,t){for(;i.parent.is("attributeElement")&&i.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(i),i.parent);let n=[];r(e.createPositionBefore(i).getWalker({direction:"backward"})),r(e.createRangeIn(i).getWalker());for(let s of n)e.remove(s);function r(s){for(let{item:o}of s){if(o.is("element")&&t.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&n.push(o)}}}function cge(i,e,t,n,{dataPipeline:r}){let s=n.createRangeOn(e);if(!Pl(i))return s;for(let o of t){if(o.scope!="itemMarker")continue;let l=o.createElement(n,i,{dataPipeline:r});if(!l||(n.setCustomProperty("listItemMarker",!0,l),o.canInjectMarkerIntoElement&&o.canInjectMarkerIntoElement(i)?n.insert(n.createPositionAt(e,0),l):(n.insert(s.start,l),s=n.createRange(n.createPositionBefore(l),n.createPositionAfter(e))),!o.createWrapperElement||!o.canWrapElement))continue;let u=o.createWrapperElement(n,i,{dataPipeline:r});n.setCustomProperty("listItemWrapper",!0,u),o.canWrapElement(i)?s=n.wrap(s,u):(s=n.wrap(n.createRangeOn(l),u),s=n.createRange(s.start,n.createPositionAfter(e)))}return s}function uge(i,e){let t=i.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){let n=t.parent;e.unwrap(e.createRangeOn(i),t),t=n}}function dge(i,e,t,n){if(!i.hasAttribute("listIndent"))return;let r=i.getAttribute("listIndent"),s=i;for(let o=r;o>=0;o--){let l=tge(n,o,s.getAttribute("listItemId")),u=ege(n,o,s.getAttribute("listType"));for(let f of t)(f.scope=="list"||f.scope=="item")&&s.hasAttribute(f.attributeName)&&f.setAttributeOnDowncast(n,s.getAttribute(f.attributeName),f.scope=="list"?u:l);if(e=n.wrap(e,l),e=n.wrap(e,u),o==0||(s=sr.first(s,{lowerIndent:!0}),!s))break}}function hge(i){return(e,t)=>{let n=[];for(let r of i)e.hasAttribute(r)&&n.push(`attribute:${r}`);return n.every(r=>t.test(e,r)!==!1)?(n.forEach(r=>t.consume(e,r)),!0):!1}}function vB(i,e,t=ux(i)){if(!Ri(i))return!1;for(let n of i.getAttributeKeys())if(!n.startsWith("selection:")&&!e.includes(n))return!1;return t.length<2}var pb=["listType","listIndent","listItemId"],wB=class extends ne{constructor(e){super(e);v(this,"_downcastStrategies",[]);e.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ks,rr,hB,En]}init(){let e=this.editor,t=e.model,n=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new L("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});t.schema.register("$listItem",{allowAttributes:pb}),n?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(let r of pb)t.schema.setAttributeProperties(r,{copyOnReplace:!0});e.commands.add("numberedList",new yf(e,"numbered")),e.commands.add("bulletedList",new yf(e,"bulleted")),e.commands.add("customNumberedList",new yf(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new yf(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new gx(e,"forward")),e.commands.add("outdentList",new gx(e,"backward")),e.commands.add("splitListItemBefore",new bx(e,"before")),e.commands.add("splitListItemAfter",new bx(e,"after")),n&&(e.commands.add("mergeListItemBackward",new px(e,"backward")),e.commands.add("mergeListItemForward",new px(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){let t=this.editor.commands,n=t.get("indent"),r=t.get("outdent");n&&n.registerChildCommand(t.get("indentList"),{priority:"high"}),r&&r.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...pb,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){let e=this.editor,t=e.commands.get("mergeListItemBackward"),n=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(r,s)=>{let o=e.model.document.selection;wf(e.model)||e.model.change(()=>{let l=o.getFirstPosition();if(o.isCollapsed&&s.direction=="backward"){if(!l.isAtStart)return;let u=l.parent;if(!Ri(u))return;if(!sr.first(u,{sameAttributes:"listType",sameIndent:!0})&&u.getAttribute("listIndent")===0)uB(u)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:yB(e.model,"backward")})}s.preventDefault(),r.stop()}else{if(o.isCollapsed&&!o.getLastPosition().isAtEnd||!n||!n.isEnabled)return;n.execute({shouldMergeOnBlocksContentLevel:yB(e.model,"forward")}),s.preventDefault(),r.stop()}})},{context:"li"})}_setupEnterIntegration(){let e=this.editor,t=e.model,n=e.commands,r=n.get("enter");this.listenTo(e.editing.view.document,"enter",(s,o)=>{let l=t.document,u=l.selection.getFirstPosition().parent;if(l.selection.isCollapsed&&Ri(u)&&u.isEmpty&&!o.isSoft){let f=Pl(u),g=uB(u);f&&g?(e.execute("outdentList"),o.preventDefault(),s.stop()):f&&!g?(e.execute("splitListItemAfter"),o.preventDefault(),s.stop()):g&&(e.execute("splitListItemBefore"),o.preventDefault(),s.stop())}},{context:"li"}),this.listenTo(r,"afterExecute",()=>{let s=n.get("splitListItemBefore");if(s.refresh(),!s.isEnabled)return;let l=e.model.document.selection.getLastPosition().parent;ux(l).length===2&&s.execute()})}_setupTabIntegration(){let e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,n)=>{let r=n.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(e.execute(r),n.stopPropagation(),n.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){let e=this.editor,t=e.model,n=this.getListAttributeNames(),r=e.config.get("list.multiBlock"),s=r?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(l,{writer:u})=>u.createElement(s,{listType:""})}).elementToElement({view:"p",model:(l,{writer:u})=>l.parent&&l.parent.is("element","li")?u.createElement(s,{listType:""}):null,converterPriority:"high"}).add(l=>{l.on("element:li",rge())}),r||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:s,view:pB(n),converterPriority:"high"}).add(l=>{l.on("attribute",gB(n,this._downcastStrategies,t)),l.on("remove",oge(t.schema))}),e.conversion.for("dataDowncast").elementToElement({model:s,view:pB(n,{dataPipeline:!0}),converterPriority:"high"}).add(l=>{l.on("attribute",gB(n,this._downcastStrategies,t,{dataPipeline:!0}))});let o=lge(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",o),e.data.mapper.on("modelToViewPosition",o),this.listenTo(t.document,"change:data",sge(t,e.editing,n,this),{priority:"high"}),this.on("checkAttributes:item",(l,{viewElement:u,modelAttributes:f})=>{u.id!=f.listItemId&&(l.return=!0,l.stop())}),this.on("checkAttributes:list",(l,{viewElement:u,modelAttributes:f})=>{(u.name!=fB(f.listType)||u.id!=mB(f.listType,f.listIndent))&&(l.return=!0,l.stop())})}_setupModelPostFixing(){let e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(n=>fge(e,n,t,this)),this.on("postFixer",(n,{listNodes:r,writer:s})=>{n.return=ige(r,s)||n.return},{priority:"high"}),this.on("postFixer",(n,{listNodes:r,writer:s,seenIds:o})=>{n.return=nge(r,o,s)||n.return},{priority:"high"})}_setupClipboardIntegration(){let e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",mge(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(n,r)=>{e.change(s=>{let o=Array.from(r.content.getChildren()),l=o[o.length-1];if(o.length>1&&l.is("element")&&l.isEmpty&&o.slice(0,-1).every(Ri)&&s.remove(l),r.method=="copy"||r.method=="cut"){let u=Array.from(r.content.getChildren());vf(u)&&gb(u,s)}})})}_setupAccessibilityIntegration(){let e=this.editor,t=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:t("Keystrokes that can be used in a list"),keystrokes:[{label:t("Increase list item indent"),keystroke:"Tab"},{label:t("Decrease list item indent"),keystroke:"Shift+Tab"}]})}};function fge(i,e,t,n){let r=i.document.differ.getChanges(),s=new Map,o=n.editor.config.get("list.multiBlock"),l=!1;for(let f of r){if(f.type=="insert"&&f.name!="$text"){let g=f.position.nodeAfter;if(!i.schema.checkAttribute(g,"listItemId"))for(let p of Array.from(g.getAttributeKeys()))t.includes(p)&&(e.removeAttribute(p,g),l=!0);Kr(f.position,s),f.attributes.has("listItemId")||Kr(f.position.getShiftedBy(f.length),s);for(let{item:p,previousPosition:y}of i.createRangeIn(g))Ri(p)&&Kr(y,s)}else f.type=="remove"?Kr(f.position,s):f.type=="attribute"&&t.includes(f.attributeKey)&&(Kr(f.range.start,s),f.attributeNewValue===null&&Kr(f.range.start.getShiftedBy(1),s));if(!o&&f.type=="attribute"&&pb.includes(f.attributeKey)){let g=f.range.start.nodeAfter;f.attributeNewValue===null&&g&&g.is("element","listItem")?(e.rename(g,"paragraph"),l=!0):f.attributeOldValue===null&&g&&g.is("element")&&g.name!="listItem"&&(e.rename(g,"listItem"),l=!0)}}let u=new Set;for(let f of s.values())l=n.fire("postFixer",{listNodes:new lB(f),listHead:f,writer:e,seenIds:u})||l;return l}function mge(i){return(e,[t,n])=>{let r=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!r.length)return;let o=(n?i.createSelection(n):i.document.selection).getFirstPosition(),l;if(Ri(o.parent))l=o.parent;else if(Ri(o.nodeBefore))l=o.nodeBefore;else return;i.change(u=>{let f=l.getAttribute("listType"),g=l.getAttribute("listIndent"),p=r[0].getAttribute("listIndent")||0,y=Math.max(g-p,0);for(let _ of r){let C=Ri(_);l.is("element","listItem")&&_.is("element","paragraph")&&u.rename(_,"listItem"),u.setAttributes({listIndent:(C?_.getAttribute("listIndent"):0)+y,listItemId:C?_.getAttribute("listItemId"):Il.next(),listType:f},_)}})}}function yB(i,e){let t=i.document.selection;if(!t.isCollapsed)return!wf(i);if(e==="forward")return!0;let r=t.getFirstPosition().parent,s=r.previousSibling;return i.schema.isObject(s)?!1:s.isEmpty?!0:vf([r,s])}function _B(i,e,t,n){i.ui.componentFactory.add(e,()=>{let r=xB(Ne,i,e,t,n);return r.set({tooltip:!0,isToggleable:!0}),r}),i.ui.componentFactory.add(`menuBar:${e}`,()=>{let r=xB(st,i,e,t,n);return r.set({role:"menuitemcheckbox",isToggleable:!0}),r})}function xB(i,e,t,n,r){let s=e.commands.get(t),o=new i(e.locale);return o.set({label:n,icon:r}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),o.on("execute",()=>{e.execute(t),e.editing.view.focus()}),o}var kB=class extends ne{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||_B(this.editor,"numberedList",e("Numbered List"),$e.numberedList),this.editor.ui.componentFactory.has("bulletedList")||_B(this.editor,"bulletedList",e("Bulleted List"),$e.bulletedList)}},wx=class extends ne{static get requires(){return[wB,kB]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}};var gge={},pge={},bge={},vge=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(let{listStyle:i,typeAttribute:e,listType:t}of vge)gge[i]=t,pge[i]=e,e&&(bge[e]=i);function CB(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Nu=CB();function wge(i){Nu=i}var yge=/[&<>"']/,_ge=/[&<>"']/g,xge=/[<>"']|&(?!#?\w+;)/,kge=/[<>"']|&(?!#?\w+;)/g,Cge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TB=i=>Cge[i];function Ni(i,e){if(e){if(yge.test(i))return i.replace(_ge,TB)}else if(xge.test(i))return i.replace(kge,TB);return i}var Tge=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function EB(i){return i.replace(Tge,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var Ege=/(^|[^\[])\^/g;function Lt(i,e){i=i.source||i,e=e||"";let t={replace:(n,r)=>(r=r.source||r,r=r.replace(Ege,"$1"),i=i.replace(n,r),t),getRegex:()=>new RegExp(i,e)};return t}var Sge=/[^\w:]/g,Age=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function SB(i,e,t){if(i){let n;try{n=decodeURIComponent(EB(t)).replace(Sge,"").toLowerCase()}catch(r){return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!Age.test(t)&&(t=Oge(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch(n){return null}return t}var bb={},Ige=/^[^:]+:\/*[^/]*$/,Pge=/^([^:]+:)[\s\S]*$/,Rge=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Oge(i,e){bb[" "+i]||(Ige.test(i)?bb[" "+i]=i+"/":bb[" "+i]=wb(i,"/",!0)),i=bb[" "+i];let t=i.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:i.replace(Pge,"$1")+e:e.charAt(0)==="/"?t?e:i.replace(Rge,"$1")+e:i+e}var vb={exec:function(){}};function Yr(i){let e=1,t,n;for(;e<arguments.length;e++){t=arguments[e];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i}function AB(i,e){let t=i.replace(/\|/g,(s,o,l)=>{let u=!1,f=o;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),n=t.split(/ \|/),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function wb(i,e,t){let n=i.length;if(n===0)return"";let r=0;for(;r<n;){let s=i.charAt(n-r-1);if(s===e&&!t)r++;else if(s!==e&&t)r++;else break}return i.substr(0,n-r)}function Mge(i,e){if(i.indexOf(e[1])===-1)return-1;let t=i.length,n=0,r=0;for(;r<t;r++)if(i[r]==="\\")r++;else if(i[r]===e[0])n++;else if(i[r]===e[1]&&(n--,n<0))return r;return-1}function IB(i){i&&i.sanitize&&!i.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function PB(i,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=i),e>>=1,i+=i;return t+i}function RB(i,e,t,n){let r=e.href,s=e.title?Ni(e.title):null,o=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){n.state.inLink=!0;let l={type:"link",raw:t,href:r,title:s,text:o,tokens:n.inlineTokens(o,[])};return n.state.inLink=!1,l}else return{type:"image",raw:t,href:r,title:s,text:Ni(o)}}function Lge(i,e){let t=i.match(/^(\s+)(?:```)/);if(t===null)return e;let n=t[1];return e.split(`
`).map(r=>{let s=r.match(/^\s+/);if(s===null)return r;let[o]=s;return o.length>=n.length?r.slice(n.length):r}).join(`
`)}var yb=class{constructor(e){this.options=e||Nu}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:wb(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=Lge(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){let s=wb(n,"#");(this.options.pedantic||!s||/ $/.test(s))&&(n=s.trim())}let r={type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(n,[]),text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,s,o,l,u,f,g,p,y,_,C,E=t[1].trim(),P=E.length>1,M={type:"list",raw:"",ordered:P,start:P?+E.slice(0,-1):"",loose:!1,items:[]};E=P?`\\d{1,9}\\${E.slice(-1)}`:`\\${E}`,this.options.pedantic&&(E=P?E:"[*+-]");let O=new RegExp(`^( {0,3}${E})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(C=!1,!(!(t=O.exec(e))||this.rules.block.hr.test(e)));){if(n=t[0],e=e.substring(n.length),g=t[2].split(`
`,1)[0],p=e.split(`
`,1)[0],this.options.pedantic?(o=2,_=g.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,_=g.slice(o),o+=t[1].length),u=!1,!g&&/^ *$/.test(p)&&(n+=p+`
`,e=e.substring(p.length+1),C=!0),!C){let W=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(y=e.split(`
`,1)[0],g=y,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!W.test(g));){if(g.search(/[^ ]/)>=o||!g.trim())_+=`
`+g.slice(o);else if(!u)_+=`
`+g;else break;!u&&!g.trim()&&(u=!0),n+=y+`
`,e=e.substring(y.length+1)}}M.loose||(f?M.loose=!0:/\n *\n *$/.test(n)&&(f=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(_),r&&(s=r[0]!=="[ ] ",_=_.replace(/^\[[ xX]\] +/,""))),M.items.push({type:"list_item",raw:n,task:!!r,checked:s,loose:!1,text:_}),M.raw+=n}M.items[M.items.length-1].raw=n.trimRight(),M.items[M.items.length-1].text=_.trimRight(),M.raw=M.raw.trimRight();let N=M.items.length;for(l=0;l<N;l++){this.lexer.state.top=!1,M.items[l].tokens=this.lexer.blockTokens(M.items[l].text,[]);let W=M.items[l].tokens.filter(U=>U.type==="space"),Z=W.every(U=>{let ie=U.raw.split(""),X=0;for(let F of ie)if(F===`
`&&(X+=1),X>1)return!0;return!1});!M.loose&&W.length&&Z&&(M.loose=!0,M.items[l].loose=!0)}return M}}html(e){let t=this.rules.block.html.exec(e);if(t){let n={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(t[0]):Ni(t[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}}def(e){let t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));let n=t[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:n,raw:t[0],href:t[2],title:t[3]}}}table(e){let t=this.rules.block.table.exec(e);if(t){let n={type:"table",header:AB(t[1]).map(r=>({text:r})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=t[0];let r=n.align.length,s,o,l,u;for(s=0;s<r;s++)/^ *-+: *$/.test(n.align[s])?n.align[s]="right":/^ *:-+: *$/.test(n.align[s])?n.align[s]="center":/^ *:-+ *$/.test(n.align[s])?n.align[s]="left":n.align[s]=null;for(r=n.rows.length,s=0;s<r;s++)n.rows[s]=AB(n.rows[s],n.header.length).map(f=>({text:f}));for(r=n.header.length,o=0;o<r;o++)n.header[o].tokens=[],this.lexer.inlineTokens(n.header[o].text,n.header[o].tokens);for(r=n.rows.length,o=0;o<r;o++)for(u=n.rows[o],l=0;l<u.length;l++)u[l].tokens=[],this.lexer.inlineTokens(u[l].text,u[l].tokens);return n}}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t){let n={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}text(e){let t=this.rules.block.text.exec(e);if(t){let n={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ni(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Ni(t[0]):t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;let o=wb(n.slice(0,-1),"\\");if((n.length-o.length)%2==0)return}else{let o=Mge(t[2],"()");if(o>-1){let u=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,u).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),RB(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r||!r.href){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return RB(n,r,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;let s=r[1]||r[2]||"";if(!s||s&&(n===""||this.rules.inline.punctuation.exec(n))){let o=r[0].length-1,l,u,f=o,g=0,p=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+o);(r=p.exec(t))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(u=l.length,r[3]||r[4]){f+=u;continue}else if((r[5]||r[6])&&o%3&&!((o+u)%3)){g+=u;continue}if(f-=u,f>0)continue;if(u=Math.min(u,u+f+g),Math.min(o,u)%2){let _=e.slice(1,o+r.index+u);return{type:"em",raw:e.slice(0,o+r.index+u+1),text:_,tokens:this.lexer.inlineTokens(_,[])}}let y=e.slice(2,o+r.index+u-1);return{type:"strong",raw:e.slice(0,o+r.index+u+1),text:y,tokens:this.lexer.inlineTokens(y,[])}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," "),r=/[^ ]/.test(n),s=/^ /.test(n)&&/ $/.test(n);return r&&s&&(n=n.substring(1,n.length-1)),n=Ni(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){let n=this.rules.inline.autolink.exec(e);if(n){let r,s;return n[2]==="@"?(r=Ni(this.options.mangle?t(n[1]):n[1]),s="mailto:"+r):(r=Ni(n[1]),s=r),{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let r,s;if(n[2]==="@")r=Ni(this.options.mangle?t(n[0]):n[0]),s="mailto:"+r;else{let o;do o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(o!==n[0]);r=Ni(n[0]),n[1]==="www."?s="http://"+r:s=r}return{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,t){let n=this.rules.inline.text.exec(e);if(n){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):Ni(n[0]):n[0]:r=Ni(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:r}}}},De={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:vb,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};De._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;De._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;De.def=Lt(De.def).replace("label",De._label).replace("title",De._title).getRegex();De.bullet=/(?:[*+-]|\d{1,9}[.)])/;De.listItemStart=Lt(/^( *)(bull) */).replace("bull",De.bullet).getRegex();De.list=Lt(De.list).replace(/bull/g,De.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+De.def.source+")").getRegex();De._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";De._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;De.html=Lt(De.html,"i").replace("comment",De._comment).replace("tag",De._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();De.paragraph=Lt(De._paragraph).replace("hr",De.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",De._tag).getRegex();De.blockquote=Lt(De.blockquote).replace("paragraph",De.paragraph).getRegex();De.normal=Yr({},De);De.gfm=Yr({},De.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});De.gfm.table=Lt(De.gfm.table).replace("hr",De.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",De._tag).getRegex();De.gfm.paragraph=Lt(De._paragraph).replace("hr",De.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",De.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",De._tag).getRegex();De.pedantic=Yr({},De.normal,{html:Lt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",De._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:vb,paragraph:Lt(De.normal._paragraph).replace("hr",De.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",De.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Te={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:vb,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:vb,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Te._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Te.punctuation=Lt(Te.punctuation).replace(/punctuation/g,Te._punctuation).getRegex();Te.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Te.escapedEmSt=/\\\*|\\_/g;Te._comment=Lt(De._comment).replace("(?:-->|$)","-->").getRegex();Te.emStrong.lDelim=Lt(Te.emStrong.lDelim).replace(/punct/g,Te._punctuation).getRegex();Te.emStrong.rDelimAst=Lt(Te.emStrong.rDelimAst,"g").replace(/punct/g,Te._punctuation).getRegex();Te.emStrong.rDelimUnd=Lt(Te.emStrong.rDelimUnd,"g").replace(/punct/g,Te._punctuation).getRegex();Te._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Te._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Te._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Te.autolink=Lt(Te.autolink).replace("scheme",Te._scheme).replace("email",Te._email).getRegex();Te._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Te.tag=Lt(Te.tag).replace("comment",Te._comment).replace("attribute",Te._attribute).getRegex();Te._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Te._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Te._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Te.link=Lt(Te.link).replace("label",Te._label).replace("href",Te._href).replace("title",Te._title).getRegex();Te.reflink=Lt(Te.reflink).replace("label",Te._label).replace("ref",De._label).getRegex();Te.nolink=Lt(Te.nolink).replace("ref",De._label).getRegex();Te.reflinkSearch=Lt(Te.reflinkSearch,"g").replace("reflink",Te.reflink).replace("nolink",Te.nolink).getRegex();Te.normal=Yr({},Te);Te.pedantic=Yr({},Te.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Lt(/^!?\[(label)\]\((.*?)\)/).replace("label",Te._label).getRegex(),reflink:Lt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Te._label).getRegex()});Te.gfm=Yr({},Te.normal,{escape:Lt(Te.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Te.gfm.url=Lt(Te.gfm.url,"i").replace("email",Te.gfm._extended_email).getRegex();Te.breaks=Yr({},Te.gfm,{br:Lt(Te.br).replace("{2,}","*").getRegex(),text:Lt(Te.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Dge(i){return i.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function OB(i){let e="",t,n,r=i.length;for(t=0;t<r;t++)n=i.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var Es=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Nu,this.options.tokenizer=this.options.tokenizer||new yb,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:De.normal,inline:Te.normal};this.options.pedantic?(t.block=De.pedantic,t.inline=Te.pedantic):this.options.gfm&&(t.block=De.gfm,this.options.breaks?t.inline=Te.breaks:t.inline=Te.gfm),this.tokenizer.rules=t}static get rules(){return{block:De,inline:Te}}static lex(e,t){return new Es(t).lex(e)}static lexInline(e,t){return new Es(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let n,r,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(n=l.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0,u=e.slice(1),f;this.options.extensions.startBlock.forEach(function(g){f=g.call({lexer:this},u),typeof f=="number"&&f>=0&&(l=Math.min(l,f))}),l<1/0&&l>=0&&(s=e.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){r=t[t.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),o=s.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let n,r,s,o=e,l,u,f;if(this.tokens.links){let g=Object.keys(this.tokens.links);if(g.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)g.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,l.index)+"["+PB("a",l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,l.index)+"["+PB("a",l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,l.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(u||(f=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(g=>(n=g.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),r=t[t.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,o,f)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e,OB)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,OB))){e=e.substring(n.raw.length),t.push(n);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let g=1/0,p=e.slice(1),y;this.options.extensions.startInline.forEach(function(_){y=_.call({lexer:this},p),typeof y=="number"&&y>=0&&(g=Math.min(g,y))}),g<1/0&&g>=0&&(s=e.substring(0,g+1))}if(n=this.tokenizer.inlineText(s,Dge)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(f=n.raw.slice(-1)),u=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(e){let g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return t}},_b=class{constructor(e){this.options=e||Nu}code(e,t,n){let r=(t||"").match(/\S*/)[0];if(this.options.highlight){let s=this.options.highlight(e,r);s!=null&&s!==e&&(n=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+Ni(r,!0)+'">'+(n?e:Ni(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:Ni(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,n){let r=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+r+s+`>
`+e+"</"+r+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){let n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(e=SB(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let r='<a href="'+Ni(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(e=SB(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}},yx=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}},_x=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do r++,n=e+"-"+r;while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){let n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}},Ss=class{constructor(e){this.options=e||Nu,this.options.renderer=this.options.renderer||new _b,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new yx,this.slugger=new _x}static parse(e,t){return new Ss(t).parse(e)}static parseInline(e,t){return new Ss(t).parseInline(e)}parse(e,t=!0){let n="",r,s,o,l,u,f,g,p,y,_,C,E,P,M,O,N,W,Z,U,ie=e.length;for(r=0;r<ie;r++){if(_=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]&&(U=this.options.extensions.renderers[_.type].call({parser:this},_),U!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(_.type))){n+=U||"";continue}switch(_.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(_.tokens),_.depth,EB(this.parseInline(_.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(_.text,_.lang,_.escaped);continue}case"table":{for(p="",g="",l=_.header.length,s=0;s<l;s++)g+=this.renderer.tablecell(this.parseInline(_.header[s].tokens),{header:!0,align:_.align[s]});for(p+=this.renderer.tablerow(g),y="",l=_.rows.length,s=0;s<l;s++){for(f=_.rows[s],g="",u=f.length,o=0;o<u;o++)g+=this.renderer.tablecell(this.parseInline(f[o].tokens),{header:!1,align:_.align[o]});y+=this.renderer.tablerow(g)}n+=this.renderer.table(p,y);continue}case"blockquote":{y=this.parse(_.tokens),n+=this.renderer.blockquote(y);continue}case"list":{for(C=_.ordered,E=_.start,P=_.loose,l=_.items.length,y="",s=0;s<l;s++)O=_.items[s],N=O.checked,W=O.task,M="",O.task&&(Z=this.renderer.checkbox(N),P?O.tokens.length>0&&O.tokens[0].type==="paragraph"?(O.tokens[0].text=Z+" "+O.tokens[0].text,O.tokens[0].tokens&&O.tokens[0].tokens.length>0&&O.tokens[0].tokens[0].type==="text"&&(O.tokens[0].tokens[0].text=Z+" "+O.tokens[0].tokens[0].text)):O.tokens.unshift({type:"text",text:Z}):M+=Z),M+=this.parse(O.tokens,P),y+=this.renderer.listitem(M,W,N);n+=this.renderer.list(y,C,E);continue}case"html":{n+=this.renderer.html(_.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(_.tokens));continue}case"text":{for(y=_.tokens?this.parseInline(_.tokens):_.text;r+1<ie&&e[r+1].type==="text";)_=e[++r],y+=`
`+(_.tokens?this.parseInline(_.tokens):_.text);n+=t?this.renderer.paragraph(y):y;continue}default:{let X='Token with "'+_.type+'" type was not found.';if(this.options.silent){console.error(X);return}else throw new Error(X)}}}return n}parseInline(e,t){t=t||this.renderer;let n="",r,s,o,l=e.length;for(r=0;r<l;r++){if(s=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(o=this.options.extensions.renderers[s.type].call({parser:this},s),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){n+=o||"";continue}switch(s.type){case"escape":{n+=t.text(s.text);break}case"html":{n+=t.html(s.text);break}case"link":{n+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break}case"image":{n+=t.image(s.href,s.title,s.text);break}case"strong":{n+=t.strong(this.parseInline(s.tokens,t));break}case"em":{n+=t.em(this.parseInline(s.tokens,t));break}case"codespan":{n+=t.codespan(s.text);break}case"br":{n+=t.br();break}case"del":{n+=t.del(this.parseInline(s.tokens,t));break}case"text":{n+=t.text(s.text);break}default:{let u='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return n}};function qe(i,e,t){if(typeof i=="undefined"||i===null)throw new Error("marked(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=Yr({},qe.defaults,e||{}),IB(e),t){let n=e.highlight,r;try{r=Es.lex(i,e)}catch(l){return t(l)}let s=function(l){let u;if(!l)try{e.walkTokens&&qe.walkTokens(r,e.walkTokens),u=Ss.parse(r,e)}catch(f){l=f}return e.highlight=n,l?t(l):t(null,u)};if(!n||n.length<3||(delete e.highlight,!r.length))return s();let o=0;qe.walkTokens(r,function(l){l.type==="code"&&(o++,setTimeout(()=>{n(l.text,l.lang,function(u,f){if(u)return s(u);f!=null&&f!==l.text&&(l.text=f,l.escaped=!0),o--,o===0&&s()})},0))}),o===0&&s();return}try{let n=Es.lex(i,e);return e.walkTokens&&qe.walkTokens(n,e.walkTokens),Ss.parse(n,e)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Ni(n.message+"",!0)+"</pre>";throw n}}qe.options=qe.setOptions=function(i){return Yr(qe.defaults,i),wge(qe.defaults),qe};qe.getDefaults=CB;qe.defaults=Nu;qe.use=function(...i){let e=Yr({},...i),t=qe.defaults.extensions||{renderers:{},childTokens:{}},n;i.forEach(r=>{if(r.extensions&&(n=!0,r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){let o=t.renderers?t.renderers[s.name]:null;o?t.renderers[s.name]=function(...l){let u=s.renderer.apply(this,l);return u===!1&&(u=o.apply(this,l)),u}:t.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[s.level]?t[s.level].unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}s.childTokens&&(t.childTokens[s.name]=s.childTokens)})),r.renderer){let s=qe.defaults.renderer||new _b;for(let o in r.renderer){let l=s[o];s[o]=(...u)=>{let f=r.renderer[o].apply(s,u);return f===!1&&(f=l.apply(s,u)),f}}e.renderer=s}if(r.tokenizer){let s=qe.defaults.tokenizer||new yb;for(let o in r.tokenizer){let l=s[o];s[o]=(...u)=>{let f=r.tokenizer[o].apply(s,u);return f===!1&&(f=l.apply(s,u)),f}}e.tokenizer=s}if(r.walkTokens){let s=qe.defaults.walkTokens;e.walkTokens=function(o){r.walkTokens.call(this,o),s&&s.call(this,o)}}n&&(e.extensions=t),qe.setOptions(e)})};qe.walkTokens=function(i,e){for(let t of i)switch(e.call(qe,t),t.type){case"table":{for(let n of t.header)qe.walkTokens(n.tokens,e);for(let n of t.rows)for(let r of n)qe.walkTokens(r.tokens,e);break}case"list":{qe.walkTokens(t.items,e);break}default:qe.defaults.extensions&&qe.defaults.extensions.childTokens&&qe.defaults.extensions.childTokens[t.type]?qe.defaults.extensions.childTokens[t.type].forEach(function(n){qe.walkTokens(t[n],e)}):t.tokens&&qe.walkTokens(t.tokens,e)}};qe.parseInline=function(i,e){if(typeof i=="undefined"||i===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");e=Yr({},qe.defaults,e||{}),IB(e);try{let t=Es.lexInline(i,e);return e.walkTokens&&qe.walkTokens(t,e.walkTokens),Ss.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Ni(t.message+"",!0)+"</pre>";throw t}};qe.Parser=Ss;qe.parser=Ss.parse;qe.Renderer=_b;qe.TextRenderer=yx;qe.Lexer=Es;qe.lexer=Es.lex;qe.Tokenizer=yb;qe.Slugger=_x;qe.parse=qe;var nMe=qe.options,rMe=qe.setOptions,sMe=qe.use,oMe=qe.walkTokens,aMe=qe.parseInline;var lMe=Ss.parse,cMe=Es.lex;function Vge(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n])}return i}function xx(i,e){return Array(e+1).join(i)}function Bge(i){return i.replace(/^\n*/,"")}function Nge(i){for(var e=i.length;e>0&&i[e-1]===`
`;)e--;return i.substring(0,e)}var Fge=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function kx(i){return Cx(i,Fge)}var MB=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function LB(i){return Cx(i,MB)}function jge(i){return VB(i,MB)}var DB=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Hge(i){return Cx(i,DB)}function zge(i){return VB(i,DB)}function Cx(i,e){return e.indexOf(i.nodeName)>=0}function VB(i,e){return i.getElementsByTagName&&e.some(function(t){return i.getElementsByTagName(t).length})}var on={};on.paragraph={filter:"p",replacement:function(i){return`

`+i+`

`}};on.lineBreak={filter:"br",replacement:function(i,e,t){return t.br+`
`}};on.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(i,e,t){var n=Number(e.nodeName.charAt(1));if(t.headingStyle==="setext"&&n<3){var r=xx(n===1?"=":"-",i.length);return`

`+i+`
`+r+`

`}else return`

`+xx("#",n)+" "+i+`

`}};on.blockquote={filter:"blockquote",replacement:function(i){return i=i.replace(/^\n+|\n+$/g,""),i=i.replace(/^/gm,"> "),`

`+i+`

`}};on.list={filter:["ul","ol"],replacement:function(i,e){var t=e.parentNode;return t.nodeName==="LI"&&t.lastElementChild===e?`
`+i:`

`+i+`

`}};on.listItem={filter:"li",replacement:function(i,e,t){i=i.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var n=t.bulletListMarker+"   ",r=e.parentNode;if(r.nodeName==="OL"){var s=r.getAttribute("start"),o=Array.prototype.indexOf.call(r.children,e);n=(s?Number(s)+o:o+1)+".  "}return n+i+(e.nextSibling&&!/\n$/.test(i)?`
`:"")}};on.indentedCodeBlock={filter:function(i,e){return e.codeBlockStyle==="indented"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,e,t){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};on.fencedCodeBlock={filter:function(i,e){return e.codeBlockStyle==="fenced"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,e,t){for(var n=e.firstChild.getAttribute("class")||"",r=(n.match(/language-(\S+)/)||[null,""])[1],s=e.firstChild.textContent,o=t.fence.charAt(0),l=3,u=new RegExp("^"+o+"{3,}","gm"),f;f=u.exec(s);)f[0].length>=l&&(l=f[0].length+1);var g=xx(o,l);return`

`+g+r+`
`+s.replace(/\n$/,"")+`
`+g+`

`}};on.horizontalRule={filter:"hr",replacement:function(i,e,t){return`

`+t.hr+`

`}};on.inlineLink={filter:function(i,e){return e.linkStyle==="inlined"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,e){var t=e.getAttribute("href");t&&(t=t.replace(/([()])/g,"\\$1"));var n=xb(e.getAttribute("title"));return n&&(n=' "'+n.replace(/"/g,'\\"')+'"'),"["+i+"]("+t+n+")"}};on.referenceLink={filter:function(i,e){return e.linkStyle==="referenced"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,e,t){var n=e.getAttribute("href"),r=xb(e.getAttribute("title"));r&&(r=' "'+r+'"');var s,o;switch(t.linkReferenceStyle){case"collapsed":s="["+i+"][]",o="["+i+"]: "+n+r;break;case"shortcut":s="["+i+"]",o="["+i+"]: "+n+r;break;default:var l=this.references.length+1;s="["+i+"]["+l+"]",o="["+l+"]: "+n+r}return this.references.push(o),s},references:[],append:function(i){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}};on.emphasis={filter:["em","i"],replacement:function(i,e,t){return i.trim()?t.emDelimiter+i+t.emDelimiter:""}};on.strong={filter:["strong","b"],replacement:function(i,e,t){return i.trim()?t.strongDelimiter+i+t.strongDelimiter:""}};on.code={filter:function(i){var e=i.previousSibling||i.nextSibling,t=i.parentNode.nodeName==="PRE"&&!e;return i.nodeName==="CODE"&&!t},replacement:function(i){if(!i)return"";i=i.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(i)?" ":"",t="`",n=i.match(/`+/gm)||[];n.indexOf(t)!==-1;)t=t+"`";return t+e+i+e+t}};on.image={filter:"img",replacement:function(i,e){var t=xb(e.getAttribute("alt")),n=e.getAttribute("src")||"",r=xb(e.getAttribute("title")),s=r?' "'+r+'"':"";return n?"!["+t+"]("+n+s+")":""}};function xb(i){return i?i.replace(/(\n+\s*)+/g,`
`):""}function BB(i){this.options=i,this._keep=[],this._remove=[],this.blankRule={replacement:i.blankReplacement},this.keepReplacement=i.keepReplacement,this.defaultRule={replacement:i.defaultReplacement},this.array=[];for(var e in i.rules)this.array.push(i.rules[e])}BB.prototype={add:function(i,e){this.array.unshift(e)},keep:function(i){this._keep.unshift({filter:i,replacement:this.keepReplacement})},remove:function(i){this._remove.unshift({filter:i,replacement:function(){return""}})},forNode:function(i){if(i.isBlank)return this.blankRule;var e;return(e=Tx(this.array,i,this.options))||(e=Tx(this._keep,i,this.options))||(e=Tx(this._remove,i,this.options))?e:this.defaultRule},forEach:function(i){for(var e=0;e<this.array.length;e++)i(this.array[e],e)}};function Tx(i,e,t){for(var n=0;n<i.length;n++){var r=i[n];if(Uge(r,e,t))return r}}function Uge(i,e,t){var n=i.filter;if(typeof n=="string"){if(n===e.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof n=="function"){if(n.call(i,e,t))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Wge(i){var e=i.element,t=i.isBlock,n=i.isVoid,r=i.isPre||function(p){return p.nodeName==="PRE"};if(!(!e.firstChild||r(e))){for(var s=null,o=!1,l=null,u=NB(l,e,r);u!==e;){if(u.nodeType===3||u.nodeType===4){var f=u.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!o&&f[0]===" "&&(f=f.substr(1)),!f){u=Ex(u);continue}u.data=f,s=u}else if(u.nodeType===1)t(u)||u.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,o=!1):n(u)||r(u)?(s=null,o=!0):s&&(o=!1);else{u=Ex(u);continue}var g=NB(l,u,r);l=u,u=g}s&&(s.data=s.data.replace(/ $/,""),s.data||Ex(s))}}function Ex(i){var e=i.nextSibling||i.parentNode;return i.parentNode.removeChild(i),e}function NB(i,e,t){return i&&i.parentNode===e||t(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var Sx=typeof window!="undefined"?window:{};function qge(){var i=Sx.DOMParser,e=!1;try{new i().parseFromString("","text/html")&&(e=!0)}catch(t){}return e}function $ge(){var i=function(){};return Gge()?i.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:i.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},i}function Gge(){var i=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){Sx.ActiveXObject&&(i=!0)}return i}var Kge=qge()?Sx.DOMParser:$ge();function Yge(i,e){var t;if(typeof i=="string"){var n=Zge().parseFromString('<x-turndown id="turndown-root">'+i+"</x-turndown>","text/html");t=n.getElementById("turndown-root")}else t=i.cloneNode(!0);return Wge({element:t,isBlock:kx,isVoid:LB,isPre:e.preformattedCode?Jge:null}),t}var Ax;function Zge(){return Ax=Ax||new Kge,Ax}function Jge(i){return i.nodeName==="PRE"||i.nodeName==="CODE"}function Xge(i,e){return i.isBlock=kx(i),i.isCode=i.nodeName==="CODE"||i.parentNode.isCode,i.isBlank=Qge(i),i.flankingWhitespace=epe(i,e),i}function Qge(i){return!LB(i)&&!Hge(i)&&/^\s*$/i.test(i.textContent)&&!jge(i)&&!zge(i)}function epe(i,e){if(i.isBlock||e.preformattedCode&&i.isCode)return{leading:"",trailing:""};var t=tpe(i.textContent);return t.leadingAscii&&FB("left",i,e)&&(t.leading=t.leadingNonAscii),t.trailingAscii&&FB("right",i,e)&&(t.trailing=t.trailingNonAscii),{leading:t.leading,trailing:t.trailing}}function tpe(i){var e=i.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function FB(i,e,t){var n,r,s;return i==="left"?(n=e.previousSibling,r=/ $/):(n=e.nextSibling,r=/^ /),n&&(n.nodeType===3?s=r.test(n.nodeValue):t.preformattedCode&&n.nodeName==="CODE"?s=!1:n.nodeType===1&&!kx(n)&&(s=r.test(n.textContent))),s}var ipe=Array.prototype.reduce,npe=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Ix(i){if(!(this instanceof Ix))return new Ix(i);var e={rules:on,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,n){return n.isBlock?`

`:""},keepReplacement:function(t,n){return n.isBlock?`

`+n.outerHTML+`

`:n.outerHTML},defaultReplacement:function(t,n){return n.isBlock?`

`+t+`

`:t}};this.options=Vge({},e,i),this.rules=new BB(this.options)}Ix.prototype={turndown:function(i){if(!ope(i))throw new TypeError(i+" is not a string, or an element/document/fragment node.");if(i==="")return"";var e=jB.call(this,new Yge(i,this.options));return rpe.call(this,e)},use:function(i){if(Array.isArray(i))for(var e=0;e<i.length;e++)this.use(i[e]);else if(typeof i=="function")i(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(i,e){return this.rules.add(i,e),this},keep:function(i){return this.rules.keep(i),this},remove:function(i){return this.rules.remove(i),this},escape:function(i){return npe.reduce(function(e,t){return e.replace(t[0],t[1])},i)}};function jB(i){var e=this;return ipe.call(i.childNodes,function(t,n){n=new Xge(n,e.options);var r="";return n.nodeType===3?r=n.isCode?n.nodeValue:e.escape(n.nodeValue):n.nodeType===1&&(r=spe.call(e,n)),HB(t,r)},"")}function rpe(i){var e=this;return this.rules.forEach(function(t){typeof t.append=="function"&&(i=HB(i,t.append(e.options)))}),i.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function spe(i){var e=this.rules.forNode(i),t=jB.call(this,i),n=i.flankingWhitespace;return(n.leading||n.trailing)&&(t=t.trim()),n.leading+e.replacement(t,i,this.options)+n.trailing}function HB(i,e){var t=Nge(i),n=Bge(e),r=Math.max(i.length-t.length,e.length-n.length),s=`

`.substring(0,r);return t+s+n}function ope(i){return i!=null&&(typeof i=="string"||i.nodeType&&(i.nodeType===1||i.nodeType===9||i.nodeType===11))}var ape=Array.prototype.indexOf,lpe=Array.prototype.every,kb={};kb.tableCell={filter:["th","td"],replacement:function(i,e){return UB(i,e)}};kb.tableRow={filter:"tr",replacement:function(i,e){var t="",n={left:":--",right:"--:",center:":-:"};if(zB(e))for(var r=0;r<e.childNodes.length;r++){var s="---",o=(e.childNodes[r].getAttribute("align")||"").toLowerCase();o&&(s=n[o]||s),t+=UB(s,e.childNodes[r])}return`
`+i+(t?`
`+t:"")}};kb.table={filter:function(i){return i.nodeName==="TABLE"&&zB(i.rows[0])},replacement:function(i){return i=i.replace(`

`,`
`),`

`+i+`

`}};kb.tableSection={filter:["thead","tbody","tfoot"],replacement:function(i){return i}};function zB(i){var e=i.parentNode;return e.nodeName==="THEAD"||e.firstChild===i&&(e.nodeName==="TABLE"||cpe(e))&&lpe.call(i.childNodes,function(t){return t.nodeName==="TH"})}function cpe(i){var e=i.previousSibling;return i.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function UB(i,e){var t=ape.call(e.parentNode.childNodes,e),n=" ";return t===0&&(n="| "),n+i+" |"}var _Me=new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source+/(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source+/(?:[^\s<>]*)/.source,"gi");var VMe=[Ge.arrowup,Ge.arrowdown,Ge.esc],BMe=[Ge.enter,Ge.tab];function upe(i){let e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],t=e.map(o=>o.name).join("|"),n=i.replace(new RegExp(`</?(${t})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`),r=0,s=!1;return n.filter(o=>o.length).map(o=>(s=fpe(o,s),dpe(o,e)?Px(o,r++):hpe(o,e)?Px(o,--r):s==="middle"||s==="last"?o:Px(o,r))).join(`
`)}function dpe(i,e){return e.some(t=>!(t.isVoid||!new RegExp(`<${t.name}( .*?)?>`).test(i)))}function hpe(i,e){return e.some(t=>new RegExp(`</${t.name}>`).test(i))}function Px(i,e,t="    "){return`${t.repeat(Math.max(0,e))}${i}`}function fpe(i,e){return new RegExp("<pre( .*?)?>").test(i)?"first":new RegExp("</pre>").test(i)?"last":e==="first"||e==="middle"?"middle":!1}var mpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>',Cb="SourceEditingMode",Rx=class extends ne{constructor(e){super(e);v(this,"_elementReplacer");v(this,"_replacedRoots");v(this,"_dataFromRoots");this.set("isSourceEditingMode",!1),this._elementReplacer=new xh,this._replacedRoots=new Map,this._dataFromRoots=new Map,e.config.define("sourceEditing.allowCollaborationFeatures",!1)}static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[gl]}init(){this._checkCompatibility();let e=this.editor,t=e.locale.t;e.ui.componentFactory.add("sourceEditing",()=>{let n=this._createButton(Ne);return n.set({label:t("Source"),icon:mpe,tooltip:!0,class:"ck-source-editing-button"}),n}),e.ui.componentFactory.add("menuBar:sourceEditing",()=>{let n=this._createButton(st);return n.set({label:t("Show source"),role:"menuitemcheckbox"}),n}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(n,r,s)=>{s?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(n,r,s)=>this._handleReadOnlyMode(!s)),this.listenTo(e,"change:isReadOnly",(n,r,s)=>this._handleReadOnlyMode(s))),e.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){let e=this.editor,t={};for(let[n,r]of this._replacedRoots){let s=this._dataFromRoots.get(n),o=r.dataset.value;s!==o&&(t[n]=o,this._dataFromRoots.set(n,o))}Object.keys(t).length&&e.data.set(t,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){let e=this.editor,t=e.config.get("sourceEditing.allowCollaborationFeatures");if(!t&&e.plugins.has("RealTimeCollaborativeEditing"))throw new L("source-editing-incompatible-with-real-time-collaboration",null);!t&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(r=>e.plugins.has(r))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){let e=this.editor,t=e.editing.view,n=e.model;n.change(r=>{r.setSelection(null),r.removeSelectionAttribute(n.document.selection.getAttributeKeys())});for(let[r,s]of t.domRoots){let o=gpe(e.data.get({rootName:r})),l=Ai(s.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),u=Ai(s.ownerDocument,"div",{class:"ck-source-editing-area","data-value":o},[l]);l.value=o,l.setSelectionRange(0,0),l.addEventListener("input",()=>{u.dataset.value=l.value,e.ui.update()}),t.change(f=>{let g=t.document.getRoot(r);f.addClass("ck-hidden",g)}),e.ui.setEditableElement("sourceEditing:"+r,l),this._replacedRoots.set(r,u),this._elementReplacer.replace(s,u),this._dataFromRoots.set(r,o)}this._focusSourceEditing()}_hideSourceEditing(){let t=this.editor.editing.view;this.updateEditorData(),t.change(n=>{for(let[r]of this._replacedRoots)n.removeClass("ck-hidden",t.document.getRoot(r))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),t.focus()}_focusSourceEditing(){let e=this.editor,[t]=this._replacedRoots.values(),n=t.querySelector("textarea");e.editing.view.document.isFocused=!1,n.focus()}_disableCommands(){let e=this.editor;for(let t of e.commands.commands())t.forceDisabled(Cb);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").forceDisabled(Cb)}_enableCommands(){let e=this.editor;for(let t of e.commands.commands())t.clearForceDisabled(Cb);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").clearForceDisabled(Cb)}_handleReadOnlyMode(e){if(!!this.isSourceEditingMode)for(let[,t]of this._replacedRoots)t.querySelector("textarea").readOnly=e}_isAllowedToHandleSourceEditingMode(){let t=this.editor.ui.view.editable;return t&&!t.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){let e=this.editor.plugins.get("Dialog");e.isOpen&&e.hide()}}_createButton(e){let t=this.editor,n=new e(t.locale);return n.set({withText:!0,isToggleable:!0}),n.bind("isOn").to(this,"isSourceEditingMode"),n.bind("isEnabled").to(this,"isEnabled",t,"isReadOnly",t.plugins.get(gl),"hasAny",(r,s,o)=>!(!r||s||o)),this.listenTo(n,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),n}};function gpe(i){return ppe(i)?upe(i):i}function ppe(i){return i.startsWith("<")}var vpe=class{constructor(e,t={}){v(this,"_table");v(this,"_startRow");v(this,"_endRow");v(this,"_startColumn");v(this,"_endColumn");v(this,"_includeAllSlots");v(this,"_skipRows");v(this,"_row");v(this,"_rowIndex");v(this,"_column");v(this,"_cellIndex");v(this,"_spannedCells");v(this,"_nextCellAtColumn");v(this,"_jumpedToStartRow",!1);this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();let e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0,value:void 0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null,n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(n.cell,n.row,n.column));else{let r=e.getChild(this._cellIndex);if(!r)return this._advanceToNextRow();let s=parseInt(r.getAttribute("colspan")||"1"),o=parseInt(r.getAttribute("rowspan")||"1");(s>1||o>1)&&this._recordSpans(r,o,s),this._shouldSkipSlot()||(t=this._formatOutValue(r)),this._nextCellAtColumn=this._column+s}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,n=this._column){return{done:!1,value:new WB(this,e,t,n)}}_shouldSkipSlot(){let e=this._skipRows.has(this._row),t=this._row<this._startRow,n=this._column<this._startColumn,r=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||n||r}_getSpanned(){let e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,n){let r={cell:e,row:this._row,column:this._column};for(let s=this._row;s<this._row+t;s++)for(let o=this._column;o<this._column+n;o++)(s!=this._row||o!=this._column)&&this._markSpannedCell(s,o,r)}_markSpannedCell(e,t,n){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){let e=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)e===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(e){return[...this._table.getChild(e).getChildren()].reduce((n,r)=>n+parseInt(r.getAttribute("colspan")||"1"),0)}},WB=class{constructor(e,t,n,r){v(this,"cell");v(this,"row");v(this,"column");v(this,"cellAnchorRow");v(this,"cellAnchorColumn");v(this,"_cellIndex");v(this,"_rowIndex");v(this,"_table");this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=n,this.cellAnchorColumn=r,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}};var RN=Vo(qB());var $B="&#8203;";function Lx(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function GB(i){return function(e){if(Array.isArray(e))return Lx(e)}(i)||function(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(i)||function(e,t){if(!!e){if(typeof e=="string")return Lx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lx(e,t)}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pa={isEnabled:function(){var i;return(i=window.TAGIFY_DEBUG)===null||i===void 0||i},log:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];var n;this.isEnabled()&&(n=console).log.apply(n,["[Tagify]:"].concat(GB(e)))},warn:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];var n;this.isEnabled()&&(n=console).warn.apply(n,["[Tagify]:"].concat(GB(e)))}},_f=function(i,e,t,n){return i=""+i,e=""+e,n&&(i=i.trim(),e=e.trim()),t?i==e:i.toLowerCase()==e.toLowerCase()},KB=function(i,e){return i&&Array.isArray(i)&&i.map(function(t){return Dx(t,e)})};function Dx(i,e){var t,n={};for(t in i)e.indexOf(t)<0&&(n[t]=i[t]);return n}function Vx(i){return new DOMParser().parseFromString(i.trim(),"text/html").body.firstElementChild}function YB(i,e){for(e=e||"previous";i=i[e+"Sibling"];)if(i.nodeType==3)return i}function Ol(i){return typeof i=="string"?i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):i}function Zr(i){var e=Object.prototype.toString.call(i).split(" ")[1].slice(0,-1);return i===Object(i)&&e!="Array"&&e!="Function"&&e!="RegExp"&&e!="HTMLUnknownElement"}function Oi(i,e,t){var n,r;function s(o,l){for(var u in l)if(l.hasOwnProperty(u)){if(Zr(l[u])){Zr(o[u])?s(o[u],l[u]):o[u]=Object.assign({},l[u]);continue}if(Array.isArray(l[u])){o[u]=Object.assign([],l[u]);continue}o[u]=l[u]}}return n=i,((r=Object)!=null&&typeof Symbol!="undefined"&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r)||(i={}),s(i,e),t&&s(i,t),i}function ZB(){var i=[],e={},t=!0,n=!1,r=void 0;try{for(var s,o=arguments[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var l=s.value,u=!0,f=!1,g=void 0;try{for(var p,y=l[Symbol.iterator]();!(u=(p=y.next()).done);u=!0){var _=p.value;Zr(_)?e[_.value]||(i.push(_),e[_.value]=1):i.includes(_)||i.push(_)}}catch(C){f=!0,g=C}finally{try{u||y.return==null||y.return()}finally{if(f)throw g}}}}catch(C){n=!0,r=C}finally{try{t||o.return==null||o.return()}finally{if(n)throw r}}return i}function Tb(i){return String.prototype.normalize?typeof i=="string"?i.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:i}var JB=function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)};function XB(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(i){return(i^crypto.getRandomValues(new Uint8Array(1))[0]&15>>i/4).toString(16)})}function Ml(i){var e;return eN.call(this,i)&&(i==null||(e=i.classList)===null||e===void 0?void 0:e.contains(this.settings.classNames.tag))}function QB(i){return eN.call(this,i)&&(i==null?void 0:i.closest(this.settings.classNames.tagSelector))}function eN(i){var e;return(i==null||(e=i.closest)===null||e===void 0?void 0:e.call(i,this.settings.classNames.namespaceSelector))===this.DOM.scope}function tN(i,e){var t=window.getSelection();return e=e||t.getRangeAt(0),typeof i=="string"&&(i=document.createTextNode(i)),e&&(e.deleteContents(),e.insertNode(i)),i}function Ut(i,e,t){return i?(e&&(i.__tagifyTagData=t?e:Oi({},i.__tagifyTagData||{},e)),i.__tagifyTagData):(pa.warn("tag element doesn't exist",{tagElm:i,data:e}),e)}function ba(i){if(i&&i.parentNode){var e=i,t=window.getSelection(),n=t.getRangeAt(0);t.rangeCount&&(n.setStartAfter(e),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}function iN(i,e){i.forEach(function(t){if(Ut(t.previousSibling)||!t.previousSibling){var n=document.createTextNode("\u200B");t.before(n),e&&ba(n)}})}var Bx={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"\xA0"},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownItemSelected:"tagify__dropdown__item--selected",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function wpe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ype(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){wpe(i,r,t[r])})}return i}function _pe(i,e){return e=e!=null?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):function(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,s)}return r}(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))}),i}function Nx(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function xpe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function kpe(i){return function(e){if(Array.isArray(e))return Nx(e)}(i)||function(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(i)||function(e,t){if(!!e){if(typeof e=="string")return Nx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nx(e,t)}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cpe(){for(var i in this.dropdown={},this._dropdown)this.dropdown[i]=typeof this._dropdown[i]=="function"?this._dropdown[i].bind(this):this._dropdown[i];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}var Eb,Fu,Tpe=(Eb=function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){xpe(i,r,t[r])})}return i}({},{events:{binding:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=this.dropdown.events.callbacks,t=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:e.onKeyDown.bind(this),onMouseOver:e.onMouseOver.bind(this),onMouseLeave:e.onMouseLeave.bind(this),onClick:e.onClick.bind(this),onScroll:e.onScroll.bind(this)},n=i?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[n]("scroll",t.position,!0),window[n]("resize",t.position),window[n]("keydown",t.onKeyDown)),this.DOM.dropdown[n]("mouseover",t.onMouseOver),this.DOM.dropdown[n]("mouseleave",t.onMouseLeave),this.DOM.dropdown[n]("mousedown",t.onClick),this.DOM.dropdown.content[n]("scroll",t.onScroll)},callbacks:{onKeyDown:function(i){var e=this;if(this.state.hasFocus&&!this.state.composing){var t=this.settings,n=t.dropdown.includeSelectedTags,r=this.DOM.dropdown.querySelector(t.classNames.dropdownItemActiveSelector),s=this.dropdown.getSuggestionDataByNode(r),o=t.mode=="mix",l=t.mode=="select";t.hooks.beforeKeyDown(i,{tagify:this}).then(function(u){switch(i.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":i.preventDefault();var f=e.dropdown.getAllSuggestionsRefs(),g=i.key=="ArrowUp"||i.key=="Up";r&&(r=e.dropdown.getNextOrPrevOption(r,!g)),r&&r.matches(t.classNames.dropdownItemSelector)||(r=f[g?f.length-1:0]),e.dropdown.highlightOption(r,!0);break;case"PageUp":case"PageDown":var p;i.preventDefault();var y=e.dropdown.getAllSuggestionsRefs(),_=Math.floor(e.DOM.dropdown.content.clientHeight/((p=y[0])===null||p===void 0?void 0:p.offsetHeight))||1,C=i.key==="PageUp";if(r){var E=y.indexOf(r),P=C?Math.max(0,E-_):Math.min(y.length-1,E+_);r=y[P]}else r=y[0];e.dropdown.highlightOption(r,!0);break;case"Home":case"End":i.preventDefault();var M=e.dropdown.getAllSuggestionsRefs();r=M[i.key==="Home"?0:M.length-1],e.dropdown.highlightOption(r,!0);break;case"Escape":case"Esc":e.dropdown.hide();break;case"ArrowRight":if(e.state.actions.ArrowLeft||t.autoComplete.rightKey)return;case"Tab":var O=!t.autoComplete.rightKey||!t.autoComplete.tabKey;if(!o&&!l&&r&&O&&!e.state.editing&&s){i.preventDefault();var N=e.dropdown.getMappedValue(s);return e.state.autoCompleteData=s,e.input.autocomplete.set.call(e,N),!1}return!0;case"Enter":i.preventDefault(),e.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},100),t.hooks.suggestionClick(i,{tagify:e,tagData:s,suggestionElm:r}).then(function(){if(r){var Z=n?r:e.dropdown.getNextOrPrevOption(r,!g);e.dropdown.selectOption(r,i,function(){if(Z){var U=Z.getAttribute("value");Z=e.dropdown.getSuggestionNodeByValue(U),e.dropdown.highlightOption(Z)}})}else e.dropdown.hide(),o||e.addTags(e.state.inputText.trim(),!0)}).catch(function(Z){return pa.warn(Z)});break;case"Backspace":if(o||e.state.editing.scope)return;var W=e.input.raw.call(e);W!=""&&W.charCodeAt(0)!=8203||(t.backspace===!0?e.removeTags():t.backspace=="edit"&&setTimeout(e.editTag.bind(e),0))}})}},onMouseOver:function(i){var e=i.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(e)},onMouseLeave:function(i){this.dropdown.highlightOption()},onClick:function(i){var e=this;if(i.button==0&&i.target!=this.DOM.dropdown&&i.target!=this.DOM.dropdown.content){var t=i.target.closest(this.settings.classNames.dropdownItemSelector),n=this.dropdown.getSuggestionDataByNode(t);this.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},100),this.settings.hooks.suggestionClick(i,{tagify:this,tagData:n,suggestionElm:t}).then(function(){t?e.dropdown.selectOption(t,i):e.dropdown.hide()}).catch(function(r){return pa.warn(r)})}},onScroll:function(i){var e=i.target,t=e.scrollTop/(e.scrollHeight-e.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(t)})}}},refilter:function(i){i=i||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(i),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(i){for(var e,t=i&&i.getAttribute("value"),n=this.suggestedListItems.length;n--;){if(Zr(e=this.suggestedListItems[n])&&e.value==t)return e;if(e==t)return{value:e}}},getSuggestionNodeByValue:function(i){return this.dropdown.getAllSuggestionsRefs().find(function(e){return e.getAttribute("value")===i})},getNextOrPrevOption:function(i){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=this.dropdown.getAllSuggestionsRefs(),n=t.findIndex(function(r){return r===i});return e?t[n+1]:t[n-1]},highlightOption:function(i,e){var t,n=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(n),this.state.ddItemElm.removeAttribute("aria-selected")),!i)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);t=this.dropdown.getSuggestionDataByNode(i),this.state.ddItemData=t,this.state.ddItemElm=i,i.classList.add(n),i.setAttribute("aria-selected",!0),e&&(i.parentNode.scrollTop=i.clientHeight+i.offsetTop-i.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,t),this.dropdown.position())},selectOption:function(i,e,t){var n=this,r=this.settings,s=r.dropdown.includeSelectedTags,o=r.dropdown,l=o.clearOnSelect,u=o.closeOnSelect;if(!i)return this.addTags(this.state.inputText,!0),void(u&&this.dropdown.hide());e=e||{};var f=i.getAttribute("value"),g=f=="noMatch",p=r.mode=="mix",y=this.suggestedListItems.find(function(C){var E;return((E=C.value)!==null&&E!==void 0?E:C)==f});if(this.trigger("dropdown:select",{data:y,elm:i,event:e}),y||g){if(this.state.editing){var _=this.normalizeTags([y])[0];y=r.transformTag.call(this,_)||_,this.onEditTagDone(null,Oi({__isValid:!0},y))}else this[p?"addMixTags":"addTags"]([y||this.input.raw.call(this)],l);(p||this.DOM.input.parentNode)&&(setTimeout(function(){n.DOM.input.focus(),n.toggleFocusClass(!0)}),u&&setTimeout(this.dropdown.hide.bind(this)),s?t&&t():(i.addEventListener("transitionend",function(){n.dropdown.fillHeaderFooter(),setTimeout(function(){i.remove(),n.dropdown.refilter(),t&&t()},100)},{once:!0}),i.classList.add(this.settings.classNames.dropdownItemHidden)))}else u&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(i){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var e=this.dropdown.filterListItems("");return i||(e=this.state.dropdown.suggestions),this.addTags(e,!0),this},filterListItems:function(i,e){var t,n,r,s,o,l,u=function(){var Z,U,ie=void 0,X=void 0;Z=C[N],n=((U=Object)!=null&&typeof Symbol!="undefined"&&U[Symbol.hasInstance]?U[Symbol.hasInstance](Z):Z instanceof U)?C[N]:{value:C[N]};var F,te=Object.keys(n).some(function(ye){return O.includes(ye)})?O:["value"];p.fuzzySearch&&!e.exact?(s=te.reduce(function(ye,Ee){return ye+" "+(n[Ee]||"")},"").toLowerCase().trim(),p.accentedSearch&&(s=Tb(s),l=Tb(l)),ie=s.indexOf(l)==0,X=s===l,F=s,r=l.toLowerCase().split(" ").every(function(ye){return F.includes(ye.toLowerCase())})):(ie=!0,r=te.some(function(ye){var Ee=""+(n[ye]||"");return p.accentedSearch&&(Ee=Tb(Ee),l=Tb(l)),p.caseSensitive||(Ee=Ee.toLowerCase()),X=Ee===l,e.exact?Ee===l:Ee.indexOf(l)==0})),o=!p.includeSelectedTags&&t.isTagDuplicate(Zr(n)?n.value:n),r&&!o&&(X&&ie?_.push(n):p.sortby=="startsWith"&&ie?y.unshift(n):y.push(n))},f=this,g=this.settings,p=g.dropdown,y=(e=e||{},[]),_=[],C=g.whitelist,E=p.maxItems>=0?p.maxItems:1/0,P=p.includeSelectedTags,M=typeof p.sortby=="function",O=p.searchKeys,N=0;if(!(i=g.mode=="select"&&this.value.length&&this.value[0][g.tagTextProp]==i?"":i)||!O.length){y=P?C:C.filter(function(Z){return!f.isTagDuplicate(Zr(Z)?Z.value:Z)});var W=M?p.sortby(y,l):y.slice(0,E);return this.state.dropdown.suggestions=W,W}for(l=p.caseSensitive?""+i:(""+i).toLowerCase();N<C.length;N++)t=this,u();return this.state.dropdown.suggestions=_.concat(y),W=M?p.sortby(_.concat(y),l):_.concat(y).slice(0,E),this.state.dropdown.suggestions=W,W},getMappedValue:function(i){var e=this.settings.dropdown.mapValueTo;return e?typeof e=="function"?e(i):i[e]||i.value:i.value},createListHTML:function(i){var e=this;return Oi([],i).map(function(t,n){typeof t!="string"&&typeof t!="number"||(t={value:t});var r=e.dropdown.getMappedValue(t);return r=typeof r=="string"&&e.settings.dropdown.escapeHTML?Ol(r):r,e.settings.templates.dropdownItem.apply(e,[_pe(ype({},t),{mappedValue:r}),e])}).join("")}}),Fu=(Fu={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return kpe(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(i){var e,t,n,r=this,s=this.settings,o=s.mode=="mix"&&!s.enforceWhitelist,l=!s.whitelist||!s.whitelist.length,u=s.dropdown.position=="manual";if(i=i===void 0?this.state.inputText:i,!(l&&!o&&!s.templates.dropdownItemNoMatch||s.dropdown.enabled===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(i),i&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",i),s.templates.dropdownItemNoMatch&&(n=s.templates.dropdownItemNoMatch.call(this,{value:i}))),!n){if(this.suggestedListItems.length)i&&o&&!this.state.editing.scope&&!_f(this.suggestedListItems[0].value,i)&&this.suggestedListItems.unshift({value:i});else{if(!i||!o||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:i}]}t=""+(Zr(e=this.suggestedListItems[0])?e.value:e),s.autoComplete&&t&&t.indexOf(i)==0&&this.input.autocomplete.suggest.call(this,e)}this.dropdown.fill(n),s.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(s.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=i||!0,this.state.dropdown.query=i,this.setStateSelection(),u||setTimeout(function(){r.dropdown.position(),r.dropdown.render()}),setTimeout(function(){r.trigger("dropdown:show",r.DOM.dropdown)})}},hide:function(i){var e=this,t=this.DOM,n=t.scope,r=t.dropdown,s=this.settings.dropdown.position=="manual"&&!i;if(r&&document.body.contains(r)&&!s)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),n.setAttribute("aria-expanded",!1),r.parentNode.removeChild(r),setTimeout(function(){e.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",r),this},toggle:function(i){this.dropdown[this.state.dropdown.visible&&!i?"hide":"show"]()},getAppendTarget:function(){var i=this.settings.dropdown;return typeof i.appendTarget=="function"?i.appendTarget():i.appendTarget},render:function(){var i,e,t,n=this,r=(i=this.DOM.dropdown,(t=i.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(t),e=t.clientHeight,t.parentNode.removeChild(t),e),s=this.settings,o=this.dropdown.getAppendTarget();return s.dropdown.enabled===!1||(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(s.classNames.dropdownInital),this.dropdown.position(r),o.appendChild(this.DOM.dropdown),setTimeout(function(){return n.DOM.dropdown.classList.remove(s.classNames.dropdownInital)}))),this},fill:function(i){i=typeof i=="string"?i:this.dropdown.createListHTML(i||this.suggestedListItems);var e,t=this.settings.templates.dropdownContent.call(this,i);this.DOM.dropdown.content.innerHTML=(e=t)?e.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var i=this.dropdown.filterListItems(this.state.dropdown.query),e=this.parseTemplate("dropdownHeader",[i]),t=this.parseTemplate("dropdownFooter",[i]),n=this.dropdown.getHeaderRef(),r=this.dropdown.getFooterRef();e&&(n==null||n.parentNode.replaceChild(e,n)),t&&(r==null||r.parentNode.replaceChild(t,r))},position:function(i){var e=this.settings.dropdown,t=this.dropdown.getAppendTarget();if(e.position!="manual"&&t){var n,r,s,o,l,u,f,g,p,y,_=this.DOM.dropdown,C=e.RTL,E=t===document.body,P=t===this.DOM.scope,M=E?window.pageYOffset:t.scrollTop,O=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,N=O.clientHeight,W=Math.max(O.clientWidth||0,window.innerWidth||0),Z=W>480?e.position:"all",U=this.DOM[Z=="input"?"input":"scope"];if(i=i||_.clientHeight,this.state.dropdown.visible){if(Z=="text"?(s=(n=function(){var F=document.getSelection();if(F.rangeCount){var te,ye,Ee=F.getRangeAt(0),ae=Ee.startContainer,bt=Ee.startOffset;if(bt>0)return(ye=document.createRange()).setStart(ae,bt-1),ye.setEnd(ae,bt),{left:(te=ye.getBoundingClientRect()).right,top:te.top,bottom:te.bottom};if(ae.getBoundingClientRect)return ae.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,r=n.top,o=n.left,l="auto"):(u=function(F){var te=0,ye=0;for(F=F.parentNode;F&&F!=O;)te+=F.offsetTop||0,ye+=F.offsetLeft||0,F=F.parentNode;return{top:te,left:ye}}(t),n=U.getBoundingClientRect(),r=P?-1:n.top-u.top,s=(P?n.height:n.bottom-u.top)-1,o=P?-1:n.left-u.left,l=n.width+"px"),!E){var ie=function(){for(var F=0,te=e.appendTarget.parentNode;te;)F+=te.scrollTop||0,te=te.parentNode;return F}();r+=ie,s+=ie}var X;r=Math.floor(r),s=Math.ceil(s),g=W-o<120,p=((f=(X=e.placeAbove)!==null&&X!==void 0?X:N-n.bottom<i)?r:s)+M,y=o+(C&&n.width||0)+window.pageXOffset,y=Z=="text"&&g?"right: 0;":"left: ".concat(y,"px;"),_.style.cssText="".concat(y," top: ").concat(p,"px; min-width: ").concat(l,"; max-width: ").concat(l),_.setAttribute("placement",f?"top":"bottom"),_.setAttribute("position",Z)}}}})!=null?Fu:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Eb,Object.getOwnPropertyDescriptors(Fu)):function(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}(Object(Fu)).forEach(function(i){Object.defineProperty(Eb,i,Object.getOwnPropertyDescriptor(Fu,i))}),Eb),xf="@yaireo/tagify/",Epe={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},Spe={wrapper:function(i,e){return'<tags class="'.concat(e.classNames.namespace," ").concat(e.mode?"".concat(e.classNames[e.mode+"Mode"]):""," ").concat(i.className,`"
                    `).concat(e.readonly?"readonly":"",`
                    `).concat(e.disabled?"disabled":"",`
                    `).concat(e.required?"required":"",`
                    `).concat(e.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat($B,`
        </tags>`)},input:function(){var i=this.settings,e=i.placeholder||$B;return"<span ".concat(!i.readonly&&i.userInput?"contenteditable":"",' tabIndex="0" data-placeholder="').concat(e,'" aria-placeholder="').concat(i.placeholder||"",`"
                    class="`).concat(i.classNames.input,`"
                    role="textbox"
                    autocapitalize="false"
                    autocorrect="off"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(i.mode=="mix",'"></span>')},tag:function(i,e){var t=e.settings;return'<tag title="'.concat(i.title||i.value,`"
                    contenteditable='false'
                    tabIndex="`).concat(t.a11y.focusableTags?0:-1,`"
                    class="`).concat(t.classNames.tag," ").concat(i.class||"",`"
                    `).concat(this.getAttributes(i),`>
            <x title='' tabIndex="`).concat(t.a11y.focusableTags?0:-1,'" class="').concat(t.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(t.mode==="select"&&t.userInput?"contenteditable='true'":"",` autocapitalize="false" autocorrect="off" spellcheck='false' class="`).concat(t.classNames.tagText,'">').concat(i[t.tagTextProp]||i.value,`</span>
            </div>
        </tag>`)},dropdown:function(i){var e=i.dropdown,t=e.position=="manual";return'<div class="'.concat(t?"":i.classNames.dropdown," ").concat(e.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(e.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(i.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(i){var e=this.settings.templates,t=this.state.dropdown.suggestions;return`
            `.concat(e.dropdownHeader.call(this,t),`
            `).concat(i,`
            `).concat(e.dropdownFooter.call(this,t),`
        `)},dropdownItem:function(i){return"<div ".concat(this.getAttributes(i),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(this.isTagDuplicate(i.value)?this.settings.classNames.dropdownItemSelected:""," ").concat(i.class||"",`'
                    tabindex="0"
                    role="option">`).concat(i.mappedValue||i.value,"</div>")},dropdownHeader:function(i){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(i){var e=i.length-this.settings.dropdown.maxItems;return e>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(e,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function nN(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function rN(i,e){return e!=null&&typeof Symbol!="undefined"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](i):i instanceof e}function Ape(i,e){return function(t){if(Array.isArray(t))return t}(i)||function(t,n){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,o,l=[],u=!0,f=!1;try{for(r=r.call(t);!(u=(s=r.next()).done)&&(l.push(s.value),!n||l.length!==n);u=!0);}catch(g){f=!0,o=g}finally{try{u||r.return==null||r.return()}finally{if(f)throw o}}return l}}(i,e)||function(t,n){if(!!t){if(typeof t=="string")return nN(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nN(t,n)}}(i,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fx(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Ll(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function sN(i,e){return e!=null&&typeof Symbol!="undefined"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](i):i instanceof e}function Ipe(i,e){return e=e!=null?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):function(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,s)}return r}(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))}),i}function jx(i){return function(e){if(Array.isArray(e))return Fx(e)}(i)||function(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(i)||function(e,t){if(!!e){if(typeof e=="string")return Fx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fx(e,t)}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ppe={customBinding:function(){var i=this;this.customEventsList.forEach(function(e){i.on(e,i.settings.callbacks[e])})},binding:function(){var i,e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=this.settings,n=this.events.callbacks,r=e?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!e){for(var s in this.state.mainEvents=e,e&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),i=this.listeners.main=this.listeners.main||{keydown:["input",n.onKeydown.bind(this)],click:["scope",n.onClickScope.bind(this)],dblclick:t.mode!="select"&&["scope",n.onDoubleClickScope.bind(this)],paste:["input",n.onPaste.bind(this)],drop:["input",n.onDrop.bind(this)],compositionstart:["input",n.onCompositionStart.bind(this)],compositionend:["input",n.onCompositionEnd.bind(this)]})i[s]&&this.DOM[i[s][0]][r](s,i[s][1]);var o=this.listeners.main.inputMutationObserver||new MutationObserver(n.onInputDOMChange.bind(this));o.disconnect(),t.mode=="mix"&&o.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this)}},bindOriginaInputListener:function(i){var e=(i||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),e))},bindGlobal:function(i){var e,t=this.events.callbacks,n=i?"removeEventListener":"addEventListener";if(this.listeners&&(i||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:t[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:t.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:t.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:t.onFocusBlur.bind(this)},{type:"click",target:document,cb:t.onClickAnywhere.bind(this),useCapture:!0}];var r=!0,s=!1,o=void 0;try{for(var l,u=this.listeners.global[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)(e=l.value).target[n](e.type,e.cb,!!e.useCapture)}catch(f){s=!0,o=f}finally{try{r||u.return==null||u.return()}finally{if(s)throw o}}}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(i){var e,t,n=this.settings,r=QB.call(this,i.relatedTarget),s=Ml.call(this,i.relatedTarget),o=i.target.classList.contains(n.classNames.tagX),l=i.type=="focusin",u=i.type=="focusout";o&&n.mode!="mix"&&this.DOM.input.focus(),r&&l&&!s&&!o&&this.toggleFocusClass(this.state.hasFocus=+new Date);var f=i.target?this.trim(this.DOM.input.textContent):"",g=(t=this.value)===null||t===void 0||(e=t[0])===null||e===void 0?void 0:e[n.tagTextProp],p=n.dropdown.enabled>=0,y={relatedTarget:i.relatedTarget},_=this.state.actions.selectOption&&(p||!n.dropdown.closeOnSelect),C=this.state.actions.addNew&&p;if(u){if(i.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),n.onChangeAfterBlur&&this.triggerChangeEvent()}if(!(_||C||o))if(this.state.hasFocus=!(!l&&!r)&&+new Date,this.toggleFocusClass(this.state.hasFocus),n.mode!="mix"){if(l){if(!n.focusable)return;var E=n.dropdown.enabled===0&&!this.state.dropdown.visible,P=!s||n.mode==="select",M=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector);return this.trigger("focus",y),void(E&&P&&(this.dropdown.show(this.value.length?"":void 0),this.setRangeAtStartEnd(!1,M)))}if(u){if(this.trigger("blur",y),this.loading(!1),n.mode=="select"){if(this.value.length){var O=this.getTagElms()[0];f=this.trim(O.textContent)}g===f&&(f="")}f&&!this.state.actions.selectOption&&n.addTagOnBlur&&n.addTagOn.includes("blur")&&this.addTags(f,!0)}r||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else l?this.trigger("focus",y):u&&(this.trigger("blur",y),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(i){this.state.composing=!0},onCompositionEnd:function(i){this.state.composing=!1},onWindowKeyDown:function(i){var e,t=this.settings,n=document.activeElement,r=QB.call(this,n)&&this.DOM.scope.contains(n),s=n===this.DOM.input,o=r&&n.hasAttribute("readonly"),l=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector),u=this.state.dropdown.visible;if((i.key==="Tab"&&u||this.state.hasFocus||r&&!o)&&!s){e=n.nextElementSibling;var f=i.target.classList.contains(t.classNames.tagX);switch(i.key){case"Backspace":t.readonly||this.state.editing||(this.removeTags(n),(e||this.DOM.input).focus());break;case"Enter":if(f)return void this.removeTags(i.target.parentNode);t.a11y.focusableTags&&Ml.call(this,n)&&setTimeout(this.editTag.bind(this),0,n);break;case"ArrowDown":this.state.dropdown.visible||t.mode=="mix"||this.dropdown.show();break;case"Tab":l==null||l.focus()}}},onKeydown:function(i){var e=this,t=this.settings;if(!this.state.composing&&t.userInput){t.mode=="select"&&t.enforceWhitelist&&this.value.length&&i.key!="Tab"&&i.preventDefault();var n=this.trim(i.target.textContent);this.trigger("keydown",{event:i}),t.hooks.beforeKeyDown(i,{tagify:this}).then(function(r){if(t.mode=="mix"){switch(i.key){case"Left":case"ArrowLeft":e.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(e.state.editing)return;var s=document.getSelection(),o=i.key=="Delete"&&s.anchorOffset==(s.anchorNode.length||0),l=s.anchorNode.previousSibling,u=s.anchorNode.nodeType==1||!s.anchorOffset&&l&&l.nodeType==1&&s.anchorNode.previousSibling;(function(M){var O=document.createElement("div");M.replace(/\&#?[0-9a-z]+;/gi,function(N){return O.innerHTML=N,O.innerText})})(e.DOM.input.innerHTML);var f,g,p,y=e.getTagElms(),_=s.anchorNode.length===1&&s.anchorNode.nodeValue==String.fromCharCode(8203);if(t.backspace=="edit"&&u)return f=s.anchorNode.nodeType==1?null:s.anchorNode.previousElementSibling,setTimeout(e.editTag.bind(e),0,f),void i.preventDefault();if(JB()&&sN(u,Element))return p=YB(u),u.hasAttribute("readonly")||u.remove(),e.DOM.input.focus(),void setTimeout(function(){ba(p),e.DOM.input.click()});if(s.anchorNode.nodeName=="BR")return;if((o||u)&&s.anchorNode.nodeType==1?g=s.anchorOffset==0?o?y[0]:null:y[Math.min(y.length,s.anchorOffset)-1]:o?g=s.anchorNode.nextElementSibling:sN(u,Element)&&(g=u),s.anchorNode.nodeType==3&&!s.anchorNode.nodeValue&&s.anchorNode.previousElementSibling&&i.preventDefault(),(u||o)&&!t.backspace||s.type!="Range"&&!s.anchorOffset&&s.anchorNode==e.DOM.input&&i.key!="Delete")return void i.preventDefault();if(s.type!="Range"&&g&&g.hasAttribute("readonly"))return void ba(YB(g));i.key=="Delete"&&_&&Ut(s.anchorNode.nextSibling)&&e.removeTags(s.anchorNode.nextSibling)}return!0}var C=t.dropdown.position=="manual";switch(i.key){case"Backspace":t.mode=="select"&&t.enforceWhitelist&&e.value.length?e.removeTags():e.state.dropdown.visible&&t.dropdown.position!="manual"||i.target.textContent!=""&&n.charCodeAt(0)!=8203||(t.backspace===!0?e.removeTags():t.backspace=="edit"&&setTimeout(e.editTag.bind(e),0));break;case"Esc":case"Escape":if(e.state.dropdown.visible)return;i.target.blur();break;case"Down":case"ArrowDown":e.state.dropdown.visible||e.dropdown.show();break;case"ArrowRight":var E=e.state.inputSuggestion||e.state.ddItemData;if(E&&t.autoComplete.rightKey)return void e.addTags([E],!0);break;case"Tab":return!0;case"Enter":if(e.state.dropdown.visible&&!C)return;i.preventDefault();var P=e.state.autoCompleteData||n;setTimeout(function(){e.state.dropdown.visible&&!C||e.state.actions.selectOption||!t.addTagOn.includes(i.key.toLowerCase())||(e.addTags([P],!0),e.state.autoCompleteData=null)})}}).catch(function(r){return r})}},onInput:function(i){this.postUpdate();var e=this.settings;if(e.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,i);var t=this.input.normalize.call(this,void 0,{trim:!1}),n=t.length>=e.dropdown.enabled,r={value:t,inputElm:this.DOM.input},s=this.validateTag({value:t});e.mode=="select"&&this.toggleScopeValidation(s),r.isValid=s,this.state.inputText!=t&&(this.input.set.call(this,t,!1),t.search(e.delimiters)!=-1?this.addTags(t)&&this.input.set.call(this):e.dropdown.enabled>=0&&this.dropdown[n?"show":"hide"](t),this.trigger("input",r))},onMixTagsInput:function(i){var e,t,n,r,s,o,l,u,f=this,g=this.settings,p=this.value.length,y=this.getTagElms(),_=document.createDocumentFragment(),C=window.getSelection().getRangeAt(0),E=[].map.call(y,function(P){return Ut(P).value});if(i.inputType=="deleteContentBackward"&&JB()&&this.events.callbacks.onKeydown.call(this,{target:i.target,key:"Backspace"}),iN(this.getTagElms()),this.value.slice().forEach(function(P){P.readonly&&!E.includes(P.value)&&_.appendChild(f.createTagElem(P))}),_.childNodes.length&&(C.insertNode(_),this.setRangeAtStartEnd(!1,_.lastChild)),y.length!=p)return this.value=[].map.call(this.getTagElms(),function(P){return Ut(P)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(o=window.getSelection()).rangeCount>0&&o.anchorNode.nodeType==3){if((C=o.getRangeAt(0).cloneRange()).collapse(!0),C.setStart(o.focusNode,0),n=(e=C.toString().slice(0,C.endOffset)).split(g.pattern).length-1,(t=e.match(g.pattern))&&(r=e.slice(e.lastIndexOf(t[t.length-1]))),r){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:r.match(g.pattern)[0],value:r.replace(g.pattern,"")},this.state.tag.baseOffset=o.baseOffset-this.state.tag.value.length,u=this.state.tag.value.match(g.delimiters))return this.state.tag.value=this.state.tag.value.replace(g.delimiters,""),this.state.tag.delimiters=u[0],this.addTags(this.state.tag.value,g.dropdown.clearOnSelect),void this.dropdown.hide();s=this.state.tag.value.length>=g.dropdown.enabled;try{l=(l=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&l.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch(P){}(l||n<this.state.mixMode.matchedPatternCount)&&(s=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=n}setTimeout(function(){f.update({withoutChangeEvent:!0}),f.trigger("input",Oi({},f.state.tag,{textContent:f.DOM.input.textContent})),f.state.tag&&f.dropdown[s?"show":"hide"](f.state.tag.value)},10)},onInputIE:function(i){var e=this;setTimeout(function(){e.events.callbacks.onInput.call(e,i)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(i){if(i.target!=this.DOM.scope&&!this.DOM.scope.contains(i.target)){this.toggleFocusClass(!1),this.state.hasFocus=!1;var e=i.target.closest(this.settings.classNames.dropdownSelector);(e==null?void 0:e.__tagify)!=this&&this.dropdown.hide()}},onClickScope:function(i){var e=this.settings,t=i.target.closest("."+e.classNames.tag),n=i.target===this.DOM.scope,r=+new Date-this.state.hasFocus;if(n&&e.mode!="select")this.DOM.input.focus();else{if(!i.target.classList.contains(e.classNames.tagX))return t&&!this.state.editing?(this.trigger("click",{tag:t,index:this.getNodeIndex(t),data:Ut(t),event:i}),void(e.editTags!==1&&e.editTags.clicks!==1&&e.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,i))):void(i.target==this.DOM.input&&(e.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),r>500||!e.focusable)?this.state.dropdown.visible?this.dropdown.hide():e.dropdown.enabled===0&&e.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):e.mode!="select"||e.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,Ipe(function(s){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(f){return Object.getOwnPropertyDescriptor(l,f).enumerable}))),u.forEach(function(f){Ll(s,f,l[f])})}return s}({},i),{target:this.getTagElms()[0]})),!e.userInput&&this.dropdown.show()));this.removeTags(i.target.parentNode)}},onPaste:function(i){var e=this;i.preventDefault();var t,n,r,s=this.settings;if(!s.userInput)return!1;s.readonly||(n=i.clipboardData||window.clipboardData,r=n.getData("Text"),s.hooks.beforePaste(i,{tagify:this,pastedText:r,clipboardData:n}).then(function(o){o===void 0&&(o=r),o&&(e.injectAtCaret(o,window.getSelection().getRangeAt(0)),e.settings.mode=="mix"?e.events.callbacks.onMixTagsInput.call(e,i):e.settings.pasteAsTags?t=e.addTags(e.state.inputText+o,!0):(e.state.inputText=o,e.dropdown.show(o))),e.trigger("paste",{event:i,pastedText:r,clipboardData:n,tagsElems:t})}).catch(function(o){return o}))},onDrop:function(i){i.preventDefault()},onEditTagInput:function(i,e){var t,n=i.closest("."+this.settings.classNames.tag),r=this.getNodeIndex(n),s=Ut(n),o=this.input.normalize.call(this,i),l=(Ll(t={},this.settings.tagTextProp,o),Ll(t,"__tagId",s.__tagId),t),u=this.validateTag(l);this.editTagChangeDetected(Oi(s,l))||i.originalIsValid!==!0||(u=!0),n.classList.toggle(this.settings.classNames.tagInvalid,u!==!0),s.__isValid=u,n.title=u===!0?s.title||s.value:u,o.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=o),this.dropdown.show(o)),this.trigger("edit:input",{tag:n,index:r,data:Oi({},this.value[r],{newValue:o}),event:e})},onEditTagPaste:function(i,e){var t=(e.clipboardData||window.clipboardData).getData("Text");e.preventDefault();var n=tN(t);this.setRangeAtStartEnd(!1,n)},onEditTagClick:function(i,e){this.events.callbacks.onClickScope.call(this,e)},onEditTagFocus:function(i){this.state.editing={scope:i,input:i.querySelector("[contenteditable]")}},onEditTagBlur:function(i,e){var t=Ml.call(this,e.relatedTarget);if(this.settings.mode=="select"&&t&&e.relatedTarget.contains(e.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(document.activeElement)||this.trigger("blur",{}),this.DOM.scope.contains(i))){var n,r,s,o=this.settings,l=i.closest("."+o.classNames.tag),u=Ut(l),f=this.input.normalize.call(this,i),g=(Ll(n={},o.tagTextProp,f),Ll(n,"__tagId",u.__tagId),n),p=u.__originalData,y=this.editTagChangeDetected(Oi(u,g)),_=this.validateTag(g);if(f)if(y){var C;if(r=this.hasMaxTags(),s=Oi({},p,(Ll(C={},o.tagTextProp,this.trim(f)),Ll(C,"__isValid",_),C)),o.transformTag.call(this,s,p),(_=(!r||p.__isValid===!0)&&this.validateTag(s))!==!0){if(this.trigger("invalid",{data:s,tag:l,message:_}),o.editTags.keepInvalid)return;o.keepInvalidTags?s.__isValid=_:s=p}else o.keepInvalidTags&&(delete s.title,delete s["aria-invalid"],delete s.class);this.onEditTagDone(l,s)}else this.onEditTagDone(l,p);else this.onEditTagDone(l)}},onEditTagkeydown:function(i,e){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:i}),i.key){case"Esc":case"Escape":this.state.editing=!1,e.__tagifyTagData.__originalData.value?e.parentNode.replaceChild(e.__tagifyTagData.__originalHTML,e):e.remove();break;case"Enter":case"Tab":i.preventDefault(),setTimeout(function(){return i.target.blur()},0)}},onDoubleClickScope:function(i){var e=i.target.closest("."+this.settings.classNames.tag);if(e){var t,n,r=Ut(e),s=this.settings;(r==null?void 0:r.editable)!==!1&&(t=e.classList.contains(this.settings.classNames.tagEditing),n=e.hasAttribute("readonly"),s.readonly||t||n||!this.settings.editTags||!s.userInput||(this.events.callbacks.onEditTagFocus.call(this,e),this.editTag(e)),this.toggleFocusClass(!0),s.mode!="select"&&this.trigger("dblclick",{tag:e,index:this.getNodeIndex(e),data:Ut(e)}))}},onInputDOMChange:function(i){var e=this;i.forEach(function(n){n.addedNodes.forEach(function(r){if(r.outerHTML=="<div><br></div>")r.replaceWith(document.createElement("br"));else if(r.nodeType==1&&r.querySelector(e.settings.classNames.tagSelector)){var s,o=document.createTextNode("");r.childNodes[0].nodeType==3&&r.previousSibling.nodeName!="BR"&&(o=document.createTextNode(`
`)),(s=r).replaceWith.apply(s,jx([o].concat(jx(jx(r.childNodes).slice(0,-1))))),ba(o)}else if(Ml.call(e,r)){var l;if(((l=r.previousSibling)===null||l===void 0?void 0:l.nodeType)!=3||r.previousSibling.textContent||r.previousSibling.remove(),r.previousSibling&&r.previousSibling.nodeName=="BR"){r.previousSibling.replaceWith(`
\u200B`);for(var u=r.nextSibling,f="";u;)f+=u.textContent,u=u.nextSibling;f.trim()&&ba(r.previousSibling)}else r.previousSibling&&!Ut(r.previousSibling)||r.before("\u200B")}}),n.removedNodes.forEach(function(r){r&&r.nodeName=="BR"&&Ml.call(e,t)&&(e.removeTags(t),e.fixFirefoxLastTagNoCaret())})});var t=this.DOM.input.lastChild;t&&t.nodeValue==""&&t.remove(),t&&t.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function Hx(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function zx(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function wo(i,e){return e!=null&&typeof Symbol!="undefined"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](i):i instanceof e}function oN(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){zx(i,r,t[r])})}return i}function Sb(i){return function(e){if(Array.isArray(e))return Hx(e)}(i)||function(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(i)||function(e,t){if(!!e){if(typeof e=="string")return Hx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hx(e,t)}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kf(i,e){if(!i){pa.warn("input element not found",i);var t=new Proxy(this,{get:function(){return function(){return t}}});return t}if(i.__tagify)return pa.warn("input element is already Tagified - Same instance is returned.",i),i.__tagify;var n;Oi(this,function(r){var s=document.createTextNode(""),o={};function l(u,f,g){g&&f.split(/\s+/g).forEach(function(p){return s[u+"EventListener"].call(s,p,g)})}return{removeAllCustomListeners:function(){Object.entries(o).forEach(function(u){var f=Ape(u,2),g=f[0];f[1].forEach(function(p){return l("remove",g,p)})}),o={}},off:function(u,f){return u&&(f?l("remove",u,f):u.split(/\s+/g).forEach(function(g){var p;(p=o[g])===null||p===void 0||p.forEach(function(y){return l("remove",g,y)}),delete o[g]})),this},on:function(u,f){return f&&typeof f=="function"&&(u.split(/\s+/g).forEach(function(g){Array.isArray(o[g])?o[g].push(f):o[g]=[f]}),l("add",u,f)),this},trigger:function(u,f,g){var p;if(g=g||{cloneData:!0},u)if(r.settings.isJQueryPlugin)u=="remove"&&(u="removeTag"),jQuery(r.DOM.originalInput).triggerHandler(u,[f]);else{try{var y=typeof f=="object"?f:{value:f};if((y=g.cloneData?Oi({},y):y).tagify=this,f.event&&(y.event=this.cloneEvent(f.event)),rN(f,Object))for(var _ in f)rN(f[_],HTMLElement)&&(y[_]=f[_]);p=new CustomEvent(u,{detail:y})}catch(C){pa.warn(C)}s.dispatchEvent(p)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,e=e||{},this.getPersistedData=(n=e.id,function(r){var s;if(n){var o,l="/"+r;if(((s=localStorage)===null||s===void 0?void 0:s.getItem(xf+n+"/v"))===1)try{o=JSON.parse(localStorage[xf+n+l])}catch(u){}return o}}),this.setPersistedData=function(r){var s;return r?((s=localStorage)===null||s===void 0||s.setItem(xf+r+"/v",1),function(o,l){var u,f="/"+l,g=JSON.stringify(o);o&&l&&((u=localStorage)===null||u===void 0||u.setItem(xf+r+f,g),dispatchEvent(new Event("storage")))}):function(){}}(e.id),this.clearPersistedData=function(r){return function(s){var o=xf+"/"+r+"/";if(s)localStorage.removeItem(o+s);else for(var l in localStorage)l.includes(o)&&localStorage.removeItem(l)}}(e.id),this.applySettings(i,e),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(i),Cpe.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),i.autofocus&&this.DOM.input.focus(),i.__tagify=this}kf.prototype={_dropdown:Tpe,placeCaretAfterNode:ba,getSetTagData:Ut,helpers:{sameStr:_f,removeCollectionProp:KB,omit:Dx,isObject:Zr,parseHTML:Vx,escapeHTML:Ol,extend:Oi,concatWithoutDups:ZB,getUID:XB,isNodeTag:Ml},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(i){return this.settings.trim&&i&&typeof i=="string"?i.trim():i},parseHTML:Vx,templates:Spe,parseTemplate:function(i,e){return Vx((i=this.settings.templates[i]||i).apply(this,e))},set whitelist(i){var e=i&&Array.isArray(i);this.settings.whitelist=e?i:[],this.setPersistedData(e?i:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(i){this.settings.userInput=!!i,this.setContentEditable(!!i)},get userInput(){return this.settings.userInput},generateClassSelectors:function(i){var e=function(n){var r=n;Object.defineProperty(i,r+"Selector",{get:function(){return"."+this[r].split(" ")[0]}})};for(var t in i)e(t)},applySettings:function(i,e){var t,n;Bx.templates=this.templates;var r=Oi({},Bx,e.mode=="mix"?{dropdown:{position:"text"}}:{}),s=this.settings=Oi({},r,e);if(s.disabled=i.hasAttribute("disabled"),s.readonly=s.readonly||i.hasAttribute("readonly"),s.placeholder=Ol(i.getAttribute("placeholder")||s.placeholder||""),s.required=i.hasAttribute("required"),this.generateClassSelectors(s.classNames),this.isIE&&(s.autoComplete=!1),["whitelist","blacklist"].forEach(function(l){var u=i.getAttribute("data-"+l);u&&wo(u=u.split(s.delimiters),Array)&&(s[l]=u)}),"autoComplete"in e&&!Zr(e.autoComplete)&&(s.autoComplete=Bx.autoComplete,s.autoComplete.enabled=e.autoComplete),s.mode=="mix"&&(s.pattern=s.pattern||/@/,s.autoComplete.rightKey=!0,s.delimiters=e.delimiters||null,s.tagTextProp&&!s.dropdown.searchKeys.includes(s.tagTextProp)&&s.dropdown.searchKeys.push(s.tagTextProp)),i.pattern)try{s.pattern=new RegExp(i.pattern)}catch(l){}if(s.delimiters){s._delimiters=s.delimiters;try{s.delimiters=new RegExp(this.settings.delimiters,"g")}catch(l){}}s.disabled&&(s.userInput=!1),this.TEXTS=oN({},Epe,s.texts||{}),s.mode=="select"&&(s.dropdown.includeSelectedTags=!0),(s.mode!="select"||((t=e.dropdown)===null||t===void 0?void 0:t.enabled))&&s.userInput||(s.dropdown.enabled=0),s.dropdown.appendTarget=((n=e.dropdown)===null||n===void 0?void 0:n.appendTarget)||document.body,s.dropdown.includeSelectedTags===void 0&&(s.dropdown.includeSelectedTags=s.duplicates);var o=this.getPersistedData("whitelist");Array.isArray(o)&&(this.whitelist=Array.isArray(s.whitelist)?ZB(s.whitelist,o):o)},getAttributes:function(i){var e,t=this.getCustomAttributes(i),n="";for(e in t)n+=" "+e+(i[e]!==void 0?'="'.concat(t[e],'"'):"");return n},getCustomAttributes:function(i){if(!Zr(i))return"";var e,t={};for(e in i)e.slice(0,2)!="__"&&e!="class"&&i.hasOwnProperty(e)&&i[e]!==void 0&&(t[e]=Ol(i[e]));return t},setStateSelection:function(){var i=window.getSelection(),e={anchorOffset:i.anchorOffset,anchorNode:i.anchorNode,range:i.getRangeAt&&i.rangeCount&&i.getRangeAt(0)};return this.state.selection=e,e},getCSSVars:function(){var i,e,t,n=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(i=function(r){if(!r)return{};var s=(r=r.trim().split(" ")[0]).split(/\d+/g).filter(function(o){return o}).pop().trim();return{value:+r.split(s).filter(function(o){return o})[0].trim(),unit:s}}((t="tag-hide-transition",n.getPropertyValue("--"+t))),e=i.value,i.unit=="s"?1e3*e:e)}},build:function(i){var e=this.DOM,t=i.closest("label");this.settings.mixMode.integrated?(e.originalInput=null,e.scope=i,e.input=i):(e.originalInput=i,e.originalInput_tabIndex=i.tabIndex,e.scope=this.parseTemplate("wrapper",[i,this.settings]),e.input=e.scope.querySelector(this.settings.classNames.inputSelector),i.parentNode.insertBefore(e.scope,i),i.tabIndex=-1),t&&t.setAttribute("for","")},destroy:function(){var i;this.events.unbindGlobal.call(this),(i=this.DOM.scope.parentNode)===null||i===void 0||i.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues:function(i){var e,t=this.settings;if(this.state.blockChangeEvent=!0,i===void 0){var n=this.getPersistedData("value");i=n&&!this.DOM.originalInput.value?n:t.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),i)if(t.mode=="mix")this.parseMixTags(i),(e=this.DOM.input.lastChild)&&e.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{wo(JSON.parse(i),Array)&&(i=JSON.parse(i))}catch(r){}this.addTags(i,!0).forEach(function(r){return r&&r.classList.add(t.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=t.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(i){var e={};for(var t in i)t!="path"&&(e[t]=i[t]);return e},loading:function(i){return this.state.isLoading=i,this.DOM.scope.classList[i?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(i,e){return i&&i.classList[e?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(i,e){typeof i=="string"&&this.DOM.scope.classList.toggle(i,e)},toggleScopeValidation:function(i){var e=i===!0||i===void 0;!this.settings.required&&i&&i===this.TEXTS.empty&&(e=!0),this.toggleClass(this.settings.classNames.tagInvalid,!e),this.DOM.scope.title=e?"":i},toggleFocusClass:function(i){this.toggleClass(this.settings.classNames.focus,!!i)},setPlaceholder:function(i){var e=this;["data","aria"].forEach(function(t){return e.DOM.input.setAttribute("".concat(t,"-placeholder"),i)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var i=this.DOM.originalInput,e=this.state.lastOriginalValueReported!==i.value,t=new CustomEvent("change",{bubbles:!0});e&&(this.state.lastOriginalValueReported=i.value,t.simulated=!0,i._valueTracker&&i._valueTracker.setValue(Math.random()),i.dispatchEvent(t),this.trigger("change",this.state.lastOriginalValueReported),i.value=this.state.lastOriginalValueReported)}},events:Ppe,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(i,e){if(e){i=typeof i=="number"?i:!!i,e=e.lastChild||e;var t=document.getSelection();if(wo(t.focusNode,Element)&&!this.DOM.input.contains(t.focusNode))return!0;try{t.rangeCount>=1&&["Start","End"].forEach(function(n){return t.getRangeAt(0)["set"+n](e,i||e.length)})}catch(n){console.warn(n)}}},insertAfterTag:function(i,e){if(e=e||this.settings.mixMode.insertAfterTag,i&&i.parentNode&&e)return e=typeof e=="string"?document.createTextNode(e):e,i.parentNode.insertBefore(e,i.nextSibling),e},editTagChangeDetected:function(i){var e=i.__originalData;for(var t in e)if(!this.dataProps.includes(t)&&i[t]!=e[t])return!0;return!1},getTagTextNode:function(i){return i.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(i,e){this.getTagTextNode(i).innerHTML=Ol(e)},editTag:function(i,e){var t=this;i=i||this.getLastTag(),e=e||{};var n=this.settings,r=this.getTagTextNode(i),s=this.getNodeIndex(i),o=Ut(i),l=this.events.callbacks,u=!0,f=n.mode=="select";if(!f&&this.dropdown.hide(),r){if(!wo(o,Object)||!("editable"in o)||o.editable)return o=Ut(i,{__originalData:Oi({},o),__originalHTML:i.cloneNode(!0)}),Ut(o.__originalHTML,o.__originalData),r.setAttribute("contenteditable",!0),i.classList.add(n.classNames.tagEditing),this.events.callbacks.onEditTagFocus.call(this,i),r.addEventListener("click",l.onEditTagClick.bind(this,i)),r.addEventListener("blur",l.onEditTagBlur.bind(this,this.getTagTextNode(i))),r.addEventListener("input",l.onEditTagInput.bind(this,r)),r.addEventListener("paste",l.onEditTagPaste.bind(this,r)),r.addEventListener("keydown",function(g){return l.onEditTagkeydown.call(t,g,i)}),r.addEventListener("compositionstart",l.onCompositionStart.bind(this)),r.addEventListener("compositionend",l.onCompositionEnd.bind(this)),e.skipValidation||(u=this.editTagToggleValidity(i)),r.originalIsValid=u,this.trigger("edit:start",{tag:i,index:s,data:o,isValid:u}),r.focus(),!f&&this.setRangeAtStartEnd(!1,r),n.dropdown.enabled===0&&!f&&this.dropdown.show(),this.state.hasFocus=!0,this}else pa.warn("Cannot find element in Tag template: .",n.classNames.tagTextSelector)},editTagToggleValidity:function(i,e){var t;if(e=e||Ut(i))return(t=!("__isValid"in e)||e.__isValid===!0)||this.removeTagsFromValue(i),this.update(),i.classList.toggle(this.settings.classNames.tagNotAllowed,!t),e.__isValid=t,e.__isValid;pa.warn("tag has no data: ",i,e)},onEditTagDone:function(i,e){i=i||this.state.editing.scope,e=e||{};var t,n,r=this.settings,s={tag:i,index:this.getNodeIndex(i),previousData:Ut(i),data:e};this.trigger("edit:beforeUpdate",s,{cloneData:!1}),this.state.editing=!1,delete e.__originalData,delete e.__originalHTML,i&&i.parentNode&&(((n=e[r.tagTextProp])!==void 0?(t=(n+="").trim)===null||t===void 0?void 0:t.call(n):r.tagTextProp in e?void 0:e.value)?(i=this.replaceTag(i,e),this.editTagToggleValidity(i,e),r.a11y.focusableTags?i.focus():r.mode!="select"&&ba(i)):this.removeTags(i)),this.trigger("edit:updated",s),r.dropdown.closeOnSelect&&this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(i,e){e&&e.value!==""&&e.value!==void 0||(e=i.__tagifyTagData),e.__isValid&&e.__isValid!=1&&Oi(e,this.getInvalidTagAttrs(e,e.__isValid));var t=this.createTagElem(e);return i.parentNode.replaceChild(t,i),this.updateValueByDOMTags(),t},updateValueByDOMTags:function(){var i=this;this.value.length=0;var e=this.settings.classNames,t=[e.tagNotAllowed.split(" ")[0],e.tagHide];[].forEach.call(this.getTagElms(),function(n){Sb(n.classList).some(function(r){return t.includes(r)})||i.value.push(Ut(n))}),this.update(),this.dropdown.refilter()},injectAtCaret:function(i,e){var t;if(e=e||((t=this.state.selection)===null||t===void 0?void 0:t.range),typeof i=="string"&&(i=document.createTextNode(i)),!e&&i)return this.appendMixTags(i),this;var n=tN(i,e);return this.setRangeAtStartEnd(!1,n),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=this.settings,n=t.dropdown.closeOnSelect;this.state.inputText=i,e&&(this.DOM.input.innerHTML=Ol(""+i),i&&this.toggleClass(t.classNames.empty,!this.DOM.input.innerHTML)),!i&&n&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var i=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!i),i},normalize:function(i,e){var t=i||this.DOM.input,n=[];t.childNodes.forEach(function(r){return r.nodeType==3&&n.push(r.nodeValue)}),n=n.join(`
`);try{n=n.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch(r){}return n=n.replace(/\s/g," "),(e==null?void 0:e.trim)?this.trim(n):n},autocomplete:{suggest:function(i){if(this.settings.autoComplete.enabled){typeof(i=i||{value:""})!="object"&&(i={value:i});var e=this.dropdown.getMappedValue(i);if(typeof e!="number"){var t=this.state.inputText.toLowerCase(),n=e.substr(0,this.state.inputText.length).toLowerCase(),r=e.substring(this.state.inputText.length);e&&this.state.inputText&&n==t?(this.DOM.input.setAttribute("data-suggest",r),this.state.inputSuggestion=i):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(i){var e=this.DOM.input.getAttribute("data-suggest"),t=i||(e?this.state.inputText+e:null);return!!t&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+t)):(this.input.set.call(this,t),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(i){return this.value.findIndex(function(e){return e.__tagId==(i||{}).__tagId})},getNodeIndex:function(i){var e=0;if(i)for(;i=i.previousElementSibling;)e++;return e},getTagElms:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];var n="."+Sb(this.settings.classNames.tag.split(" ")).concat(Sb(e)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(n))},getLastTag:function(){var i=this.settings.classNames,e=this.DOM.scope.querySelectorAll("".concat(i.tagSelector,":not(.").concat(i.tagHide,"):not([readonly])"));return e[e.length-1]},isTagDuplicate:function(i,e,t){var n=0,r=!0,s=!1,o=void 0;try{for(var l,u=this.value[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var f=l.value;_f(this.trim(""+i),f.value,e)&&t!=f.__tagId&&n++}}catch(g){s=!0,o=g}finally{try{r||u.return==null||u.return()}finally{if(s)throw o}}return n},getTagIndexByValue:function(i){var e=this,t=[],n=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(r,s){r.__tagifyTagData&&_f(e.trim(r.__tagifyTagData.value),i,n)&&t.push(s)}),t},getTagElmByValue:function(i){var e=this.getTagIndexByValue(i)[0];return this.getTagElms()[e]},flashTag:function(i){var e=this;i&&(i.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){i.classList.remove(e.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(i){return i=this.trim(i.toLowerCase()),this.settings.blacklist.filter(function(e){return(""+e).toLowerCase()==i}).length},isTagWhitelisted:function(i){return!!this.getWhitelistItem(i)},getWhitelistItem:function(i,e,t){e=e||"value";var n,r=this.settings;return(t=t||r.whitelist).some(function(s){var o=typeof s=="object"?s[e]||s.value:s;if(_f(o,i,r.dropdown.caseSensitive,r.trim))return n=typeof s=="object"?s:{value:s},!0}),n||e!="value"||r.tagTextProp=="value"||(n=this.getWhitelistItem(i,r.tagTextProp,t)),n},validateTag:function(i){var e=this.settings,t="value"in i?"value":e.tagTextProp,n=this.trim(i[t]+"");return(i[t]+"").trim()?e.mode!="mix"&&e.pattern&&wo(e.pattern,RegExp)&&!e.pattern.test(n)?this.TEXTS.pattern:!e.duplicates&&this.isTagDuplicate(n,e.dropdown.caseSensitive,i.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(n)||e.enforceWhitelist&&!this.isTagWhitelisted(n)?this.TEXTS.notAllowed:!e.validate||e.validate(i):this.TEXTS.empty},getInvalidTagAttrs:function(i,e){return{"aria-invalid":!0,class:"".concat(i.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:e}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(i,e){var t=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),t[e||"readonly"]=i,this.DOM.scope[(i?"set":"remove")+"Attribute"](e||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!i)},setContentEditable:function(i){this.DOM.input.contentEditable=i,this.DOM.input.tabIndex=i?0:-1},setDisabled:function(i){this.setReadonly(i,"disabled")},normalizeTags:function(i){var e=this,t=this.settings,n=t.whitelist,r=t.delimiters,s=t.mode,o=t.tagTextProp,l=[],u=!!n&&wo(n[0],Object),f=Array.isArray(i),g=f&&i[0].value,p=function(y){return(y+"").split(r).reduce(function(_,C){var E,P=e.trim(C);return P&&_.push((zx(E={},o,P),zx(E,"value",P),E)),_},[])};if(typeof i=="number"&&(i=i.toString()),typeof i=="string"){if(!i.trim())return[];i=p(i)}else f&&(i=i.reduce(function(y,_){if(Zr(_)){var C=Oi({},_);o in C||(o="value"),C[o]=e.trim(C[o]),(C[o]||C[o]===0)&&y.push(C)}else if(_!=null&&_!==""&&_!==void 0){var E;(E=y).push.apply(E,Sb(p(_)))}return y},[]));return u&&!g&&(i.forEach(function(y){var _=l.map(function(P){return P.value}),C=e.dropdown.filterListItems.call(e,y[o],{exact:!0});e.settings.duplicates||(C=C.filter(function(P){return!_.includes(P.value)}));var E=C.length>1?e.getWhitelistItem(y[o],o,C):C[0];E&&wo(E,Object)?l.push(E):s!="mix"&&(y.value==null&&(y.value=y[o]),l.push(y))}),l.length&&(i=l)),i},parseMixTags:function(i){var e=this,t=this.settings,n=t.mixTagsInterpolator,r=t.duplicates,s=t.transformTag,o=t.enforceWhitelist,l=t.maxTags,u=t.tagTextProp,f=[];i=i.split(n[0]).map(function(p,y){var _,C,E,P=p.split(n[1]),M=P[0],O=f.length==l;try{if(M==+M)throw Error;C=JSON.parse(M)}catch(N){C=e.normalizeTags(M)[0]||{value:M}}if(s.call(e,C),O||!(P.length>1)||o&&!e.isTagWhitelisted(C.value)||!r&&e.isTagDuplicate(C.value)){if(p)return y?n[0]+p:p}else C[_=C[u]?u:"value"]=e.trim(C[_]),E=e.createTagElem(C),f.push(C),E.classList.add(e.settings.classNames.tagNoAnimation),P[0]=E.outerHTML,e.value.push(C);return P.join("")}).join(""),this.DOM.input.innerHTML=i,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var g=this.getTagElms();return g.forEach(function(p,y){return Ut(p,f[y])}),this.update({withoutChangeEvent:!0}),iN(g,this.state.hasFocus),i},replaceTextWithNode:function(i,e){if(this.state.tag||e){e=e||this.state.tag.prefix+this.state.tag.value;var t,n,r=this.state.selection||window.getSelection(),s=r.anchorNode,o=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return s.splitText(r.anchorOffset-o),(t=s.nodeValue.lastIndexOf(e))==-1||(n=s.splitText(t),i&&s.parentNode.replaceChild(i,n)),!0}},prepareNewTagNode:function(i,e){e=e||{};var t=this.settings,n=[],r={},s=Object.assign({},i,{value:i.value+""});if(i=Object.assign({},s),t.transformTag.call(this,i),i.__isValid=this.hasMaxTags()||this.validateTag(i),i.__isValid!==!0){if(e.skipInvalid)return;if(Oi(r,this.getInvalidTagAttrs(i,i.__isValid),{__preInvalidData:s}),i.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(i.value)),!t.createInvalidTags)return void n.push(i.value)}return"readonly"in i&&(i.readonly?r["aria-readonly"]=!0:delete i.readonly),{tagElm:this.createTagElem(i,r),tagData:i,aggregatedInvalidInput:n}},postProcessNewTagNode:function(i,e){var t=this,n=this.settings,r=e.__isValid;r&&r===!0?this.value.push(e):(this.trigger("invalid",{data:e,index:this.value.length,tag:i,message:r}),n.keepInvalidTags||setTimeout(function(){return t.removeTags(i,!0)},1e3)),this.dropdown.position()},selectTag:function(i,e){var t=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(e.value)){this.state.actions.selectOption&&setTimeout(function(){return t.setRangeAtStartEnd(!1,t.DOM.input)});var n=this.getLastTag();return n?this.replaceTag(n,e):this.appendTag(i),this.value[0]=e,this.update(),this.trigger("add",{tag:i,data:e}),[i]}},addEmptyTag:function(i){var e=Oi({value:""},i||{}),t=this.createTagElem(e);Ut(t,e),this.appendTag(t),this.editTag(t,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(i,e,t){var n=this,r=[],s=this.settings,o=[],l=document.createDocumentFragment(),u=[];if(!i||i.length==0)return r;switch(i=this.normalizeTags(i),s.mode){case"mix":return this.addMixTags(i);case"select":e=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),i.forEach(function(f){var g=n.prepareNewTagNode(f,{skipInvalid:t||s.skipInvalid});if(g){var p=g.tagElm;if(f=g.tagData,o=g.aggregatedInvalidInput,r.push(p),s.mode=="select")return n.selectTag(p,f);l.appendChild(p),n.postProcessNewTagNode(p,f),u.push({tagElm:p,tagData:f})}}),this.appendTag(l),u.forEach(function(f){var g=f.tagElm,p=f.tagData;return n.trigger("add",{tag:g,index:n.getTagIdx(p),data:p})}),this.update(),i.length&&e&&(this.input.set.call(this,s.createInvalidTags?"":o.join(s._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),this.dropdown.refilter(),r},addMixTags:function(i){var e=this;if((i=this.normalizeTags(i))[0].prefix||this.state.tag)return this.prefixedTextToTag(i[0]);var t=document.createDocumentFragment();return i.forEach(function(n){var r=e.prepareNewTagNode(n);t.appendChild(r.tagElm),e.insertAfterTag(r.tagElm),e.postProcessNewTagNode(r.tagElm,r.tagData)}),this.appendMixTags(t),t.children},appendMixTags:function(i){var e=!!this.state.selection;e?this.injectAtCaret(i):(this.DOM.input.focus(),(e=this.setStateSelection()).range.setStart(this.DOM.input,e.range.endOffset),e.range.setEnd(this.DOM.input,e.range.endOffset),this.DOM.input.appendChild(i),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(i){var e,t,n,r=this,s=this.settings,o=(e=this.state.tag)===null||e===void 0?void 0:e.delimiters;if(i.prefix=i.prefix||this.state.tag?this.state.tag.prefix:(s.pattern.source||s.pattern)[0],n=this.prepareNewTagNode(i),t=n.tagElm,this.replaceTextWithNode(t)||this.DOM.input.appendChild(t),setTimeout(function(){return t.classList.add(r.settings.classNames.tagNoAnimation)},300),this.update(),!o){var l=this.insertAfterTag(t)||t;setTimeout(ba,0,l)}return this.state.tag=null,this.postProcessNewTagNode(t,n.tagData),t},appendTag:function(i){var e=this.DOM,t=e.input;e.scope.insertBefore(i,t)},createTagElem:function(i,e){i.__tagId=XB();var t,n=Oi({},i,oN({value:Ol(i.value+"")},e));return function(r){for(var s,o=document.createNodeIterator(r,NodeFilter.SHOW_TEXT,null,!1);s=o.nextNode();)s.textContent.trim()||s.parentNode.removeChild(s)}(t=this.parseTemplate("tag",[n,this])),Ut(t,i),t},reCheckInvalidTags:function(){var i=this,e=this.settings;this.getTagElms(e.classNames.tagNotAllowed).forEach(function(t,n){var r=Ut(t),s=i.hasMaxTags(),o=i.validateTag(r),l=o===!0&&!s;if(e.mode=="select"&&i.toggleScopeValidation(o),l)return r=r.__preInvalidData?r.__preInvalidData:{value:r.value},i.replaceTag(t,r);t.title=s||o})},removeTags:function(i,e,t){var n,r=this,s=this.settings;if(i=i&&wo(i,HTMLElement)?[i]:wo(i,Array)?i:i?[i]:[this.getLastTag()].filter(function(o){return o}),n=i.reduce(function(o,l){l&&typeof l=="string"&&(l=r.getTagElmByValue(l));var u=Ut(l);return l&&u&&!u.readonly&&o.push({node:l,idx:r.getTagIdx(u),data:Ut(l,{__removed:!0})}),o},[]),t=typeof t=="number"?t:this.CSSVars.tagHideTransition,s.mode=="select"&&(t=0,this.input.set.call(this)),n.length==1&&s.mode!="select"&&n[0].node.classList.contains(s.classNames.tagNotAllowed)&&(e=!0),n.length)return s.hooks.beforeRemoveTag(n,{tagify:this}).then(function(){var o=function(l){l.node.parentNode&&(l.node.parentNode.removeChild(l.node),e?s.keepInvalidTags&&this.trigger("remove",{tag:l.node,index:l.idx}):(this.trigger("remove",{tag:l.node,index:l.idx,data:l.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),s.keepInvalidTags&&this.reCheckInvalidTags()))};t&&t>10&&n.length==1?function(l){l.node.style.width=parseFloat(window.getComputedStyle(l.node).width)+"px",document.body.clientTop,l.node.classList.add(s.classNames.tagHide),setTimeout(o.bind(this),t,l)}.call(r,n[0]):n.forEach(o.bind(r)),e||(r.removeTagsFromValue(n.map(function(l){return l.node})),r.update(),s.mode=="select"&&s.userInput&&r.setContentEditable(!0))}).catch(function(o){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(i){return i.remove()})},removeTagsFromValue:function(i){var e=this;(i=Array.isArray(i)?i:[i]).forEach(function(t){var n=Ut(t),r=e.getTagIdx(n);r>-1&&e.value.splice(r,1)})},removeAllTags:function(i){var e=this;i=i||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){e.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(i)},postUpdate:function(){this.state.blockChangeEvent=!1;var i,e,t=this.settings,n=t.classNames,r=t.mode=="mix"?t.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(n.hasMaxTags,this.value.length>=t.maxTags),this.toggleClass(n.hasNoTags,!this.value.length),this.toggleClass(n.empty,!r),t.mode=="select"&&this.toggleScopeValidation((e=this.value)===null||e===void 0||(i=e[0])===null||i===void 0?void 0:i.__isValid)},setOriginalInputValue:function(i){var e=this.DOM.originalInput;this.settings.mixMode.integrated||(e.value=i,e.tagifyValue=e.value,this.setPersistedData(i,"value"))},update:function(i){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var e=this.getInputValue();this.setOriginalInputValue(e),this.settings.onChangeAfterBlur&&(i||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate()}.bind(this),100),this.events.bindOriginaInputListener.call(this,100)},getInputValue:function(){var i=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(i):i.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(i):JSON.stringify(i):""},getCleanValue:function(i){return KB(i||this.value,this.dataProps)},getMixedTagsAsString:function(){var i="",e=this,t=this.settings,n=t.originalInputValueFormat||JSON.stringify,r=t.mixTagsInterpolator;return function s(o){o.childNodes.forEach(function(l){if(l.nodeType==1){var u=Ut(l);if(l.tagName=="BR"&&(i+=`\r
`),u&&Ml.call(e,l)){if(u.__removed)return;i+=r[0]+n(Dx(u,e.dataProps))+r[1]}else l.getAttribute("style")||["B","I","U"].includes(l.tagName)?i+=l.textContent:l.tagName!="DIV"&&l.tagName!="P"||(i+=`\r
`,s(l))}else i+=l.textContent})}(this.DOM.input),i}},kf.prototype.removeTag=kf.prototype.removeTags;function aN(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function As(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aN(Object(t),!0).forEach(function(n){Rpe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):aN(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Ab(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ab=function(e){return typeof e}:Ab=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ab(i)}function Rpe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function yo(){return yo=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},yo.apply(this,arguments)}function Ope(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function Mpe(i,e){if(i==null)return{};var t=Ope(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,n)||(t[n]=i[n]))}return t}var Lpe="1.15.6";function _o(i){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(i)}var xo=_o(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Cf=_o(/Edge/i),lN=_o(/firefox/i),Tf=_o(/safari/i)&&!_o(/chrome/i)&&!_o(/android/i),Ux=_o(/iP(ad|od|hone)/i),cN=_o(/chrome/i)&&_o(/android/i),uN={capture:!1,passive:!1};function dt(i,e,t){i.addEventListener(e,t,!xo&&uN)}function ct(i,e,t){i.removeEventListener(e,t,!xo&&uN)}function Ib(i,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),i)try{if(i.matches)return i.matches(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function dN(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function Jr(i,e,t,n){if(i){t=t||document;do{if(e!=null&&(e[0]===">"?i.parentNode===t&&Ib(i,e):Ib(i,e))||n&&i===t)return i;if(i===t)break}while(i=dN(i))}return null}var hN=/\s+/g;function or(i,e,t){if(i&&e)if(i.classList)i.classList[t?"add":"remove"](e);else{var n=(" "+i.className+" ").replace(hN," ").replace(" "+e+" "," ");i.className=(n+(t?" "+e:"")).replace(hN," ")}}function Fe(i,e,t){var n=i&&i.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(t=i.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function ju(i,e){var t="";if(typeof i=="string")t=i;else do{var n=Fe(i,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(i=i.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(t)}function fN(i,e,t){if(i){var n=i.getElementsByTagName(e),r=0,s=n.length;if(t)for(;r<s;r++)t(n[r],r);return n}return[]}function Is(){var i=document.scrollingElement;return i||document.documentElement}function wi(i,e,t,n,r){if(!(!i.getBoundingClientRect&&i!==window)){var s,o,l,u,f,g,p;if(i!==window&&i.parentNode&&i!==Is()?(s=i.getBoundingClientRect(),o=s.top,l=s.left,u=s.bottom,f=s.right,g=s.height,p=s.width):(o=0,l=0,u=window.innerHeight,f=window.innerWidth,g=window.innerHeight,p=window.innerWidth),(e||t)&&i!==window&&(r=r||i.parentNode,!xo))do if(r&&r.getBoundingClientRect&&(Fe(r,"transform")!=="none"||t&&Fe(r,"position")!=="static")){var y=r.getBoundingClientRect();o-=y.top+parseInt(Fe(r,"border-top-width")),l-=y.left+parseInt(Fe(r,"border-left-width")),u=o+s.height,f=l+s.width;break}while(r=r.parentNode);if(n&&i!==window){var _=ju(r||i),C=_&&_.a,E=_&&_.d;_&&(o/=E,l/=C,p/=C,g/=E,u=o+g,f=l+p)}return{top:o,left:l,bottom:u,right:f,width:p,height:g}}}function mN(i,e,t){for(var n=va(i,!0),r=wi(i)[e];n;){var s=wi(n)[t],o=void 0;if(t==="top"||t==="left"?o=r>=s:o=r<=s,!o)return n;if(n===Is())break;n=va(n,!1)}return!1}function Hu(i,e,t,n){for(var r=0,s=0,o=i.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==je.ghost&&(n||o[s]!==je.dragged)&&Jr(o[s],t.draggable,i,!1)){if(r===e)return o[s];r++}s++}return null}function Wx(i,e){for(var t=i.lastElementChild;t&&(t===je.ghost||Fe(t,"display")==="none"||e&&!Ib(t,e));)t=t.previousElementSibling;return t||null}function Pr(i,e){var t=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==je.clone&&(!e||Ib(i,e))&&t++;return t}function gN(i){var e=0,t=0,n=Is();if(i)do{var r=ju(i),s=r.a,o=r.d;e+=i.scrollLeft*s,t+=i.scrollTop*o}while(i!==n&&(i=i.parentNode));return[e,t]}function Dpe(i,e){for(var t in i)if(!!i.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===i[t][n])return Number(t)}return-1}function va(i,e){if(!i||!i.getBoundingClientRect)return Is();var t=i,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var r=Fe(t);if(t.clientWidth<t.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Is();if(n||e)return t;n=!0}}while(t=t.parentNode);return Is()}function Vpe(i,e){if(i&&e)for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function qx(i,e){return Math.round(i.top)===Math.round(e.top)&&Math.round(i.left)===Math.round(e.left)&&Math.round(i.height)===Math.round(e.height)&&Math.round(i.width)===Math.round(e.width)}var Ef;function pN(i,e){return function(){if(!Ef){var t=arguments,n=this;t.length===1?i.call(n,t[0]):i.apply(n,t),Ef=setTimeout(function(){Ef=void 0},e)}}}function Bpe(){clearTimeout(Ef),Ef=void 0}function bN(i,e,t){i.scrollLeft+=e,i.scrollTop+=t}function vN(i){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(i).cloneNode(!0):t?t(i).clone(!0)[0]:i.cloneNode(!0)}function wN(i,e,t){var n={};return Array.from(i.children).forEach(function(r){var s,o,l,u;if(!(!Jr(r,e.draggable,i,!1)||r.animated||r===t)){var f=wi(r);n.left=Math.min((s=n.left)!==null&&s!==void 0?s:1/0,f.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,f.top),n.right=Math.max((l=n.right)!==null&&l!==void 0?l:-1/0,f.right),n.bottom=Math.max((u=n.bottom)!==null&&u!==void 0?u:-1/0,f.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var Un="Sortable"+new Date().getTime();function Npe(){var i=[],e;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Fe(r,"display")==="none"||r===je.ghost)){i.push({target:r,rect:wi(r)});var s=As({},i[i.length-1].rect);if(r.thisAnimationDuration){var o=ju(r,!0);o&&(s.top-=o.f,s.left-=o.e)}r.fromRect=s}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(Dpe(i,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,o=0;i.forEach(function(l){var u=0,f=l.target,g=f.fromRect,p=wi(f),y=f.prevFromRect,_=f.prevToRect,C=l.rect,E=ju(f,!0);E&&(p.top-=E.f,p.left-=E.e),f.toRect=p,f.thisAnimationDuration&&qx(y,p)&&!qx(g,p)&&(C.top-p.top)/(C.left-p.left)==(g.top-p.top)/(g.left-p.left)&&(u=jpe(C,y,_,r.options)),qx(p,g)||(f.prevFromRect=g,f.prevToRect=p,u||(u=r.options.animation),r.animate(f,C,p,u)),u&&(s=!0,o=Math.max(o,u),clearTimeout(f.animationResetTimer),f.animationResetTimer=setTimeout(function(){f.animationTime=0,f.prevFromRect=null,f.fromRect=null,f.prevToRect=null,f.thisAnimationDuration=null},u),f.thisAnimationDuration=u)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),i=[]},animate:function(n,r,s,o){if(o){Fe(n,"transition",""),Fe(n,"transform","");var l=ju(this.el),u=l&&l.a,f=l&&l.d,g=(r.left-s.left)/(u||1),p=(r.top-s.top)/(f||1);n.animatingX=!!g,n.animatingY=!!p,Fe(n,"transform","translate3d("+g+"px,"+p+"px,0)"),this.forRepaintDummy=Fpe(n),Fe(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Fe(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Fe(n,"transition",""),Fe(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function Fpe(i){return i.offsetWidth}function jpe(i,e,t,n){return Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var zu=[],$x={initializeByDefault:!0},Sf={mount:function(e){for(var t in $x)$x.hasOwnProperty(t)&&!(t in e)&&(e[t]=$x[t]);zu.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),zu.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var s=e+"Global";zu.forEach(function(o){!t[o.pluginName]||(t[o.pluginName][s]&&t[o.pluginName][s](As({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](As({sortable:t},n)))})},initializePlugins:function(e,t,n,r){zu.forEach(function(l){var u=l.pluginName;if(!(!e.options[u]&&!l.initializeByDefault)){var f=new l(e,t,e.options);f.sortable=e,f.options=e.options,e[u]=f,yo(n,f.defaults)}});for(var s in e.options)if(!!e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o!="undefined"&&(e.options[s]=o)}},getEventProperties:function(e,t){var n={};return zu.forEach(function(r){typeof r.eventProperties=="function"&&yo(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return zu.forEach(function(s){!e[s.pluginName]||s.optionListeners&&typeof s.optionListeners[t]=="function"&&(r=s.optionListeners[t].call(e[s.pluginName],n))}),r}};function Hpe(i){var e=i.sortable,t=i.rootEl,n=i.name,r=i.targetEl,s=i.cloneEl,o=i.toEl,l=i.fromEl,u=i.oldIndex,f=i.newIndex,g=i.oldDraggableIndex,p=i.newDraggableIndex,y=i.originalEvent,_=i.putSortable,C=i.extraEventProperties;if(e=e||t&&t[Un],!!e){var E,P=e.options,M="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!xo&&!Cf?E=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(n,!0,!0)),E.to=o||t,E.from=l||t,E.item=r||t,E.clone=s,E.oldIndex=u,E.newIndex=f,E.oldDraggableIndex=g,E.newDraggableIndex=p,E.originalEvent=y,E.pullMode=_?_.lastPutMode:void 0;var O=As(As({},C),Sf.getEventProperties(n,e));for(var N in O)E[N]=O[N];t&&t.dispatchEvent(E),P[M]&&P[M].call(e,E)}}var zpe=["evt"],Wn=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,s=Mpe(n,zpe);Sf.pluginEvent.bind(je)(e,t,As({dragEl:he,parentEl:oi,ghostEl:Ye,rootEl:Kt,nextEl:Dl,lastDownEl:Pb,cloneEl:Qt,cloneHidden:wa,dragStarted:If,putSortable:Gi,activeSortable:je.active,originalEvent:r,oldIndex:Uu,oldDraggableIndex:Af,newIndex:ar,newDraggableIndex:ya,hideGhostForTarget:EN,unhideGhostForTarget:SN,cloneNowHidden:function(){wa=!0},cloneNowShown:function(){wa=!1},dispatchSortableEvent:function(l){Sn({sortable:t,name:l,originalEvent:r})}},s))};function Sn(i){Hpe(As({putSortable:Gi,cloneEl:Qt,targetEl:he,rootEl:Kt,oldIndex:Uu,oldDraggableIndex:Af,newIndex:ar,newDraggableIndex:ya},i))}var he,oi,Ye,Kt,Dl,Pb,Qt,wa,Uu,ar,Af,ya,Rb,Gi,Wu=!1,Ob=!1,Mb=[],Vl,Xr,Gx,Kx,yN,_N,If,qu,Pf,Rf=!1,Lb=!1,Db,an,Yx=[],Zx=!1,Vb=[],Bb=typeof document!="undefined",Nb=Ux,xN=Cf||xo?"cssFloat":"float",Upe=Bb&&!cN&&!Ux&&"draggable"in document.createElement("div"),kN=function(){if(!!Bb){if(xo)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),CN=function(e,t){var n=Fe(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=Hu(e,0,t),o=Hu(e,1,t),l=s&&Fe(s),u=o&&Fe(o),f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+wi(s).width,g=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+wi(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&l.float&&l.float!=="none"){var p=l.float==="left"?"left":"right";return o&&(u.clear==="both"||u.clear===p)?"vertical":"horizontal"}return s&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||f>=r&&n[xN]==="none"||o&&n[xN]==="none"&&f+g>r)?"vertical":"horizontal"},Wpe=function(e,t,n){var r=n?e.left:e.top,s=n?e.right:e.bottom,o=n?e.width:e.height,l=n?t.left:t.top,u=n?t.right:t.bottom,f=n?t.width:t.height;return r===l||s===u||r+o/2===l+f/2},qpe=function(e,t){var n;return Mb.some(function(r){var s=r[Un].options.emptyInsertThreshold;if(!(!s||Wx(r))){var o=wi(r),l=e>=o.left-s&&e<=o.right+s,u=t>=o.top-s&&t<=o.bottom+s;if(l&&u)return n=r}}),n},TN=function(e){function t(s,o){return function(l,u,f,g){var p=l.options.group.name&&u.options.group.name&&l.options.group.name===u.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(l,u,f,g),o)(l,u,f,g);var y=(o?l:u).options.group.name;return s===!0||typeof s=="string"&&s===y||s.join&&s.indexOf(y)>-1}}var n={},r=e.group;(!r||Ab(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},EN=function(){!kN&&Ye&&Fe(Ye,"display","none")},SN=function(){!kN&&Ye&&Fe(Ye,"display","")};Bb&&!cN&&document.addEventListener("click",function(i){if(Ob)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),Ob=!1,!1},!0);var Bl=function(e){if(he){e=e.touches?e.touches[0]:e;var t=qpe(e.clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Un]._onDragOver(n)}}},$pe=function(e){he&&he.parentNode[Un]._isOutsideThisEl(e.target)};function je(i,e){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=e=yo({},e),i[Un]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return CN(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,l){o.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:je.supportPointer!==!1&&"PointerEvent"in window&&(!Tf||Ux),emptyInsertThreshold:5};Sf.initializePlugins(this,i,t);for(var n in t)!(n in e)&&(e[n]=t[n]);TN(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:Upe,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?dt(i,"pointerdown",this._onTapStart):(dt(i,"mousedown",this._onTapStart),dt(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(dt(i,"dragover",this),dt(i,"dragenter",this)),Mb.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),yo(this,Npe())}je.prototype={constructor:je,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(qu=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,he):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var t=this,n=this.el,r=this.options,s=r.preventOnFilter,o=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(l||e).target,f=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,g=r.filter;if(ebe(n),!he&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||r.disabled)&&!f.isContentEditable&&!(!this.nativeDraggable&&Tf&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=Jr(u,r.draggable,n,!1),!(u&&u.animated)&&Pb!==u)){if(Uu=Pr(u),Af=Pr(u,r.draggable),typeof g=="function"){if(g.call(this,e,u,this)){Sn({sortable:t,rootEl:f,name:"filter",targetEl:u,toEl:n,fromEl:n}),Wn("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(p){if(p=Jr(f,p.trim(),n,!1),p)return Sn({sortable:t,rootEl:p,name:"filter",targetEl:u,fromEl:n,toEl:n}),Wn("filter",t,{evt:e}),!0}),g)){s&&e.preventDefault();return}r.handle&&!Jr(f,r.handle,n,!1)||this._prepareDragStart(e,l,u)}}},_prepareDragStart:function(e,t,n){var r=this,s=r.el,o=r.options,l=s.ownerDocument,u;if(n&&!he&&n.parentNode===s){var f=wi(n);if(Kt=s,he=n,oi=he.parentNode,Dl=he.nextSibling,Pb=n,Rb=o.group,je.dragged=he,Vl={target:he,clientX:(t||e).clientX,clientY:(t||e).clientY},yN=Vl.clientX-f.left,_N=Vl.clientY-f.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,he.style["will-change"]="all",u=function(){if(Wn("delayEnded",r,{evt:e}),je.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!lN&&r.nativeDraggable&&(he.draggable=!0),r._triggerDragStart(e,t),Sn({sortable:r,name:"choose",originalEvent:e}),or(he,o.chosenClass,!0)},o.ignore.split(",").forEach(function(g){fN(he,g.trim(),Jx)}),dt(l,"dragover",Bl),dt(l,"mousemove",Bl),dt(l,"touchmove",Bl),o.supportPointer?(dt(l,"pointerup",r._onDrop),!this.nativeDraggable&&dt(l,"pointercancel",r._onDrop)):(dt(l,"mouseup",r._onDrop),dt(l,"touchend",r._onDrop),dt(l,"touchcancel",r._onDrop)),lN&&this.nativeDraggable&&(this.options.touchStartThreshold=4,he.draggable=!0),Wn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Cf||xo))){if(je.eventCanceled){this._onDrop();return}o.supportPointer?(dt(l,"pointerup",r._disableDelayedDrag),dt(l,"pointercancel",r._disableDelayedDrag)):(dt(l,"mouseup",r._disableDelayedDrag),dt(l,"touchend",r._disableDelayedDrag),dt(l,"touchcancel",r._disableDelayedDrag)),dt(l,"mousemove",r._delayedDragTouchMoveHandler),dt(l,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&dt(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(u,o.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){he&&Jx(he),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ct(e,"mouseup",this._disableDelayedDrag),ct(e,"touchend",this._disableDelayedDrag),ct(e,"touchcancel",this._disableDelayedDrag),ct(e,"pointerup",this._disableDelayedDrag),ct(e,"pointercancel",this._disableDelayedDrag),ct(e,"mousemove",this._delayedDragTouchMoveHandler),ct(e,"touchmove",this._delayedDragTouchMoveHandler),ct(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?dt(document,"pointermove",this._onTouchMove):t?dt(document,"touchmove",this._onTouchMove):dt(document,"mousemove",this._onTouchMove):(dt(he,"dragend",this),dt(Kt,"dragstart",this._onDragStart));try{document.selection?jb(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(Wu=!1,Kt&&he){Wn("dragStarted",this,{evt:t}),this.nativeDraggable&&dt(document,"dragover",$pe);var n=this.options;!e&&or(he,n.dragClass,!1),or(he,n.ghostClass,!0),je.active=this,e&&this._appendGhost(),Sn({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Xr){this._lastX=Xr.clientX,this._lastY=Xr.clientY,EN();for(var e=document.elementFromPoint(Xr.clientX,Xr.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Xr.clientX,Xr.clientY),e!==t);)t=e;if(he.parentNode[Un]._isOutsideThisEl(e),t)do{if(t[Un]){var n=void 0;if(n=t[Un]._onDragOver({clientX:Xr.clientX,clientY:Xr.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=dN(t));SN()}},_onTouchMove:function(e){if(Vl){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=Ye&&ju(Ye,!0),l=Ye&&o&&o.a,u=Ye&&o&&o.d,f=Nb&&an&&gN(an),g=(s.clientX-Vl.clientX+r.x)/(l||1)+(f?f[0]-Yx[0]:0)/(l||1),p=(s.clientY-Vl.clientY+r.y)/(u||1)+(f?f[1]-Yx[1]:0)/(u||1);if(!je.active&&!Wu){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Ye){o?(o.e+=g-(Gx||0),o.f+=p-(Kx||0)):o={a:1,b:0,c:0,d:1,e:g,f:p};var y="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Fe(Ye,"webkitTransform",y),Fe(Ye,"mozTransform",y),Fe(Ye,"msTransform",y),Fe(Ye,"transform",y),Gx=g,Kx=p,Xr=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ye){var e=this.options.fallbackOnBody?document.body:Kt,t=wi(he,!0,Nb,!0,e),n=this.options;if(Nb){for(an=e;Fe(an,"position")==="static"&&Fe(an,"transform")==="none"&&an!==document;)an=an.parentNode;an!==document.body&&an!==document.documentElement?(an===document&&(an=Is()),t.top+=an.scrollTop,t.left+=an.scrollLeft):an=Is(),Yx=gN(an)}Ye=he.cloneNode(!0),or(Ye,n.ghostClass,!1),or(Ye,n.fallbackClass,!0),or(Ye,n.dragClass,!0),Fe(Ye,"transition",""),Fe(Ye,"transform",""),Fe(Ye,"box-sizing","border-box"),Fe(Ye,"margin",0),Fe(Ye,"top",t.top),Fe(Ye,"left",t.left),Fe(Ye,"width",t.width),Fe(Ye,"height",t.height),Fe(Ye,"opacity","0.8"),Fe(Ye,"position",Nb?"absolute":"fixed"),Fe(Ye,"zIndex","100000"),Fe(Ye,"pointerEvents","none"),je.ghost=Ye,e.appendChild(Ye),Fe(Ye,"transform-origin",yN/parseInt(Ye.style.width)*100+"% "+_N/parseInt(Ye.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,s=n.options;if(Wn("dragStart",this,{evt:e}),je.eventCanceled){this._onDrop();return}Wn("setupClone",this),je.eventCanceled||(Qt=vN(he),Qt.removeAttribute("id"),Qt.draggable=!1,Qt.style["will-change"]="",this._hideClone(),or(Qt,this.options.chosenClass,!1),je.clone=Qt),n.cloneId=jb(function(){Wn("clone",n),!je.eventCanceled&&(n.options.removeCloneOnHide||Kt.insertBefore(Qt,he),n._hideClone(),Sn({sortable:n,name:"clone"}))}),!t&&or(he,s.dragClass,!0),t?(Ob=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ct(document,"mouseup",n._onDrop),ct(document,"touchend",n._onDrop),ct(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(n,r,he)),dt(document,"drop",n),Fe(he,"transform","translateZ(0)")),Wu=!0,n._dragStartId=jb(n._dragStarted.bind(n,t,e)),dt(document,"selectstart",n),If=!0,window.getSelection().removeAllRanges(),Tf&&Fe(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,r,s,o,l=this.options,u=l.group,f=je.active,g=Rb===u,p=l.sort,y=Gi||f,_,C=this,E=!1;if(Zx)return;function P(ke,V){Wn(ke,C,As({evt:e,isOwner:g,axis:_?"vertical":"horizontal",revert:o,dragRect:r,targetRect:s,canSort:p,fromSortable:y,target:n,completed:O,onMove:function($,se){return Fb(Kt,t,he,r,$,wi($),e,se)},changed:N},V))}function M(){P("dragOverAnimationCapture"),C.captureAnimationState(),C!==y&&y.captureAnimationState()}function O(ke){return P("dragOverCompleted",{insertion:ke}),ke&&(g?f._hideClone():f._showClone(C),C!==y&&(or(he,Gi?Gi.options.ghostClass:f.options.ghostClass,!1),or(he,l.ghostClass,!0)),Gi!==C&&C!==je.active?Gi=C:C===je.active&&Gi&&(Gi=null),y===C&&(C._ignoreWhileAnimating=n),C.animateAll(function(){P("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(n===he&&!he.animated||n===t&&!n.animated)&&(qu=null),!l.dragoverBubble&&!e.rootEl&&n!==document&&(he.parentNode[Un]._isOutsideThisEl(e.target),!ke&&Bl(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function N(){ar=Pr(he),ya=Pr(he,l.draggable),Sn({sortable:C,name:"change",toEl:t,newIndex:ar,newDraggableIndex:ya,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Jr(n,l.draggable,t,!0),P("dragOver"),je.eventCanceled)return E;if(he.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||C._ignoreWhileAnimating===n)return O(!1);if(Ob=!1,f&&!l.disabled&&(g?p||(o=oi!==Kt):Gi===this||(this.lastPutMode=Rb.checkPull(this,f,he,e))&&u.checkPut(this,f,he,e))){if(_=this._getDirection(e,n)==="vertical",r=wi(he),P("dragOverValid"),je.eventCanceled)return E;if(o)return oi=Kt,M(),this._hideClone(),P("revert"),je.eventCanceled||(Dl?Kt.insertBefore(he,Dl):Kt.appendChild(he)),O(!0);var W=Wx(t,l.draggable);if(!W||Zpe(e,_,this)&&!W.animated){if(W===he)return O(!1);if(W&&t===e.target&&(n=W),n&&(s=wi(n)),Fb(Kt,t,he,r,n,s,e,!!n)!==!1)return M(),W&&W.nextSibling?t.insertBefore(he,W.nextSibling):t.appendChild(he),oi=t,N(),O(!0)}else if(W&&Ype(e,_,this)){var Z=Hu(t,0,l,!0);if(Z===he)return O(!1);if(n=Z,s=wi(n),Fb(Kt,t,he,r,n,s,e,!1)!==!1)return M(),t.insertBefore(he,Z),oi=t,N(),O(!0)}else if(n.parentNode===t){s=wi(n);var U=0,ie,X=he.parentNode!==t,F=!Wpe(he.animated&&he.toRect||r,n.animated&&n.toRect||s,_),te=_?"top":"left",ye=mN(n,"top","top")||mN(he,"top","top"),Ee=ye?ye.scrollTop:void 0;qu!==n&&(ie=s[te],Rf=!1,Lb=!F&&l.invertSwap||X),U=Jpe(e,n,s,_,F?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,Lb,qu===n);var ae;if(U!==0){var bt=Pr(he);do bt-=U,ae=oi.children[bt];while(ae&&(Fe(ae,"display")==="none"||ae===Ye))}if(U===0||ae===n)return O(!1);qu=n,Pf=U;var et=n.nextElementSibling,Je=!1;Je=U===1;var fe=Fb(Kt,t,he,r,n,s,e,Je);if(fe!==!1)return(fe===1||fe===-1)&&(Je=fe===1),Zx=!0,setTimeout(Kpe,30),M(),Je&&!et?t.appendChild(he):n.parentNode.insertBefore(he,Je?et:n),ye&&bN(ye,0,Ee-ye.scrollTop),oi=he.parentNode,ie!==void 0&&!Lb&&(Db=Math.abs(ie-wi(n)[te])),N(),O(!0)}if(t.contains(he))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ct(document,"mousemove",this._onTouchMove),ct(document,"touchmove",this._onTouchMove),ct(document,"pointermove",this._onTouchMove),ct(document,"dragover",Bl),ct(document,"mousemove",Bl),ct(document,"touchmove",Bl)},_offUpEvents:function(){var e=this.el.ownerDocument;ct(e,"mouseup",this._onDrop),ct(e,"touchend",this._onDrop),ct(e,"pointerup",this._onDrop),ct(e,"pointercancel",this._onDrop),ct(e,"touchcancel",this._onDrop),ct(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(ar=Pr(he),ya=Pr(he,n.draggable),Wn("drop",this,{evt:e}),oi=he&&he.parentNode,ar=Pr(he),ya=Pr(he,n.draggable),je.eventCanceled){this._nulling();return}Wu=!1,Lb=!1,Rf=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Xx(this.cloneId),Xx(this._dragStartId),this.nativeDraggable&&(ct(document,"drop",this),ct(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Tf&&Fe(document.body,"user-select",""),Fe(he,"transform",""),e&&(If&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Ye&&Ye.parentNode&&Ye.parentNode.removeChild(Ye),(Kt===oi||Gi&&Gi.lastPutMode!=="clone")&&Qt&&Qt.parentNode&&Qt.parentNode.removeChild(Qt),he&&(this.nativeDraggable&&ct(he,"dragend",this),Jx(he),he.style["will-change"]="",If&&!Wu&&or(he,Gi?Gi.options.ghostClass:this.options.ghostClass,!1),or(he,this.options.chosenClass,!1),Sn({sortable:this,name:"unchoose",toEl:oi,newIndex:null,newDraggableIndex:null,originalEvent:e}),Kt!==oi?(ar>=0&&(Sn({rootEl:oi,name:"add",toEl:oi,fromEl:Kt,originalEvent:e}),Sn({sortable:this,name:"remove",toEl:oi,originalEvent:e}),Sn({rootEl:oi,name:"sort",toEl:oi,fromEl:Kt,originalEvent:e}),Sn({sortable:this,name:"sort",toEl:oi,originalEvent:e})),Gi&&Gi.save()):ar!==Uu&&ar>=0&&(Sn({sortable:this,name:"update",toEl:oi,originalEvent:e}),Sn({sortable:this,name:"sort",toEl:oi,originalEvent:e})),je.active&&((ar==null||ar===-1)&&(ar=Uu,ya=Af),Sn({sortable:this,name:"end",toEl:oi,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Wn("nulling",this),Kt=he=oi=Ye=Dl=Qt=Pb=wa=Vl=Xr=If=ar=ya=Uu=Af=qu=Pf=Gi=Rb=je.dragged=je.ghost=je.clone=je.active=null,Vb.forEach(function(e){e.checked=!0}),Vb.length=Gx=Kx=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":he&&(this._onDragOver(e),Gpe(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,r=0,s=n.length,o=this.options;r<s;r++)t=n[r],Jr(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Qpe(t));return e},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(s,o){var l=r.children[o];Jr(l,this.options.draggable,r,!1)&&(n[s]=l)},this),t&&this.captureAnimationState(),e.forEach(function(s){n[s]&&(r.removeChild(n[s]),r.appendChild(n[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Jr(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var r=Sf.modifyOption(this,e,t);typeof r!="undefined"?n[e]=r:n[e]=t,e==="group"&&TN(n)},destroy:function(){Wn("destroy",this);var e=this.el;e[Un]=null,ct(e,"mousedown",this._onTapStart),ct(e,"touchstart",this._onTapStart),ct(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ct(e,"dragover",this),ct(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Mb.splice(Mb.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!wa){if(Wn("hideClone",this),je.eventCanceled)return;Fe(Qt,"display","none"),this.options.removeCloneOnHide&&Qt.parentNode&&Qt.parentNode.removeChild(Qt),wa=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(wa){if(Wn("showClone",this),je.eventCanceled)return;he.parentNode==Kt&&!this.options.group.revertClone?Kt.insertBefore(Qt,he):Dl?Kt.insertBefore(Qt,Dl):Kt.appendChild(Qt),this.options.group.revertClone&&this.animate(he,Qt),Fe(Qt,"display",""),wa=!1}}};function Gpe(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function Fb(i,e,t,n,r,s,o,l){var u,f=i[Un],g=f.options.onMove,p;return window.CustomEvent&&!xo&&!Cf?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=i,u.dragged=t,u.draggedRect=n,u.related=r||e,u.relatedRect=s||wi(e),u.willInsertAfter=l,u.originalEvent=o,i.dispatchEvent(u),g&&(p=g.call(f,u,o)),p}function Jx(i){i.draggable=!1}function Kpe(){Zx=!1}function Ype(i,e,t){var n=wi(Hu(t.el,0,t.options,!0)),r=wN(t.el,t.options,Ye),s=10;return e?i.clientX<r.left-s||i.clientY<n.top&&i.clientX<n.right:i.clientY<r.top-s||i.clientY<n.bottom&&i.clientX<n.left}function Zpe(i,e,t){var n=wi(Wx(t.el,t.options.draggable)),r=wN(t.el,t.options,Ye),s=10;return e?i.clientX>r.right+s||i.clientY>n.bottom&&i.clientX>n.left:i.clientY>r.bottom+s||i.clientX>n.right&&i.clientY>n.top}function Jpe(i,e,t,n,r,s,o,l){var u=n?i.clientY:i.clientX,f=n?t.height:t.width,g=n?t.top:t.left,p=n?t.bottom:t.right,y=!1;if(!o){if(l&&Db<f*r){if(!Rf&&(Pf===1?u>g+f*s/2:u<p-f*s/2)&&(Rf=!0),Rf)y=!0;else if(Pf===1?u<g+Db:u>p-Db)return-Pf}else if(u>g+f*(1-r)/2&&u<p-f*(1-r)/2)return Xpe(e)}return y=y||o,y&&(u<g+f*s/2||u>p-f*s/2)?u>g+f/2?1:-1:0}function Xpe(i){return Pr(he)<Pr(i)?1:-1}function Qpe(i){for(var e=i.tagName+i.className+i.src+i.href+i.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function ebe(i){Vb.length=0;for(var e=i.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&Vb.push(n)}}function jb(i){return setTimeout(i,0)}function Xx(i){return clearTimeout(i)}Bb&&dt(document,"touchmove",function(i){(je.active||Wu)&&i.cancelable&&i.preventDefault()});je.utils={on:dt,off:ct,css:Fe,find:fN,is:function(e,t){return!!Jr(e,t,e,!1)},extend:Vpe,throttle:pN,closest:Jr,toggleClass:or,clone:vN,index:Pr,nextTick:jb,cancelNextTick:Xx,detectDirection:CN,getChild:Hu,expando:Un};je.get=function(i){return i[Un]};je.mount=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(je.utils=As(As({},je.utils),n.utils)),Sf.mount(n)})};je.create=function(i,e){return new je(i,e)};je.version=Lpe;var yi=[],Of,Qx,ek=!1,tk,ik,Hb,Mf;function tbe(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return i.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?dt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?dt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?dt(document,"touchmove",this._handleFallbackAutoScroll):dt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?ct(document,"dragover",this._handleAutoScroll):(ct(document,"pointermove",this._handleFallbackAutoScroll),ct(document,"touchmove",this._handleFallbackAutoScroll),ct(document,"mousemove",this._handleFallbackAutoScroll)),AN(),zb(),Bpe()},nulling:function(){Hb=Qx=Of=ek=Mf=tk=ik=null,yi.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var r=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(s,o);if(Hb=t,n||this.options.forceAutoScrollFallback||Cf||xo||Tf){nk(t,this.options,l,n);var u=va(l,!0);ek&&(!Mf||s!==tk||o!==ik)&&(Mf&&AN(),Mf=setInterval(function(){var f=va(document.elementFromPoint(s,o),!0);f!==u&&(u=f,zb()),nk(t,r.options,f,n)},10),tk=s,ik=o)}else{if(!this.options.bubbleScroll||va(l,!0)===Is()){zb();return}nk(t,this.options,va(l,!1),!1)}}},yo(i,{pluginName:"scroll",initializeByDefault:!0})}function zb(){yi.forEach(function(i){clearInterval(i.pid)}),yi=[]}function AN(){clearInterval(Mf)}var nk=pN(function(i,e,t,n){if(!!e.scroll){var r=(i.touches?i.touches[0]:i).clientX,s=(i.touches?i.touches[0]:i).clientY,o=e.scrollSensitivity,l=e.scrollSpeed,u=Is(),f=!1,g;Qx!==t&&(Qx=t,zb(),Of=e.scroll,g=e.scrollFn,Of===!0&&(Of=va(t,!0)));var p=0,y=Of;do{var _=y,C=wi(_),E=C.top,P=C.bottom,M=C.left,O=C.right,N=C.width,W=C.height,Z=void 0,U=void 0,ie=_.scrollWidth,X=_.scrollHeight,F=Fe(_),te=_.scrollLeft,ye=_.scrollTop;_===u?(Z=N<ie&&(F.overflowX==="auto"||F.overflowX==="scroll"||F.overflowX==="visible"),U=W<X&&(F.overflowY==="auto"||F.overflowY==="scroll"||F.overflowY==="visible")):(Z=N<ie&&(F.overflowX==="auto"||F.overflowX==="scroll"),U=W<X&&(F.overflowY==="auto"||F.overflowY==="scroll"));var Ee=Z&&(Math.abs(O-r)<=o&&te+N<ie)-(Math.abs(M-r)<=o&&!!te),ae=U&&(Math.abs(P-s)<=o&&ye+W<X)-(Math.abs(E-s)<=o&&!!ye);if(!yi[p])for(var bt=0;bt<=p;bt++)yi[bt]||(yi[bt]={});(yi[p].vx!=Ee||yi[p].vy!=ae||yi[p].el!==_)&&(yi[p].el=_,yi[p].vx=Ee,yi[p].vy=ae,clearInterval(yi[p].pid),(Ee!=0||ae!=0)&&(f=!0,yi[p].pid=setInterval(function(){n&&this.layer===0&&je.active._onTouchMove(Hb);var et=yi[this.layer].vy?yi[this.layer].vy*l:0,Je=yi[this.layer].vx?yi[this.layer].vx*l:0;typeof g=="function"&&g.call(je.dragged.parentNode[Un],Je,et,i,Hb,yi[this.layer].el)!=="continue"||bN(yi[this.layer].el,Je,et)}.bind({layer:p}),24))),p++}while(e.bubbleScroll&&y!==u&&(y=va(y,!1)));ek=f}},30),IN=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,l=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(!!t){var f=n||s;l();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,p=document.elementFromPoint(g.clientX,g.clientY);u(),f&&!f.el.contains(p)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function rk(){}rk.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Hu(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:IN};yo(rk,{pluginName:"revertOnSpill"});function sk(){}sk.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,r=n||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:IN};yo(sk,{pluginName:"removeOnSpill"});je.mount(new tbe);je.mount(sk,rk);var PN=je;GR(".date-time-picker",{enableTime:!0});function ibe(i){let e=i.editing.view.domConverter.unsafeElements,t=e.indexOf("style");t>-1&&e.splice(t,1)}var nbe=document.querySelector("meta[name='csrf-token']").getAttribute("content"),rbe=new HR("/live",rR,{params:{_csrf_token:nbe},dom:{onBeforeElUpdated(i,e){i._x_dataStack&&window.Alpine.clone(i,e)}},hooks:{Tagify:{mounted(){this.tagify=new kf(this.el,{whitelist:JSON.parse(this.el.dataset.suggestions),id:`${this.el.id}_${Date.now()}`,originalInputValueFormat:i=>i.map(e=>e.value)}),this.tagify.clearPersistedData()}},LoadEditor:{mounted(){K_.create(this.el,{editorClass:"prose max-w-full",toolbar:{items:["undo","redo","|","heading","|","bold","italic","|","link","|","bulletedList","numberedList","|","sourceEditing"],shouldNotGroupWhenFull:!0},plugins:[J_,Du,Q_,j_,z_,lx,wx,El,ibe,Rx,nx],htmlSupport:{allow:[{name:/.*/,attributes:!0,classes:!0,styles:!0}]},initialData:this.el.value,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},placeholder:"Type or paste your content here!"}).then(i=>{let e=i.plugins.get("SourceEditing");e.on("change:isSourceEditingMode",(t,n,r)=>{if(r){let s=i.editing.view.getDomRoot().nextSibling.firstChild;if(!s)throw new Error("This should not be possible");s.addEventListener("input",()=>{e.updateEditorData()})}}),i.model.document.on("change",()=>{this.el.value=i.getData()})}).catch(i=>{console.error(i.stack)})},reconnected(){},updated(){this.mounted()}},SortableInputsFor:{mounted(){let i=this.el.dataset.group;new PN(this.el,{group:i?{name:i,pull:!0,put:!0}:void 0,animation:150,dragClass:"drag-item",ghostClass:"drag-ghost",handle:"[data-handle]",forceFallback:!0,onEnd:()=>{this.el.closest("form").querySelector("input").dispatchEvent(new Event("input",{bubbles:!0}))}})}},RichTextUnsafe:{mounted(){this.editorConfig={height:"25vh",allowedContent:!0},this.editor=CKEDITOR.replace(this.el,this.editorConfig),this.editor.on("change",()=>this.editor.updateElement()),window.tmpEditor=this.editor},beforeUpdate(){this.editor.removeAllListeners(),this.editorData=this.editor.getData(),this.editor.destroy()},updated(){this.editor=CKEDITOR.replace(this.el,this.editorConfig),this.editor.setData(this.editorData),this.editor.on("change",()=>this.editor.updateElement())}},TeamTabListener:{mounted(){window.addEventListener("team_tab_changed",this.onTabChange.bind(this))},onTabChange(i){this.pushEvent("team_tab_changed",i.detail)}},RelativeTime:{mounted(){this.interval=setInterval(()=>{this.el.innerText=(0,ak.formatTimeAgo)(new Date(this.el.dataset.time))},1e3)},updated(){clearInterval(this.interval),this.interval=setInterval(()=>{this.el.innerText=(0,ak.formatTimeAgo)(new Date(this.el.dataset.time))},1e3)}}}});rbe.connect();document.addEventListener("click",i=>{if(i.target.matches(".add-form-field")){let{dataset:e}=i.target,t=document.getElementById(e.container),n=Date.now(),{template:r}=e;t.insertAdjacentHTML("beforeend",r.replace(/__name__/g,n)),t.dataset.index=parseInt(n)+1}else if(i.target.matches(".remove-form-field")){let e=document.getElementById(i.target.dataset.id);e.parentNode.removeChild(e)}});window.addEventListener("copy-to-clipboard",i=>{let e=i.target,t=e.value;t&&navigator.clipboard.writeText(t).then(()=>{let n=document.getElementById(`${e.id}-clipboard-icon`),r=document.getElementById(`${e.id}-check-icon`);n&&r&&(n.classList.add("hidden"),r.classList.remove("hidden"),setTimeout(()=>{n.classList.remove("hidden"),r.classList.add("hidden")},2500))}).catch(n=>{console.error("Failed to copy: ",n)})});window.feather=ok.default;(()=>{ok.default.replace(),window.location.search&&window.location.search.includes("embed")&&document.body.classList.add("embed"),document.getElementById("code")&&RN.default.fromTextArea(document.getElementById("code"),{mode:"css",lineNumbers:!0})})();})();
/* istanbul ignore else -- @preserve */
/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */
/* istanbul ignore if -- @preserve */
/* istanbul ignore next -- @preserve */
/* istanbul ignore next: paranoid check -- @preserve */
/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
/**
 * @license
 * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
